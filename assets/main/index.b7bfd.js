window.__require=function e(t,i,o){function n(s,r){if(!i[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!r&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return n(t[s][1][e]||e)},h,h.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({AvatarManager:[function(e,t){"use strict";cc._RF.push(t,"796d90dyX5IVKnFudf8P1Rc","AvatarManager"),t.exports=cc.Class({ctor:function(){this.avata_map=new Map},getHeadURL:function(e){return e},requestHeadRes:function(e,t,i,o,n){void 0===n&&(n=!0);var a=i,s=t,r=this.avata_map,c=function(){var e;e=0==s?"GameCommon/common/img_avata_banker":"GameCommon/common/img_avata_null";var t=window.BundleName;cc.assetManager.loadBundle(t,function(t,i){i.load(e,cc.SpriteFrame,function(e,t){e?console.log(e):(0!=s&&r.set(s,t),a(t))})})};e=this.getHeadURL(e);var u=r.get(t),h=function(e,t){cc.loader.load({url:e,type:"png"},function(e,i){if(e)console.log(e),n&&c();else{var o=new cc.SpriteFrame(i);0!=t&&r.set(s,o),a(o)}})};if(!u||u&&t!=UserInfoManager.getMyInfo().userID){if("aa"==e&&0!=t)return void UserInfoManager.requestUserInfo(t,function(e){h(e.headURL,t)});if((!e||"aa"==e)&&0==t){var l=window.BundleName;return void cc.assetManager.loadBundle(l,function(e,i){i.load("GameCommon/common/img_avata_banker",cc.SpriteFrame,function(e,i){e?console.log(e,"\u7a7a\u5934\u50cf\u94fe\u63a5errerrerrerrerr"):(0==t&&r.set(s,i),a(i))})})}h(e,t)}else a(u)},getAvataMap:function(){return this.avata_map},getUrlWeb:function(e){if("aa"!=e&&""!=e){var t=e.split("//"),i=t[1].indexOf("/");return t[1].substring(0,i)}},GetUrlRelativePath:function(e){if("aa"!=e&&""!=e){var t=e.split("//"),i=t[1].indexOf("/"),o=t[1].substring(i);return-1!=o.indexOf("?")&&(o=o.split("?")[0]),o}}}),cc._RF.pop()},{}],BaseLayer:[function(e,t){"use strict";cc._RF.push(t,"e5d4dRJXxdFrZ1BK1+Aavq8","BaseLayer"),cc.Class({extends:cc.Component,properties:{isCanEndGame:!1},ctor:function(){},onLoad:function(e){e&&this.addTouchBeganListener(),this.playBackgroundMusic&&this.playBackgroundMusic()},addTouchBeganListener:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.touchEventCallback(),this.onTouchBegan(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.touchEventCallback(),this.onTouchEnded(e)},this)},onTouchBegan:function(){},onTouchEnded:function(){},touchEventCallback:function(){},controllPrefab:function(e,t,i,o){if(e instanceof cc.Prefab){removeLoading();var n=cc.instantiate(e),a=n.getComponent("BaseLayer")||n.getComponent(cc.Component);null!=a&&a.init&&a.init.apply(a,t),i&&n?i.addChild(n):(n.zIndex=G_ALL_RESULT_ZORDER_TAG,this.node.addChild(n)),n.active=!0,o&&o(n)}else console.log(" \u4f60\u8f7d\u5165\u7684\u4e0d\u662f\u9884\u5236\u8d44\u6e90 ")},simpleAddLayer:function(e){for(var t=this,i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);createLoading("\u6b63\u5728\u52a0\u8f7d\u4e2d",8,!1);var n=window.prefabMap.get(e);if(n)this.controllPrefab(n,i);else{var a=window.BundleName;cc.assetManager.loadBundle(a,function(o,n){n.load(e,function(t,o){t?console.log("\u8f7d\u5165\u9884\u5236\u8d44\u6e90\u5931\u8d25\uff0c \u539f\u56e0:"+t):(window.prefabMap.set(e,o),this.controllPrefab(o,i))}.bind(t))})}},addLayer:function(e,t,i){var o=this;null==e&&(e=this.node);for(var n=[],a=3;a<arguments.length;a++)n.push(arguments[a]);if(t instanceof cc.Prefab){var s=(r=cc.instantiate(t)).getComponent("BaseLayer")||r.getComponent(cc.Component);return null!=s&&s.init&&s.init.apply(s,n),e.addChild(r),void(i&&i(r))}t="prefab/"+t;var r=null,c=window.prefabMap.get(t);if(c)this.controllPrefab(c,n,e,i);else{var u=window.BundleName;cc.assetManager.loadBundle(u,function(a,s){s.load(t,function(o,a){o?console.log("\u8f7d\u5165\u9884\u5236\u8d44\u6e90\u5931\u8d25\uff0c \u539f\u56e0:"+o):(window.prefabMap.set(t,a),this.controllPrefab(a,n,e,i))}.bind(o))})}},isLobbyScene:function(){var e=cc.director.getScene().getChildByName("Canvas").getChildByName("Hall_Node"),t=null;return e&&(t=e.getComponent("LobbyScene")),null!=t},onResize:function(e){cc.visibleRect,180!=cc.find("Canvas").angle&&90!=window.orientation&&-90!=window.orientation&&cc.sys.isMobile?(cc.find("Canvas").angle=180,cc.find("Canvas").scaleX=-1,cc.find("Canvas").scaleY=-1,e&&e(180)):(cc.find("Canvas").angle=0,cc.find("Canvas").scaleX=1,cc.find("Canvas").scaleY=1,e&&e(0))},checkSysIsWechat:function(){cc.sys.isNative||cc.sys.browserType!=cc.sys.MOBILE_BROWSER&&cc.sys.browserType!=cc.sys.DESKTOP_BROWSER&&cc.sys.browserType!=cc.sys.BROWSER_TYPE_CHROME&&cc.sys.browserType!=cc.sys.BROWSER_TYPE_WECHAT&&cc.sys.browserType!=cc.sys.BROWSER_TYPE_MOBILE_QQ||(cc.view.setResizeCallback(function(){}),this.onResize())},checkIsFrontStage:function(){var e=this,t=!1;console.log(">>\u5224\u65ad\u524d\u540e\u53f0"),this.hiddenTime=0,this.visibleTime=0,cc.game.on(cc.game.EVENT_HIDE,function(){G_SHOW_GAME_VOICE?console.log(">>\u5f55\u97f3\u64ad\u653e\u4e2d,\u7981\u6b62\u5207\u6362\u540e\u53f0"):t||(t=!0,console.log(">>\u5207\u6362\u540e\u53f0"),MYAudioEngine.pauseMusic(),e.hiddenTime=(new Date).getTime())}),cc.game.on(cc.game.EVENT_SHOW,function(){G_SHOW_GAME_VOICE?console.log(">>\u5f55\u97f3\u64ad\u653e\u4e2d,\u7981\u6b62\u5207\u6362\u524d\u53f0"):t&&(t=!1,console.log(">>\u5207\u6362\u524d\u53f0\u5207\u6362\u524d\u53f0\u5207\u6362\u524d\u53f0"),MYAudioEngine.resumeMusic(),e.visibleTime=(new Date).getTime(),"mLogin"!=cc.director.getScene()._name?e.scheduleOnce(function(){e.isLobbyScene()||console.log(">>>>>GameSocketGameSocketonEnterForeground")},isIphone()?.15:.012):cc.sys.isMobile?window.location.replace(wxShareURL):cc.director.loadScene("mLogin"))})},offCheckFrontStage:function(){},playClickEffect:function(){MYAudioEngine.playClickSound()},onDestroy:function(){this.node.stopAllActions()},onCloseBtn:function(e,t){var i=this;void 0===t&&(t=.85),this.node&&(this.node.active=!1,t+"".length>0&&(t=Number(t+"")),this.scheduleOnce(function(){i.node.destroy()},t))},checkPreLoadScence:function(e,t){var i=window.BundleName;cc.assetManager.loadBundle(i,function(e,i){i.preloadScene("HZMJ",null,function(){t&&t()})})},releaseCaches:function(){}}),cc._RF.pop()},{}],ButtonSafe:[function(e,t){"use strict";cc._RF.push(t,"a9ca3Q0Os9O9JfMqaO1siVg","ButtonSafe"),cc.Class({extends:cc.Component,properties:{safeTime:{default:1,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4, \u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},start:function(){var e=this,t=this.getComponent(cc.Button);if(t){this.clickEvents=t.clickEvents;var i=!1;this.node.on("click",function(){t.clickEvents=[],0==i&&(i=!0,e.scheduleOnce(function(){i=!1,t.clickEvents=e.clickEvents},e.safeTime))},this)}},onLoad:function(){}}),cc._RF.pop()},{}],ButtonScale:[function(e,t){"use strict";cc._RF.push(t,"7aecc/1AU9IN5XxxFBQMT+H","ButtonScale"),cc.Class({extends:cc.Component,properties:{safeTime:{default:1,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4, \u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},start:function(){var e=this,t=this.getComponent(cc.Button);if(t){var i=t.node.scaleX,o=t.node.scaleY;this.clickEvents=t.clickEvents;var n=!1;this.node.on("click",function(){t.clickEvents=[],0==n&&(n=!0,e.scheduleOnce(function(){n=!1,t.clickEvents=e.clickEvents},e.safeTime))},this),this.node.on(cc.Node.EventType.TOUCH_START,function(){t.node.runAction(cc.scaleBy(.1,1.1))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(){t.node.runAction(cc.scaleTo(.1,i,o))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.node.runAction(cc.scaleTo(.1,i,o))}.bind(this))}},onLoad:function(){}}),cc._RF.pop()},{}],1:[function(e,t,i){i.endianness=function(){return"LE"},i.hostname=function(){return"undefined"!=typeof location?location.hostname:""},i.loadavg=function(){return[]},i.uptime=function(){return 0},i.freemem=function(){return Number.MAX_VALUE},i.totalmem=function(){return Number.MAX_VALUE},i.cpus=function(){return[]},i.type=function(){return"Browser"},i.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},i.networkInterfaces=i.getNetworkInterfaces=function(){return{}},i.arch=function(){return"javascript"},i.platform=function(){return"browser"},i.tmpdir=i.tmpDir=function(){return"/tmp"},i.EOL="\n"},{}],ChatLayer:[function(e,t){"use strict";cc._RF.push(t,"8cc26JxVONNq7q4RNGYGE7m","ChatLayer"),cc.Class({extends:e("BaseLayer"),properties:{chatToggle:cc.Toggle,faceToggle:cc.Toggle,chatScrollView:cc.ScrollView,faceScrollView:cc.ScrollView},onLoad:function(){this._super()},start:function(){},init:function(){this.chatToggle.isChecked=!0,this.chatScrollView.node.active=!0,this.faceToggle.isChecked=!1,this.faceScrollView.node.active=!1},onTouchToggle:function(){this.chatToggle.isChecked?(this.chatScrollView.node.active=!0,this.faceScrollView.node.active=!1):(this.chatScrollView.node.active=!1,this.faceScrollView.node.active=!0)},onTouchNode:function(e,t){GameManager.getGameUI().forbidEmoticon?createTips("\u5f53\u524d\u6e38\u620f\u7981\u7528\u8868\u60c5"):GameSocket.requestTalk(t),this.onCloseBtn()},onTouchImg:function(e,t){GameSocket.requestTalkImg(t),this.onCloseBtn()}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],ChatMessageManager:[function(e,t){"use strict";cc._RF.push(t,"0dea79QZRNIQZm2SlN+gt2W","ChatMessageManager");var o=e("../Conn/ReqHttp").default,n=cc.Class({ctor:function(){this.commonMessageList=[],this.chatMessageList=[],this.specialMessage={}},push:function(e){e&&this.chatMessageList.push(e)},pushCommonMsg:function(e){e&&this.commonMessageList.push(e)},delCommonMsg:function(e){for(k in this.commonMessageList)this.commonMessageList[k].content==e&&this.commonMessageList.remove(k)},delCommonMsgEX:function(e){for(k in this.commonMessageList)tonumber(commonMessageList[k].id)==tonumber(e)&&this.commonMessageList.remove(k)},pushSpecialMsg:function(e){this.specialMessage=e},getAllChatMessage:function(){return this.chatMessageList},getAllCommonMessage:function(){return this.commonMessageList},getSpecialMessage:function(){return this.specialMessage},requestSystemNotice:function(e){var t=this;o.getSystemNotice(function(o){if(o.status==G_JSON_DATA_STATUS_OK){for(i in o.GetNotice)t.pushCommonMsg(o.GetNotice[i]);e(!0)}else e(!1),createTips(o.msg)},function(){printInfo("\u83b7\u53d6\u7cfb\u7edf\u516c\u544a\u8d85\u65f6"),e(!1)})},clear:function(){this.chatMessageList={},this.commonMessageList={},this.specialMessage={}}});t.exports=n,cc._RF.pop()},{"../Conn/ReqHttp":"ReqHttp"}],CityListManager:[function(e,t){"use strict";cc._RF.push(t,"bcdc7IHTexHvb3S7BFEBbwh","CityListManager"),t.exports=cc.Class({ctor:function(){this.createLocalData()},createLocalData:function(){this.cityList=G_CITY_LIST},getNameByCityID:function(e){return this.cityList[e]?this.cityList[e].name:""},getGameListByCityID:function(e){return this.cityList[e]?this.cityList[e].gameList:[]}}),cc._RF.pop()},{}],CommonCheckRadioBoxCtrlUI:[function(e,t){"use strict";cc._RF.push(t,"240c6/No/xE2ZPyfqBPx1PG","CommonCheckRadioBoxCtrlUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},setCheckBoxValue:function(e){var t=e.target.getChildByName("checkmark");t.active=!t.active},getCheckBoxValue:function(e){return e.target.getChildByName("checkmark").active},setRadioBoxValue:function(e,t){for(var i=0;i<e.target.parent.childrenCount;i++)i==parseInt(t)?e.target.parent.children[i].getChildByName("checkmark").active=!0:e.target.parent.children[i].getChildByName("checkmark").active=!1}}),cc._RF.pop()},{}],CommonEvent:[function(e,t){"use strict";cc._RF.push(t,"448665VxlBDcqHRyoZeCzM9","CommonEvent"),t.exports={WebSocketEvent:{OPEN:"onOpen",CLOSE:"onClose",ERROR:"onError",OPENROOM:"onOpenRoom",CLOSEROOM:"onCloseRoom",ERRORROOM:"onErrorRoom"},LoginEvent:{SUCCESS:"loginSuccess"}},cc._RF.pop()},{}],CommonSlider:[function(e,t){"use strict";cc._RF.push(t,"947db7KTmBNo5ojrpu2lmgS","CommonSlider"),cc.Class({extends:cc.Component,properties:{Backgroud:{default:null,type:cc.Sprite},Progress:{default:null,type:cc.Sprite},Slider:{default:null,type:cc.Slider}},callback:function(e){var t=e.progress,i=this.Backgroud.node.width*t;this.Progress.node.width=i,this.callBackValue&&this.callBackValue(t)},onLoad:function(){this.Slider.node.on("slide",this.callback,this)},init:function(e){this.callBackValue=e},updateProgressImg:function(e){void 0===e&&(e=0);var t={progress:e};this.callback(t)}}),cc._RF.pop()},{}],ConfigDataManager:[function(e,t){"use strict";cc._RF.push(t,"d1707B2w7tAOLVcr3f0+Jh0","ConfigDataManager");var i,o=(i=e("../Conn/ReqHttp"))&&i.__esModule?i:{default:i},n=e("DataManager"),a=cc.Class({extends:cc.Component,ctor:function(){this.configData={},this.UserIpData="",this.UserCName="",n.instance.addManager("FriendManager",this)},onLoad:function(){},getConfigData:function(){var e=this;o.default.getConfigData(function(t){0==t.status?e.configData=t.data:createTips(t.msg)})},getServerStatus:function(e,t){o.default.getServerStatus(function(i){0==i.status?e&&e():t&&t(i.msg)},function(){console.log("\u8bf7\u6c42newGetServerStatus\u8d85\u65f6")})},saveUserAddress:function(e,t,i,n){void 0===n&&(n=null),o.default.saveUserAddress(i,e,t,"\u672a\u77e5",function(e){console.log("saveUserAddress succ"),console.log(e),0==e.status?n&&n():createTips(e.msg)})},getWXjsapi_ticket:function(e,t){o.default.getJsapiTicket(e,function(e){0==e.status?t&&t(e.data):createTips(e.msg)})},getWxUserInfo:function(e,t,i){console.log("ReqHttp.getWxUserInfo:",e),o.default.getWxUserInfo(e,function(e){0==e.status?t&&t(e.data):i&&i()})},getConfigDataByKey:function(e,t){return this.configData[e]||t},getUserIpDataByKey:function(){return this.UserIpData||""},getUserCNameDataByKey:function(){return this.UserCName||""},clear:function(){this.configData={},this.UserIpData="",this.UserCName=""}});t.exports=a,cc._RF.pop()},{"../Conn/ReqHttp":"ReqHttp",DataManager:"DataManager"}],Config:[function(e,t){"use strict";cc._RF.push(t,"b3edfzwomRIoYyoSYemExit","Config"),window.isDebug=!0,window.trace=function(){if(window.isDebug&&"undefined"!=typeof console&&void 0!==console.log){for(var e,t=[],i=arguments.length,o=0;o<i;o++)e=void 0===arguments[o]?"undefined":null===arguments[o]?"null":arguments[o].toString(),t.push(e);for(var n=0;n<t.length;n++)console.log(t[n])}},window.Package=e("Package"),window.UserInfoManager=new(e("UserInfoManager")),window.RoomListManager=new(e("RoomListManager")),window.GameListManager=new(e("GameListManager")),window.NetResManager=new(e("NetResManager")),window.tools=e("Tools"),window.g_autoLoginIn=!1,cc.sys.isNative||(window.testModule=e("test")),window.Crypto=window.CryptoJS||function(e){var t={},i=t.lib={},o=function(){},n=i.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return new a.init(i,t)}}),s=t.enc={},r=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,n=e.min(4*t,n),t){for(var c=0;c<t;c+=s)this._doProcessBlock(o,c);c=o.splice(0,t),i.sigBytes-=n}return new a.init(c,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new l.HMAC.init(e,i).finalize(t)}}});var l=t.algo={};return t}(Math),function(){var e=window.Crypto,t=(n=e.lib).WordArray,i=n.Hasher,o=[],n=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],a=i[1],s=i[2],r=i[3],c=i[4],u=0;80>u;u++){if(16>u)o[u]=0|e[t+u];else{var h=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=h<<1|h>>>31}h=(n<<5|n>>>27)+c+o[u],h=20>u?h+(1518500249+(a&s|~a&r)):40>u?h+(1859775393+(a^s^r)):60>u?h+((a&s|a&r|s&r)-1894007588):h+((a^s^r)-899497514),c=r,r=s,s=a<<30|a>>>2,a=n,n=h}i[0]=i[0]+n|0,i[1]=i[1]+a|0,i[2]=i[2]+s|0,i[3]=i[3]+r|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(o+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(n),e.HmacSHA1=i._createHmacHelper(n)}(),cc._RF.pop()},{GameListManager:"GameListManager",NetResManager:"NetResManager",Package:"Package",RoomListManager:"RoomListManager",Tools:"Tools",UserInfoManager:"UserInfoManager",test:"test"}],DataManager:[function(e,t){"use strict";cc._RF.push(t,"f54bfLPixhLGLqWLyW9yPCH","DataManager");var i=cc.Class({statics:{instance:null},ctor:function(){this.dataManagerList={}},addManager:function(e,t){for(var i in this.dataManagerList)if(i==e){this.dataManagerList[e]=t;break}this.dataManagerList[e]=t},removeManager:function(e){for(var t in this.dataManagerList)if(t==e){this.dataManagerList[e]=null;break}},clear:function(){for(var e in this.dataManagerList){var t=this.dataManagerList[e];t&&t.clear&&(t.clear(),this.dataManagerList[e]=null)}}});i.instance=new i,t.exports=i,cc._RF.pop()},{}],DataNotify:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"82ea9gtWdNAyKed3loqk8/x","DataNotify"),t.exports=cc.Class({ctor:function(){this.uiList=[]},addListener:function(e){for(var t=0;t<this.uiList.length;t++)if(e==this.uiList[t])return;this.uiList.push(e)},removeListener:function(e){for(var t=0;t<this.uiList.length;t++)e==this.uiList[t]&&this.uiList.splice(t,1)},onDiamondChanged:function(e){UserInfoManager.getMyInfo().jewels=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onDiamondChanged&&n.onDiamondChanged(e)}},onMoneyChanged:function(e){UserInfoManager.getMyInfo().money=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onMoneyChanged&&n.onMoneyChanged(e)}},onGiftCardChanged:function(e){UserInfoManager.getMyInfo().giftCard=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onGiftCardChanged&&n.onGiftCardChanged(e)}},onTransfernumChanged:function(e){UserInfoManager.getMyInfo().transferNum=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onTransfernumChanged&&n.onTransfernumChanged(e)}},onLogonGamePeoplecountChange:function(e){UserInfoManager.getMyInfo().peopleCount=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onLogonGamePeoplecountChange&&n.onLogonGamePeoplecountChange(e)}},onLogonNewMsgComing1:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onLogonNewMsgComing1&&n.onLogonNewMsgComing1(e)}},onLogonNewMsgComing2:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onLogonNewMsgComing2&&n.onLogonNewMsgComing2(e)}},onOpenRoomChanged:function(){for(var e,t=i(this.uiList);!(e=t()).done;){var o=e.value;o.onOpenRoomChanged&&o.onOpenRoomChanged()}},onBankMoneyChanged:function(e){UserInfoManager.getMyInfo().bankMoney=e;for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onBankMoneyChanged&&n.onBankMoneyChanged(e)}},onMailRedSpot:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onMailRedSpot&&n.onMailRedSpot(e)}},onFriendNotifyAdd:function(e){FriendManager.addFriendNotify(e),FriendManager.addFriendInvitePlayNotify(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendNotifyAdd&&n.onFriendNotifyAdd(e)}},onFriendNotifyDel:function(e){FriendManager.delFriendNotify(e),FriendManager.delFriendInvitePlayNotify(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendNotifyDel&&n.onFriendNotifyDel(e)}},onFriendAdd:function(e){FriendManager.addFriend(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendAdd&&n.onFriendAdd(e)}},onFriendDel:function(e){FriendManager.delFriend(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendDel&&n.onFriendDel(e)}},onBuyDeskInfoDel:function(e){console.log("\u5f00\u623f\u5217\u8868\u4fe1\u606f\u66f4\u65b0 \u6682\u672a\u5904\u7406"),RoomRecordManager.delRoomRecord(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onBuyDeskInfoDel&&n.onBuyDeskInfoDel(e)}},onBuyDeskInfoUpdate:function(e){console.log("\u5f00\u623f\u684c\u5b50\u4fe1\u606f\u66f4\u65b0 \u6682\u672a\u5904\u7406"),RoomRecordManager.updateRoomRecord(e);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onBuyDeskInfoUpdate&&n.onBuyDeskInfoUpdate(e)}},onFriendOnlineStatusChange:function(e){FriendManager.setFriendOnlineStatus(e.friendID,e.onlineStatus);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendOnlineStatusChange&&n.onFriendOnlineStatusChange(e.friendID,e.onlineStatus)}},onDeskUserSit:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onDeskUserSit&&n.onDeskUserSit(e)}},onDeskUserUp:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onDeskUserUp&&n.onDeskUserUp(e)}},onFriendRedSpotChange:function(e){FriendManager.setFriendListRedSpotCount(e.friendListRedSpotCount),FriendManager.setNotifyListRedSpotCount(e.notifyListRedSpotCount);for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendRedSpotChange&&n.onFriendRedSpotChange(e)}},onFriendsGroupAdd:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendsGroupAdd&&n.onFriendsGroupAdd(e)}},onFriendsGroupDel:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendsGroupDel&&n.onFriendsGroupDel(e)}},onFriendsGroupNotifyAdd:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendsGroupNotifyAdd&&n.onFriendsGroupNotifyAdd(e)}},onFriendsGroupMemberAdd:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupMemberAdd&&a.onFriendsGroupMemberAdd(e,t)}},onFriendsGroupMemberDel:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupMemberDel&&a.onFriendsGroupMemberDel(e,t)}},onFriendsGroupRoomMsgAdd:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupRoomMsgAdd&&a.onFriendsGroupRoomMsgAdd(e,t)}},onFriendsGroupRoomMsgDel:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupRoomMsgDel&&a.onFriendsGroupRoomMsgDel(e,t)}},onFriendsGroupRoomMsgUpdate:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupRoomMsgUpdate&&a.onFriendsGroupRoomMsgUpdate(e,t)}},onFriendsGroupAccoMsgAdd:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupAccoMsgAdd&&a.onFriendsGroupAccoMsgAdd(e,t)}},onFriendsGroupAccoMsgDel:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupAccoMsgDel&&a.onFriendsGroupAccoMsgDel(e,t)}},onFriendsGroupNameChange:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupNameChange&&a.onFriendsGroupNameChange(e,t)}},onFriendsGroupRedSpotChange:function(e){for(var t,o=i(this.uiList);!(t=o()).done;){var n=t.value;n.onFriendsGroupRedSpotChange&&n.onFriendsGroupRedSpotChange(e)}},onFriendsGroupNoticeChange:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupNoticeChange&&a.onFriendsGroupNoticeChange(e,t)}},onFriendsGroupWechatChange:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupWechatChange&&a.onFriendsGroupWechatChange(e,t)}},onFriendsGroupScoreChange:function(e,t,o){for(var n,a=i(this.uiList);!(n=a()).done;){var s=n.value;s.onFriendsGroupScoreChange&&s.onFriendsGroupScoreChange(e,t,o)}},onFriendsGroupDeskAdd:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupDeskAdd&&a.onFriendsGroupDeskAdd(e,t)}},onFriendsGroupDeskChange:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupDeskChange&&a.onFriendsGroupDeskChange(e,t)}},onFriendsGroupDeskDel:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupDeskDel&&a.onFriendsGroupDeskDel(e,t)}},onFriendsGroupVIPDeskAdd:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupVIPDeskAdd&&a.onFriendsGroupVIPDeskAdd(e,t)}},onFriendsGroupVIPDeskChange:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupVIPDeskChange&&a.onFriendsGroupVIPDeskChange(e,t)}},onFriendsGroupVIPDeskDel:function(e,t){for(var o,n=i(this.uiList);!(o=n()).done;){var a=o.value;a.onFriendsGroupVIPDeskDel&&a.onFriendsGroupVIPDeskDel(e,t)}},onFriendsGroupStatusChange:function(e,t,o){console.log(this.uiList.length+"?length>>>>>"+o+">>>>"+t+">>>>>>>>>>>>>>onFriendsGroupStatusChange"+e);for(var n,a=i(this.uiList);!(n=a()).done;){var s=n.value;s.onFriendsGroupStatusChange&&s.onFriendsGroupStatusChange(e,t,o)}},onFriendsGroupPowerChange:function(e,t,o){console.log(o+">>>>"+t+">>>>>>>>>>>>>>onFriendsGroupPowerChange"+e);for(var n,a=i(this.uiList);!(n=a()).done;){var s=n.value;s.onFriendsGroupPowerChange&&s.onFriendsGroupPowerChange(e,t,o)}},onFriendsGroupMemberFireCoinChange:function(e,t,o){for(var n,a=i(this.uiList);!(n=a()).done;){var s=n.value;s.onFriendsGroupMemberFireCoinChange&&s.onFriendsGroupMemberFireCoinChange(e,t,o)}},onCurMatchStart:function(e){for(var t in this.uiList){var i=this.uiList[t];i.onCurMatchStart&&i.onCurMatchStart(e)}},onCurMatchChange:function(e){for(var t in cc.error("onCurMatchChangeonCurMatchChangeonCurMatchChangeonCurMatchChange"),this.uiList){var i=this.uiList[t];i.onCurMatchChange&&i.onCurMatchChange(e)}},onCurMatchFail:function(e){for(var t in this.uiList){var i=this.uiList[t];i.onCurMatchFail&&i.onCurMatchFail(e)}},onCurMatchComeSoon:function(e,t){for(var i in this.uiList){var o=this.uiList[i];console.log(this.uiList),o.onCurMatchComeSoon&&o.onCurMatchComeSoon(e,t)}},onCurMatchResult:function(e){for(var t in this.uiList){var i=this.uiList[t];i.onCurMatchResult&&i.onCurMatchResult(e)}},showMatchGameDeskInfo:function(){for(var e in console.log(this.uiList,"this.uiList++++"),this.uiList){var t=this.uiList[e];t.showMatchGameDeskInfo&&t.showMatchGameDeskInfo()}}}),cc._RF.pop()},{}],EventEmiter:[function(e,t,i){"use strict";cc._RF.push(t,"187aekQhyVKz4QDnssX7rvU","EventEmiter");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameEvent=i.GlobalEvent=i.EventEmitter=void 0;var a=function(){function e(){this._handlers={}}return e.prototype.on=function(e,t,i){var o={handler:t,target:i},n=this._handlers[e];if(n||(n=[],this._handlers[e]=n),!(n.findIndex(function(e){return e.handler===t&&(!i||i===e.target)})>=0)){for(var a=0;a<n.length;a++)if(!n[a])return n[a]=o,a;return n.push(o),n.length}console.warn("EventEmitter repeate on EventName:"+e+" ",t,i)},e.prototype.off=function(e,t,i){var o=this._handlers[e];if(o)for(var n=0;n<o.length;n++){var a=o[n];if(a.handler===t&&(!i||i===a.target)){o.splice(n,1);break}}},e.prototype.remove=function(e){this._handlers[e]&&(this._handlers[e]=[])},e.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o,n=this._handlers[e],a=[];for(o=1;o<arguments.length;o++)a.push(arguments[o]);if(n)for(o=0;o<n.length;o++){var s=n[o];s.handler&&s.handler.apply(s.target,a)}},e}();i.EventEmitter=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new t,this._instance)},enumerable:!1,configurable:!0}),t}(a);i.GlobalEvent=s;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance?this._instance:(this._instance=new t,this._instance)},enumerable:!1,configurable:!0}),t}(a);i.GameEvent=r,cc._RF.pop()},{}],FriendManager:[function(e,t){"use strict";cc._RF.push(t,"3a5dfNYZWVBvbjEyRilNvb3","FriendManager");var i=e("DataManager"),o=cc.Class({statics:{instance:null},ctor:function(){this.friendList={},this.friendNotifyList=[],this.friendInvitePlayNotifyList=[],i.instance.addManager("FriendManager",this)},_Resolve_OneFriendInfo:function(e){var t={};return t.userID=e.popINT(),t.onlineStatus=e.popBYTE(),t.rewardStatus=e.popBYTE(),t},_Resolve_OneFriendNotify:function(e){var t={};return t.notifyID=e.popINT(),t.type=e.popINT(),t.targetID=e.popINT(),t.time=e.popINT(),t.param1=e.popINT(),t.param2=e.popINT(),t},setFriendList:function(e){for(var t in this.friendList={},e)this.addFriend(e[t])},addFriend:function(e){this.friendList[e.userID]=e},delFriend:function(e){this.friendList[e]=null},getFriendList:function(){var e=[];for(var t in this.friendList)e[e.length]=this.friendList[t];for(var i=0;i<e.length;i++)null==e[i]&&(e.splice(i,1),i--);return e.sort(function(e,t){return e.onlineStatus==t.onlineStatus?e.userID<t.userID:e.onlineStatus>t.onlineStatus}),e},getFriend:function(e){return this.friendList[e]},isMyFriend:function(e){return!!this.getFriend(e)},setFriendRewardStatus:function(e,t){var i=this.getFriend(e);i&&(i.rewardStatus=t)},setFriendOnlineStatus:function(e,t){var i=this.getFriend(e);i&&(i.onlineStatus=t)},getOnlineFriendList:function(){var e=[];for(var t in this.friendList)t.onlineStatus==E_FriendOnlineStatus.ON&&table.insert(e,t);return e.srot(function(e,t){return e.userID<t.userID}),e},setFriendNotifyList:function(e){for(var t in this.friendNotifyList={},e)this.addFriendNotify(e[t])},addFriendNotify:function(e){this.friendNotifyList[e.notifyID]=e},delFriendNotify:function(e){delete this.friendNotifyList[e]},getFriendNotifyList:function(){var e=[];for(var t in this.friendNotifyList)e.push(this.friendNotifyList[t]);return e},setFriendListRedSpotCount:function(e){this.friendListRedSpotCount=e},getFriendListRedSpotCount:function(){return this.friendListRedSpotCount},setNotifyListRedSpotCount:function(e){this.notifyListRedSpotCount=e},getNotifyListRedSpotCount:function(){return this.notifyListRedSpotCount},getFriendInvitePlayNotifyList:function(){var e=[];for(var t in this.friendInvitePlayNotifyList)table.insert(e,t);return e.srot(function(e,t){return e.time==t.time?e.notifyID<t.notifyID:e.time>t.time}),e},addFriendInvitePlayNotify:function(e){e.type===E_FriendNotifyType.INVITE_PLAYGAME&&(this.friendInvitePlayNotifyList[e.notifyID]=e)},delFriendInvitePlayNotify:function(e){this.friendInvitePlayNotifyList[e]=null},clear:function(){this.friendList={},this.friendNotifyList={},this.friendListRedSpotCount=0,this.notifyListRedSpotCount=0}});t.exports=o,cc._RF.pop()},{DataManager:"DataManager"}],FriendsGroupManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"c0b63lePllCco51byO1pWAn","FriendsGroupManager");var a=e("DataManager"),s=(e("GlobalEnum"),[]);s[E_FriendsGroupMemberStatus.NORMAL]=0,s[E_FriendsGroupMemberStatus.MANAGER]=2,s[E_FriendsGroupMemberStatus.KING]=4;var r=cc.Class({statics:{instance:null},ctor:function(){this.friendsGroupList={},this.notifyList={},this.notifyRedSpotCount=0,this.selectFriendsGroupID=0,this.msgRedSpotList={},a.instance.addManager("FriendsGroupManager",this)},getWeightByStatus:function(e){return s[e]||-1},isUserHasManagerStatus:function(e,t){var i=E_FriendsGroupMemberStatus.NORMAL,o=this.getFriendsGroup(e);if(o)if(t)for(var n=0,a=Object.values(o.memberList);n<a.length;n++){var r=a[n];if(t==r.userID){i=r.status;break}}else i=o.status;return s[i]>=s[E_FriendsGroupMemberStatus.MANAGER]},isUserHasKingStatus:function(e,t){var i=E_FriendsGroupMemberStatus.NORMAL,o=this.getFriendsGroup(e);if(o)if(t){for(var n in o.memberList)if(t==o.memberList[n].userID){i=o.memberList[n].status;break}}else i=o.status;return s[i]>=s[E_FriendsGroupMemberStatus.KING]},isUserHasFuncPower:function(e,t,i){if(this.isUserHasKingStatus(e,i))return!0;if(objIsEmpty(E_FriendsGroupPowerType.hasOwnProperty(t)))return!1;if(this.isUserHasManagerStatus(e,i)){var o=E_FriendsGroupPowerType.NO,n=this.getFriendsGroup(e);if(n)if(objIsEmpty(i))o=n.power;else for(var a=0,s=Object.values(n.memberList);a<s.length;a++){var r=s[a];if(i==r.userID){o=r.power;break}}return(o&t)==t}return!1},_Resolve_OneFriendsGroupInfo:function(e){var t={};t.friendsGroupID=e.popINT(),t.status=e.popBYTE(),t.currOnlineCount=e.popINT(),t.peopleCount=e.popINT(),t.deskCount=e.popINT(),t.VIPRoomCount=e.popINT(),t.frontMember=[];for(var i=1;i<=9;++i){var o=e.popINT();o>0&&t.frontMember.push(o)}return t.createTime=e.popINT(),t.masterID=e.popINT(),t.name=e.popNCHAR(24),t.notice=e.popNCHAR(128),t.wechat=e.popNCHAR(48),t.power=e.popBYTE(),t.fireCoin=e.popINT(),t},_Resolve_OneFriendsGroupUserInfo:function(e){var t={};return t.userID=e.popINT(),t.joinTime=e.popINT(),t.onlineStatus=e.popBYTE(),t.score=e.popINT(),t.money=e.popLONGLONG(),t.fireCoin=e.popINT(),t.status=e.popBYTE(),t.carryFireCoin=e.popINT(),t.power=e.popBYTE(),t},_Resolve_OneFriendsGroupNotify:function(e){var t={};return t.notifyID=e.popINT(),t.userID=e.popINT(),t.targetFriendsGroupID=e.popINT(),t.name=e.popNCHAR(24),t.type=e.popBYTE(),t.time=e.popINT(),t.param1=e.popINT(),t.param2=e.popINT(),t.alreadyOper=e.popBYTE(),t},_Resolve_OneFriendsGroupRoomMsg:function(e){var t={};return t.friendsGroupID=e.popINT(),t.userID=e.popINT(),t.roomMsgID=e.popINT(),t.time=e.popINT(),t.roomID=e.popINT(),t.roomCount=e.popINT(),t.curPeopleCount=e.popINT(),t.allPeopleCount=e.popINT(),t.playCount=e.popINT(),t.passwd=e.popNCHAR(20),t.gameRules=e.popNCHAR(256),t},_Resolve_OneFriendsGroupAccoMsg:function(e){var t={};return t.friendsGroupID=e.popINT(),t.userID=e.popINT(),t.time=e.popINT(),t.roomID=e.popINT(),t.realPlayCount=e.popINT(),t.playCount=e.popINT(),t.playMode=e.popBYTE(),t.passwd=e.popNCHAR(20),t.userInfoListStr=e.popNCHAR(192),t.roomType=e.popBYTE(),t.deskID=e.popBYTE(),t.userInfoList=tools.getSplitData(t.userInfoListStr,["userID","score"]),t},_Resolve_OneFriendsGroupMsgRedSpot:function(e){var t=[];return t.friendsGroupID=e.popINT(),t.deskMsgRedSpotCount=e.popINT(),t.VIPRoomMsgRedSpotCount=e.popINT(),console.log("\u5355\u4e2a\u4ff1\u4e50\u90e8\u5c0f\u7ea2\u70b9\u7ed3\u6784\u4f53_Resolve_OneFriendsGroupMsgRedSpot",t),t},_Resolve_OneFriendsGroupDeskInfo:function(e){var t={};t.friendsGroupID=e.popINT(),t.deskID=e.popINT(),t.time=e.popINT(),t.roomID=e.popINT(),t.gameID=e.popINT(),t.roomType=e.popINT(),t.curPeopleCount=e.popINT(),t.allPeopleCount=e.popINT(),t.playCount=e.popINT(),t.gameStatus=e.popBYTE(),t.passwd=e.popNCHAR(20),t.gameRules=e.popNCHAR(256),t.userIDList=[];for(var i=1;i<=G_WAR_RECORD_PLAYER_NUM;i++){var o=e.popINT();o>0&&t.userIDList.push(o)}return t},_Resolve_OneSimlpeFriendsGroupAcco:function(e){var t={};return t.userID=e.popINT(),t.score=e.popINT(),t.money=e.popLONGLONG(),t.fireCoin=e.popINT(),t},_Resolve_OneSimlpeFriendsGroupDeskAcco:function(e){var t={};return t.costMoney=e.popLONGLONG()/G_MULTI_NUM,t.costJewels=e.popINT(),t.fireCoinRecharge=e.popLONGLONG(),t.fireCoinExchange=e.popLONGLONG(),t.moneyPump=e.popLONGLONG()/G_MULTI_NUM,t.fireCoinPump=e.popLONGLONG(),t},_Resolve_StatusChangeStruct:function(e){var t={};return t.userID=e.popINT(),t.status=e.popBYTE(),t.power=e.popBYTE(),t},setFriendsGroupList:function(e){this.friendsGroupList={};for(var t=0,i=Object.values(e);t<i.length;t++){var o=i[t];this.addFriendsGroup(o)}this.initSelectFriendsGroup()},initSelectFriendsGroup:function(){var e=this.getFriendsGroupList()[0];if(!objIsEmpty(e)){var t=this.getZhiDingFriendsGroupID();0==t?(t=e.friendsGroupID,this.setZhiDingFriendsGroupID(t)):objIsEmpty(this.getFriendsGroup(t))&&(t=e.friendsGroupID,this.setZhiDingFriendsGroupID(t)),0==this.selectFriendsGroupID&&this.setSelectFriendsGroupID(t)}},addFriendsGroup:function(e){this.friendsGroupList[parseInt(e.friendsGroupID)]=e,this.friendsGroupList[parseInt(e.friendsGroupID)].memberList=[],this.friendsGroupList[parseInt(e.friendsGroupID)].roomMsgList=[],this.friendsGroupList[parseInt(e.friendsGroupID)].accoMsgList=[],this.friendsGroupList[e.friendsGroupID].deskList=[];for(var t=1;t<=G_CLUB_DESK_LEN;++t){var i=this.createDeskInfo(e.friendsGroupID,t);this.friendsGroupList[e.friendsGroupID].deskList.push(i)}this.friendsGroupList[e.friendsGroupID].vipDeskList=[];for(var o=1;o<=G_CLUB_DESK_LEN;++o){var n=this.createVIPDeskInfo(e.friendsGroupID,o+G_CLUB_DESK_LEN);this.friendsGroupList[e.friendsGroupID].vipDeskList.push(n)}},delFriendsGroup:function(e){this.friendsGroupList[e]=null,delete this.friendsGroupList[e]},getFriendsGroupList:function(){var e=[];for(var t in this.friendsGroupList)e.push(this.friendsGroupList[t]);var i=function(e,t){if(objIsEmpty(e)||objIsEmpty(t))return 1;if(e==t)return 1;var i=this.getZhiDingFriendsGroupID();return e.friendsGroupID==i?-1:t.friendsGroupID==i?1:this.getWeightByStatus(e.status)==this.getWeightByStatus(t.status)?e.createTime==t.createTime?e.friendsGroupID<t.friendsGroupID?-1:1:e.createTime<t.createTime?-1:1:this.getWeightByStatus(e.status)>this.getWeightByStatus(t.status)?1:-1}.bind(this);return e.sort(i),e},getFriendsGroup:function(e){return this.friendsGroupList[e]},getAllFriendsGroupNum:function(){var e=0;for(var t in this.friendsGroupList)(t=this.friendsGroupList[t])&&t.masterID&&(e+=1);return e},getCreateFriendsGroupNum:function(){for(var e=0,t=UserInfoManager.getMyInfo().userID,i=0,o=Object.values(this.friendsGroupList);i<o.length;i++){var n=o[i];n&&n.masterID==t&&(e+=1)}return e},changeFriendsGroupName:function(e,t){for(var i in this.friendsGroupList)if(this.friendsGroupList[i].friendsGroupID==e){this.friendsGroupList[i].name=t;break}},changeFriendsGroupNotice:function(e,t){for(var i in this.friendsGroupList)if(this.friendsGroupList[i].friendsGroupID==e){this.friendsGroupList[i].notice=t;break}},changeFriendsGroupWechat:function(e,t){for(var i in this.friendsGroupList)if(this.friendsGroupList[i].friendsGroupID==e){this.friendsGroupList[i].wechat=t;break}},getFriendsGroupName:function(e){var t=this.getFriendsGroup(e);return t?t.name:""},changeFriendsGroupPeopleCount:function(e,t){var i=this.getFriendsGroup(e);i&&(i.peopleCount=i.peopleCount+t)},changeFriendsGroupRoomCount:function(e,t){var i=this.getFriendsGroup(e);i&&(i.roomCount=i.roomCount+t)},changeFriendsGroupDeskCount:function(e,t){var i=this.getFriendsGroup(e);i&&(i.deskCount=i.deskCount+t)},changeFriendsGroupVIPRoomCount:function(e,t){var i=this.getFriendsGroup(e);i&&(i.VIPRoomCount=i.VIPRoomCount+t)},changeFriendsGroupScore:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.memberList)for(var n=0,a=Object.values(t.userInfoList);n<a.length;n++){var s=a[n];if(Number(s.userID)==member.userID){i.memberList[o].score=i.memberList[o].score+Number(s.score),DataNotify.onFriendsGroupScoreChange(e,member.userID,i.memberList[o].score);break}}},isJoinFriendsGroup:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o=0,n=Object.values(i.memberList);o<n.length;o++)if(n[o].userID==t)return!0;return!1},setFriendsGroupMemberList:function(e,t){var i=this.getFriendsGroup(e);for(var o in i&&(i.memberList={}),t){var n=t[o];this.addFriendsGroupMember(e,n)}},addFriendsGroupMember:function(e,t){var i=this.getFriendsGroup(e);i&&(i.memberList[t.userID]=t)},addFriendsGroupFrontMember:function(e,t){var i=this.getFriendsGroup(e);if(i){if(i.frontMember.length>=9)return;for(var o in i.frontMember)if(t.userID==o)return;i.frontMember.push(t.userID)}},delFriendsGroupMember:function(e,t){var i=this.getFriendsGroup(e);i&&(i.memberList[t]=null,delete i.memberList[t])},delFriendsGroupFrontMember:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.frontMember)if(t==i.frontMember[o]){i.frontMember.splice(o,1);break}},getFriendsGroupMemberList:function(e){var t=this.getFriendsGroup(e),i=[];if(null!=t||null!=t)for(var o in t.memberList)o=t.memberList[o],i.push(o);var n=function(e,t){return this.getWeightByStatus(e.status)==this.getWeightByStatus(t.status)?e.onlineStatus==t.onlineStatus?e.joinTime<t.joinTime?-1:1:e.onlineStatus>t.onlineStatus?-1:1:this.getWeightByStatus(e.status)>this.getWeightByStatus(t.status)?-1:1}.bind(this);return i.sort(n),i},getFriendsGroupMemberManagerList:function(e){for(var t=this.getFriendsGroupMemberList(e),i=[],o=0,n=Object.values(t);o<n.length;o++){var a=n[o];a.status==E_FriendsGroupMemberStatus.MANAGER&&i.push(a)}return i},findFriendsGroupMemberList:function(e,t){var i=this.getFriendsGroupMemberList(e),o=[];for(var n in i){var a=i[n];String(a.userID).charAt(String(t))&&o.push(a)}return o},getFriendsGroupMember:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.memberList){var n=i.memberList[o];if(t==n.userID)return n}return null},changeFriendsGroupMemberStatus:function(e,t,i){var o=this.getFriendsGroup(e);if(o){var n=UserInfoManager.getMyInfo();for(var a in n&&n.userID==t&&(o.status=i),i==E_FriendsGroupMemberStatus.KING&&(o.masterID=t),o.memberList)if(t==o.memberList[a].userID){o.memberList[a].status=i;break}}},changeFriendsGroupMemberPower:function(e,t,i){var o=this.getFriendsGroup(e);if(o){var n=UserInfoManager.getMyInfo();for(var a in n&&n.userID==t&&(o.power=i),o.memberList)if(t==o.memberList[a].userID){o.memberList[a].power=i;break}}},changeFriendsGroupMemberFireCoin:function(e,t,i){var o=this.getFriendsGroup(e);if(o){var n=UserInfoManager.getMyInfo();for(var a in n&&n.userID==t&&(o.fireCoin=i),o.memberList)if(t==o.memberList[a].userID){o.memberList[a].carryFireCoin=i;break}}},setFriendsGroupRoomMsgList:function(e,t){var i=this.getFriendsGroup(e);i&&(i.roomMsgList={});for(var o=0,n=Object.values(t);o<n.length;o++){var a=n[o];this.addFriendsGroupRoomMsg(e,a)}},addFriendsGroupRoomMsg:function(e,t){var i=this.getFriendsGroup(e);i&&(i.roomMsgList[t.roomMsgID]=t)},delFriendsGroupRoomMsg:function(e,t){var i=this.getFriendsGroup(e);i&&(i.roomMsgList[t]=null,delete i.roomMsgList[t])},updateFriendsGroupRoomMsg:function(e,t,i){var o=this.getFriendsGroup(e);o&&o.roomMsgList&&o.roomMsgList[t]&&(o.roomMsgList[t].curPeopleCount=i)},getFriendsGroupRoomMsg:function(e,t){var i=this.getFriendsGroup(e);if(i)return i.roomMsgList[t]},getFriendsGroupRoomMsgList:function(e){var t=this.getFriendsGroup(e),i=[];for(var o in t.roomMsgList){var n=t.roomMsgList[o];i.push(n)}var a=function(e,t){return e.time==t.time?e.roomMsgID<t.roomMsgID?-1:1:e.time>t.time?-1:1}.bind(this);return i.sort(a),i},setFriendsGroupAccoMsgList:function(e,t){var i=this.getFriendsGroup(e);i&&(i.accoMsgList={});for(var o=0,n=Object.values(t);o<n.length;o++){var a=n[o];this.addFriendsGroupAccoMsg(e,a)}},addFriendsGroupAccoMsg:function(e,t){var i=this.getFriendsGroup(e);i&&(i.accoMsgList[t.accoMsgID]=t)},delFriendsGroupAccoMsg:function(e,t){var i=this.getFriendsGroup(e);i&&(i.accoMsgList[t]=null,delete i.accoMsgList[t])},getFriendsGroupAccoMsgList:function(e){var t=this.getFriendsGroup(e),i=[];for(var o in t.accoMsgList){var n=t.accoMsgList[o];i.push(n)}var a=function(e,t){return e.time==t.time?e.accoMsgID<t.accoMsgID?-1:1:e.time>t.time?-1:1}.bind(this);return i.sort(a),i},setNotifyList:function(e){for(var t in this.notifyList={},e)t=e[t],this.addNotify(t)},addNotify:function(e){this.notifyList[e.notifyID]=e},delNotify:function(e){this.notifyList[e]=null,delete this.notifyList[e]},getNotifyList:function(){var e=[];for(var t in this.notifyList)t=this.notifyList[t],e.push(t);var i=function(e,t){return e.time==t.time?e.notifyID<t.notifyID?1:-1:e.time>t.time?-1:1}.bind(this);return e.sort(i),e},setNotifyRedSpotCount:function(e){this.notifyRedSpotCount=e},getNotifyRedSpotCount:function(){return this.notifyRedSpotCount||0},clearFriendsGroupMsgRedSpotList:function(){this.msgRedSpotList={}},getFriendsGroupMsgRedSpotList:function(){return this.msgRedSpotList},setFriendsGroupMsgRedSpot:function(e,t){this.msgRedSpotList[e]=t},getFriendsGroupMsgRedSpot:function(e){return this.msgRedSpotList[e]},getFriendsGroupDeskMsgRedSpotCount:function(e){var t=this.getFriendsGroupMsgRedSpot(e);return t?t.deskMsgRedSpotCount:0},getFriendsGroupVIPRoomMsgRedSpotCount:function(e){var t=this.getFriendsGroupMsgRedSpot(e);return t?t.VIPRoomMsgRedSpotCount:0},getFriendsGroupTotalRedSpotCount:function(){for(var e=this.getNotifyRedSpotCount(),t=0,i=0,o=Object.values(this.msgRedSpotList);i<o.length;i++){var n=o[i];t=this.getFriendsGroupDeskMsgRedSpotCount(n.friendsGroupID)+this.getFriendsGroupVIPRoomMsgRedSpotCount(n.friendsGroupID)}return e+t},getFriendsGroupRedSpotInfo:function(){var e=[];return e.notifyRedSpotCount=this.getNotifyRedSpotCount(),e.msgRedSpotList=this.getFriendsGroupMsgRedSpotList(),console.log("\u83b7\u53d6\u4ff1\u4e50\u90e8\u6218\u7ee9\u6d88\u606f\u5c0f\u7ea2\u70b9\u6570\u91cfgetFriendsGroupRedSpotInfo",e),e},createDeskInfo:function(e,t){var i={};return i.friendsGroupID=e,i.deskID=t,i.roomID=0,i.gameID=0,i.count=0,i.curPeopleCount=0,i.allPeopleCount=0,i.playCount=0,i.gameStatus=-1,i.passwd="",i.gameRules="{}",i.userIDList=[],i},createVIPDeskInfo:function(e,t){var i={};return i.friendsGroupID=e,i.deskID=t,i.roomID=0,i.gameID=0,i.count=0,i.curPeopleCount=0,i.allPeopleCount=0,i.playCount=0,i.gameStatus=-1,i.passwd="",i.gameRules="{}",i.userIDList=[],i},addDeskList:function(e,t){for(var i in t)i=t[i],this.addDeskInfo(e,i)},addDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.deskList)if(i.deskList[o].deskID==t.deskID){i.deskList[o]=t;break}},getDeskList:function(e){var t=this.getFriendsGroup(e);return t?t.deskList:[]},addVIPDeskList:function(e,t){for(var o,n=i(t);!(o=n()).done;){var a=o.value;console.log(">>>>>>>deskListdeskList"+JSON.stringify(a)),this.addVIPDeskInfo(e,a)}},addVIPDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o=0;o<i.vipDeskList.length;o++)if(i.vipDeskList[o].deskID==t.deskID){i.vipDeskList[o]=t;break}},getVIPDeskList:function(e){var t=this.getFriendsGroup(e);return t?t.vipDeskList:[]},changeDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.deskList)if(i.deskList[o].deskID==t.deskID){if(i.deskList[o].gameStatus=t.gameStatus,i.deskList[o].curPeopleCount=t.curPeopleCount,t.userID>0)if(0==t.updateType)i.deskList[o].userIDList.push(t.userID);else if(1==t.updateType)for(var n in i.deskList[o].userIDList)if(i.deskList[o].userIDList[n]==t.userID){i.deskList[o].userIDList.splice(n,1);break}return i.deskList[o]}return t},changeVIPDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i&&i.vipDeskList[t.deskID]){if(i.vipDeskList[t.deskID].gameStatus=t.gameStatus,i.vipDeskList[t.deskID].curPeopleCount=t.curPeopleCount,t.userID>0)if(0==t.updateType)i.vipDeskList[t.deskID].userIDList.push(t.userID);else if(1==t.updateType)for(var o in i.vipDeskList[t.deskID].userIDList)if(i.vipDeskList[t.deskID].userIDList[o]==t.userID){i.vipDeskList[t.deskID].userIDList.splice(o,1);break}return i.vipDeskList[t.deskID]}return t},delDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.deskList)if((o=i.deskList[o]).deskID==t){var n=this.createDeskInfo(e,t);this.addDeskInfo(e,n);break}},delVIPDeskInfo:function(e,t){var i=this.getFriendsGroup(e);if(i)for(var o in i.vipDeskList)if((o=i.vipDeskList[o]).deskID==t){var n=this.createVIPDeskInfo(e,t);this.addVIPDeskInfo(e,n);break}},onFriendsGroupNotifyMessage:function(e){MSG_NTF_LOGON_FRIENDSGROUP_NOTIFY_MSG==e.bAssistantID?this.dealFriendsGroupNotifyMsg(e):MSG_NTF_LOGON_FRIENDSGROUP_ROOM_MSG==e.bAssistantID?this.dealFriendsGroupRoomMsg(e):MSG_NTF_LOGON_FRIENDSGROUP_ACCO_MSG==e.bAssistantID?this.dealFriendsGroupAccoMsg(e):MSG_NTF_LOGON_FRIENDSGROUP_REDSPOT==e.bAssistantID?this.dealFriendsGroupRedSpot(e):MSG_NTF_LOGON_FRIENDSGROUP_MSG_HAVE_CHANGE==e.bAssistantID?this.dealFriendsGroupMsgHaveChange(e):MSG_NTF_LOGON_FRIENDSGROUP_CREATE_FG==e.bAssistantID?this.dealFriendsGroupCreateFG(e):MSG_NTF_LOGON_FRIENDSGROUP_NAME_CHANGE==e.bAssistantID?this.dealFriendsGroupNameChange(e):MSG_NTF_LOGON_FRIENDSGROUP_PEOPLE_CHANGE==e.bAssistantID?this.dealFriendsGroupPeopleChange(e):MSG_NTF_LOGON_FRIENDSGROUP_DISMISS==e.bAssistantID?this.dealFriendsGroupDismiss(e):MSG_NTF_LOGON_FRIENDSGROUP_NOTICE_CHANGE==e.bAssistantID?this.dealFriendsGroupNoticeChange(e):MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_MSG==e.bAssistantID?this.dealFriendsGroupDeskInfoMsg(e):MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_CHANGE==e.bAssistantID?this.dealFriendsGroupDeskInfoChange(e):MSG_NTF_LOGON_FRIENDSGROUP_STATUS_CHANGE==e.bAssistantID?this.dealFriendsGroupStatusChange(e):MSG_NTF_LOGON_FRIENDSGROUP_WECHAT_CHANGE==e.bAssistantID?this.dealFriendsGroupWechatChange(e):MSG_NTF_LOGON_FRIENDSGROUP_POWER_CHANGE==e.bAssistantID?this.dealFriendsGroupPowerChange(e):MSG_NTF_LOGON_FRIENDSGROUP_NEW_VIPROOM_MSG==e.bAssistantID?this.dealFriendsGroupDeskInfoMsg(e):MSG_NTF_LOGON_FRIENDSGROUP_VIPROOM_CHANGE==e.bAssistantID?this.dealFriendsGroupDeskInfoChange(e):MSG_NTF_LOGON_FRIENDSGROUP_FIRECOIN_CHANGE==e.bAssistantID&&this.dealFriendsGroupFireCoinChange(e)},dealFriendsGroupNotifyMsg:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.notify=this._Resolve_OneFriendsGroupNotify(e),t}.bind(this)(e);this.addNotify(t.notify),DataNotify.onFriendsGroupNotifyAdd(t.notify)}},dealFriendsGroupRoomMsg:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.roomMsg=this._Resolve_OneFriendsGroupRoomMsg(e),t}.bind(this)(e);this.changeFriendsGroupRoomCount(t.roomMsg.friendsGroupID,1),this.addFriendsGroupRoomMsg(t.roomMsg.friendsGroupID,t.roomMsg),DataNotify.onFriendsGroupRoomMsgAdd(t.roomMsg.friendsGroupID,t.roomMsg)}},dealFriendsGroupAccoMsg:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.accoMsg=this._Resolve_OneFriendsGroupAccoMsg(e),t}.bind(this)(e);this.changeFriendsGroupScore(t.accoMsg.friendsGroupID,t.accoMsg),this.addFriendsGroupAccoMsg(t.accoMsg.friendsGroupID,t.accoMsg),DataNotify.onFriendsGroupAccoMsgAdd(t.accoMsg.friendsGroupID,t.accoMsg)}},dealFriendsGroupRedSpot:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t=[];t.notifyRedSpotCount=e.popINT(),t.friendsGroupCount=e.popINT(),t.msgRedSpotList=[];for(var i=1;i<=t.friendsGroupCount;++i)t.msgRedSpotList.push(this._Resolve_OneFriendsGroupMsgRedSpot(e));return console.log("\u670d\u52a1\u5668\u63a8\u9001\u7684\u5c0f\u7ea2\u70b9\u6570\u91cfdealFriendsGroupRedSpot",t),t}.bind(this)(e);for(var i in this.setNotifyRedSpotCount(t.notifyRedSpotCount),this.clearFriendsGroupMsgRedSpotList(),t.msgRedSpotList)i=t.msgRedSpotList[i],this.setFriendsGroupMsgRedSpot(i.friendsGroupID,i);console.log("dealFriendsGroupRedSpot_info",t),DataNotify.onFriendsGroupRedSpotChange(t)}},dealFriendsGroupMsgHaveChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t.operType=e.popBYTE(),t.msgType=e.popBYTE(),t.ID=e.popINT(),t.roomCount=e.popINT(),t.curPeopleCount=e.popINT(),t}.bind(this)(e);0==t.operType?0==t.msgType&&(this.updateFriendsGroupRoomMsg(t.friendsGroupID,t.ID,t.curPeopleCount),DataNotify.onFriendsGroupRoomMsgUpdate(t.friendsGroupID,t.ID,t.curPeopleCount)):1==t.operType&&(0==t.msgType?(this.changeFriendsGroupRoomCount(t.friendsGroupID,-1),this.delFriendsGroupRoomMsg(t.friendsGroupID,t.ID),DataNotify.onFriendsGroupRoomMsgDel(t.friendsGroupID,t.ID)):1==t.msgType&&DataNotify.onFriendsGroupAccoMsgDel(t.friendsGroupID,t.ID))}},dealFriendsGroupCreateFG:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroup=this._Resolve_OneFriendsGroupInfo(e),t}.bind(this)(e);this.addFriendsGroup(t.friendsGroup),console.log("dealFriendsGroupCreateFGdealFriendsGroupCreateFG"),DataNotify.onFriendsGroupAdd(t.friendsGroup)}},dealFriendsGroupNameChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t.name=e.popNCHAR(24),t}.bind(this)(e);this.changeFriendsGroupName(t.friendsGroupID,t.name),console.log("dealFriendsGroupNameChangedealFriendsGroupNameChange"),DataNotify.onFriendsGroupNameChange(t.friendsGroupID,t.name)}},dealFriendsGroupPeopleChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t.type=e.popBYTE(),t.member=this._Resolve_OneFriendsGroupUserInfo(e),t}.bind(this)(e);0==t.type||(1==t.type?(this.changeFriendsGroupPeopleCount(t.friendsGroupID,1),this.addFriendsGroupMember(t.friendsGroupID,t.member),this.addFriendsGroupFrontMember(t.friendsGroupID,t.member),console.log("dealFriendsGroupPeopleChangedealFriendsGroupPeopleChange"),DataNotify.onFriendsGroupMemberAdd(t.friendsGroupID,t.member)):2==t.type&&(this.changeFriendsGroupPeopleCount(t.friendsGroupID,-1),this.delFriendsGroupMember(t.friendsGroupID,t.member.userID),this.delFriendsGroupFrontMember(t.friendsGroupID,t.member.userID),console.log("dealFriendsGroupPeopleChangedealFriendsGroupPeopleChange"),DataNotify.onFriendsGroupMemberDel(t.friendsGroupID,t.member.userID)))}},dealFriendsGroupDismiss:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t}.bind(this)(e);this.delFriendsGroup(t.friendsGroupID),console.log("dealFriendsGroupDismissdealFriendsGroupDismiss"),DataNotify.onFriendsGroupDel(t.friendsGroupID)}},dealFriendsGroupNoticeChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t.notice=e.popNCHAR(128),t}.bind(this)(e);this.changeFriendsGroupNotice(t.friendsGroupID,t.notice),DataNotify.onFriendsGroupNoticeChange(t.friendsGroupID,t.notice)}},dealFriendsGroupDeskInfoMsg:function(t){if(this.ClubLayer=new(e("ClubLayer")),G_HANDLE_CODE_OK==t.bHandleCode){var i=function(e){var t=[];return t.desk=this._Resolve_OneFriendsGroupDeskInfo(e),t}.bind(this)(t);MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_MSG==t.bAssistantID?(console.log("\u5b9e\u65f6\u589e\u52a0\u684c\u5b50\u5728\u8fd9\u91cc++++++++++++++++++++++++++++++++"),this.addDeskInfo(i.desk.friendsGroupID,i.desk),this.changeFriendsGroupDeskCount(i.desk.friendsGroupID,1),DataNotify.onFriendsGroupDeskAdd(i.desk.friendsGroupID,i.desk)):MSG_NTF_LOGON_FRIENDSGROUP_NEW_VIPROOM_MSG==t.bAssistantID&&(this.addVIPDeskInfo(i.desk.friendsGroupID,i.desk)||(console.log("\u5b9e\u65f6\u589e\u52a0VIP\u684c\u5b50\u5728\u8fd9\u91cc++++++++++++++++++++++++++++++++"),this.addVIPDeskInfo(i.desk.friendsGroupID,i.desk),this.changeFriendsGroupVIPRoomCount(i.desk.friendsGroupID,1),DataNotify.onFriendsGroupVIPDeskAdd(i.desk.friendsGroupID,i.desk)))}},dealFriendsGroupDeskInfoChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t=[];return t.friendsGroupID=e.popINT(),t.operType=e.popBYTE(),t.deskID=e.popINT(),t.curPeopleCount=e.popINT(),t.gameStatus=e.popBYTE(),t.updateType=e.popBYTE(),t.userID=e.popINT(),t}.bind(this)(e);if(0==t.operType){if(MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_CHANGE==e.bAssistantID){var i=this.changeDeskInfo(t.friendsGroupID,t);DataNotify.onFriendsGroupDeskChange(i.friendsGroupID,i)}else if(MSG_NTF_LOGON_FRIENDSGROUP_VIPROOM_CHANGE==e.bAssistantID){var o=this.changeVIPDeskInfo(t.friendsGroupID,t);DataNotify.onFriendsGroupVIPDeskChange(o.friendsGroupID,o)}}else if(1==t.operType)if(MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_CHANGE==e.bAssistantID){this.delDeskInfo(t.friendsGroupID,t.deskID),this.changeFriendsGroupDeskCount(t.friendsGroupID,-1);var n=this.createDeskInfo(t.friendsGroupID,t.deskID);DataNotify.onFriendsGroupDeskDel(n.friendsGroupID,n)}else if(MSG_NTF_LOGON_FRIENDSGROUP_VIPROOM_CHANGE==e.bAssistantID){this.delVIPDeskInfo(t.friendsGroupID,t.deskID),this.changeFriendsGroupVIPRoomCount(t.friendsGroupID,-1);var a=this.createVIPDeskInfo(t.friendsGroupID,t.deskID);DataNotify.onFriendsGroupVIPDeskDel(a.friendsGroupID,a)}}},dealFriendsGroupStatusChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.friendsGroupID=e.popINT(),t.count=e.popINT(),t.userList={};for(var i=1;i<=t.count;++i)t.userList[i]=this._Resolve_StatusChangeStruct(e);return t}.bind(this)(e);for(var i in t.userList)i=t.userList[i],this.changeFriendsGroupMemberStatus(t.friendsGroupID,i.userID,i.status),DataNotify.onFriendsGroupStatusChange(t.friendsGroupID,i.userID,i.status)}},dealFriendsGroupWechatChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendsGroupID=e.popINT(),t.wechat=e.popNCHAR(48),t}.bind(this)(e);window.index=0,window.QMBH=t.wechat,window.BH=!0,this.changeFriendsGroupWechat(t.friendsGroupID,t.wechat),DataNotify.onFriendsGroupWechatChange(t.friendsGroupID,t.wechat)}},dealFriendsGroupPowerChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.friendsGroupID=e.popINT(),t.power=e.popBYTE(),t}.bind(this)(e);this.changeFriendsGroupMemberPower(t.friendsGroupID,t.userID,t.power),DataNotify.onFriendsGroupPowerChange(t.friendsGroupID,t.userID,t.power)}},dealFriendsGroupFireCoinChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.friendsGroupID=e.popINT(),t.changInfoList=[];for(var i=1;i<=G_WAR_RECORD_PLAYER_NUM;++i){var o={};o.userID=e.popINT(),o.fireCoin=e.popINT(),o.userID>0&&t.changInfoList.push(o)}return t}.bind(this)(e);for(var i in t.changInfoList)i=t.changInfoList[i],this.changeFriendsGroupMemberFireCoin(t.friendsGroupID,i.userID,i.fireCoin),DataNotify.onFriendsGroupMemberFireCoinChange(t.friendsGroupID,i.userID,i.fireCoin)}},getSelectFriendsGroup:function(){return this.getFriendsGroup(this.selectFriendsGroupID)},setSelectFriendsGroupID:function(e){this.selectFriendsGroupID=e},getSelectFriendsGroupID:function(){return this.selectFriendsGroupID},setZhiDingFriendsGroupID:function(e){var t=UserInfoManager.getMyInfo().userID;cc.sys.localStorage.setItem(tools.stringFormat(G_ZHIDING_CLUB_ID,t),e)},getZhiDingFriendsGroupID:function(){var e=UserInfoManager.getMyInfo().userID;return Number(cc.sys.localStorage.getItem(tools.stringFormat(G_ZHIDING_CLUB_ID,e)))},setJoinRoomScene:function(e){var t=UserInfoManager.getMyInfo().userID;cc.sys.localStorage.setItem(tools.stringFormat(G_JOIN_ROOM_SCENE,t),e)},getJoinRoomScene:function(){var e=UserInfoManager.getMyInfo().userID;return cc.sys.localStorage.getItem(tools.stringFormat(G_JOIN_ROOM_SCENE,e))},clear:function(){this.friendGroupsList={},this.notifyList={},this.notifyRedSpotCount=0,this.msgRedSpotList={},this.instance=null}});t.exports=r,cc._RF.pop()},{ClubLayer:void 0,DataManager:"DataManager",GlobalEnum:"GlobalEnum"}],GameBuyConfigManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"3ba04UGb/VPnJF875ziw0Y1","GameBuyConfigManager"),t.exports=cc.Class({ctor:function(){this.gameBuyConfigList={}},push:function(e,t){this.gameBuyConfigList[e]=t},getGameBuyConfigByGameID:function(e,t){t=t||E_ROOM_TYPE.CARD;var o=[];if(0!==tools.getLength(this.gameBuyConfigList[e]))for(var n,a=i(this.gameBuyConfigList[e]);!(n=a()).done;){var s=n.value;s.roomType===t&&o.push(s)}return o}}),cc._RF.pop()},{}],GameListManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"561abLFwIdLGL++5kJiqF6u","GameListManager");var a=e("../../Conn/ReqHttp").default,s=cc.Class({ctor:function(){this.gameList=[]},requestGameList:function(e){if(0==this.gameList.length){var t=function(t){if(0==t.status){var i=t.data;this.push(i),e&&e(i)}else createTips(t.msg)}.bind(this);a.getGameList(t)}else e(this.gameList)},push:function(e){for(var t in e)this.gameList.push(e[t])},getGameList:function(){return this.gameList},clear:function(){this.gameList=[]},getGameByGameID:function(e){for(var t,o=i(this.gameList);!(t=o()).done;){var n=t.value;if(n.gameID===e)return n}},isBiSaiGame:function(e){return tools.tableContainValue(G_BISAI_GAME_LIST,e)},isSpecialGame:function(e){return tools.tableContainValue(G_SPECIAL_GAME_LIST,e)},isDeskGame:function(e){return tools.tableContainValue(G_DESK_GAME_LIST,e)},isEnterGame:function(e){return tools.tableContainValue(G_ENTER_GAME_LIST,e)},isBRGame:function(e){return tools.tableContainValue(G_BR_GAME_LIST,e)},isTipsGame:function(e){return tools.tableContainValue(G_TIPS_GAME_LIST,e)},isRoomGame:function(e){return tools.tableContainValue(G_ROOM_GAME_LIST,e)}});t.exports=s,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp"}],GameLogicBase:[function(e,t){"use strict";var i;function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"e8afbyfo3lNUZM1lLg0Q36M","GameLogicBase"),t.exports=cc.Class(((i={extends:cc.Component,ctor:function(){this.initLogicBaseData()},initLogicBaseData:function(){},setPlayInfo:function(e,t){if(this.changeTableTime=null,this.gameStatus=-1,this.isGameStationReceived=!1,this.isChangeTable=!1,this.m_game_wait=!0,this.tableUI=e,this._logicInfo=t,this._logicInfo.playInfo)this.seatOffset=0;else{var i=this._logicInfo.seatOffset;this.seatOffset=i||0,this.curBankerSeatNO=G_INVALID_BYTE_VALUE,this.changeTableTime=null,this.gameStatus=-1,this.isGameStationReceived=!1,this.isChangeTable=!1,this.dissmissUserIDList={};for(var o=0;o<G_WAR_RECORD_PLAYER_NUM;o++)this.dissmissUserIDList[o]=0}},setMyMatchDeskInfo:function(e){printInfo(" setMyMatchDeskInfo( MatchDeskInfo )"),this.myMatchDeskInfo=e,MatchManager.setMyMatchGameInfo(e),this.tableUI.showMatchWaitStatus(e)},setMyMatchDeskFinishInfo:function(e){MatchManager.setCurMatchGameInfo(e),this.tableUI.showMatchDeskFinish()},getMyMatchDeskInfo:function(){return this.myMatchDeskInfo},setMatchDeskRankInfo:function(e){2==e.type&&GameSocket.setIsSendLogoutRoom(!0),this.MatchDeskRankInfo=e,MatchManager.setMatchDeskRankInfo(e),this.tableUI.showMatchDeskStatus(e)},setMyMatchGradeInfo:function(e){var t={userID:{},userName:{}};t.userID=e.userid,t.userName=e.name,t.llAllPoint=e.changeGrade,t.llAllPoint_ALL=e.grade,this.tableUI.showMatchGameResult(t)},setMyRankMatchGradeInfo:function(e){var t={};t.userID=e.userID,t.gameExp=e.gameExp,t.UserLevel=e.UserLevel,t.remark=e.remark,this.tableUI.showRankMatchGameResult(t)},setMyRankMatchUserExp:function(e){var t={};t.userID=e.userID,t.gameExp=e.gameExp,t.UserLevel=e.UserLevel,this.tableUI.setRankMatchUserExp(t)},setCheckPointInfo:function(e){this.tableUI.setCheckPointInfo(e)},setCheckPointEnd:function(){this.tableUI.setCheckPointEnd()},getMatchDeskRankInfo:function(){return this.MatchDeskRankInfo},initGameFrameData:function(){this.isGameStationReceived=!1},clearGame:function(){this.initGameFrameData();try{this.unscheduleAllCallbacks()}catch(e){}this.tableUI&&this.tableUI.clearCommonUI(),this.clearUI()},makeAllUserDirty:function(){return GameSocket.makeAllUserDirty()},getMyHeadURL:function(){return GameSocket.getMyInfo().headURL},getMyID:function(){return GameSocket.getMyInfo().userID},getMyDeskNO:function(){return this.getMyInfo()?this.getMyInfo().deskIdx:-1},getMyInfo:function(){return this.getUserByID(this.getMyID())},getMySeatNO:function(){return this.getMyInfo()&&this.getMyInfo().deskStation?this.getMyInfo().deskStation:0},getMyName:function(){return this.getMyInfo()&&this.getMyInfo().name||""},getMyMoney:function(){return this.getMyInfo()&&this.getMyInfo().money||0},getMyGameMoney:function(){return this.getMyMoney()},getDeskInfo:function(){return GameSocket.getDeskInfo()},getCardRoomNum:function(){var e=0;return this.getDeskInfo()&&(e=this.getDeskInfo().deskPasswd),e},getGameCountInfo:function(){var e=0,t=0;return this.getDeskInfo()&&(e=this.getDeskInfo().runGameCount,t=this.getDeskInfo().totalGameCount),[e,t]},getGameCurCount:function(){var e=0;return this.getDeskInfo()&&(e=this.getDeskInfo().runGameCount),e},getGameCurCountData:function(){var e=null;return this.getDeskInfo()&&(e=this.getDeskInfo().runGameCount),e},getGameTotalCount:function(){var e=0;return this.getDeskInfo()&&(e=this.getDeskInfo().totalGameCount),e},getRoomMasterId:function(){var e=0;return this.getDeskInfo()&&(e=this.getDeskInfo().masterID),e},getGameStatus:function(){return this.gameStatus},setGameStatus:function(e){this.gameStatus=e},getCurBankerSeatNO:function(){return this.curBankerSeatNO},setCurBankerSeatNO:function(e){this.curBankerSeatNO=e},getUserByDeskStation:function(e){return GameSocket.getUserByDeskStation(e)},getUserByID:function(e){return GameSocket.getUserByID(e)},getUserInfoListOfLogicSeat:function(){for(var e={},t=0;t<this._logicInfo.seatCount;t++)e[t]=this.getUserBySeat(t);return e},getUserInfoListOfViewSeat:function(){for(var e={},t=0;t<this._logicInfo.seatCount;t++)e[this.logicToViewSeatNo(t)]=this.getUserBySeat(t);return e},getUserMoneyByID:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.userID==e)return i.money}return 0},getSeatByID:function(e){var t=this.getUserByID(e);return t?t.deskStation:0},getViewSeatByID:function(e){var t=this.getUserByID(e);return t?this.logicToViewSeatNo(t.deskStation):null},getUserNameByID:function(e){var t=this.getUserByID(e);return t?t.name:""},getUserSexByID:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.userID==e)return i.sex==E_UserSex.MALE}return!1},setUserSexByID:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];i.userID==e&&i.sex}},getUserNameBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i.name}return""},getUserBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i}return null},getUserSexBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i.sex==E_UserSex.MALE}return!1},getUserIdBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i.userID}return 0},getUserMoneyBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i.money}return 0},getUserHeadURLBySeat:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.deskStation==e)return i.headURL}return""},getUserHeadURLByUserID:function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(i.userID==e)return i.headURL}return""},getNameList:function(){for(var e=[],t=0;t<this._logicInfo.seatCount;t++)e.push(this.getUserNameBySeat(t));return e},getUserIDList:function(){for(var e=[],t=0;t<this._logicInfo.seatCount;t++)e.push(this.getUserIdBySeat(t));return e},getHeadURLList:function(){for(var e=[],t=0;t<this._logicInfo.seatCount;t++)e.push(this.getUserHeadURLBySeat(t));return e},getRealPokeValue:function(){createTips("getRealPokeValue todooooooooo")},updateUserMoney:function(e,t,i,o,n,a){var s=this.getUserByID(e);s&&(console.log(tools.getCurTime()+" updateUserMoney uid:"+e+" seat:"+s.deskStation+" viewSeat:"+this.logicToViewSeatNo(s.deskStation)+" value:"+t+" lastValue:"+i+" resType:"+o+" isMagice:"+n+" reason:"+a),this.tableUI.updateUserMoney(this.logicToViewSeatNo(s.deskStation),t,i,o,n,a))},updateUserJewels:function(e,t){var i=this.getUserByID(e);i&&this.tableUI.updateUserJewels(this.logicToViewSeatNo(i.deskStation),t)},isUserPlaying:function(e){if((this.isBuyRoom()||this.isPrivateRoom()||this.isVIPRoom())&&this.getGameCountInfo()[0]>0)return!0;var t=this.getUserBySeat(e);return!(!t||E_UserStatus.USER_STATUS_PLAYING!=t.userStatus)},isUserTuoGuan:function(e){var t=this.getUserBySeat(e);return!(!t||!t)&&t.isAuto},isMePlaying:function(){return this.isUserPlaying(this.getMySeatNO())},isDeskPlaying:function(){for(var e,t=o(GameSocket.getDeskUserList());!(e=t()).done;){var i=e.value;if(E_UserStatus.USER_STATUS_PLAYING==i.userStatus)return!0}return!1},isMeWatching:function(){return GameSocket.getMyInfo().userStatus==E_UserStatus.USER_STATUS_WATCH},isMeReady:function(){var e=this.getUserByID(this.getMyID());return!(!e||E_UserStatus.USER_STATUS_AGREE!=e.userStatus)},isMeTuoGuan:function(){var e=this.getUserByID(this.getMyID());return!!e&&e.isAuto},isBuyRoom:function(){return!!GameSocket&&GameSocket.isBuyRoom()},isTableRoom:function(){return!!this.GameSocket&&this.GameSocket.isTableRoom()},isGoldRoom:function(){return!!GameSocket&&(GameSocket.isGoldRoom()||GameSocket.isRankMatchRoom()||GameSocket.isCheckPointRoom())},isPrivateRoom:function(){return!!GameSocket&&GameSocket.isPrivateRoom()},isCostGold:function(){return!(!this.isPrivateRoom()&&!this.isGoldRoom())},isMatchRoom:function(){return!!GameSocket&&GameSocket.isMatchRoom()},isBarrierMatchRoom:function(){return!!GameSocket&&GameSocket.isBarrierMatchRoom()},isRankMatchRoom:function(){return!!GameSocket&&GameSocket.isRankMatchRoom()},isCheckPointRoom:function(){return!!GameSocket&&GameSocket.isCheckPointRoom()},isVIPRoom:function(){return!!GameSocket&&GameSocket.isVIPRoom()},isRoom:function(){return!!GameSocket&&GameSocket.isRoom()},viewToLogicSeatNo:function(e){return GameSocket.isBRGame()?e:e<0||e>=this._logicInfo.seatCount?G_INVALID_BYTE_VALUE:(e-this.seatOffset+this._logicInfo.seatCount)%this._logicInfo.seatCount},logicToViewSeatNo:function(e){return GameSocket.isBRGame()?e:e<0||e>=this._logicInfo.seatCount?G_INVALID_BYTE_VALUE:(e+this.seatOffset+this._logicInfo.seatCount)%this._logicInfo.seatCount},removeAllDeskUser:function(){for(var e=0;e<this._logicInfo.seatCount;e++)this.tableUI.removeUser(e)},loadDeskUser:function(){var e=this;this.seatOffset=this._logicInfo.seatOffset?this._logicInfo.seatOffset:-this.getMySeatNO();var t=UserInfoManager.getMyInfo().userID,i=GameSocket.getDeskUserList(),o=i.length,n=i.find(function(e){return e.userID==t}),a=n?n.deskStation:0;switch(o){case 2:i.map(function(i){var o=i.userID==t?0:2;e.tableUI.addUser(i,o)});break;case 3:for(var s=0;s<o;s++){var r=i[s],c=(r.deskStation+o-a)%o;c=2==c?3:c,this.tableUI.addUser(r,c)}break;default:for(var u=0;u<o;u++){var h=i[u],l=(h.deskStation+o-a)%o;this.tableUI.addUser(h,l)}}},updateDeskUser:function(e){console.log("GameLogicBase:updateDeskUser(user) {0}",e.deskStation),this.tableUI.addUser(e,this.logicToViewSeatNo(e.deskStation)),this.onUpdateDeskUser(e)},setDeskExpUserLevelInfo:function(e){this.tableUI.setDeskExpUserLevelInfo(e)},setDeskCheckPointInfo:function(e){this.tableUI.setDeskCheckPointInfo(e)},sendDeskCheckPointInfo:function(){GameSocket.requestDeskCheckPointInfo()},dealNotifyDeskUserLogonORoutRoom:function(e){this.tableUI.dealNotifyDeskUserLogonORoutRoom(e)},dealNotifyDeskUserIsTourist:function(e){this.tableUI.dealNotifyDeskUserIsTourist(e)},sendDeskInfo:function(){(this.isBuyRoom()||this.isPrivateRoom()||this.isVIPRoom())&&GameSocket.requestDeskInfo()},sendGameInfo:function(){GameSocket.requestGameInfo()},sendDeskUserInfo:function(){GameSocket.requestDeskUserInfo()},sendDeskOneUserInfo:function(e,t){GameSocket.requestDeskOneUserInfo(e,t)},sendAgreeGame:function(){GameSocket.requestAgreeGame()},requestGameNotPrompt:function(e){GameSocket.requestGameNotPrompt(e)},sendChatMessage:function(e){GameSocket.requestTalk(e)},sendStand:function(){GameSocket.requestStand()},sendStandandWatch:function(){GameSocket.requestStandandWatch()},sendLogoutRoom:function(e){GameSocket.requestLogoutRoom(e),GameSocket.setIsSendLogoutRoom(!0)},onDissRoomFun:function(e){if(this.getMyID()==e){var t=function(e){"\u786e  \u5b9a"==e&&this.sendDismissRoom()}.bind(this),i={msg:"\u786e\u5b9a\u8981\u63d0\u524d\u89e3\u6563\u623f\u95f4\u5417\uff1f",btn1:"\u786e  \u5b9a"};i.callbackFun=t,createMsgBox(i)}else createTips("\u623f\u4e3b\u624d\u80fd\u89e3\u6563\u623f\u95f4")},doDismissRoom:function(){var e=this;if(!LobbySocket.isConnected())return LobbySocket.clear(),void this.backLobby();if(this.isGoldRoom())createTips("\u91d1\u5e01\u573a\u6ca1\u6709\u89e3\u6563\u623f\u95f4\u529f\u80fd\uff01");else if(this.isMeWatching())createTips("\u65c1\u89c2\u72b6\u6001\u4e0d\u53ef\u4ee5\u7533\u8bf7\u89e3\u6563\u623f\u95f4\uff01");else if(this.isMatchRoom())createTips("\u6bd4\u8d5b\u573a\u4e0d\u53ef\u4ee5\u7533\u8bf7\u89e3\u6563\u623f\u95f4\uff01");else if(this.isBuyRoom()||this.isPrivateRoom()||this.isVIPRoom())if(this.getGameCountInfo()[0]>0){var t=function(e){"\u786e  \u5b9a"==e&&this.sendDismissRoom()}.bind(this),i={msg:"\u786e\u5b9a\u8981\u7533\u8bf7\u89e3\u6563\u623f\u95f4\u5417\uff1f",btn1:"\u786e  \u5b9a",btn2:"\u53d6  \u6d88"};i.callbackFun=t,createMsgBox(i)}else{var o=this.getRoomMasterId();0==o?(this.callbackGetMasterId=function(){var t=e.getRoomMasterId();0!=t&&(e.onDissRoomFun(t),e.unschedule(e.callbackGetMasterId))},this.schedule(this.callbackGetMasterId,.1)):this.onDissRoomFun(o)}},doLeftRoom:function(){LobbySocket.isConnected()?(this.sendStand(),this.isMeWatching()&&this.backLobby()):this.backLobby()},sendAnswerDismiss:function(e){GameSocket.requestAnswerDismiss(e)},sendDismissRoom:function(){GameSocket.requestDismissRoom()},sendChangeDesk:function(){if(this.changeTableTime){var e=Math.ceil(Date.parse(new Date)-this.changeTableTime);if(5-e>0)return void createTips(string.format("\u6362\u684c\u592a\u9891\u7e41\u4e86\uff0c\u8bf7%s\u79d2\u540e\u91cd\u8bd5",5-e))}this.changeTableTime=Date.parse(new Date),this.isChangeTable=!0;var t=this.getMyDeskNO();GameSocket.requestChangeDesk(t)},requestCreaterDesk:function(e){GameSocket.requestCreaterDesk(e)},sendAuto:function(e){e?GameSocket.requestAuto():GameSocket.requestCancelAuto()},sendMagicExpress:function(e,t){if(this.isMeWatching())return createTips("\u65c1\u89c2\u72b6\u6001\u4e0d\u53ef\u4ee5\u53d1\u9001\u9b54\u6cd5\u8868\u60c5");GameSocket.requestMagicExpress(e,t)},sendStart:function(){GameSocket.requestStart()},sendSit:function(e){GameSocket.requestRoomSit(e)},sendActionChange:function(e){GameSocket.requestActionChange(e)},onSystemMessage:function(e){this.tableUI.showSystemMsg(e)},dealNotifyDeskUserOffline:function(e){this.tableUI.showUserCut(this.getViewSeatByID(e.userID))},dealNotifyDeskUserSit:function(e){this.getMyID()==e.userID&&this.isChangeTable&&(createTips("\u6362\u684c\u6210\u529f"),removeLoading(),this.isChangeTable=!1,this.changeTableClearUI()),this.tableUI.removeAllPlayerUI(),this.loadDeskUser(),this.tableUI.onDeskUserSit(e)},dealNotifyDeskUserAgree:function(e){this.tableUI.onDeskUserAgree(e)},dealNotifyDeskGameBegin:function(){console.log("GameLogicBase:dealNotifyDeskGameBegin \u6536\u5230\u672c\u684c\u6e38\u620f\u5f00\u59cb\u6d88\u606f"),this.gameBeginClearUI(),this.tableUI.dealNotifyDeskGameBegin(),this.sendDeskInfo(),this.isMatchRoom()&&(this.tableUI.removeAllMatchLayer(),MatchManager.getCurRoundIsEnd()&&(MatchManager.setCurRoundIsEnd(!1),this.tableUI.playMatchBeginEffect())),this.isCheckPointRoom()&&(this.tableUI.removeMatchCheckPointResultLayer(),this.sendDeskCheckPointInfo()),this.isRankMatchRoom()&&this.setDeskExpUserLevelInfo()},dealNotifyDeskGameFinish:function(e){console.log("GameLogicBase:dealNotifyDeskGameFinish \u6536\u5230\u672c\u684c\u6e38\u620f\u7ed3\u675f\u6d88\u606f"),this.tableUI.dealNotifyDeskGameFinish(e)},onGameInfoResp:function(e){this.gameStatus=e.popBYTE(),this.gameRules=e.popNCHAR(256),this.tableUI.updateRulesView(this.gameRules),this.isCheckPointRoom()&&(!this.curRequestCheckPointTime||(new Date).getTime()-this.curRequestCheckPointTime>3e3)&&(this.sendDeskCheckPointInfo(),this.curRequestCheckPointTime=(new Date).getTime()),this.isRankMatchRoom()&&(!this.curRequestRankMatchTime||(new Date).getTime()-this.curRequestRankMatchTime>3e3)&&(this.setDeskExpUserLevelInfo(),this.curRequestRankMatchTime=(new Date).getTime())},loginRoom:function(t,i,o){console.log("GameLogicBase:loginRoom ",t,i,o);var n=new(e("LoginRoomLogic")),a=RoomListManager.getRoomByRoomID(t),s=LobbySocket.getMyInfo(),r=globalThis.MatchManager.getCurCheckPointInfo().config[i-1];null!=r&&(s.money<r.cost?globalThis.createTips("\u91d1\u5e01\u4e0d\u8db3"):n.enterRoom(a,s.userID,s.userToken,i,o))},onGameStationResp:function(e){console.log("in GameLogicBase:onGameStationResp \u6536\u5230GameStation\u6e38\u620f\u72b6\u6001\u6d88\u606f"),this.isGameStationReceived=!0;var t=RoomListManager.getRoomInfo().gameID;20161010!=t&&23510004!=t&&20161004!=t&&20173124!=t?(!this.curDealGameStationRespTime||(new Date).getTime()-this.curDealGameStationRespTime>2e3)&&(this.dealGameStationResp(e),this.curDealGameStationRespTime=(new Date).getTime()):this.dealGameStationResp(e)},onGameMessage:function(e){console.log(e),this.isGameStationReceived?this.dealGameMessage(e):console.log("\u6ca1\u6709\u6536\u5230gamestation\u4e4b\u524d\u4e0d\u80fd\u63a5\u6536\u6e38\u620f\u6d88\u606f \u6d88\u606f\u5b50id = %d",e.bAssistantID)},dealNotifyDeskBaseInfo:function(e){this.tableUI.showVipRoomInfo(e)},dealNotifyDeskDismissInfo:function(e){if(console.log("+++++++++++++++++++++++++++++++++++++"),!this.isMeWatching()){var t=function(e){this.sendAnswerDismiss(e)}.bind(this);this.tableUI.createDismissRoomLayer(e,t)}},dealNotifyDeskDismissOK:function(e){if(e.bReqDismiss)if(e.isDismissMidway){var t=function(e){if("\u786e  \u5b9a"==e||"\u53d6  \u6d88"==e){var t=this.getGameCountInfo();console.log(t);var i=t[0];console.log(i),this.tableUI.showBuyRoomInfo(!1),this.tableUI.removeDismissRoomLayer(),this.tableUI.removeTuoGuanLayer(),this.sendLogoutRoom(),this.backLobby()}}.bind(this),i={};i.msg="\u73a9\u5bb6 "+e.name+" \u53d1\u8d77\u89e3\u6563\u6295\u7968\uff0c\u623f\u95f4\u5df2\u89e3\u6563",i.btn1="\u786e  \u5b9a",i.callbackFun=t,createMsgBox(i)}else this.tableUI.showBuyRoomInfo(!1),this.tableUI.removeDismissRoomLayer(),this.tableUI.removeTuoGuanLayer(),this.sendLogoutRoom(),this.backLobby()},dealNotifyRandomChangeSeat:function(e,t){this.tableUI.dealNotifyRandomChangeSeat(e,t)},dealNotifyTimeoutCannotOut:function(e){var t=function(e){if("\u786e  \u5b9a"==e||e==btnName2){var t=this.getGameCountInfo();console.log(t);var i=t[0];console.log(i),i<=0?this.backLobby():this.showAllResultUI(),this.tableUI.showBuyRoomInfo(!1),this.tableUI.removeDismissRoomLayer(),this.tableUI.removeTuoGuanLayer(),this.sendLogoutRoom(),this.backLobby()}}.bind(this),i={};i.msg=e,i.btn1="\u786e  \u5b9a",i.callbackFun=t,createMsgBox(i)},dealNotifyDeskDismissFailed:function(){this.tableUI.removeDismissRoomLayer(),createTips("\u7533\u8bf7\u89e3\u6563\u623f\u95f4\u5931\u8d25")},dealNotifyDeskTalk:function(e){console.log("GameLogicBase dealNotifyDeskTalk ",e.userID),this.getUserByID(e.userID)&&(console.log("GameLogicBase dealNotifyDeskTalk \u6709\u8fd9\u4e2a\u4eba\u54e6",e.userID),this.tableUI.showUserWords(this.getViewSeatByID(e.userID),e.words))},dealNotifyDeskVoice:function(e){this.tableUI.playVoiceH5(e.voiceID)},dealNotifyDeskGrade:function(e,t,i){this.updateUserMoney(e,t,i,null,!1,0)},dealNotifyDeskMoney:function(e,t,i,o,n,a){n||(n=E_ResourceType.GOLD),this.updateUserMoney(e,t,i,n,o,a)},dealNotifyDeskJewels:function(e,t){this.updateUserJewels(e,t)},dealNotifyDeskUserLeft:function(e,t,i){if(this.getMyID()==e.userID){this.isChangeTable&&(console.log("this.isChangeTable = true"),this.removeAllDeskUser(),GameSocket.__removeAllDeskUser(),this.sendDeskUserInfo());var o=function(){this.backLobby()}.bind(this);E_ReasonKickout.REASON_KICKOUT_DEFAULT==i?(this.sendLogoutRoom(),createClickTips("\u60a8\u5df2\u88ab\u8bf7\u79bb\u6e38\u620f",o)):E_ReasonKickout.REASON_KICKOUT_STAND==i?(console.log("REASON_KICKOUT_STAND"),this.isChangeTable||(this.sendLogoutRoom(),this.backLobby())):E_ReasonKickout.REASON_KICKOUT_NOTAGREE==i?(this.sendLogoutRoom(),createClickTips("\u7531\u4e8e\u60a8\u957f\u65f6\u95f4\u672a\u51c6\u5907\u88ab\u8bf7\u79bb\u6e38\u620f",o)):E_ReasonKickout.REASON_KICKOUT_STAND_MINLIMIT==i?(this.sendLogoutRoom(),createClickTips("\u60a8\u7684\u91d1\u5e01\u5df2\u4f4e\u4e8e\u623f\u95f4\u4e0b\u9650",o)):E_ReasonKickout.REASON_KICKOUT_STAND_MAXLIMIT==i?(this.sendLogoutRoom(),createClickTips("\u60a8\u7684\u91d1\u5e01\u5df2\u8d85\u51fa\u623f\u95f4\u4e0a\u9650",o)):E_ReasonKickout.REASON_KICKOUT_STAND_FIRECOIN_MINLIMIT==i?(this.sendLogoutRoom(),createClickTips("\u60a8\u7684\u4ff1\u4e50\u90e8\u706b\u5e01\u5df2\u4f4e\u4e8e\u623f\u95f4\u6700\u4f4e\u9650\u5236",o)):E_ReasonKickout.REASON_KICKOUT_STAND_FIRECOIN_MAXLIMIT==i?(this.sendLogoutRoom(),createClickTips("\u60a8\u7684\u4ff1\u4e50\u90e8\u706b\u5e01\u5df2\u9ad8\u4e8e\u623f\u95f4\u6700\u4f4e\u9650\u5236",o)):E_ReasonKickout.REASON_KICKOUT_LONG_TIME_NOOPERATION==i?(this.sendLogoutRoom(),createClickTips("\u7531\u4e8e\u60a8\u957f\u65f6\u95f4\u672a\u64cd\u4f5c\u88ab\u8bf7\u79bb\u6e38\u620f",o)):E_ReasonKickout.REASON_KICKOUT_BARRIERMATCH_FAIL==i?(this.sendLogoutRoom(),createClickTips("\u7531\u4e8e\u60a8\u95ef\u5173\u5931\u8d25\u88ab\u8bf7\u79bb\u6e38\u620f",o)):(this.sendLogoutRoom(),createClickTips("\u672a\u5b9a\u4e49\u7684reasonCode = "+i,o))}else GameSocket.isBRGame()||this.tableUI.removeUser(this.logicToViewSeatNo(t)),this.tableUI.onDeskUserCountChange()},dealNotifyDeskUserChangedeskstation:function(e){this.tableUI.removeUser(this.logicToViewSeatNo(e));var t=this.getUserByDeskStation(e);t&&t.userID==GameSocket.getMyInfo().userID&&(GameSocket.getMyInfo().userStatus=E_UserStatus.USER_STATUS_WATCH)},getLeftReadyTime:function(){return GameSocket.getLeftReadyTime()},setLeftReadyTime:function(e){GameSocket.setLeftReadyTime(e)},getCfgReadyTime:function(){return GameSocket.getCfgReadyTime()},dealNotifyDeskIsAuto:function(e){this.tableUI.updateUserTuoGuan(e)},dealNotifyDeskMagicExpress:function(e,t,i){var o=t.userID,n=e.userID;this.tableUI.playMagicExpress(n,o,i);var a=USER_MAGICEXPRESSCOSTDIAMON[i-1];if(0!=(a=parseInt(a+""))){var s=null;for(var r in this.tableUI.private_PlayerUiList){var c=this.tableUI.private_PlayerUiList[r];c&&c.user.userID==n&&(s=r)}if(null!=s){var u=this.tableUI.private_PlayerUiList[s];if(u){getFloatScore(u.node,-a);var h=this.getUserByID(n).money-a;this.getUserByID(n).money=h}}else{var l=this.tableUI.getGameViewOhtersNode();l&&(getFloatScore(l,-a),this.getUserByID(n).money=this.getUserByID(n).money-a)}}},dealNotifyDeskSitFull:function(){createTips("\u684c\u5b50\u5df2\u7ecf\u5750\u6ee1\u4e86")},dealNotifyDeskCanBegin:function(){this.tableUI.dealNotifyDeskCanBegin()},dealNotifyDeskCannotbegin:function(){this.tableUI.dealNotifyDeskCannotbegin()},dealNotifyRecharge:function(e){if(this.isVIPRoom()){var t=function(e){"\u79bb\u5f00\u6e38\u620f"==e&&this.sendStand()}.bind(this),i={};i.msg=string.format("\n\u60a8\u7684\u706b\u5e01\u6570\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u4ff1\u4e50\u90e8\u7fa4\u4e3b\u5145\u503c\u706b\u5e01\uff0c\u81f3\u5c11\u5145\u503c"+e.needGold+"\u706b\u5e01\u540e\u624d\u53ef\u4ee5\u7ee7\u7eed\u6e38\u620f"),i.btn1="\u79bb\u5f00\u6e38\u620f",i.btn2="\u7ee7\u7eed\u6e38\u620f",i.callbackFun=t,createMsgBox(i)}else{var o=function(){this.sendStand()}.bind(this);this.tableUI.createBuyGoldLayer(e,o)}},dealNotifyDeskDissmissUserID:function(e){this.dissmissUserIDList=e}}).dealNotifyDeskDissmissUserID=function(e){this.dissmissUserIDList=e},i.dealNotifyERRMsg=function(e,t){if(!tableIsEmpty(E_NOTIFY_MSG_TYPE))for(var i in E_NOTIFY_MSG_TYPE)(e&E_NOTIFY_MSG_TYPE[i])==E_NOTIFY_MSG_TYPE[i]&&this.tableUI.dealNotifyERRMsg(E_NOTIFY_MSG_TYPE[i],t)},i.getDissmissUserIDList=function(e){e=e||G_WAR_RECORD_PLAYER_NUM;for(var t={},i=0;i<e;i++){var o=this.dissmissUserIDList[i];t[i]=o||0}return t},i.getGameRules=function(){return this.gameRules?this.gameRules:""},i.getDeskUserCount=function(){return GameSocket.getDeskUserCount()},i.onDeskUserCountChange=function(){this.tableUI&&this.tableUI.onDeskUserCountChange()},i.getDeskUserCountByUserList=function(){return null!=GameSocket.getDeskUserList()?GameSocket.getDeskUserList().length:0},i.getUserByIndex=function(e){for(var t=0;t<GameSocket.getDeskUserList().length;t++){var i=GameSocket.getDeskUserList()[t];if(t==e)return i}return null},i.makeChouMaDeskStation=function(){var e=this.getDeskUserCount(),t=Math.random()*e+1,i=this.getUserByIndex(t);return i?i.deskStation:0},i.backLobby=function(){console.log("GameLogicBase:backLobby"),E_ROOM_TYPE.GOLD,this.isBuyRoom()||this.isPrivateRoom()||this.isVIPRoom()?E_ROOM_TYPE.CARD:this.isGoldRoom()&&E_ROOM_TYPE.GOLD,LOOBBY_STATIC=!1,cc.director.loadScene("main"),LobbySocket.setTCPHeartCheckInterval(15)},i.dealGameStationResp=function(){},i.dealGameMessage=function(){},i.dealNotifyDeskGameYanCode=function(){},i.clearUI=function(){},i.changeTableClearUI=function(){},i.gameBeginClearUI=function(){},i.showAllResultUI=function(){this.backLobby()},i.onUpdateDeskUser=function(){},i.updateUserCount=function(){},i.StandUserinfor=function(){},i.setGameRuleInfo=function(){},i.isSitDown=function(){return!1},i.isPlayStatic=function(){return this.getGameStatus()==HZMJ_GameStation.GS_STATUS_PLAYING||!this.isMeReady()},i.onDestroy=function(){this.unscheduleAllCallbacks()},i)),cc._RF.pop()},{LoginRoomLogic:"LoginRoomLogic"}],GameManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"e6e2boucfZDlbhZSJdGdrlM","GameManager");var a=["1-50","5-100","10-200","20-500"],s=cc.Class({ctor:function(){this.gameID=-1,this.ui=null,this.logic=null},getRegistGameNameByGameID:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.id===e)return n.name}},getGamePicPathByGameID:function(e){for(var t in G_REGIST_GAME_LIST){var i=G_REGIST_GAME_LIST[t];if(i.id==e)return i.picName}return""},getGameSceneByGameID:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.id===e)return n.sceneName}},getGameIDByGameSceneName:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.sceneName===e)return n.id}},getGameIDByGameName:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.name===e)return n.id}},init:function(){this.gameID=-1,this.ui=null,this.logic=null},setGameInfo:function(e,t){this.init(),this.gameID=e,this.playInfo=t},setGame:function(){if(console.log(">>>>>>setGamesetGamesetGame"),this.ui&&this.logic){if(this.ui.initTableLogic(this.logic),this.playInfo);else{var e=RoomListManager.getRoomInfo().roomID,t=UserInfoManager.getMyInfo().checkPointsNum||0,i=UserInfoManager.getMyInfo().userID,o=UserInfoManager.getMyInfo().userToken,n=UserInfoManager.getMyInfo().costType||0;GameSocket.requestLoginRoom(e,i,o,t,n)}this.setUICallback(this.playInfo),this.setLogicCallback(this.playInfo)}},setUI:function(e,t){this.ui=e,this.setUICallback=t,this.setGame()},setLogic:function(e,t){this.logic=e,this.setLogicCallback=t,this.setGame()},runGame:function(){this.getGameSceneByGameID(this.gameID),createLoading("\u6e38\u620f\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e..",80,!0);var e=window.BundleName;cc.assetManager.loadBundle(e,function(e,t){t.loadScene("HZMJ",null,function(e,t){window.HZMJIsInited=!0,cc.director.runScene(t)})})},getGameID:function(){return this.gameID},getGameTypeByGameID:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.id===e)return n.gameType}return null},getGamePathByGameID:function(e){for(var t,o=i(G_REGIST_GAME_LIST);!(t=o()).done;){var n=t.value;if(n.id===e)return n.path}return null},checkGameHotUpdate:function(){console.log("\u68c0\u67e5\u6e38\u620f\u66f4\u65b0")},onGameUpdateSucceed:function(){GameSocket.__enterGame()},setBetButtonImage:function(){var e="",t="",i=GameSocket.getRoomInfo();if(i){var o=this.getGameTypeByGameID(i.gameID);o==E_GameType.DW?e="dw"+G_MULTI_NUM+"/":o==E_GameType.BR&&(e="br"+G_MULTI_NUM+"/"),t=i.level+"/"}console.log(e+">>>>>>>>roomInfo.level"+i.level),console.log(t+">>>>>>>>roomInfo.level"+i.level)},setBetImage:function(){var e=GameSocket.getRoomInfo();if(e){var t=this.getGameTypeByGameID(e.gameID);t==E_GameType.DW?string.format("dw%d/",G_MULTI_NUM):t==E_GameType.BR&&string.format("br%d/",G_MULTI_NUM),console.log("levelNamelevelNamelevelName"+e.level)}},getGameLogic:function(){return this.logic},getGameUI:function(){return this.ui},getGameTypeByJsonRule:function(e,t){var i=JSON.parse(t);return this.getGameTypeByPlayMode(e,i.gameIdx)},getGameTypeByPlayMode:function(){return"\u7ecf\u5178\u73a9\u6cd5"},getDifenByPlayType:function(e){return["10/20/30\n(5/10/15)","30/40/50\n(10/20/30)","30/50/70\n(10/20/30)","50/80/100\n(20/30/40)"][Number(e)-1]},getJiaoFenByPlayType:function(e){return["(\u70e7\u5206)","(\u7f34\u5206)"][Number(e)]},getMPointByJsonRule:function(e){return JSON.parse(e).mPoint||0},getBPointByJsonRule:function(e,t){var i=JSON.parse(t);return 30100108==e?a[i.betv]:i.bPoint||1},getLPointByJsonRule:function(e){return JSON.parse(e).lPoint||0},getCCSLByJsonRule:function(e){return JSON.parse(e).cCSL||0},getRoomTypeByJsonRule:function(e,t){return JSON.parse(t).roomType||1},getRoomListRsJsonRule:function(e){var t="";if(e){var i=JSON.parse(e);2==i.rs?t="\u4e8c\u4eba":3==i.rs?t="\u4e09\u4eba":4==i.rs&&(t="\u56db\u4eba")}return t},getRoomListTimeJsonRule:function(e){var t="";if(e){var i=JSON.parse(e);15==i.count||24==i.count||30==i.count||60==i.count?t=i.count+"\u5206\u949f":8!=i.count&&16!=i.count||(t=i.count+"\u5c40")}return t},getGameNameByGameID:function(e){var t="";return 20161004==e?t="\u8c61\u5c71":20211004==e&&(t="\u897f\u5468"),t},getRoomListTypeJsonRule:function(e){var t="";if(e){var i=JSON.parse(e);1==i.model||7==i.model?t="\u6e0510\u6df78":2==i.model||8==i.model?t="\u6e0512\u6df78":3==i.model||9==i.model?t="\u6e0512\u6df710":4==i.model||10==i.model?t="\u6e0514\u6df712":5==i.model||11==i.model?t="\u6e0516\u6df714":6!=i.model&&12!=i.model||(t="\u6e0518\u6df716")}return t}});t.exports=s,cc._RF.pop()},{}],GameProtocolId:[function(e,t){"use strict";cc._RF.push(t,"464c0BRJ4NH5riHcrw4rG62","GameProtocolId"),window.MSG_MAIN_LOADER_LOGON=500,window.MSG_ASS_LOADER_LOGON=1,window.MSG_ASS_LOADER_LOGOUT=2,window.MSG_ADD_LOADER_CHECK_LOGON=3,window.MSG_MAIN_LOADER_ACTION=501,window.MSG_ASS_LOADER_ACTION_SIT=1,window.MSG_ASS_LOADER_ACTION_STAND=2,window.MSG_ASS_LOADER_ACTION_MATCH_SIT=3,window.MSG_ASS_LOADER_GAME_BEGIN=5,window.MSG_ASS_LOADER_ACTION_CHANGE_DESKSTATION=8,window.MSG_ASS_LOADER_ACTION_STAND_AND_WATCH=9,window.MSG_MAIN_LOADER_FRAME=502,window.MSG_ASS_LOADER_DESK_INFO=1,window.MSG_ASS_LOADER_GAME_INFO=2,window.MSG_ASS_LOADER_GAME_STATION=3,window.MSG_ASS_LOADER_DESK_USERINFO=4,window.MSG_ASS_LOADER_DESK_ONE_USERINFO=5,window.MSG_ASS_LOADER_DESK_CHECKPOINT_INFO=6,window.MSG_MAIN_LOADER_GAME=503,window.MSG_ASS_LOADER_GAME_AGREE=1,window.MSG_ASS_LOADER_GAME_AUTO=2,window.MSG_ASS_LOADER_GAME_CANCEL_AUTO=3,window.MSG_ASS_LOADER_GAME_MAGICEXPRESS=4,window.MSG_ASS_LOADER_GAME_NOT_PROMPT=5,window.MSG_MAIN_LOADER_DESKDISSMISS=504,window.MSG_ASS_LOADER_REQ_DESKDISSMISS=1,window.MSG_ASS_LOADER_ANSWER_DESKDISMISS=2,window.MSG_MAIN_LOADER_NOTIFY=505,window.MSG_NTF_LOADER_DESK_GAMEBEGIN=1,window.MSG_NTF_LOADER_DESK_BASEINFO=2,window.MSG_NTF_LOADER_DESK_DISMISS_OK=3,window.MSG_NTF_LOADER_DESK_DISMISS_FAILED=4,window.MSG_NTF_LOADER_DESK_ALL_USERINFO=5,window.MSG_NTF_LOADER_DESK_DISSMISS_INFO=6,window.MSG_NTF_LOADER_DESK_TALK=7,window.MSG_NTF_LOADER_DESK_VOICE=8,window.MSG_NTF_LOADER_DESK_GAMEFINISH=9,window.MSG_NTF_LOADER_DESK_GRADE=10,window.MSG_NTF_LOADER_DESK_MONEY=11,window.MSG_NTF_LOADER_DESK_LEFT_WAITAGREE_TIME=12,window.MSG_NTF_LOADER_DESK_ISAUTO=13,window.MSG_NTF_LOADER_DESK_MAGICEXPRESS=14,window.MSG_NTF_LOADER_DESK_SITFULL=15,window.MSG_NTF_LOADER_DESK_CANBEGIN=16,window.MSG_NTF_LOADER_DESK_STOP_JOIN=17,window.MSG_NTF_LOADER_RECHARGE=18,window.MSG_NTF_LOADER_DESK_HUNDRED_ALL_USER=19,window.MSG_NTF_LOADER_DESK_DISMISS_USERID=20,window.MSG_NTF_LOADER_ERR_MSG=21,window.MSG_NTF_LOADER_DESK_JEWELS=22,window.MSG_NTF_LOADER_DESK_NO_USER=23,window.MSG_NTF_LOADER_DESK_MATCH_STATUS=24,window.MSG_NTF_LOADER_DESK_FINISH_MATCH=25,window.MSG_NTF_LOADER_MATCH_RANK=26,window.MSG_NTF_LOADER_DESK_MATCH_GRADE=27,window.MSG_NTF_LOADER_DESK_RANKMATCH_LEVEL=28,window.MSG_NTF_LOADER_DESK_USEREXP=29,window.MSG_NTF_LOADER_DESK_USER_CHECKPOINT=30,window.MSG_NTF_LOADER_DESK_USER_CHECKPOINT_END=31,window.MSG_NTF_LOADER_RANDOM_CHANGE_SEAT=36,window.MSG_NTF_LOADER_TIMEOUT_CANNOT_OUT=33,window.MSG_NTF_LOADER_DISCONNECT_TIMEOUT=34,window.MSG_NTF_LOADER_WILL_DISSOLVE_DESK=35,window.MSG_NTF_LOADER_DESK_CANNOTBEGIN=32,window.MSG_MAIN_LOADER_NOTIFY_USER=506,window.MSG_NTF_LOADER_DESK_USER_INFO=1,window.MSG_NTF_LOADER_DESK_USER_SIT=2,window.MSG_NTF_LOADER_DESK_USER_AGREE=3,window.MSG_NTF_LOADER_DESK_USER_LEFT=4,window.MSG_NTF_LOADER_DESK_USER_OFFLINE=5,window.MSG_NTF_LOADER_DESK_USER_CHANGEDESKSTATION=8,window.MSG_NTF_LOADER_DESK_USER_STANDANDWATCH=9,window.MSG_NTF_LOADER_DESK_USER_LOGONOROUTROOM=10,window.MSG_NTF_LOADER_DESK_USER_IS_TOURIST=11,window.MSG_MAIN_LOADER_VOICEANDTALK=507,window.MSG_ASS_LOADER_TALK=1,window.MSG_ASS_LOADER_VOICE=2,window.MSG_MAIN_LOADER_RESOURCE_CHANGE=508,window.MSG_MAIN_LOADER_MATCH=509,window.MSG_ASS_LOADER_MATCH_ALL_DESK_DATA=1,window.MSG_ASS_LOADER_MATCH_ENTER_WATCH_DESK=2,window.MSG_ASS_LOADER_MATCH_QUIT_WATCH_DESK=3,window.MSG_ASS_LOADER_MATCH_RANK=4,window.MGS_ASS_LOADER_GET_RANK=5,window.MSG_ASS_LOADER_REVIVE_USER=6,window.MSG_MAIN_LOADER_VCODE=1e3,window.MSG_ASS_LOADER_DESK_VCODE_RET=1,window.MSG_ASS_LOADER_DESK_GET_VCODE_REC=2,window.MSG_ASS_LOADER_DESK_GET_VCODE_REC_USER=3,window.MSG_NTF_LOADER_DESK_VCODE=4,cc._RF.pop()},{}],GameSetLayer:[function(e,t){"use strict";cc._RF.push(t,"6b3ecMRTm1OeJ/d2IeSvgtr","GameSetLayer"),cc.Class({extends:e("BaseLayer"),properties:{outCard_Node:[cc.Node],soundType_Node:[cc.Node],tingcard_Node:[cc.Node],cardcolor_Node:[cc.Node],gameback_Node:[cc.Node]},onEnable:function(){var t=Number(cc.sys.localStorage.getItem(G_OUTCARD_SOUND)||2),i=Number(cc.sys.localStorage.getItem(G_SOUND_TYPE)||3);3==i&&(i=1==(new(e("LobbyLogic"))).getMyInfo().sex?0:1);var o=Number(cc.sys.localStorage.getItem(G_TING_CARD)||0),n=Number(cc.sys.localStorage.getItem(G_CARD_COLOR)||0),a=Number(cc.sys.localStorage.getItem(G_GAME_BACK)||0);this.outCard_Node[t]&&(this.outCard_Node[t].getComponent(cc.Toggle).isChecked=!0),this.soundType_Node[i]&&(this.soundType_Node[i].getComponent(cc.Toggle).isChecked=!0),this.tingcard_Node[o]&&(this.tingcard_Node[o].getComponent(cc.Toggle).isChecked=!0),this.cardcolor_Node[n]&&(this.cardcolor_Node[n].getComponent(cc.Toggle).isChecked=!0),this.gameback_Node[a]&&(this.gameback_Node[a].getComponent(cc.Toggle).isChecked=!0)},init:function(e,t){this._callback=e,this._GameViewBase=t},doButtonClick:function(e,t){if(e.isChecked)switch(t){case"outCard_1":cc.sys.localStorage.setItem(G_OUTCARD_SOUND,2);break;case"outCard_2":cc.sys.localStorage.setItem(G_OUTCARD_SOUND,1);break;case"Sound_1":cc.sys.localStorage.setItem(G_SOUND_TYPE,0);break;case"Sound_2":cc.sys.localStorage.setItem(G_SOUND_TYPE,1);break;case"tingCard_1":cc.sys.localStorage.setItem(G_TING_CARD,0);break;case"tingCard_2":cc.sys.localStorage.setItem(G_TING_CARD,1);break;case"Card_1":cc.sys.localStorage.setItem(G_CARD_COLOR,0);break;case"Card_2":cc.sys.localStorage.setItem(G_CARD_COLOR,1);break;case"bg_1":this._callback&&this._callback(0),cc.sys.localStorage.setItem(G_GAME_BACK,0);break;case"bg_2":this._callback&&this._callback(1),cc.sys.localStorage.setItem(G_GAME_BACK,1);break;case"bg_3":this._callback&&this._callback(2),cc.sys.localStorage.setItem(G_GAME_BACK,2);break;case"bg_4":this._callback&&this._callback(3),cc.sys.localStorage.setItem(G_GAME_BACK,3)}},doButtonCloseClick:function(){this.removeLayer()},removeLayer:function(){this.node.parent=null}}),cc._RF.pop()},{BaseLayer:"BaseLayer",LobbyLogic:"LobbyLogic"}],GameSettingLayer:[function(e,t){"use strict";cc._RF.push(t,"75f510XzjFGKo60lff/kh3c","GameSettingLayer");var i=["Button_Show"],o={};for(var n in i)o[i[n]]=n+100;var a=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u6e38\u620f\u6258\u7ba1",picName:"btn_tuo",funKey:7},{name:"\u79bb\u5f00\u623f\u95f4",picName:"btn_exit",funKey:1}],s=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u79bb\u5f00\u623f\u95f4",picName:"btn_exit",funKey:1}],r=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u79bb\u5f00\u623f\u95f4",picName:"btn_exit",funKey:1}],c=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u6e38\u620f\u6258\u7ba1",picName:"btn_tuo",funKey:7}],u=[{name:"\u8fd4\u56de\u5927\u5385",picName:"btn_exit",funKey:1},{name:"\u7ad9\u8d77\u56f4\u89c2",picName:"btn_setup",funKey:2},{name:"\u6e38\u620f\u89c4\u5219",picName:"btn_rule",funKey:3},{name:"\u4e0a\u62a5\u9519\u8bef",picName:"btn_error",funKey:4},{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u89e3\u6563\u623f\u95f4",picName:"btn_dismiss",funKey:6}],h=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u6e38\u620f\u73a9\u6cd5",picName:"btn_wanfa",funKey:8},{name:"\u6e38\u620f\u6258\u7ba1",picName:"btn_tuo",funKey:7},{name:"\u89e3\u6563\u623f\u95f4",picName:"btn_dismiss",funKey:6},{name:"\u79bb\u5f00\u623f\u95f4",picName:"btn_exit",funKey:1}],l=[{name:"\u6e38\u620f\u8bbe\u7f6e",picName:"btn_set",funKey:5},{name:"\u6e38\u620f\u6258\u7ba1",picName:"btn_tuo",funKey:7},{name:"\u89e3\u6563\u623f\u95f4",picName:"btn_dismiss",funKey:6},{name:"\u79bb\u5f00\u623f\u95f4",picName:"btn_exit",funKey:1}];cc.Class({extends:e("BaseLayer"),properties:{gameSettingTab:cc.Prefab,btn_exit:cc.SpriteFrame,btn_tuo:cc.SpriteFrame,btn_setup:cc.SpriteFrame,btn_rule:cc.SpriteFrame,btn_error:cc.SpriteFrame,btn_set:cc.SpriteFrame,btn_dismiss:cc.SpriteFrame},onLoad:function(){},init:function(e,t,i,o){this._delegete=e,this._roomType=t,this._isCanTuoGuan=i,this._showBtnRes=o,this.isShow=null,this.studio={Layer:null,Image_Bg_Main:null,ListView_Set:null,Panel_Set:null,Button_Show:null,btn_close:null},this.initUI()},initUI:function(){this.initStudioUI(),this.initUIEventListener(),this.initUIData()},initStudioUI:function(){var e=this.node.getChildByName("rotate");if(e)return this.studio.Image_Bg_Main=e.getChildByName("Image_Bg_Main"),this.studio.Button_Show=e.getChildByName("Button_Show"),this.studio.btn_close=e.getChildByName("btn_close"),void(this.studio.ListView_Set=this.studio.Image_Bg_Main.getChildByName("ListView_Set"));this.studio.Image_Bg_Main=this.node.getChildByName("Image_Bg_Main"),this.studio.Button_Show=this.node.getChildByName("Button_Show"),this.studio.btn_close=this.node.getChildByName("btn_close"),this.studio.bg=this.studio.Image_Bg_Main.getChildByName("bg"),this.studio.ListView_Set=this.studio.Image_Bg_Main.getChildByName("ListView_Set")},initUIEventListener:function(){var e=function(e){var t=e.target.name;this.playClickEffect(),"Button_Show"==t?this.doButtonShowClick(e):console.log(tools.stringFormat("\u672a\u5b9a\u4e49\u7684TAG = {0}",t))}.bind(this);for(var t in o)this.studio[t].on("touchend",e)},initUIData:function(){this.setShowUI(!1),this.initSetListView()},setShowUI:function(e,t){this.isShow=e,this.isShow?(this.studio.btn_close.active=!0,this.studio.Button_Show.getComponent(cc.Button).interactable=!1,this.studio.Image_Bg_Main.active=!0,this.Button_Setup&&this.Imge_Item&&(this._delegete.isPlayStatic()?(this.Button_Setup.active=!1,this.Imge_Item.active=!0):(this.Button_Setup.active=!0,this.Imge_Item.active=!1))):(this.studio.Button_Show.getComponent(cc.Button).interactable=!0,this.studio.Image_Bg_Main.active=!1,this.studio.btn_close.active=!1),t&&t.stopPropagation(),this._showBtnRes&&this.studio.Button_Show.getComponent(cc.Button).loadTextures(this._showBtnRes.down,"",this._showBtnRes.up)},initSetListView:function(e){void 0===e&&(e=!0);var t=function(e,t,i,o){this.setShowUI(!1),5==o.funKey?this._delegete.setBtnTouchEnded():6==o.funKey?this._delegete.dismissBtnTouchEnded():1==o.funKey?this._delegete.exitBtnTouchEnded():2==o.funKey?this._delegete.StandandWatchtBtnTouchEnded():7==o.funKey?this._delegete.tuoBtnTouchEnded():8==o.funKey?this._delegete.wanfaBtnTouchEnded():3==o.funKey?this._delegete.RulesBtnTouchEnded():4==o.funKey?this._delegete.setBtnTouchFeedLayer():console.log("\u672a\u5b9a\u4e49\u7684\u65b9\u6cd5 funKey = {0} ",o.funKey)}.bind(this),i=function(e,i,o,n){var a=this[o.picName],s=function(a){this.playClickEffect(),t(a,e,i,o,n)}.bind(this),r=i.getChildByName("Button_Item");a&&(r.getComponent(cc.Sprite).spriteFrame=a),r.on("touchend",s),2==o.funKey&&(this.Button_Setup=r,this.Imge_Item=i.getChildByName("img"))}.bind(this),o=a;if(this._isCanTuoGuan){this._roomType==E_ROOM_TYPE.GOLD?(o=s,this._isCanTuoGuan.gold):this._roomType==E_ROOM_TYPE.BARRIERMATCH?(o=r,this._isCanTuoGuan.barriermatch):this._roomType==E_ROOM_TYPE.REALMATCH?(o=c,this._isCanTuoGuan.match):this._roomType==E_ROOM_TYPE.CARD?(o=u,this._isCanTuoGuan.card):this._roomType==E_ROOM_TYPE.PRIVATE?(o=h,this._isCanTuoGuan.private):this._roomType==E_ROOM_TYPE.MATCH&&(o=l,this._isCanTuoGuan.match);var n=[];F_InitListView(0==n.length?o:n,i,this.studio.ListView_Set,this.gameSettingTab,1)}},doButtonShowClick:function(e){this.setShowUI(!this.isShow,e)},doButton_Close:function(){var e=this;this.node&&(this.node.active=!1,this.scheduleOnce(function(){e.node.destroy()},.85))},IsonTouchEnded:function(){this.isShow&&this.setShowUI(!1)}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],GameSocket:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"37ad7fdRctBQ5F041Vz65yq","GameSocket");var a=cc.Class({extends:e("TcpClient"),ctor:function(){this.name="GameSocket",this._connectResult=null,this._deskUserList=[],this.deskInfo=null},clear:function(){this._super(),this._connectResult=null,this._deskUserList=[],this.deskInfo=null,this.removeAllNetCallback()},connectService:function(e){this._connectResult=e;var t=G_IS_LOADER_STATIC_DATA?NetConfig.getAgentServer():this.getRoomInfo().ip,i=NetConfig.getServerPort(),o=this.getRoomInfo().port;t=NetConfig.getAgentServer(),this._super(t,i,o,this.CGameSocket_onSocketMsg.bind(this))},onConnectSuccess:function(){this._super()},onConnectFailed:function(){this.super(),this._connectResult&&(removeLoading(),createTips(GlobalError.getErrorStr(GlobalError.ERROR_GAME_CONNECT_FAILED)),this._connectResult(!1),this._connectResult=null)},onDisconnect:function(){var e=cc.director.getScene();createRepeatConnectLayer(e)},onConnectMessage:function(e){this._super(e),this._connectResult&&(this._connectResult(!0),this._connectResult=null)},__updateDeskUser:function(e){console.log("_updateDeskUser ");var t=this._deskUserList.length;void 0===t?console.log("\u65e0 "):console.log("\u6709 "),console.log("__updateDeskUser "+t);for(var i=0;i<this._deskUserList.length;i++)if(this._deskUserList[i].userID==e.userID)return void(this._deskUserList[i]=e);this._deskUserList.push(e),this.getGameLogic()&&this.getGameLogic().updateUserCount()},__removeDeskUser:function(e){for(var t=this._deskUserList.length-1;t>=0;t--)if(this._deskUserList[t].userID==e){this.__setDeskUserList[t]=null,console.log(JSON.stringify(this._deskUserList[t])+">>>\u7528\u6237\u6570\u636e\u8fdb\u884c\u79fb\u9664"+this._deskUserList[t].userID+">>>"+t),this._deskUserList.splice(t,1);break}this.getGameLogic()&&this.getGameLogic().updateUserCount()},__removeAllDeskUser:function(){this._deskUserList=[]},getUserByID:function(e){for(var t=0;t<this._deskUserList.length;t++){var i=this._deskUserList[t];if(e==i.userID)return i}return null},makeAllUserDirty:function(){for(var e=0;e<this._deskUserList.length;e++){var t=this._deskUserList[e];this.makeUserDirty(t.userID)}},makeUserDirty:function(e){for(var t=0;t<this._deskUserList.length;t++)if(e===this._deskUserList[t].userID){this._deskUserList[t].isNotAll=!0;break}},isBuyRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.CARD},isGoldRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.GOLD},isTableRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.TABLE},isPrivateRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.PRIVATE},isMatchRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.REALMATCH},isBarrierMatchRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.BARRIERMATCH},isRankMatchRoom:function(){return this.getRoomInfo().sort==E_ROOM_SORT.RANKMATCH},isCheckPointRoom:function(){return this.getRoomInfo().sort==E_ROOM_SORT.CHECKPOINTMATCH},isVIPRoom:function(){return this.getRoomInfo().type==E_ROOM_TYPE.MATCH},isBRGame:function(){return GameListManager.isBRGame(this.getRoomInfo().gameID)},isRoom:function(){return this.isBuyRoom()||this.isPrivateRoom()||this.isVIPRoom()},getGameLogic:function(){return GameManager.getGameLogic()},getMyInfo:function(){return UserInfoManager.getMyInfo()},getRoomInfo:function(){return RoomListManager.getRoomInfo()},getDeskUserCount:function(){return this._deskUserList?this._deskUserList.length:0},getDeskUserList:function(){return this._deskUserList},getDeskInfo:function(){return this.deskInfo},__setDeskUserList:function(e){this._deskUserList=[].concat(e)},__enterGame:function(){console.log(RoomListManager.getRoomInfo()),GameManager.setGameInfo(RoomListManager.getRoomInfo().gameID),GameManager.runGame()},requestLoginRoom:function(e,t,i,o,n){console.log("\u8bf7\u6c42\u767b\u5f55\u623f\u95f4"),console.log(tools.getCurTime()+" requestLoginRoom roomID:"+e+" checkPointsNum:"+o+" costType:"+n);var a=this.createNetMsg(9,MSG_MAIN_LOADER_LOGON,MSG_ASS_LOADER_LOGON);a.pushINT(e),a.pushINT(o),a.pushBYTE(n||0),this.sendData(a)},sendData:function(e,t,i){LobbySocket.send(e,t,i)},requestLogoutRoom:function(e){console.log(">>>>>\u8bf7\u6c42\u767b\u51fa\u623f\u95f4\u8bf7\u6c42\u767b\u51fa\u623f\u95f4>");var t=this.createNetMsg(0,MSG_MAIN_LOADER_LOGON,MSG_ASS_LOADER_LOGOUT);this.sendData(t,e)},requestLogoutRoom1:function(e){console.log(">>>>>\u8bf7\u6c42\u767b\u51fa\u623f\u95f4\u8bf7\u6c42\u767b\u51fa\u623f\u95f4>");var t=this.createNetMsg(0,MSG_MAIN_LOADER_LOGON,MSG_ADD_LOADER_LOGOUT);this.sendData(t,e)},requestRoomSit:function(e){e=e;var t=this.createNetMsg(1,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_SIT);t.pushBYTE(e),console.log("\u5750\u4e0b\u547d\u4ee4\u4e86MSG_MAIN_LOADER_ACTION = "+MSG_MAIN_LOADER_ACTION+"   MSG_ASS_LOADER_ACTION_SIT ="+MSG_ASS_LOADER_ACTION_SIT),this.sendData(t)},requestCreaterDesk:function(e){var t=this.createNetMsg(1,MSG_MAIN_LOADER_ACTION,10);t.pushBYTE(1),this.sendData(t,function(t){G_HANDLE_CODE_OK==t.bHandleCode&&e&&e()})},requestActionChange:function(e){var t=this.createNetMsg(1,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_CHANGE_DESKSTATION);t.pushBYTE(e),this.sendData(t)},requestQuickSit:function(){var e=this.createNetMsg(4,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_MATCH_SIT);e.pushINT(-1),this.sendData(e)},requestChangeDesk:function(e){var t=this.createNetMsg(4,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_MATCH_SIT);t.pushINT(e),this.sendData(t)},requestStand:function(){console.log("GameSocket:requestStand()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_STAND);this.sendData(e)},requestStandandWatch:function(){console.log("GameSocket:requestStandandWatch()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_ACTION_STAND_AND_WATCH);this.sendData(e)},requestDeskInfo:function(){console.log(tools.getCurTime()+" GameSocket requestDeskInfo");var e=this.createNetMsg(0,MSG_MAIN_LOADER_FRAME,MSG_ASS_LOADER_DESK_INFO);this.sendData(e)},requestGameInfo:function(){console.log(tools.getCurTime()+" GameSocket requestGameInfo");var e=this.createNetMsg(0,MSG_MAIN_LOADER_FRAME,MSG_ASS_LOADER_GAME_INFO);this.sendData(e)},requestDeskUserInfo:function(){console.log(tools.getCurTime()+" GameSocket requestDeskUserInfo");var e=this.createNetMsg(0,MSG_MAIN_LOADER_FRAME,MSG_ASS_LOADER_DESK_USERINFO);this.sendData(e)},requestDeskOneUserInfo:function(e,t){var i=this;console.log("GameSocket:requestDeskOneUserInfo()");var o=this.createNetMsg(1,MSG_MAIN_LOADER_FRAME,MSG_ASS_LOADER_DESK_ONE_USERINFO);o.pushBYTE(e),this.sendData(o,function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var o=i._Resolve_UserSimpleInfo(e);i.__updateDeskUser(o),t?t(o):i.getGameLogic()&&i.getGameLogic().updateDeskUser(o)}})},requestDeskCheckPointInfo:function(){console.log("GameSocket:requestCheckPointInfo()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_FRAME,MSG_ASS_LOADER_DESK_CHECKPOINT_INFO);this.sendData(e)},requestAgreeGame:function(){console.log("GameSocket:requestAgreeGame()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_GAME,MSG_ASS_LOADER_GAME_AGREE);this.sendData(e)},requestGameNotPrompt:function(e){console.log("GameSocket:requestGameNotPrompt()");var t=this.createNetMsg(4,MSG_MAIN_LOADER_GAME,5);t.pushINT(e),this.sendData(t)},requestAuto:function(){console.log("GameSocket:requestAuto()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_GAME,MSG_ASS_LOADER_GAME_AUTO);this.sendData(e)},requestCancelAuto:function(){console.log("GameSocket:requestCancelAuto()");var e=this.createNetMsg(0,MSG_MAIN_LOADER_GAME,MSG_ASS_LOADER_GAME_CANCEL_AUTO);this.sendData(e)},requestMagicExpress:function(e,t){console.log("requestMagicExpress");var i=this.createNetMsg(8,MSG_MAIN_LOADER_GAME,MSG_ASS_LOADER_GAME_MAGICEXPRESS);i.pushINT(e),i.pushINT(t),this.sendData(i)},requestDismissRoom:function(){console.log("\u89e3\u6563\u623f\u95f4");var e=this.createNetMsg(0,MSG_MAIN_LOADER_DESKDISSMISS,MSG_ASS_LOADER_REQ_DESKDISSMISS);this.sendData(e)},requestAnswerDismiss:function(e){var t=this.createNetMsg(1,MSG_MAIN_LOADER_DESKDISSMISS,MSG_ASS_LOADER_ANSWER_DESKDISMISS);t.pushBOOL(e),this.sendData(t)},requestVoive:function(e){console.log("GameSocket:requestVoive()");var t=this.createNetMsg(64,MSG_MAIN_LOADER_VOICEANDTALK,MSG_ASS_LOADER_VOICE);t.pushNCHAR(e,64),this.sendData(t)},requestTalk:function(e){console.log("requestTalk");var t=3*e.length;if(0!=t){var i=this.createNetMsg(t+4,MSG_MAIN_LOADER_VOICEANDTALK,MSG_ASS_LOADER_TALK);i.pushINT(t),i.pushNCHAR(e,t),this.sendData(i)}},requestTalkImg:function(e){console.log("requestTalkImg");var t=e.length;if(0!=t){var i=this.createNetMsg(t+4,MSG_MAIN_LOADER_VOICEANDTALK,MSG_ASS_LOADER_TALK);i.pushINT(t),i.pushNCHAR(e,t),this.sendData(i)}},requestStart:function(){console.log("GameSocket:requestStart");var e=this.createNetMsg(0,MSG_MAIN_LOADER_ACTION,MSG_ASS_LOADER_GAME_BEGIN);this.sendData(e)},onLoginMessage:function(e){if(e.bAssistantID===MSG_ASS_LOADER_LOGON){var t=function(e){var t={};return t.deskIdx=e.readInt(),t.deskPasswdLen=e.readInt(),t.deskPasswd=e.readString(20),t.isInDesk=e.readBoolean(),t.roomID=e.readInt(),t.userStatus=e.readInt(),t.gameRules=e.readString(256),t}.bind(this);if(e.bHandleCode===G_HANDLE_CODE_OK){var i=t(e);RoomListManager.setCurRuleInfo(i.gameRules),this.getMyInfo().userStatus=i.userStatus,i.isInDesk||(this.isGoldRoom()||this.isBarrierMatchRoom())&&this.requestQuickSit(),this.getGameLogic().setGameRuleInfo(),GameManager.ui.onConnectSuccess()}else e.bHandleCode===GlobalError.ERROR_ROOM_EXISTING?(this.requestLogoutRoom(),this.clear()):GlobalError.ERROR_MATCH_OVER==e.bHandleCode||GlobalError.ERROR_RANKMATCH_OVER==e.bHandleCode?LobbySocket.onDisconnect():(this.requestLogoutRoom(),this.clear())}},_Resolve_UserSimpleInfo:function(e){var t={};return t.userID=e.readInt(),t.name=e.readString(MAX_USER_NAME_LEN),t.headURL=e.readString(256),t.isOnline=e.readBoolean(),t.deskStation=e.readByte(),t.userStatus=e.readInt(),t.score=e.readInt(),t.deskIdx=e.readInt(),t.money=e.readInt64(),t.longitude=e.readString(12),t.latitude=e.readString(12),t.address=e.readString(64),t.logonIP=e.readString(24),t.sex=e.readByte(),t.isAuto=e.readBoolean(),t.jewels=e.popINT(),t.motto=e.readString(128),t.giftCard=e.readInt64(),t},_Resolve_HundredGameUserSimpleInfo:function(e){var t={};return t.userID=e.popINT(),t.isOnline=e.popBOOL(),t.deskStation=e.popBYTE(),t.userStatus=e.popINT(),t.money=e.popLONGLONG(),t.isAuto=e.popBOOL(),t.name="",t.headURL="aa",t.score=0,t.deskIdx=0,t.longitude=G_longitude,t.latitude=G_latitude,t.address=G_address,t.logonIP="0.0.0.0",t.sex=0,t.jewels=0,t.motto="",t.isNotAll=!0,t},onGameNotifyUserMessage:function(e){MSG_NTF_LOADER_DESK_USER_INFO==e.bAssistantID?this.dealNotifyDeskUserInfo(e):MSG_NTF_LOADER_DESK_USER_SIT==e.bAssistantID?(console.log("\u5750\u4e0b\u6d88\u606f"),this.dealNotifyDeskUserSit(e)):MSG_NTF_LOADER_DESK_USER_AGREE==e.bAssistantID?(console.log("\u51c6\u5907\u6d88\u606f"),this.dealNotifyDeskUserAgree(e)):MSG_NTF_LOADER_DESK_USER_LEFT==e.bAssistantID?this.dealNotifyDeskUserLeft(e):MSG_NTF_LOADER_DESK_USER_OFFLINE==e.bAssistantID?this.dealNotifyDeskUserOffline(e):MSG_NTF_LOADER_DESK_USER_CHANGEDESKSTATION==e.bAssistantID?this.dealNotifyDeskUserChangedeskstation(e):MSG_NTF_LOADER_DESK_USER_STANDANDWATCH==e.bAssistantID?this.dealNotifyDeskUserStandAndWatch(e):MSG_NTF_LOADER_DESK_USER_LOGONOROUTROOM==e.bAssistantID?this.dealNotifyDeskUserLogonORoutRoom(e):MSG_NTF_LOADER_DESK_USER_IS_TOURIST==e.bAssistantID&&this.dealNotifyDeskUserIsTourist(e)},dealNotifyDeskUserInfo:function(e){if(console.log("dealNotifyDeskUserInfo"),G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e);this.__updateDeskUser(t)}},dealNotifyDeskUserSit:function(e){if(console.log("dealNotifyDeskUserSit"),e.bHandleCode===G_HANDLE_CODE_OK){removeLoading();var t=this._Resolve_UserSimpleInfo(e);this.__updateDeskUser(t),this.getMyInfo().userID==t.userID&&(this.getGameLogic()&&this.getGameLogic().isMeWatching()&&(this.getGameLogic().removeAllDeskUser(),this.getGameLogic().loadDeskUser()),this.getMyInfo().userStatus=t.userStatus),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserSit(t)}},dealNotifyDeskUserAgree:function(e){if(console.log("dealNotifyDeskUserAgree"),G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e);this.__updateDeskUser(t),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserAgree(t.deskStation)}},dealNotifyDeskUserLeft:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.reasonCode=e.popINT(),t.user=this._Resolve_UserSimpleInfo(e),t}.bind(this)(e);console.log("dealNotifyDeskUserLeft"),this.getGameLogic()&&(this.__removeDeskUser(t.user.userID),this.getGameLogic().dealNotifyDeskUserLeft(t.user,t.user.deskStation,t.reasonCode)),this.getGameLogic()&&this.getGameLogic().onDeskUserCountChange()}},dealNotifyDeskUserOffline:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e);console.log("dealNotifyDeskUserOffline"),this.__updateDeskUser(t),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserOffline(t)}},dealNotifyDeskUserChangedeskstation:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=e.popBYTE(),i=this._Resolve_UserSimpleInfo(e);console.log("dealNotifyDeskUserChangedeskstation"),this.getGameLogic()&&(this.__removeDeskUser(i.userID),this.getGameLogic().dealNotifyDeskUserChangedeskstation(t)),this.__updateDeskUser(i),this.getMyInfo().userID==i.userID&&(this.getGameLogic()&&this.getGameLogic().isMeWatching()&&(this.getGameLogic().removeAllDeskUser(),this.getGameLogic().loadDeskUser()),this.getMyInfo().userStatus=i.userStatus),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserSit(i)}},dealNotifyDeskUserStandAndWatch:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){e.popINT();var t=this._Resolve_UserSimpleInfo(e);console.log("dealNotifyDeskUserStandAndWatch"),this.getGameLogic()&&(this.__removeDeskUser(t.userID),this.getGameLogic().dealNotifyDeskUserChangedeskstation(t.deskStation))}},dealNotifyDeskUserLogonORoutRoom:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){e.popINT();var t=e.readString(120);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserLogonORoutRoom(t)}},dealNotifyDeskUserIsTourist:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.bTourist=e.popBOOL(),t.user=this._Resolve_UserSimpleInfo(e),t}.bind(this)(e);console.log("dealNotifyDeskUserIsTourist"),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskUserIsTourist(t)}},onGameNotifyMessage:function(e){MSG_NTF_LOADER_DESK_GAMEBEGIN==e.bAssistantID?this.dealNotifyDeskGameBegin(e):MSG_NTF_LOADER_DESK_BASEINFO==e.bAssistantID?this.dealNotifyDeskBaseInfo(e):MSG_NTF_LOADER_DESK_DISMISS_OK==e.bAssistantID?this.dealNotifyDeskDismissOK(e):MSG_NTF_LOADER_DESK_DISMISS_FAILED==e.bAssistantID?this.dealNotifyDeskDismissFailed(e):MSG_NTF_LOADER_DESK_ALL_USERINFO==e.bAssistantID?this.dealNotifyDeskAllUserInfo(e):MSG_NTF_LOADER_DESK_DISSMISS_INFO==e.bAssistantID?this.dealNotifyDeskDismissInfo(e):MSG_NTF_LOADER_DESK_TALK==e.bAssistantID?this.dealNotifyDeskTalk(e):MSG_NTF_LOADER_DESK_VOICE==e.bAssistantID?this.dealNotifyDeskVoice(e):MSG_NTF_LOADER_DESK_GAMEFINISH==e.bAssistantID?this.dealNotifyDeskGameFinish(e):MSG_NTF_LOADER_DESK_GRADE==e.bAssistantID?this.dealNotifyDeskGrade(e):MSG_NTF_LOADER_DESK_MONEY==e.bAssistantID?this.dealNotifyDeskMoney(e):MSG_NTF_LOADER_DESK_LEFT_WAITAGREE_TIME==e.bAssistantID?this.dealNotifyDeskLeftWaitagreeTime(e):MSG_NTF_LOADER_DESK_ISAUTO==e.bAssistantID?this.dealNotifyDeskIsAuto(e):MSG_NTF_LOADER_DESK_MAGICEXPRESS==e.bAssistantID?this.dealNotifyDeskMagicExpress(e):MSG_NTF_LOADER_DESK_SITFULL==e.bAssistantID?this.dealNotifyDeskSitFull(e):MSG_NTF_LOADER_DESK_CANBEGIN==e.bAssistantID?this.dealNotifyDeskCanBegin(e):MSG_NTF_LOADER_DESK_CANBEGIN==e.bAssistantID?this.dealNotifyDeskGameAleardyBegin(e):MSG_NTF_LOADER_RECHARGE==e.bAssistantID?this.dealNotifyRecharge(e):MSG_NTF_LOADER_DESK_HUNDRED_ALL_USER==e.bAssistantID?this.dealNotifyDeskHunderAllUserInfo(e):MSG_NTF_LOADER_DESK_DISMISS_USERID==e.bAssistantID?this.dealNotifyDeskDissmissUserID(e):MSG_NTF_LOADER_ERR_MSG==e.bAssistantID?this.dealNotifyERRMsg(e):MSG_NTF_LOADER_DESK_JEWELS==e.bAssistantID?this.dealNotifyDeskJewels(e):MSG_NTF_LOADER_DESK_MATCH_STATUS==e.bAssistantID?this.dealNotifyDeskMatchStatus(e):MSG_NTF_LOADER_DESK_FINISH_MATCH==e.bAssistantID?this.dealNotifyDeskFinishMatch(e):MSG_NTF_LOADER_MATCH_RANK==e.bAssistantID?this.dealNotifyMatchRank(e):MSG_NTF_LOADER_DESK_MATCH_GRADE==e.bAssistantID?this.dealNotifyMatchGrade(e):MSG_NTF_LOADER_DESK_RANKMATCH_LEVEL==e.bAssistantID?this.dealNotifyRankMatchGrade(e):MSG_NTF_LOADER_DESK_USEREXP==e.bAssistantID?this.dealNotifyRankMatchUserExp(e):MSG_NTF_LOADER_DESK_USER_CHECKPOINT==e.bAssistantID?this.dealNotifyUserCheckPoint(e):MSG_NTF_LOADER_DESK_USER_CHECKPOINT_END==e.bAssistantID?this.dealNotifyUserCheckPointEnd(e):MSG_NTF_LOADER_RANDOM_CHANGE_SEAT==e.bAssistantID?this.dealNotifyRandomChangeSeat(e):MSG_NTF_LOADER_TIMEOUT_CANNOT_OUT==e.bAssistantID?this.dealNotifyTimeoutCannotOut(e):MSG_NTF_LOADER_DISCONNECT_TIMEOUT==e.bAssistantID?this.dealNotifyDisconnectTimeout(e):MSG_NTF_LOADER_DESK_CANNOTBEGIN==e.bAssistantID&&this.dealNotifyDeskCannotbegin(e)},dealNotifyMatchGrade:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.changeGrade=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t.grade=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t.userid=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t.name={};for(var i=0;i<G_WAR_RECORD_PLAYER_NUM;i++)t.name[i]=e.popNCHAR(MAX_USER_NAME_LEN);return t}(e);console.log("dealNotifyMatchGrade++++"),console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u684c\u5b50\u5347\u7ea7\u901a\u77e5",t),this.getGameLogic()&&this.isMatchRoom()&&this.getGameLogic().setMyMatchGradeInfo(t);for(var i=0;i<G_WAR_RECORD_PLAYER_NUM;i++)for(var o in this._deskUserList){var n=this._deskUserList[o];if(n.deskStation==i){var a=t.grade[i]-t.changeGrade[i];this._deskUserList[o].score=t.grade[i],this.getGameLogic()&&(this.isMatchRoom()?this.getGameLogic().dealNotifyDeskGrade(n.userID,t.grade[i],a):this.isBarrierMatchRoom()&&this.getGameLogic().dealNotifyDeskGrade(n.userID,t.grade[i],a));break}}}},dealNotifyRankMatchGrade:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.gameExp=e.popLONGLONG(),t.UserLevel=e.popINT(),t.remark=e.popNCHAR(24),t}(e);console.log("dealNotifyRankMatchGrade++++"),console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bb5\u4f4d\u5347\u7ea7\u901a\u77e5",t),this.getGameLogic()&&this.getGameLogic().setMyRankMatchGradeInfo(t)}},dealNotifyRankMatchUserExp:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.gameExp=e.popLONGLONG(),t.UserLevel=e.popBYTE(),t}(e);console.log("dealNotifyRankMatchUserExp++++"),this.getGameLogic()&&this.getGameLogic().setMyRankMatchUserExp(t)}},dealNotifyUserCheckPointEnd:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().setCheckPointEnd()},dealNotifyUserCheckPoint:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.checkPointNum=e.popINT(),t.bAgain=e.popBYTE(),t.score=e.popINT(),t}(e);console.log(tools.getCurTime()+" \u901a\u77e5\u5f53\u5c40\u95ef\u5173\u7ed3\u679c++++",t),this.getGameLogic()&&this.getGameLogic().setCheckPointInfo(t)}},dealNotifyDeskMatchStatus:function(e){if(console.log("dealNotifyDeskMatchStatus"),G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.llPartOfMatchID=e.popLONGLONG(),t.iCurMatchRound=e.popINT(),t.iMaxMatchRound=e.popINT(),t.status=e.popBYTE(),t.remainTime=e.popINT(),t.iCurCount=e.popINT(),t.iMaxCount=e.popINT(),t.resultType=e.popINT(),t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u684c\u5b50\u72b6\u6001\u4fe1\u606f\u901a\u77e5",t),this.getGameLogic()&&this.getGameLogic().setMyMatchDeskInfo(t)}},dealNotifyDeskFinishMatch:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.deskIdx=e.popINT(),t.deskCount=e.popINT(),t.deskRank=e.popINT(),t.rank=e.popINT(),t.matchScore=e.popINT(),t.allPeopleCount=e.popINT(),t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u684c\u5b50\u5b8c\u6210\u901a\u77e5",t),this.getGameLogic()&&this.getGameLogic().setMyMatchDeskFinishInfo(t),dump(t,"dealNotifyDeskFinishMatch++++")}},dealNotifyMatchRank:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.gameID=e.popINT(),t.gameMatchID=e.popINT(),t.iCurMatchRound=e.popINT(),t.iMaxMatchRound=e.popINT(),t.type=e.popBYTE(),t.rankMatch=e.popINT(),t.giftCard=e.popINT(),t.costResType=e.popINT(),t.reviveRemainTime=e.popINT(),t.llPartOfMatchID=e.popINT(),t.peopleCount=e.popINT(),t.matchLevel=e.popINT(),t.allPeopleCount=e.popINT(),t.deskCount=e.popINT(),t.matchScore=e.popINT(),t.userID={},t.rank={},t.jiangJin={},t.integral={};for(var i=1;i<=t.peopleCount;i++)t.userID[i]=e.popINT(),t.rank[i]=e.popINT(),t.jiangJin[i]=e.popINT(),t.integral[i]=e.popINT();return t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u684c\u5b50\u4e00\u8f6e\u6253\u5b8c\u6392\u540d\u901a\u77e5",t),MatchManager.setCurMatchID(t.gameMatchID),MatchManager.setCurRoundIsEnd(!0),this.getGameLogic()&&this.getGameLogic().setMatchDeskRankInfo(t),DataNotify.onCurMatchResult(t)}},dealNotifyDeskGameAleardyBegin:function(){createTips("\u6e38\u620f\u5df2\u7ecf\u5f00\u59cb\uff0c\u7981\u6b62\u52a0\u5165")},dealNotifyDeskGameBegin:function(e){if(console.log("dealNotifyDeskGameBegin"),G_HANDLE_CODE_OK==e.bHandleCode){for(var t,o=i(this.getDeskUserList());!(t=o()).done;)t.value.userStatus=E_UserStatus.USER_STATUS_PLAYING;this.getGameLogic()&&this.getGameLogic().dealNotifyDeskGameBegin()}},dealNotifyDeskBaseInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.deskIdx=e.popINT(),t.deskPasswdLen=e.popINT(),t.deskPasswd=e.readString(20),t.masterID=e.popINT(),t.masterName=e.readString(MAX_USER_NAME_LEN),t.runGameCount=e.popINT(),t.totalGameCount=e.popINT(),t.isDismissStatus=e.popBOOL(),t}(e);this.deskInfo=t,console.log("GameSocket:dealNotifyDeskBaseInfo",t),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskBaseInfo(t)}},dealNotifyDeskDismissOK:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.isDismissMidway=e.popBOOL(),t.name=e.popNCHAR(MAX_USER_NAME_LEN),t.bReqDismiss=e.popBOOL(),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskDismissOK(t)}},dealNotifyRandomChangeSeat:function(e){var t=this;if(G_HANDLE_CODE_OK==e.bHandleCode){var i=function(e){for(var i=[],o=0;o<4;o++)i[o]=t._Resolve_UserSimpleInfo(e);return i}(e),o=function(e){this.__setDeskUserList(e),this.getGameLogic()&&(this.getGameLogic().removeAllDeskUser(),this.getGameLogic().loadDeskUser())}.bind(this);this.getGameLogic()&&this.getGameLogic().dealNotifyRandomChangeSeat(i,o)}},dealNotifyTimeoutCannotOut:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t="\u73a9\u5bb6 "+e.popNCHAR(64)+" \u51fa\u724c\u8d85\u65f6\uff0c\u623f\u95f4\u5df2\u89e3\u6563";this.getGameLogic()&&this.getGameLogic().dealNotifyTimeoutCannotOut(t)}},dealNotifyDisconnectTimeout:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t="\u73a9\u5bb6 "+e.popNCHAR(64)+" \u65ad\u7ebf\u8d85\u65f6\uff0c\u623f\u95f4\u5df2\u89e3\u6563";this.getGameLogic()&&this.getGameLogic().dealNotifyTimeoutCannotOut(t)}},dealNotifyDeskDismissFailed:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskDismissFailed()},dealNotifyDeskAllUserInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.count=e.popINT(),t.allUserInfo=[];for(var i=0;i<t.count;i++)t.allUserInfo[i]=this._Resolve_UserSimpleInfo(e);return t}.bind(this)(e);console.log("GameSocket:dealNotifyDeskAllUserInfo",t),this.__setDeskUserList(t.allUserInfo),this.getGameLogic()&&(this.getGameLogic().removeAllDeskUser(),this.getGameLogic().loadDeskUser())}},dealNotifyDeskOneUserInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e);this.__updateDeskUser(t),this.getGameLogic()&&this.getGameLogic().updateDeskUser(t)}},dealNotifyDeskCheckPointInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t={};t.count=e.popINT(),t.checkPointNum=e.popINT(),this.getGameLogic()&&this.getGameLogic().setDeskCheckPointInfo(t)}},dealNotifyDeskDismissInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.deskStation=e.popBYTE(),t.dismissType=e.popINT(),t},i=function(e){var i={};i.deskStation=e.popBYTE(),i.lefWaitDismissTime=e.popINT(),i.cfgDismissTime=e.popINT(),i.deskUserCount=e.popINT(),i.userList={};for(var o=1;o<=i.deskUserCount;o++)i.userList[o]=t(e);return i}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskDismissInfo(i)}},dealNotifyDeskTalk:function(e){if(console.log("GameSocket dealNotifyDeskTalk "),G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.sizeCount=e.popINT(),t.words=e.readString(t.sizeCount),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskTalk(t)}},dealNotifyDeskVoice:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.voiceID=e.popNCHAR(64),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskVoice(t)}},dealNotifyDeskGameFinish:function(e){for(var t,o=i(this.getDeskUserList());!(t=o()).done;){var n=t.value;n.userStatus=E_UserStatus.USER_STATUS_SITING,n.isAuto=!1}if(!this.isMatchRoom()&&!this.isBarrierMatchRoom()&&G_HANDLE_CODE_OK==e.bHandleCode){var a={};this.isRankMatchRoom()?a.needMoneyuserID=[0]:a=function(e){e._readBuffer.offset-=20;var t={};return t.needMoneyuserID=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t}(e),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskGameFinish(a)}},dealNotifyDeskGrade:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.grade=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t}(e);console.log("GameSocket:dealNotifyDeskGrade",t);for(var i=0;i<G_WAR_RECORD_PLAYER_NUM;i++)for(var o=0;o<this._deskUserList.length;o++){var n=this._deskUserList[o];if(n.deskStation==i){var a=n.score?n.score:0;this._deskUserList[o].score=t.grade[i],this.getGameLogic()&&this.getGameLogic().dealNotifyDeskGrade(n.userID,t.grade[i],a);break}}}},dealNotifyDeskMoney:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e),i=this.getUserByID(t.userID);if(i){var o=i.money?i.money:0,n=t.money;this.__updateDeskUser(t),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskMoney(t.userID,n,o)}}},getUserByDeskStation:function(e){for(var t=this._deskUserList,i=0;i<t.length;i++)if(t[i].deskStation==e)return t[i];return null},dealNotifyDeskLeftWaitagreeTime:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.leftWaitAgreeSecs=e.popINT(),t.cfgWaitAgreeSecs=e.popINT(),t}(e);this.setReadyTimeData(t.leftWaitAgreeSecs,t.cfgWaitAgreeSecs)}},dealNotifyDeskIsAuto:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.isAuto=e.popBOOL(),t}(e),i=this.getUserByID(t.userID);i&&(i.isAuto=t.isAuto,this.getGameLogic()&&this.getGameLogic().dealNotifyDeskIsAuto(i))}},dealNotifyDeskMagicExpress:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t=[];return t.srcUserID=e.popINT(),t.targetUserID=e.popINT(),t.magicType=e.popINT(),t}(e),i=this.getUserByID(t.srcUserID),o=this.getUserByID(t.targetUserID);i&&o&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskMagicExpress(i,o,t.magicType)}},dealNotifyDeskSitFull:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskSitFull()},dealNotifyDeskCanBegin:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskCanBegin()},dealNotifyDeskCannotbegin:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskCannotbegin()},dealNotifyRecharge:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.time=e.popINT(),t.needGold=e.popLONGLONG(),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyRecharge(t)}},sendSyncDeskUserData:function(){this.getGameLogic()&&(cc.isSyncDeskUserData=!0,this.getGameLogic().sendDeskUserInfo(),this.getGameLogic().sendDeskInfo())},dealNotifyDeskHunderAllUserInfo:function(e){var t=this;if(G_HANDLE_CODE_OK==e.bHandleCode){var i=function(e){var i={};i.count=e.popINT(),i.allUserInfo=[];for(var o=0;o<i.count;o++)i.allUserInfo[o]=t._Resolve_HundredGameUserSimpleInfo(e);return i}(e);this.__setDeskUserList(i.allUserInfo),this.getGameLogic()&&(this.getGameLogic().updateUserCount(),this.getGameLogic().removeAllDeskUser(),this.getGameLogic().loadDeskUser())}},dealNotifyDeskDissmissUserID:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userIDList=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyDeskDissmissUserID(t.userIDList)}},dealNotifyERRMsg:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.msgType=e.popINT(),t.sizeCount=e.popINT(),t.notify=e.readString(t.sizeCount),t}(e);this.getGameLogic()&&this.getGameLogic().dealNotifyERRMsg(t.msgType,t.notify)}},dealNotifyDeskJewels:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=this._Resolve_UserSimpleInfo(e),i=this.getUserByID(t.userID);if(i){i.jewels;var o=t.jewels;this.__updateDeskUser(t),this.getGameLogic()&&this.getGameLogic().dealNotifyDeskJewels(t.userID,o)}}},onFrameMessage:function(e){e.bAssistantID==MSG_ASS_LOADER_GAME_INFO?this.getGameLogic()&&this.getGameLogic().onGameInfoResp(e):e.bAssistantID==MSG_ASS_LOADER_GAME_STATION?this.getGameLogic()&&this.getGameLogic().onGameStationResp(e):MSG_ASS_LOADER_DESK_USERINFO==e.bAssistantID?this.onDeskUserInfoResp(e):MSG_ASS_LOADER_DESK_CHECKPOINT_INFO==e.bAssistantID&&this.onDeskCheckPointInfoResp(e)},requireAllDeskData:function(e){var t=this.createNetMsg(8,MSG_MAIN_LOADER_MATCH,MSG_ASS_LOADER_MATCH_ALL_DESK_DATA);t.pushLONGLONG(e),this.sendData(t)},requestMatchRankInfo:function(e,t){printInfo("requestMatchRankInfo( llPartOfMatchID ,callback) llPartOfMatchID =%s",e);var i=this.createNetMsg(8,MSG_MAIN_LOADER_MATCH,MSG_ASS_LOADER_MATCH_RANK);i.pushLONGLONG(e),this.sendData(i,function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var i=function(e){var t={};t.rank=e.popINT(),t.score=e.popINT(),t.userCount=e.popINT(),t.rankInfo={};for(var i=1;i<=t.userCount;i++)t.rankInfo[i]={},t.rankInfo[i].userID=e.popINT(),t.rankInfo[i].rank=e.popINT(),t.rankInfo[i].score=e.popINT(),t.rankInfo[i].name=e.popNCHAR(MAX_USER_NAME_LEN),t.rankInfo[i].headURL=e.popNCHAR(256);return t}(e);t?t(i):this.onMatchDeskChange(e)}})},requestReviveUser:function(e,t,i,o,n){var a=this.createNetMsg(17,MSG_MAIN_LOADER_MATCH,MSG_ASS_LOADER_REVIVE_USER);a.pushLONGLONG(e),a.pushINT(t),a.pushINT(i),a.pushBYTE(o),this.sendData(a,function(e){G_HANDLE_CODE_OK==e.bHandleCode&&n&&n()})},onMatchDeskChange:function(e){MSG_ASS_LOADER_MATCH_ALL_DESK_DATA==e.bAssistantID?MatchManager.onMatchDeskInfo(e):MSG_ASS_LOADER_MATCH_ENTER_WATCH_DESK==e.bAssistantID||MSG_ASS_LOADER_MATCH_QUIT_WATCH_DESK==e.bAssistantID||(MSG_ASS_LOADER_MATCH_RANK,e.bAssistantID)},backLobby:function(){this.getGameLogic()&&this.getGameLogic().backLobby()},onDeskOneUserInfoResp:function(e){this.dealNotifyDeskOneUserInfo(e)},onDeskUserInfoResp:function(e){this.dealNotifyDeskAllUserInfo(e)},onDeskCheckPointInfoResp:function(e){this.dealNotifyDeskCheckPointInfo(e)},onGameMessage:function(e){this.getGameLogic()&&this.getGameLogic().onGameMessage(e)},onResourceChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.resourceType=e.popINT(),t.value=e.popLONGLONG(),t.resourceType==E_ResourceType.GOLD&&(t.value=t.value),t}(e),i=this.getUserByID(t.userID);if(i)if(E_ResourceType.GOLD==t.resourceType){var o=i.money?i.money:0,n=t.value;i.money=t.value,(this.isGoldRoom()||this.isPrivateRoom()||this.isTableRoom())&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskMoney(i.userID,n,o,!0,E_ResourceType.GOLD,t.reason)}else if(E_ResourceType.CARD==t.resourceType);else if(E_ResourceType.FIRECOIN==t.resourceType){var a=t.value-t.change,s=t.value;i.score=t.value,this.isVIPRoom()&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskMoney(i.userID,s,a,!0,E_ResourceType.FIRECOIN)}}},onGameYanCode:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&this.getGameLogic()&&this.getGameLogic().dealNotifyDeskGameYanCode(e)},setReadyTimeData:function(e,t){this.leftReadyTime=e||30,this.cfgReadyTime=t||60},setLeftReadyTime:function(e){this.leftReadyTime=e},getLeftReadyTime:function(){return this.leftReadyTime},getCfgReadyTime:function(){return this.cfgReadyTime},getIsSendLogoutRoom:function(){return this.isSendLogoutRoom},setIsSendLogoutRoom:function(e){this.isSendLogoutRoom=e},onEnterBackground:function(){this.isConnected()&&this.throwGameMsgTrue()},createNetMsg:function(e,t,i,o,n){n=n||this.getRoomInfo().roomID;var a=Package.buildWritePack(e);return a.writeBegin(t,i,n),a},throwGameMsgTrue:function(){},onEnterForeground:function(){var e=this;LobbySocket.isConnected()?(this.tmpDelay=function(){if(e.sendHelloMessage(),e.getGameLogic())try{e.getGameLogic().clearGame(),e.getGameLogic().sendDeskInfo(),e.getGameLogic().sendDeskUserInfo(),e.getGameLogic().sendGameInfo()}catch(t){}},this.scheduleOnce(this.tmpDelay,.01)):(this.tmpDelay=function(){createRepeatConnectLayer(cc.director.getScene())},this.scheduleOnce(this.tmpDelay,.01))},CGameSocket_onSocketMsg:function(e){if(this.resolveNetMsgHead(e),e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectSuccess&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectFailed&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_DisConnect&&E_NET_CONNECT_MAINID.mainid_net_connect!=e.bMainID&&removeLoading(),e.bHandleCode!==G_HANDLE_CODE_OK){var t=GlobalError.getErrorStr(e.bHandleCode);if(""!==t)return createTips(t)}var i=this.getCallbackFun(e.getCmd());i?(this.removeNetCallback(e.getCmd()),i(e)):MSG_MAIN_LOADER_LOGON==e.bMainID?this.onLoginMessage(e):MSG_MAIN_LOADER_NOTIFY_USER==e.bMainID?this.onGameNotifyUserMessage(e):MSG_MAIN_LOADER_NOTIFY==e.bMainID?this.onGameNotifyMessage(e):MSG_MAIN_LOADER_FRAME==e.bMainID?this.onFrameMessage(e):MSG_MAIN_LOADER_GAME==e.bMainID?this.onGameMessage(e):MSG_MAIN_LOADER_RESOURCE_CHANGE==e.bMainID?this.onResourceChange(e):MSG_MAIN_LOADER_VCODE==e.bMainID?this.onGameYanCode(e):e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectSuccess&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectFailed&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_DisConnect&&E_NET_CONNECT_MAINID.mainid_net_connect!=e.bMainID&&console.log("GameSocket \u8fd8\u6536\u5230\u4e86 bMainID="+e.bMainID+", bAssistantID="+e.bAssistantID+" \u7684\u6d88\u606f\u6ca1\u6709\u89e3\u6790 \u8fde\u63a5\u6d88\u606f(1, 1)\u548c\u5fc3\u8df3\u6d88\u606f(1, 2)\u9664\u5916\uff0c\u5f80\u4e0b\u67e5\u770b\u662f\u5426\u662f\u6e38\u620f\u5f00\u53d1\u8005\u81ea\u5df1\u7ed1\u5b9a\u7684\u6d88\u606f")}});t.exports=a,cc._RF.pop()},{TcpClient:"TcpClient"}],GameViewBase:[function(e,t){"use strict";cc._RF.push(t,"7907bXlJspFC4Ec08KDst8V","GameViewBase"),e("os").type;var i=cc.Class({extends:e("LobbyBaseLayer"),properties:{chouMaNodePoolNum:28,GameCommonBetPrefab:cc.Prefab},ctor:function(){var e=this;this.tuoGuanLayer=null,this.hasTuoGuanLayer=!1,cc.checkIsFrontBack||(cc.checkIsFrontBack=!0,this.checkIsFrontStage()),this.loadingFlag=!1,this.isLoadedScene=!1,cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){e.isLoadedScene=!0})},setUiInfo:function(e){if(cc.game.setFrameRate(45),this.uiInfo=e,this.name="GameScene",this.uiInfo.gameBg=this.uiInfo.gameBg?this.uiInfo.gameBg:this.node,this.private_DismissRoomLayer=null,this.private_PlayerUiList={},this.private_VoiceQueue={},this.private_IsPlayingVoice=!1,this.private_VoiceLayer=null,this.private_RecordInterval=3,this.private_readyfun=null,this.private_RecordTimeMin=2,this.private_RecordTimeMax=15,this.private_moveToCancel=50,this.private_recordTime=1,this.private_min_dist=100,this.private_check_dist=!0,this.private_AreaChouMaList={},this.uiInfo.betAreaInfo&&this.uiInfo.betAreaInfo.areaCount)for(var t=0;t<this.uiInfo.betAreaInfo.areaCount;t++)this.private_AreaChouMaList[t]={};var i=["voiceBtn","chatBtn","playMoth","exitBtn","setBtn","dismissBtn","startBtn","inviteBtn","changeBtn","sitBtn","beginBtn","locatBtn"];this._BUTTON_TAG={};for(var o=0;o<=i.length;o++){var n=i[o];this._BUTTON_TAG[n]=o+100}this.initGameUIVisible(),this.initGameUIEventListener(),this.uiInfo.playInfo&&this.simpleAddLayer("prefab/lobby/WarRecordSetLayer"),this.isCanTuoGuan={},this.isCanTuoGuan.gold=!1,this.isCanTuoGuan.card=!1,this.isCanTuoGuan.private=!1,this.isCanTuoGuan.barriermatch=!1,this.isCanTuoGuan.match=!1,this.showResultDelayTime=2,this.matchPlayerFans=[],this.matchPlayerInfos=[]},showPersonMsgDialog:function(e,t,i,o){this.simpleAddLayer("prefab/personMsgDialog",e,!0,t,i,o)},initTableLogic:function(e){this.tableLogic=e,this.getLogicCallBack()},onLoad:function(){var e=this;if(this._super(),this.GameCommonBetPrefab)if(cc._chouMaNodePool){if(cc._chouMaNodePool.size()<this.chouMaNodePoolNum)for(var t=this.chouMaNodePoolNum-cc._chouMaNodePool.size(),i=0;i<t;++i){var o=cc.instantiate(this.GameCommonBetPrefab);cc._chouMaNodePool.put(o)}}else{cc._chouMaNodePool=new cc.NodePool;for(var n=0;n<this.chouMaNodePoolNum;++n){var a=cc.instantiate(this.GameCommonBetPrefab);cc._chouMaNodePool.put(a)}}this.checkGameSuccess=setTimeout(function(){e.scheduleOnce(function(){e.node&&cc.isValid(e.node)&&(e.node.getChildByName("GameSettingMenu")||(e.uiInfo.playInfo?e.checkGameSuccess&&clearTimeout(e.checkGameSuccess):(e.exitBtnTouchEnded(),e.scheduleOnce(function(){e.node&&cc.isValid(e.node)&&e.tableLogic.backLobby()},3.5))))},2)},500)},onDestroy:function(){this.checkGameSuccess&&clearTimeout(this.checkGameSuccess),LobbySocket.clearPackageQueue(),this.unscheduleAllCallbacks(),this.node.stopAllActions()},createChouMa:function(){if(this.GameCommonBetPrefab){var e=null;return(e=cc._chouMaNodePool.size()>0?cc._chouMaNodePool.get(this):cc.instantiate(this.GameCommonBetPrefab)).active||(e.active=!0),e}},despawnChouMa:function(e){this.GameCommonBetPrefab&&cc._chouMaNodePool.put(e)},onConnectSuccess:function(){var e=this;this.releaseCaches();var t={};console.log("onConnectSuccess beg"),this.uiInfo&&this.uiInfo.playInfo||(this.tableLogic.sendDeskInfo(),this.tableLogic.sendDeskUserInfo(),this.tableLogic.sendGameInfo(),t=RoomListManager.getRoomInfo()?RoomListManager.getRoomInfo():{}),console.log("onConnectSuccess 5555");var i={},o=E_ROOM_TYPE.CARD;this.uiInfo&&this.uiInfo.playInfo||(i=this.getIsCanTuoGuan(),o=t.type),console.log("onConnectSuccess 666");var n="GameSetting",a=null;this.uiInfo&&this.uiInfo.playInfo&&(n=this.uiInfo.gameSetting,a=this.uiInfo.showBtnRes),this.gameSettingLayer=null,this.addLayer(this.node,n,function(t){t.zIndex=G_GAME_SET_ZORDER_TAG,t.name="GameSettingMenu",e.gameSettingLayer=t},this,o,i,a),console.log("onConnectSuccess 777"),1==UserInfoManager.getMyInfo().matchStatus&&(UserInfoManager.getMyInfo().matchStatus=0,this.scheduleOnce(this.checkMatchStatus,1))},enterTransitionFinish:function(){},initGameUIVisible:function(){this.uiInfo.roomPswText&&(this.uiInfo.roomPswText.active=!1),this.uiInfo.roomMasterText&&(this.uiInfo.roomMasterText.active=!1),this.uiInfo.gameCountText&&(this.uiInfo.gameCountText.active=!1),this.uiInfo.gameBasePoint&&(this.uiInfo.gameBasePoint.active=!1),this.uiInfo.dismissBtn&&(this.uiInfo.dismissBtn.active=!1),this.uiInfo.exitBtn&&(this.uiInfo.exitBtn.active=!1),this.uiInfo.setBtn&&(this.uiInfo.setBtn.active=!1),this.uiInfo.locatBtn&&(this.uiInfo.locatBtn.active=!1),this.uiInfo.btn_img&&(this.uiInfo.btn_img.active=!1),this.uiInfo.img_createrCard&&(this.uiInfo.img_createrCard.active=!1),this.uiInfo.btn_room&&(this.uiInfo.btn_room.active=!1),this.showGoldRoomInfo(!1),this.showBuyRoomInfo(!1),this.showMatchRoomInfo(!1)},initGameUIEventListener:function(){var e=function(e){var t=e.target.buttonTag;"touchend"==e.type?(this.playClickEffect(),"voiceBtn"==t?this.voiceBtnTouchEnded():"chatBtn"==t?this.chatBtnTouchEnded():"playMoth"==t?this.doPlayMothonClick():"startBtn"==t?this.doStartBtnTouchEnded():"inviteBtn"==t?this.doInviteBtnTouchEnded():"changeBtn"==t?this.doChangeBtnTouchEnded():"sitBtn"==t?this.doSitBtnTouchEnded():"beginBtn"==t?this.doBeginBtnTouchEnded():"locatBtn"==t?this.doLocatBtnTouchEnded():console.log(tools.stringFormat("\u672a\u5b9a\u4e49\u7684TAG = {0}",t))):"touchstart"==e.type||e.type}.bind(this);for(var t in this._BUTTON_TAG)this.uiInfo[t]&&(this.uiInfo[t].buttonTag=t,this.uiInfo[t].on(cc.Node.EventType.TOUCH_START,e),this.uiInfo[t].on(cc.Node.EventType.TOUCH_CANCEL,e),this.uiInfo[t].on(cc.Node.EventType.TOUCH_END,e))},getMoneyDisplay:function(e){return this.roomInfo_=this.roomInfo_||RoomListManager.getRoomInfo(),!this.roomInfo_||this.roomInfo_.type!=E_ROOM_TYPE.PRIVATE&&this.roomInfo_.type!=E_ROOM_TYPE.TABLE&&this.roomInfo_.type!=E_ROOM_TYPE.GOLD?e:F_GetMoneyDisplay(e)},doStartBtnTouchEnded:function(){this.uiInfo.startBtn.active=!1,this.tableLogic.sendAgreeGame()},doInviteBtnTouchEnded:function(){this.simpleAddLayer("prefab/LayerLeadShare")},doChangeBtnTouchEnded:function(){this.tableLogic.sendChangeDesk()},doSitBtnTouchEnded:function(){this.tableLogic.sendSit()},doBeginBtnTouchEnded:function(){this.tableLogic.sendStart()},doLocatBtnTouchEnded:function(){this.createLocatInfoLayer()},doPlayMothonClick:function(){},dismissBtnTouchEnded:function(){if(this.uiInfo.playInfo)return LOOBBY_STATIC=!1,console.warn("dismissBtnTouchEnded"),void cc.director.loadScene("main");this.tableLogic.doDismissRoom()},isPlayStatic:function(){return this.tableLogic.isPlayStatic()},exitBtnTouchEnded:function(){this.tableLogic.doLeftRoom()},StandandWatchtBtnTouchEnded:function(){this.tableLogic.sendStandandWatch()},standBtnTouchEnded:function(){this.tableLogic.sendStand()},tuoBtnTouchEnded:function(){this.tableLogic.isMePlaying()&&!this.tableLogic.isMeTuoGuan()?this.tableLogic.sendAuto(!0):createTips("\u6e38\u620f\u4e2d\u624d\u53ef\u4ee5\u6258\u7ba1")},wanfaBtnTouchEnded:function(){this.doPlayMothonClick()},quKuanBtnTouchEnded:function(){console.log(">>>>>\u53d6\u6b3e>>>>>\u53d6\u6b3e")},showGameYanCode:function(){console.log("showGameYanCode is inexistence")},yanBtnTouchEnded:function(){this.simpleAddLayer("prefab/ChaYan/ChaYanZhuShouLayer",GameManager.getGameID())},removeVoiceLayer:function(){this.private_VoiceLayer&&(this.private_VoiceLayer.stopVoiceAction(),this.private_VoiceLayer=null,this.private_startRecord=null,this.private_touchBeganY=null,this.private_showVoiceCancel=null,this.private_recordTime=1)},showVoiceCancel:function(){this.private_VoiceLayer&&(this.private_showVoiceCancel||(this.private_VoiceLayer.showVoiceCancel(),this.private_showVoiceCancel=!0))},showVoiceLayer:function(){this.private_VoiceLayer&&this.private_showVoiceCancel&&(this.private_VoiceLayer.showVoiceLayer(),this.private_showVoiceCancel=null)},voiceBtnTouchBegan:function(){this.private_startRecord=!0,this.startScheduleRecordTime(),this.removeVoiceLayer(),this.private_VoiceLayer=this.simpleAddLayer(this.uiInfo.gameBg,"ui.VoiceLayer"),this.private_VoiceLayer.setLocalZOrder(G_VOICE_ZORDER_TAG),MYAudioEngine.startRecord()},startScheduleRecordTime:function(){this.stopScheduleRecordTime();var e=function(){this.private_recordTime=this.private_recordTime+1,console.log("this.private_recordTime = {0}",this.private_recordTime),this.private_recordTime>this.private_RecordTimeMax&&(this.voiceBtnTouchCanceled(),this.stopScheduleRecordTime(),this.private_isRecordTimeOver=!0)};this.schedule(e,1,!1),this.private_recordCallback=e},stopScheduleRecordTime:function(){this.private_recordCallback&&(this.unschedule(this.private_recordCallback),this.private_recordCallback=null)},voiceBtnTouchEnded:function(){this.simpleAddLayer("prefab/VoiceLayer")},clearRecordIntervalText:function(){if(this.uiInfo.voiceBtn){var e=this.uiInfo.voiceBtn.getChildByName("RecordIntervalText");e&&e.removeFromParent()}},setRecordInterval:function(){},voiceBtnTouchCanceled:function(){this.private_showVoiceCancel?(MYAudioEngine.cancelRecord(),this.stopScheduleRecordTime(),this.removeVoiceLayer()):this.voiceBtnTouchEnded()},onTouchBegan:function(e){if(console.log("GameViewBase:onTouchBegan"),this.private_startRecord&&!this.private_touchBeganY)return this.private_touchBeganY=e.getLocation().y,!0},onTouchMoved:function(e){console.log("GameViewBase:onTouchMoved"),this.private_touchBeganY&&(e.getLocation().y-this.private_touchBeganY>=this.private_moveToCancel?this.showVoiceCancel():this.showVoiceLayer())},setBtnTouchEnded:function(){var e=function(e){this.showGameBackColor(e)}.bind(this);this.addLayer(this.node,"GameSetLayer",function(e){e.zIndex=G_GAME_SET_ZORDER_TAG}.bind(this),e,this)},RulesBtnTouchEnded:function(){var e=function(){}.bind(this);this.addLayer(this.node,"RoomruletLayer",function(e){e.zIndex=G_GAME_SET_ZORDER_TAG}.bind(this),e)},setBtnTouchFeedLayer:function(){var e=function(){}.bind(this);this.addLayer(this.node,"Feed/FeedLayer_width",function(e){e.zIndex=G_GAME_SET_ZORDER_TAG}.bind(this),e)},showWaitTip:function(){console.log("showWaitTip is inexistence")},chatBtnTouchEnded:function(){this.simpleAddLayer("prefab/ChatLayer")},getUserByPos:function(e){if(!this.uiInfo.seatCount)return null;for(var t=0;t<this.uiInfo.seatCount;t++)if(this.private_PlayerUiList[t]&&this.private_PlayerUiList[t].isInUser(e)){var i=this.tableLogic.viewToLogicSeatNo(t);return this.tableLogic.getUserBySeat(i)}return null},addUser:function(e,t){if(this.uiInfo)if(null!=e)if(null!=t)if(this.uiInfo.seatCount&&0<=t&&t<this.uiInfo.seatCount){var i;if(this.removeUser(t),this.uiInfo.playInfo||this.tableLogic.isBuyRoom(),this.uiInfo.playerUIs){if(!(i=this.uiInfo.playerUIs[t]))return;i.active=!0}else{i=cc.instantiate(this.uiInfo.playerPrefab);var o=this.uiInfo.sitPosArr&&this.uiInfo.sitPosArr[t];i.zIndex=G_PLAYERUI_ZORDER_TAG,o.addChild(i)}this.uiInfo.playerScale&&0!=t&&i.setScale(.75),this.tableLogic.getUserByID(e.userID)&&(e.money=this.tableLogic.getUserByID(e.userID).money);var n="PlayerUI";this.uiInfo.playerUIScriptName&&(n=this.uiInfo.playerUIScriptName);var a=i.getComponent(n);if(a.setData(e,this),this.private_PlayerUiList[t]=a,this.uiInfo.sitInforArr&&!this.uiInfo.playInfo&&this.uiInfo.sitInforArr[t]){e.userStatus!=E_UserStatus.USER_STATUS_WATCH&&this.tableLogic.getGameStatus()==HZMJ_GameStation.GS_STATUS_FREE&&0==t&&this.uiInfo.btn_loading_Startimg&&(this.uiInfo.btn_loading_Startimg.active=!1),0==t&&this.uiInfo.btn_room&&(this.uiInfo.btn_room.active=!1);var s=this.uiInfo.sitInforArr[t],r=s.getChildByName("Name").getComponent(cc.Label),c=s.getChildByName("Avata_Node").getChildByName("Image_Avata");c.active=!0,r.string=tools.getCutStringByCount(e.name,5);var u=function(e){c&&cc.isValid(c)&&(c.getComponent(cc.Sprite).spriteFrame=e)}.bind(this);AvatarManager.requestHeadRes(e.headURL,e.userID,u,c)}this.uiInfo.playInfo||this.tableLogic.viewToLogicSeatNo(t)==this.tableLogic.getCurBankerSeatNO()&&255!=this.tableLogic.getCurBankerSeatNO()&&this.showUserBankerFlag(t,!0),null!=this.uiInfo.playInfo||null!=e.isOnline||isNotNeedCutMsg||this.showUserCut(t),this.uiInfo.playInfo||(this.showRoomMaster(t,this.tableLogic.getRoomMasterId()),this.showUserAuto(t,e.isAuto),this.showUserReady(t,E_UserStatus.USER_STATUS_AGREE==e.userStatus),e.userID==this.tableLogic.getMyID()&&this.refreshMyUI(e),this.addUserOtherInfo(t,e))}else console.error("Error in GameViewBase:addUser \u89c6\u56fe\u5ea7\u4f4d\u53f7\u8d85\u51fa\u8303\u56f4");else console.error("Error in GameViewBase:addUser \u73a9\u5bb6\u89c6\u56fe\u5ea7\u4f4d\u53f7\u4e3a\u7a7a");else console.error("Error in GameViewBase:addUser \u73a9\u5bb6\u4fe1\u606f\u4e3a\u7a7a");else console.error("this.uiInfo is Null")},refreshMyUI:function(e){this.tableLogic.isGoldRoom()&&(this.showGoldRoomInfo(!0),e.userStatus==E_UserStatus.USER_STATUS_SITING?this.scheduleReadyFun(this.tableLogic.getLeftReadyTime()):E_UserStatus.USER_STATUS_AGREE==e.userStatus?this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=!1):e.userStatus==E_UserStatus.USER_STATUS_PLAYING&&this.showGoldRoomInfo(!1)),this.tableLogic.isRoom()&&(this.uiInfo.startBtn&&(this.tableLogic.getGameCurCountData(),this.uiInfo.startBtn.active=e.userStatus==E_UserStatus.USER_STATUS_SITING),this.uiInfo.watchImg&&(this.uiInfo.watchImg.active=!1),this.uiInfo.sitBtn&&(this.uiInfo.sitBtn.active=!1),this.uiInfo.voiceBtn,this.uiInfo.chatBtn&&(this.uiInfo.chatBtn.active=!0),this.uiInfo.locatBtn&&(this.uiInfo.locatBtn.active=!0)),e.userStatus==E_UserStatus.USER_STATUS_PLAYING?this.setCheckPointGameShowLeaveMenu(!1):this.setCheckPointGameShowLeaveMenu(!0)},getPlayerUiByViewSeatNO:function(e){return this.private_PlayerUiList[e]},removeUser:function(e){if(this.private_PlayerUiList&&this.private_PlayerUiList[e]&&(this.private_PlayerUiList[e].node.active=!1,this.private_PlayerUiList[e]=null,this.removeUserOtherInfo(e)),this.uiInfo&&this.uiInfo.sitInforArr&&this.uiInfo.sitInforArr[e]){0==e&&(this.uiInfo.btn_loading_Startimg&&(this.uiInfo.btn_loading_Startimg.active=!1),this.uiInfo.btn_room&&(this.uiInfo.btn_room.active=!1),this.uiInfo.beginBtn&&(this.uiInfo.beginBtn.active=!1));var t=this.uiInfo.sitInforArr[e],i=t.getChildByName("Name").getComponent(cc.Label),o=t.getChildByName("Avata_Node").getChildByName("Image_Avata");t.getChildByName("showReady").active=!1,o.active=!1,i.string=""}},removeAllPlayerUI:function(){for(var e in console.log(" removeAllPlayerUI()"),this.private_PlayerUiList)"string"==typeof e&&(e=Number(e)),console.log(" removeUser viewSeatNO = {0} "+e),this.removeUser(e)},dealNotifyDeskGameBegin:function(){if(this.uiInfo&&this.uiInfo.seatCount)for(var e=0;e<this.uiInfo.seatCount;e++)this.private_PlayerUiList[e]&&this.showUserReady(e,!1);this.tableLogic.isGoldRoom()&&(this.unscheduleReadyFun(),this.showGoldRoomInfo(!1)),(this.tableLogic.isBuyRoom()||this.tableLogic.isPrivateRoom()||this.tableLogic.isVIPRoom())&&this.showBuyRoomInfo(!1),this.setCheckPointGameShowLeaveMenu(!1)},dealNotifyDeskGameFinish:function(e){if(this.uiInfo&&this.uiInfo.seatCount)for(var t=0;t<this.uiInfo.seatCount;t++)this.private_PlayerUiList[t]&&this.private_PlayerUiList[t].showBet(!1);if((this.tableLogic.isGoldRoom()||this.tableLogic.isRankMatchRoom())&&(this.scheduleReadyFun(this.tableLogic.getCfgReadyTime()),this.scheduleOnce(function(){this.showGoldRoomInfo(!0);var e=this.tableLogic.getUserByID(this.tableLogic.getMyID());e&&this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=e.userStatus==E_UserStatus.USER_STATUS_SITING)},this.showResultDelayTime,"\u5ef6\u8fdf3\u79d2\u663e\u793a\u51c6\u5907\u6309\u94ae")),this.tableLogic.isBuyRoom()||this.tableLogic.isPrivateRoom()||this.tableLogic.isVIPRoom()){var i=this.tableLogic.getGameCountInfo();i[0]!=i[1]&&(this.uiInfo.startBtn&&!this.tableLogic.isMeWatching()&&this.scheduleOnce(function(){var e=this.tableLogic.getUserByID(this.tableLogic.getMyID());e&&(e.userStatus==E_UserStatus.USER_STATUS_SITING&&(this.uiInfo.startBtn.x=0),this.uiInfo.startBtn.active=e.userStatus==E_UserStatus.USER_STATUS_SITING)},this.showResultDelayTime),this.tableLogic.isMeWatching()&&this.uiInfo.sitBtn&&(this.uiInfo.sitBtn.active=!this.tableLogic.isDeskPlaying()))}if(this.tableLogic.isPrivateRoom()){var o="",n=0,a=this.tableLogic.getGameCountInfo();if(a[0]!=a[1])for(var s in e.needMoneyuserID){var r=e.needMoneyuserID[s];0!=r&&(o=o+this.tableLogic.getUserNameByID(r)+" ",n+=1)}""!=o.replace(/\s+/g,"")&&0!=n&&createTips("\u7528\u6237: "+o+"\u91d1\u5e01\u4e0d\u8db3\u4ee5\u7ee7\u7eed\u6e38\u620f,\u6b63\u5728\u5145\u503c\u4e2d,\u8bf7\u7a0d\u7b49",10)}if(this.tableLogic.isVIPRoom()){var c="",u=0,h=this.tableLogic.getGameCountInfo();if(h[0]!=h[1])for(var l in e.needMoneyuserID){var d=e.needMoneyuserID[l];0!=d&&(c=c+this.tableLogic.getUserNameByID(d)+" ",u+=1)}""!=c.replace(/\s+/g,"")&&0!=u&&createTips("\u7528\u6237: "+c+"\u706b\u5e01\u4e0d\u8db3\u4ee5\u7ee7\u7eed\u6e38\u620f,\u6b63\u5728\u5145\u503c\u4e2d,\u8bf7\u7a0d\u7b49",10)}},dealNotifyDeskCanBegin:function(){this.showBeginBtn(!0),this.uiInfo.btn_img&&(this.uiInfo.btn_img.active=!1)},dealNotifyDeskCannotbegin:function(){this.showBeginBtn(!1),this.uiInfo.btn_img&&(this.uiInfo.btn_img.active=!1)},updateUserMoney:function(e,t,i,o,n,a){this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].updateMoney(t,i,o,a)},updateUserJewels:function(e,t){this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].updateJewels(t)},playMagicExpress:function(e,t,i){var o=this;if(t&&e)for(var n in this.private_PlayerUiList){var a=this.private_PlayerUiList[n];a&&(a.user.userID==e&&(e=n),a.user.userID==t&&(t=n))}var s,r,c=null,u=null;if(e>10?(e>10&&(c=e==this.tableLogic.getMyID()?this.getGameViewWanJiaNode():this.getGameViewOhtersNode()),t>10?u=this.getGameViewOhtersNode():this.private_PlayerUiList&&this.private_PlayerUiList[t]&&(u=this.private_PlayerUiList[t].node)):(this.private_PlayerUiList&&this.private_PlayerUiList[e]&&(c=this.private_PlayerUiList[e].node),this.private_PlayerUiList&&this.private_PlayerUiList[t]&&(u=this.private_PlayerUiList[t].node)),c)if(u){if(this.uiInfo.playerUIs){if(s=this.node.convertToWorldSpace(c),!u)return void createTips("\u8be5\u5ea7\u4f4d\u5df2\u65e0\u73a9\u5bb6");r=this.node.convertToWorldSpace(u)}else{var h=c.getComponent("PlayerUI").getImageAvatar().x,l=c.getComponent("PlayerUI").getImageAvatar().x;if((s=this.node.convertToWorldSpace(cc.v2(c.parent.x,c.parent.y))).x=0==h?s.x+h:s.x+h+20,!u)return void createTips("\u8be5\u5ea7\u4f4d\u5df2\u65e0\u73a9\u5bb6");(r=this.node.convertToWorldSpace(cc.v2(u.parent.x,u.parent.y))).x=0==l?r.x+l:r.x+l+20}var d="";switch(i+""){case"1":d="1";break;case"2":d="2";break;case"3":d="3";break;case"4":d="4";break;case"5":d="5_1";break;case"6":d="5_2";break;case"7":d="7";break;case"8":d="8";break;case"9":d="9";break;case"10":d="6"}var f="animation";""!=d&&(f=d);var _=skeletonAnimationCreate("Magic/skeleton",f);_.zIndex=1e4,_.setScale(1.3),_.setAnchorPoint(cc.v2(.5,.5)),MYAudioEngine.playEffect("Magic/sound/magic_"+i),_.setPosition(cc.v2(s.x,s.y)),this.node.addChild(_),_.runAction(cc.sequence(cc.moveTo(.45,cc.v2(r.x,r.y)),cc.callFunc(function(){var e=_.getComponent(sp.Skeleton);e.loop=!1,e.setCompleteListener(function(){var e=function(){_&&(_.parent=null)}.bind(this);this.scheduleOnce(e,.1)}.bind(o))})))}else console.log("toPlayerUI \u4e3a\u7a7a");else console.log("srcPlayerUI \u4e3a\u7a7a")},showSystemMsg:function(e){cc.director.getNotificationNode().pushMsg(e)},showPropGiving:function(e,t,i){E_PROP_ID_DEF.prop_anti_id!=i&&E_PROP_ID_DEF.prop_changecard_id!=i&&E_PROP_ID_DEF.prop_recordcrad_id!=i&&(this.uiInfo.sitPosArr[e],this.uiInfo.sitPosArr[t],this.tableLogic.viewToLogicSeatNo(t)==this.tableLogic.getMySeatNO()&&cc.p(this.uiInfo.gameBg.getContentSize().width/2,this.uiInfo.gameBg.getContentSize().height/2))},showUserGrabMakers:function(e){this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showGrabMakersEffect()},showUserBankerFlag:function(){for(var e=0;e<this.uiInfo.seatCount;e++)this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showBanker(!1)},showUserBet:function(e,t){console.log("in GameViewBase:showUserBet viewSeatNO = {0}, bet = {1}",e,t),this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showBet(!0,t)},showUserCut:function(e){this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showCut()},showUserReady:function(e,t){null==t&&(t=!0),this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showReady&&this.private_PlayerUiList[e].showReady(t),this.uiInfo.sitInforArr[e]&&(this.uiInfo.sitInforArr[e].getChildByName("showReady").active=t)},showResultImg:function(e,t,i){this.private_PlayerUiList[t]&&this.private_PlayerUiList[t].showResultImg(e,i)},showRoomMaster:function(e,t){this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showPlayRoomMaster(t)},showQiangZhuang:function(e,t){null==t&&(t=!0),this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showQiangZhuang&&this.private_PlayerUiList[e].showQiangZhuang(t)},clearQiangZhuang:function(){var e=this.private_PlayerUiList;Object.keys(e).forEach(function(t){e[t].showQiangZhuang(!1)})},showUserAuto:function(e,t){if(0==e&&!this.tableLogic.isMeWatching())if(t){if(0==this.hasTuoGuanLayer){var i=function(){LobbySocket.isConnected()?this.tableLogic.sendAuto(!1):this.removeTuoGuanLayer()}.bind(this);this.hasTuoGuanLayer=!0,this.addLayer(this.node,"TuoGuanLayer",function(e){e.zIndex=G_TUOGUAN_LAYER_TAG,this.tuoGuanLayer=e}.bind(this),i)}}else this.removeTuoGuanLayer();this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showAuto(t)},removeTuoGuanLayer:function(){this.tuoGuanLayer&&(this.tuoGuanLayer.getComponent(cc.Component).removeLayer(),this.hasTuoGuanLayer=!1)},showUserWords:function(e,t){console.log("GameViewBase showUserWords",e),this.private_PlayerUiList[e]&&this.private_PlayerUiList[e].showWords(t,this.tableLogic.getUserSexBySeat(this.tableLogic.viewToLogicSeatNo(e)),this)},playVoiceH5:function(){},dealNotifyRandomChangeSeat:function(){},playUserVoice:function(e,t){var i={};i.viewSeatNO=e,i.voiceID=t,table.insert(this.private_VoiceQueue,i),this.checkVoiceQueue()},checkVoiceQueue:function(){if(!this.private_IsPlayingVoice&&!tableIsEmpty(this.private_VoiceQueue)){var e=table.remove(this.private_VoiceQueue,1);this.private_PlayerUiList[e.viewSeatNO]?(this.private_IsPlayingVoice=!0,this.private_PlayerUiList[e.viewSeatNO].playVoice(e.voiceID,function(){this.overVoicePlay()})):this.checkVoiceQueue()}},overVoicePlay:function(){this.private_IsPlayingVoice=!1,this.checkVoiceQueue()},showChouMa:function(t,i,o){var n={};t>=this.uiInfo.seatCount?n.startPos=this.uiInfo.noSeatPos:n.startPos=this.uiInfo.sitPosArr[t],n.res=this.uiInfo.betAreaInfo.ChouMaResArr1[i],n.offsetX=this.uiInfo.betAreaInfo.offsetX,n.offsetY=this.uiInfo.betAreaInfo.offsetY,n.targetPos=this.uiInfo.betAreaInfo.areaPosArr[o],n.parent=this.uiInfo.gameBg,n.scale=this.uiInfo.betAreaInfo.scale;var a=e("ui.ChouMaObj").create(n);this.private_AreaChouMaList[o][this.private_AreaChouMaList[o].length+1]=a},backChouMa:function(e,t){e=e||0,this.scheduleOnce(function i(){for(var o=1;o<this.private_AreaChouMaList[e].length;o++){var n=this.private_AreaChouMaList[e][o];return table.remove(this.private_AreaChouMaList[e],o),void n.goBack(t)}this.unscheduleOnce(i)},.01)},quicklyBackChouMa:function(){for(var e=0;e<this.uiInfo.betAreaInfo.areaCount;e++){for(var t=1;t<this.private_AreaChouMaList[e].length;t++)this.private_AreaChouMaList[e][t]&&this.private_AreaChouMaList[e][t].removeFromParent();this.private_AreaChouMaList[e]={}}},showVipRoomInfo:function(e){if(e){for(var t in window.deskPasswd=e.deskPasswd,this.uiInfo.roomPswText&&(this.uiInfo.roomPswText.active=!0,this.uiInfo.roomPswText.getComponent(cc.Label).string=tools.stringFormat("\u623f\u53f7: {0}",e.deskPasswd)),this.uiInfo.roomMasterText&&(this.uiInfo.roomMasterText.active=!0,this.uiInfo.roomMasterText.getComponent(cc.Label).string=tools.stringFormat("\u623f\u4e3b: {0}",e.masterName)),this.uiInfo.gameCountText&&(this.uiInfo.gameCountText.active=!0,this.uiInfo.gameCountText.getComponent(cc.Label).string=tools.stringFormat("\u5c40\u6570: {0}/{1}",0|e.runGameCount,e.totalGameCount)),this.private_PlayerUiList){var i=this.private_PlayerUiList[t];i&&i.showPlayRoomMaster(e.masterID)}this.tableLogic.isMeWatching()?(this.uiInfo.watchImg&&(this.uiInfo.watchImg.active=!0),this.uiInfo.sitBtn&&(this.uiInfo.sitBtn.active=!this.tableLogic.isDeskPlaying()),this.uiInfo.voiceBtn,this.uiInfo.chatBtn&&(this.uiInfo.chatBtn.active=!1)):(this.uiInfo.watchImg&&(this.uiInfo.watchImg.active=!1),this.uiInfo.sitBtn&&(this.uiInfo.sitBtn.active=!1),this.uiInfo.voiceBtn,this.uiInfo.chatBtn&&(this.uiInfo.chatBtn.active=!0)),this.doOtherThings(e),this.onDeskUserCountChange()}},setShareInfo:function(){var e=LobbySocket.getMyInfo().name,t=LobbySocket.getMyInfo().userID,i=GameManager.getGameID(),o=(GameManager.getGameNameByGameID(i),this.tableLogic.getGameRules()),n=GameManager.getRoomListTypeJsonRule(o),a=GameManager.getRoomListRsJsonRule(o);a=a+"-"+GameManager.getRoomListTimeJsonRule(o)+"-"+n+"--"+e+"("+t+")";var s=window.sharedWords.length,r="";s>0&&(r=window.sharedWords[Math.floor(Math.random()*(s-1))]),a=r,wx&&(wx.updateAppMessageShareData({title:"\u5076ONE\u9189\u7f8e\u57ce",desc:a,link:wxShareURL,imgUrl:wxShareAdvIMG,success:function(){}}),wx.updateTimelineShareData({title:"\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\u3002\u65e0\u9700\u4e0b\u8f7d\uff0c\u968f\u65f6\u968f\u5730\u4e3a\u5bb6\u4e61\u4ee3\u8a00\uff01\uff01",desc:"",link:wxShareURL,imgUrl:wxShareAdvIMG,success:function(){}}))},showGoldRoomInfo:function(e){this.uiInfo&&(this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=e),this.uiInfo.changeBtn&&(this.uiInfo.changeBtn.active=e))},showMatchRoomInfo:function(e){this.uiInfo&&(this.uiInfo.playInfo||this.tableLogic.isMatchRoom())&&(this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=e),this.uiInfo.exitBtn&&(this.uiInfo.exitBtn.active=e))},showBuyRoomInfo:function(e){this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=e),this.uiInfo.inviteBtn&&(this.uiInfo.inviteBtn.active=e),this.uiInfo.sitBtn&&(this.uiInfo.sitBtn.active=e),this.uiInfo.beginBtn&&(e&&console.log("erroe"),this.uiInfo.beginBtn.active=e),this.uiInfo.btn_loading_Startimg&&(this.uiInfo.btn_loading_Startimg.active=!1)},showBeginBtn:function(e){this.uiInfo.beginBtn&&(this.uiInfo.beginBtn.active=e,e&&console.log("erroe")),this.uiInfo.btn_loading_Startimg&&(this.uiInfo.btn_loading_Startimg.active=!1)},createDismissRoomLayer:function(e,t){var i=this,o={};for(var n in o.callback=t,o.time=e.lefWaitDismissTime,o.cfgTime=e.cfgDismissTime,o.deskStation=e.deskStation,o.name=this.tableLogic.getUserNameBySeat(o.deskStation),o.myDeskStation=this.tableLogic.getMySeatNO(),e.userList){var a=e.userList[n];a.name=this.tableLogic.getUserNameBySeat(a.deskStation),a.headURL=this.tableLogic.getUserHeadURLBySeat(a.deskStation),a.userID=this.tableLogic.getUserIdBySeat(a.deskStation)}o.userList=e.userList;var s=function(e){if(!i.goBtnHavetAdd)if(i.private_DismissRoomLayer&&null!=i.private_DismissRoomLayer)i.private_DismissRoomLayer.updateLayer(e);else{i.goBtnHavetAdd=!0;var t=function(){this.private_DismissRoomLayer=null}.bind(i),o=i.uiInfo.dismissRoomLayer||"DismissRoomLayer";i.addLayer(i.node,o,function(e){e.newSetTag(G_DISMISS_ROOM_LAYER_TAG),e.zIndex=G_DISMISS_ROOM_LAYER_TAG,i.private_DismissRoomLayer=e.getComponent(cc.Component),i.goBtnHavetAdd=!1},e,t)}};""==o.userList[1].name&&this.scheduleOnce(function(){for(var t in o.name=i.tableLogic.getUserNameBySeat(o.deskStation),o.myDeskStation=i.tableLogic.getMySeatNO(),e.userList){var n=e.userList[t];n.name=i.tableLogic.getUserNameBySeat(n.deskStation),n.headURL=i.tableLogic.getUserHeadURLBySeat(n.deskStation),n.userID=i.tableLogic.getUserIdBySeat(n.deskStation)}o.userList=e.userList,s(o)},1),s(o)},removeDismissRoomLayer:function(){this.private_DismissRoomLayer&&(this.private_DismissRoomLayer.removeLayer(),this.private_DismissRoomLayer=null)},removeDismissRoomLayerEx:function(){this.private_DismissRoomLayer&&(this.private_DismissRoomLayer.removeLayerEx(),this.private_DismissRoomLayer=null)},createBuyGoldLayer:function(e,t){if(console.log("GameViewBase:createBuyGoldLayer"),this.private_BuyGoldLayer)this.private_BuyGoldLayer.updateLayer(e);else{var i=cc.director.getScene();this.private_BuyGoldLayer=this.simpleAddLayer(i,"ui.BuyGoldLayer",e,function(){this.private_BuyGoldLayer=null},t),this.private_BuyGoldLayer.newSetTag(G_BUYGOLD_ZORDER_TAG),this.private_BuyGoldLayer.setLocalZOrder(G_BUYGOLD_ZORDER_TAG)}},removeBuyGoldLayer:function(){this.private_BuyGoldLayer&&(this.private_BuyGoldLayer.removeLayer(),this.private_BuyGoldLayer=null)},scheduleReadyFun:function(e){console.log(" scheduleReadyFun(time)"),this.unscheduleReadyFun();var t=function(){this.private_readytime=this.private_readytime-1,this.onReadyFun(this.private_readytime),this.private_readytime<=0&&(this.unschedule(this.private_readyfun),this.private_readyfun=null)};this.schedule(t,1,!1),this.private_readytime=e||30,this.private_readyfun=t,this.onReadyFun(this.private_readytime)},unscheduleReadyFun:function(){this.private_readyfun&&(this.unschedule(this.private_readyfun),this.private_readyfun=null,this.onReadyFun(0))},updateUserTuoGuan:function(e){console.log(e," updateUserTuoGuan(user)"),this.showUserAuto(this.tableLogic.logicToViewSeatNo(e.deskStation),e.isAuto)},setGoldIsCanTuoGuan:function(e){this.isCanTuoGuan.gold=e},setBarrierMatchIsCanTuoGuan:function(e){this.isCanTuoGuan.barriermatch=e},setCardIsCanTuoGuan:function(e){this.isCanTuoGuan.card=e},setPrivateIsCanTuoGuan:function(e){this.isCanTuoGuan.private=e},setMatchIsCanTuoGuan:function(e){this.isCanTuoGuan.match=e},setIsCanTuoGuan:function(e){for(var t in this.isCanTuoGuan)this.isCanTuoGuan[t],this.isCanTuoGuan[t]=e},getIsCanTuoGuan:function(){return this.isCanTuoGuan},onDeskUserAgree:function(e){e==this.tableLogic.getMySeatNO()&&(this.uiInfo.startBtn&&(this.uiInfo.startBtn.active=!1),this.unscheduleReadyFun()),this.showUserReady(this.tableLogic.logicToViewSeatNo(e))},onDeskUserSit:function(e){"object"==typeof e&&(this.tableLogic.getMyID()==e.userID?(this.tableLogic.isMatchRoom()||this.tableLogic.isBarrierMatchRoom())&&this.tableLogic.sendAgreeGame():this.onDeskUserCountChange(),this.private_check_dist&&this.tableLogic.isRoom()&&this.checkUserDist(e))},onDeskUserCountChange:function(){if((this.tableLogic.isBuyRoom()||this.tableLogic.isPrivateRoom()||this.tableLogic.isVIPRoom())&&this.uiInfo.inviteBtn)if(this.tableLogic.isMePlaying())this.uiInfo.inviteBtn.active=!1,this.uiInfo.startBtn.x=0;else{var e=this.uiInfo.seatCount?this.uiInfo.seatCount:0;if(0==e)return void(this.uiInfo.inviteBtn.active=!1);if(this.tableLogic.getDeskUserCount()==e)this.uiInfo.inviteBtn.active=!1,this.uiInfo.startBtn.x=0;else{var t=!1;this.tableLogic.getDeskInfo()&&(t=!0),this.uiInfo.inviteBtn.active=t}}},setShowResultDelayTime:function(e){this.showResultDelayTime=e},getShowResultDelayTime:function(){return this.showResultDelayTime},updateRulesView:function(e){if(this.tableLogic.isPrivateRoom()){var t=JSON.parse(e||"");this.uiInfo.gameBasePoint&&t&&t.bPoint&&(this.uiInfo.gameBasePoint.getComponent(cc.Label).string=tools.stringFormat("\u5e95\u6ce8\uff1a{0}",t.bPoint),this.uiInfo.gameBasePoint.active=!0)}},createLocatInfoLayer:function(){},removeLocatInfoLayer:function(){},checkUserDist:function(e){var t=this;if(e.userStatus!=E_UserStatus.USER_STATUS_WATCH&&this.tableLogic.getGameStatus()!=HZMJ_GameStation.GS_STATUS_PLAYING){var i=e.longitude,o=e.latitude,n=this.tableLogic.getMyID(),a="G_LATITUDE_ITEM"+e.userID+"_"+window.deskPasswd,s=Number(cc.sys.localStorage.getItem(a)||0);if(tools.checkLongitudeOrLatitude(i)&&tools.checkLongitudeOrLatitude(o)){var r=this.tableLogic.getUserInfoListOfLogicSeat(),c=function(){var c=r[u];if(c&&c.userID==n&&c.userID!=e.userID){var l=c.longitude,d=c.latitude;if(tools.checkLongitudeOrLatitude(l)&&tools.checkLongitudeOrLatitude(d))if(1e3*Number(tools.getDistance(d,l,o,i))<(h=t).private_min_dist&&0==s){cc.sys.localStorage.setItem(a,1);var f;f=h.tableLogic.isMePlaying()?"\u7533\u8bf7\u89e3\u6563":"\u79bb\u5f00\u623f\u95f4";var _={};_.msg=tools.stringFormat("\n\u73a9\u5bb6\uff1a{0}\u4e0e\u73a9\u5bb6\uff1a{1}\u7684\u8ddd\u79bb\u4e0d\u8db3{2}\u7c73\uff0c\u662f\u5426\u7ee7\u7eed\u6e38\u620f\uff1f",e.name,c.name,t.private_min_dist),_.btn1=f,_.btn2="\u7ee7\u7eed\u6e38\u620f",_.callbackFun=function(e){e==f&&(h.tableLogic.isMePlaying()?h.tableLogic.sendDismissRoom():h.tableLogic.doLeftRoom())},createMsgBox(_)}}};for(var u in r){var h;c()}}}},dealNotifyERRMsg:function(e,t){if(console.log("------------dealNotifyERRMsg:\u63d0\u793a\u6d88\u606f\uff1a",e,t),e==E_NOTIFY_MSG_TYPE.SMT_CHAT);else if(e==E_NOTIFY_MSG_TYPE.SMT_EJECT)removeLoading(),createTips(t);else if(e==E_NOTIFY_MSG_TYPE.SMT_GLOBAL);else if(e==E_NOTIFY_MSG_TYPE.SMT_PROMPT){var i={};i.msg=t,i.btn1="\u786e  \u5b9a",i.callbackFun=function(){},createMsgBox(i)}else if(e==E_NOTIFY_MSG_TYPE.SMT_TABLE_ROLL&&!C_Director.NoticeLayer){var o=window.prefabMap.get("prefab/NoticeLayer"),n=cc.instantiate(o),a=n.getComponent("NoticeLayer");n.x=cc.winSize.width/2,n.y=cc.winSize.height/2,a.init(t),runningScene.addChild(n)}},onExit:function(){},runWithScene:function(){console.log(" runWithScene()"),this.stopEffectAndMusic()},clearCommonUI:function(){try{this.unscheduleAllCallbacks()}catch(e){}this.node.stopAllActions(),this.private_IsPlayingVoice=!1,this.private_VoiceQueue={},this.removeTuoGuanLayer(),this.removeBuyGoldLayer(),this.removeDismissRoomLayerEx(),this.removeAllPlayerUI(),this.showBeginBtn(!1),this.showGoldRoomInfo(!1),this.unscheduleReadyFun(),this.clearRecordIntervalText(),this.removeLocatInfoLayer(),this.removeAllMatchLayer()},onReadyFun:function(e){console.log(" onReadyFun(time = {0})",e),e>0&&this.tableLogic.setLeftReadyTime(e)},showMatchDeskStatus:function(e){this.needShowMatchResultLayer=!0;var t=function(){this.needShowMatchResultLayer=!1;var t=this.uiInfo.gameBg.getComponent("MatchResult");t?t.setShowMatchLevelUp():(this.removeAllMatchLayer(),1!=e.type&&this.showMatchLevelUp())}.bind(this);this.showMatchResultLayerCallback=t,this.scheduleOnce(t,.1)},setMatchResultPlayerDatas:function(e){this.matchPlayerFans=cloneObject(e),window.matchPlayerFans=e},showMatchGameResult:function(){},showRankMatchGameResult:function(e){this.uiInfo.gameBg.getChildByName("MatchRankResultLayer")||(this.setUserInfoExpUserLevel(e),this.addLayer(this.node,"Match/MatchRankResultLayer",function(e){e.zIndex=G_MATCH_LAYER_TAG,e.name="MatchRankResultLayer"},this,e))},setRankMatchUserExp:function(e){this.setUserInfoExpUserLevel(e)},removeMatchCheckPointResultLayer:function(){this.node.getChildByName("MatchCheckPointResultLayer")&&this.node.getChildByName("MatchCheckPointResultLayer").destroy()},setCheckPointInfo:function(e){var t=this,i=this,o=function(){i.removeMatchCheckPointResultLayer();var o=function(){i.addLayer(i.node,"Match/MatchCheckPointResultLayer",function(e){e.zIndex=G_CHECKPOINT_NOTIFY_LAYER_TAG,e.name="MatchCheckPointResultLayer"},i.tableLogic,e)}.bind(t);t.scheduleOnce(o,1.5)};0==e.bAgain?(o(),this.tableLogic.sendDeskCheckPointInfo()):1==e.bAgain?(o(),this.tableLogic.sendDeskCheckPointInfo()):2==e.bAgain&&o()},setDeskCheckPointInfo:function(e){this.addLayer(this.node,"Match/MatchCheckPointInfo",function(e){e.zIndex=G_CHECKPOINT_NOTIFY_LAYER_TAG,e.name="MatchCheckPointInfo"},e),this.curCheckPointNum=e.checkPointNum},setCheckPointEnd:function(){this.removeMatchCheckPointResultLayer(),this.addLayer(this.node,"Match/MatchCheckPointResultLayer",function(e){e.zIndex=G_CHECKPOINT_NOTIFY_LAYER_TAG,e.name="MatchCheckPointResultLayer"},this.tableLogic,null)},setDeskExpUserLevelInfo:function(e){if(!e){var t=UserInfoManager.getMyInfo();(e={}).gameExp=t.gameExp,e.UserLevel=t.UserLevel}this.node.getChildByName("MatchExpUserLevelInfo")&&this.node.getChildByName("MatchExpUserLevelInfo").destroy(),this.addLayer(this.node,"Match/MatchExpUserLevelInfo",function(e){e.zIndex=G_CHECKPOINT_NOTIFY_LAYER_TAG,e.name="MatchExpUserLevelInfo"},e)},setUserInfoExpUserLevel:function(e){var t=UserInfoManager.getMyInfo();t.gameExp=parseInt(F_GetMoneyDisplay(e.gameExp)),t.UserLevel=e.UserLevel,UserInfoManager.setMyInfo(cloneObject(t)),this.setDeskExpUserLevelInfo(t)},showMatchLevelUp:function(){this.uiInfo.gameBg.getChildByName("MatchLevelUpLayer")&&this.uiInfo.gameBg.getChildByName("MatchLevelUpLayer").removeFromParent();var e=MatchManager.getMatchDeskRankInfo();this.addLayer(this.node,"Match/MatchLevelUpLayer",function(e){e.zIndex=G_MATCH_LAYER_TAG,e.name="MatchLevelUpLayer"},this,e)},showMatchWaitStatus:function(e){if(this.showMatchRoomInfo(!1),this.dealMatchDeskGameInfo(e),1==e.iCurPeopleCount&&e.iCurMatchRound>1&&createTips("\u606d\u559c\u664b\u7ea7"),1==e.status)e.iCurPeopleCount==e.iMaxPeopleCount&&this.showMatchWait(e.resultType);else if(2==e.status&&e.iCurMatchRound<=e.iMaxMatchRound){if(!this.tableLogic.isMatchRoom())return;this.uiInfo.gameBg.getChildByName("MatchWaitLayer")&&this.uiInfo.gameBg.getChildByName("MatchWaitLayer").removeFromParent(),this.uiInfo.gameBg.getChildByName("MatchDeskInfoLayer")&&this.uiInfo.gameBg.getChildByName("MatchDeskInfoLayer").removeFromParent(),this.hidehideOverLayout(),this.removeAllMatchLayer()}},showMatchDeskFinish:function(){},showMatchWait:function(e){this.uiInfo.gameBg.getChildByName("MatchWaitLayer")||this.addLayer(this.node,"Match/MatchWaitLayer",function(e){e.zIndex=G_MATCH_LAYER_TAG,e.name="MatchWaitLayer"},this,e)},removeAllMatchLayer:function(){if(this.tableLogic.isMatchRoom()){if(this.uiInfo.gameBg.getChildByName("MatchWaitLayer")&&this.uiInfo.gameBg.getChildByName("MatchWaitLayer").removeFromParent(),this.uiInfo.gameBg.getChildByName("MatchDeskInfoLayer")&&this.uiInfo.gameBg.getChildByName("MatchDeskInfoLayer").removeFromParent(),this.uiInfo.gameBg.getChildByName("MatchResultLayer")){if(GameSocket.getIsSendLogoutRoom())return;this.uiInfo.gameBg.getChildByName("MatchResultLayer").removeFromParent()}else GameSocket.getIsSendLogoutRoom()&&this.needShowMatchResultLayer&&this.showMatchResultLayerCallback&&(this.showMatchResultLayerCallback(),this.needShowMatchResultLayer=!1);if(this.uiInfo.gameBg.getChildByName("MatchLevelUpLayer")){if(GameSocket.getIsSendLogoutRoom())return;this.uiInfo.gameBg.getChildByName("MatchLevelUpLayer").removeFromParent()}GameSocket.setIsSendLogoutRoom(!1)}},removeMatchNotifyLayer:function(){this.tableLogic.isMatchRoom()&&this.uiInfo.gameBg.getChildByName("MatchNotifyLayer")&&this.uiInfo.gameBg.getChildByName("MatchNotifyLayer").removeFromParent()},playMatchBeginEffect:function(){},setCheckPointGameShowLeaveMenu:function(e){void 0===e&&(e=!0),GameSocket.isCheckPointRoom()&&this.gameSettingLayer&&(e&&void 0!==this.curCheckPointNum&&this.curCheckPointNum>0&&(e=!1),this.gameSettingLayer.getComponent("GameSettingLayer").initSetListView(e))},addUserOtherInfo:function(){},removeUserOtherInfo:function(){},dealNotifyDeskUserLogonORoutRoom:function(){},dealNotifyDeskUserIsTourist:function(){},showGameBackColor:function(){},doOtherThings:function(){},hidehideOverLayout:function(){},getLogicCallBack:function(){},getGameViewZhuangNode:function(){},getGameViewWanJiaNode:function(){},getGameViewOhtersNode:function(){},dealMatchDeskGameInfo:function(){},onEnable:function(){this._super()},onDisable:function(){this._super()},loadResult:function(e,t,i){e||!t?cc.error("\u672a\u5b9a\u4e49\u7684\u9884\u5236\u4f53\u6216\u8005\u5176\u4ed6\u7c7b\u578b\u8d44\u6e90"+i):("object"==typeof t&&window.prefabMap.set(i+"",t),cc.loadData.loadGamePreData[cc.loadData.loadGamePreDataIndex],new Date,++cc.loadData.loadGamePreDataIndex,this.loadingFlag=!1,cc.loadData.loadGamePreDataIndex>=cc.loadData.loadGamePreData.length&&(new Date,this.checkPreLoadScence()))},loadPre:function(){var e=this;if(!(this.loadingFlag||(this.loadingFlag=!0,cc.loadData.loadGamePreDataIndex>=cc.loadData.loadGamePreData.length))){var t=cc.loadData.loadGamePreData[cc.loadData.loadGamePreDataIndex],i=(new Date,window.BundleName);cc.assetManager.loadBundle(i,function(i,o){"Texture"==t.preName?o.loadDir(t.url,cc.SpriteFrame,function(){},function(){e.loadResult(null,"Texture",t.url)}):"TextureAtlas"==t.preName?o.loadDir(t.url,cc.SpriteAtlas,function(){},function(){e.loadResult(null,"TextureAtlas",t.url)}):"bitmapFont"==t.preName?o.load(t.url,cc.BitmapFont,function(i,o){e.loadResult(null,o,"bitmapFont"+t.url)}):"json"==t.preName?o.load(t.url,cc.JsonAsset,function(i,o){e.loadResult(null,o,"json"+t.url)}):o.load(t.url+t.preName,function(i,o){e.loadResult(i,o,t.url+t.preName)})})}},update:function(){cc.sys.isNative||cc.loadData.loadGamePreDataIndex<cc.loadData.loadGamePreData.length&&this.loadPre()}});t.exports=i,cc._RF.pop()},{LobbyBaseLayer:"LobbyBaseLayer",os:1,"ui.ChouMaObj":void 0}],GlobalConfig:[function(e,t){"use strict";cc._RF.push(t,"717aerexOVNZa2qnG42yoEm","GlobalConfig"),window.G_PLATFORM_NAME_CHINESE="\u5076ONE\u9189\u7f8e\u57ce",window.G_PLATFORM_NAME="_DAXIANGXIASHAN",window.G_APP_NAME_EN="Daxaingxiashan",window.G_APP_NAME_CH="\u5076ONE\u9189\u7f8e\u57ce",window.G_CHOOSE_CITY="city_switch_new"+G_PLATFORM_NAME,window.G_ACCOUNT_KEY="loginAccountNoRepeat"+G_PLATFORM_NAME,window.G_PASSWARD_KEY="loginPasswordNotRepeat"+G_PLATFORM_NAME,window.G_PASSWARD_KEY="loginPasswardNotRepeat"+G_PLATFORM_NAME,window.G_MUSIC_SWITCH="music_switch"+G_PLATFORM_NAME,window.G_SOUND_SWITCH="sound_switch"+G_PLATFORM_NAME,window.G_MUSIC_CHANGE="music_change"+G_PLATFORM_NAME,window.G_SOUND_CHANGE="sound_change"+G_PLATFORM_NAME,window.G_BACKGROUND_SWITCH="backGround_switch"+G_PLATFORM_NAME,window.G_SOUND_SIZE="sound_size"+G_PLATFORM_NAME,window.G_OUTCARD_SOUND="outcard_sound"+G_PLATFORM_NAME,window.G_SOUND_TYPE="sound_type1"+G_PLATFORM_NAME,window.G_TING_CARD="ting_card"+G_PLATFORM_NAME,window.G_CARD_COLOR="card_color"+G_PLATFORM_NAME,window.G_GAME_BACK="game_back"+G_PLATFORM_NAME,window.G_LIVE_BROADCAST="live_broadcast"+G_PLATFORM_NAME,window.G_SHARE_USERID="share_userid"+G_PLATFORM_NAME,window.G_SOUND_LANGUAGE="sound_language",window.G_SOUND_LANGUAGE_IS_MANDARIN="0",window.G_CREATE_ROOM_DATA="create_room_data",window.G_LOGIN_KEY=1,window.G_SHOW_GAME_VOICE=!1,window.G_GAMESEVER_KEY=1,1==window.G_GAMESEVER_KEY?(window.G_PHP_IP="ouwan.hmzb.top",window.G_HTTP_DOMAIN="39.99.248.19",window.G_AGENT_SERVER="39.99.248.19"):(window.G_PHP_IP="ouone.hmzb.top",window.G_HTTP_DOMAIN="47.106.184.122",window.G_AGENT_SERVER="47.106.184.122"),window.wxShareURL="https://ouwan.hmzb.top/api/v1/server/Wxlogauth",window.wxShareIMG="http://ouwan.hmzb.top/cocos/imag_dxxs.png",window.wxShareAdvIMG="http://ouwan.hmzb.top/cocos/imag_dxxs.png",window.wxlobby_Qurcode="http://ouwan.hmzb.top/cocos/lobby_Qurcode.png",window.wxgame_Qurcode="http://ouwan.hmzb.top/cocos/game_Qurcode.png",window.iCheckCode="",window.G_SECRET_KEY=25614,window.G_SERVER_PORT=8090,window.G_SEND_PORT=3015,window.USER_MAGICEXPRESSCOSTDIAMON=[20,10,20,10,30,30,10,15,20,40],window.G_SHOP_BUY_CHANNEL=2,window.G_LOGIN_TYPE_XX=0,window.G_WX_UINIONID=null,window.G_USER_PASSWORD=null,window.G_PHONE_NUMBER="phone_number"+G_PLATFORM_NAME,window.G_PHONE_PASSWD="phone_passwd"+G_PLATFORM_NAME,window.G_REMEMBER_PASSWORD="remember_password"+G_PLATFORM_NAME,window.G_LOGIN_TYPE="login_type"+G_PLATFORM_NAME,window.G_IS_LOADER_STATIC_DATA=!1,window.G_WEICHAT_REFRESH_TOKEN="weichat_refresh_token"+G_PLATFORM_NAME,window.G_WEICHAT_OPENID="weichat_openid"+G_PLATFORM_NAME,window.G_QQ_ACCESS_TOKEN="qq_access_token"+G_PLATFORM_NAME,window.G_QQ_OPENID="qq_openid"+G_PLATFORM_NAME,window.G_QQ_EXPIRES_IN="qq_expires_in"+G_PLATFORM_NAME,window.G_PHONE_NUMBER="phone_number"+G_PLATFORM_NAME,window.G_PHONE_PASSWD="phone_passwd"+G_PLATFORM_NAME,window.G_LOGIN_TYPE="login_type"+G_PLATFORM_NAME,window.G_REMEMBER_PASSWORD="remember_password"+G_PLATFORM_NAME,window.G_LOBBY_LAYOUT_TYPE="lobby_layout_type"+G_PLATFORM_NAME,window.G_GAME_VERSION_KEY="game_{0}_version"+G_PLATFORM_NAME,window.G_JOIN_ROOM_SCENE="join_room_scene_{0}"+G_PLATFORM_NAME,window.G_REQUEST_CODE_TIME="request_code_time_{0}"+G_PLATFORM_NAME,window.G_ZHIDING_CLUB_ID="zhiding_club_id_{0}"+G_PLATFORM_NAME,window.G_SELECTED_SERVER_ID="selected_server_id"+G_PLATFORM_NAME,window.G_LOBBY_VERSION_KEY_TEST="lobby_version_test"+G_PLATFORM_NAME,window.G_GAME_VERSION_KEY_TEST="game_{0}_version_test"+G_PLATFORM_NAME,window.G_CITY_LIST=[{id:1,name:G_PLATFORM_NAME_CHINESE,gameList:[20161004,20211004]}],window.G_REGIST_GAME_LIST=[{id:20161004,name:"\u5168\u5357\u9ebb\u5c06",path:"HZMJ",picName:"hzmj",sceneName:"HZMJ",gameType:E_GameType.MJ},{id:20211004,name:"\u897f\u5468\u9ebb\u5c06",path:"HZMJ",picName:"hzmj",sceneName:"HZMJ",gameType:E_GameType.MJ}],window.isShow=!1,window.sharedWords=["\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\uff0c\u4e3a\u5bb6\u4e61\u7684\u597d\u4e1c\u897f\u4ee3\u8a00\u3002","\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\uff0c\u6211\u4eec\u4e00\u8d77\u4e3a\u5bb6\u4e61\u4ee3\u8a00\u3002","\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\uff0c\u6e38\u620f\u4e5f\u662f\u4e00\u79cd\u751f\u4ea7\u529b\u3002","\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\uff0c\u4e3a\u6211\u7684\u5bb6\u4e61\u4ee3\u8a00\u3002","\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\uff0c\u4e3a\u5bb6\u4e61\u4ee3\u8a00\u8fdb\u884c\u4e2d..."],window.G_BISAI_GAME_LIST=[20173124],window.G_SPECIAL_GAME_LIST=[],window.G_BR_GAME_LIST=[],window.G_DESK_GAME_LIST=[],window.G_ENTER_GAME_LIST=[],window.G_TIPS_GAME_LIST=[],window.G_ROOM_GAME_LIST=[],window.G_MULTI_NUM=100,window.G_IS_SHOW_POINT=!0,window.C_Director=cc.director,window.C_WinSize=cc.view.getVisibleSize(),window.DEBUG=2,window.rankInfoArr=[],window.rankInfoData={},window.curFinishState=["\u672a\u8fbe\u6807","\u5df2\u8fbe\u6807"],window.CheckPointInfoArr=[],window.LOOBBY_STATIC=!1,window.CUR_SCREEN=!1,window.personVedio={},cc._RF.pop()},{}],GlobalData:[function(e,t){"use strict";cc._RF.push(t,"688454DXbdE4anH2hBplrRY","GlobalData"),window.G_HANDLE_CODE_OK=0,window.G_JSON_DATA_STATUS_OK=1,window.G_COLOR_SELECTED=cc.color(201,35,17,255),window.G_COLOR_NOT_SELECTED=cc.color(20,77,152,255),window.G_DESC_FONT_SIZE=36,window.G_WEB_VIEW_LAYER_TAG=8889,window.G_LOADING_ZORDER_TAG=8888,window.G_TIPS_ZORDER_TAG=8887,window.G_CLICKTIPS_ZORDER_TAG=8886,window.G_SYSTEMMSG_ZORDER_TAG=8885,window.G_SYSTEMNOTICE_ZORDER_TAG=8884,window.G_MSGBOX_ZORDER_TAG=8883,window.G_REPEAT_CONNECT_LAYER_TAG=8882,window.G_DISMISS_ROOM_LAYER_TAG=8881,window.G_GAME_UPDATE_LAYER_TAG=8880,window.G_FRIEND_NOTIFY_LAYER_TAG=8879,window.G_MATCH_NOTIFY_LAYER_TAG=8878,window.G_CHECKPOINT_NOTIFY_LAYER_TAG=8878,window.G_PLAYERUI_ZORDER_TAG=689,window.G_CHATUI_ZORDER_TAG=690,window.G_VOICE_ZORDER_TAG=691,window.G_GAME_SET_ZORDER_TAG=692,window.G_SET_ZORDER_TAG=693,window.G_RULE_ZORDER_TAG=694,window.G_FRIEND_INVITE_ZORDER_TAG=695,window.G_RESULT_ZORDER_TAG=889,window.G_ALL_RESULT_ZORDER_TAG=890,window.G_CUO_PAI_LAYER=1e3,window.G_TUOGUAN_LAYER_TAG=6889,window.G_SUBSIDY_ZORDER_TAG=7974,window.G_BUYGOLD_ZORDER_TAG=7975,window.G_MATCH_LAYER_TAG=9896,window.G_COMMON_TIMEOUT_TIME=20,window.G_COMMON_LOADING_TIME=30,window.G_ANIMATION_FRAME_TIME=.1,window.G_MSG_HEAD_SIZE=20,window.G_INVALID_BYTE_VALUE=255,window.MAX_USER_NAME_LEN=256,window.G_CHAT_COMMON_TEXT_TAB=["\u522b\u5435 \u522b\u5435 \u4e13\u5fc3\u6253\u9ebb\u5c06","\u522b\u8d70\u522b\u8d70\u6211\u8981\u6253\u5230\u5929\u4eae","\u5feb\u662f\u4e0d\u662f\u8d62\u4e86\u5c31\u62d6\u65f6\u95f4\u4e86","\u5927\u5bb6\u6ce8\u610f\u522b\u4e71\u6254\uff0c\u5927\u80e1\u6760\u7206\u5c31\u4e0d\u597d\u4e86","\u4e1c\u5357\u897f\u5317\u4e2d \u80e1\u724c\u9760\u724c\u98ce","\u4eca\u5929\u724c\u98ce\u86ee\u597d\u54e6","\u770b\u4f60\u6280\u672f\u8fd9\u4e48\u597d\u52a0\u4e2a\u5fae\u4fe1\u54c7","\u4f60\u7684\u6280\u672f\u8fd9\u4e48\u597d\u662f\u4e0d\u662f\u5728\u706b\u8f66\u7ad9\u5b66\u5230\u7684","\u4f60\u8981\u6253\u5feb\u6765\u90fd\u7b49\u5230\u5929\u4eae\u4e86","\u4e00\u665a\u4e0a\u90fd\u6ca1\u80e1\u5f00 \u4e0d\u597d\u641e\u91ce","\u600e\u4e48\u53c8\u65ad\u7ebf\u7f51\u7edc\u8fd9\u4e48\u5dee","\u732a\u4ed4\u597d\u5356"],window.G_CHAT_MAX_NUM=20,window.G_CHAT_COMMON_MAX_NUM=10,window.G_WAR_RECORD_MAX_NUM=50,window.G_WAR_RECORD_PLAYER_NUM=9,window.G_longitude="\u672a\u77e5\u7ecf\u5ea6",window.G_latitude="\u672a\u77e5\u7eac\u5ea6",window.G_province="\u672a\u77e5\u7701",window.G_city="\u672a\u77e5\u5e02",window.G_district="\u672a\u77e5\u533a/\u53bf",window.G_addrStr="\u672a\u77e5\u5730\u5740",window.G_address="\u672a\u6388\u6743\u5b9a\u4f4d",window.G_DEFAULT_LOBBY_LAYOUT_TYPE=1,window.G_DEFAULT_STRING="aa",window.G_CLUB_DESK_LEN=20,window.G_PRIVATE_ROOM_COST_NUM=25,window.G_bGetChatList=!1,window.G_chatList={},cc._RF.pop()},{}],GlobalEnum:[function(e,t){"use strict";var i;cc._RF.push(t,"a404eEXXSNDkoFw97mqWbcD","GlobalEnum"),window.E_REQUEST_TYPE={GET:"GET",POST:"POST"},window.E_ROOM_TYPE={GOLD:0,CARD:1,PRIVATE:2,MATCH:3,REALMATCH:4,TABLE:5,BARRIERMATCH:6,NORMAL:-1},window.E_ROOM_SORT={RANKMATCH:3,CHECKPOINTMATCH:4},window.E_RegType={PC:0,MOB:1},window.E_RegWay={FAST:0,COMMON:1,WECHAT:2,QQ:3,PHONE:4},window.E_LoginType={PC:0,WX:1,QQ:2,PHONE:3},window.E_UserSex={NIL:null,FEMALE:0,MALE:1,NONE:2},window.SELECT_TYPE_ONE=1,window.SELECT_TYPE_MORE=2,window.SELECT_TYPE_OTHER=3,window.SELECT_TYPE_INPUT=4,window.CHECKBOX_NAME="CheckBox_{0}_{1}",window.INPUTBOX_NAME="INPUT_{0}_{1}",window.CELL_NUM=4,window.E_NET_TYPE={NIL:null,NONE:"0",WIFI:"1",MOBILE:"2",ONTHER:"3"},window.E_REGIST_FANCITON_TAB={NETWORK_CHANGED:"networkChanged"},window.E_RegStatus={REG:0,LOGIN:1},window.E_NoticeType={IMMEDIATELY:0,COMMON:1,SPECIAL:2,STOP:3,STOP_SVR_PRE_TIP:100},window.E_WX_ShareType={FRIEND:1,ZONE:2},window.E_QQ_ShareType={FRIEDN:1,ZONE:2},window.E_PROP_ID_DEF={prop_flower_id:1,prop_brick_id:2,prop_anti_id:3,prop_kick_id:4,prop_house_id:11,prop_egg_id:12,prop_cake_id:13,prop_beer_id:14,prop_car_id:15,prop_kiss_id:16,prop_bomb_id:17,prop_applause_id:18,prop_ring_id:19,prop_changecard_id:39,prop_recordcrad_id:40},window.E_ConsumeType={RMB:0,GOLD:1,DIAMOND:2},window.E_ItemType={NONE:0,GOLD:1,DIAMOND:2,PROP:3,SUBSTANCE:4},window.E_RankType={RICH:0,WIN:1},window.E_RichType={CARD:"jewels",GOLD:"money"},window.E_ResourceType={NONE:0,GOLD:1,CARD:2,BANK:3,FIRECOIN:4,GiftCard:5,TRANSFERNUM:6},window.E_ResourceName=((i={})[E_ResourceType.NONE]="\u672a\u77e5",i[E_ResourceType.GOLD]="\u91d1\u5e01",i[E_ResourceType.CARD]="\u94bb\u77f3",i[E_ResourceType.BANK]="\u94f6\u884c\u91d1\u5e01",i[E_ResourceType.GiftCard]="\u793c\u5238",i[E_ResourceType.TRANSFERNUM]="\u5151\u6362\u6b21\u6570",i),window.E_UserStatus={USER_STATUS_DEFAULT:0,USER_STATUS_WATCH:1,USER_STATUS_SITING:2,USER_STATUS_AGREE:3,USER_STATUS_PLAYING:4},window.E_ReasonKickout={REASON_KICKOUT_DEFAULT:0,REASON_KICKOUT_STAND:1,REASON_KICKOUT_STAND_MINLIMIT:2,REASON_KICKOUT_STAND_MAXLIMIT:3,REASON_KICKOUT_NOTAGREE:4,REASON_KICKOUT_STAND_FIRECOIN_MINLIMIT:5,REASON_KICKOUT_STAND_FIRECOIN_MAXLIMIT:6,REASON_KICKOUT_LONG_TIME_NOOPERATION:7,REASON_KICKOUT_BARRIERMATCH_FAIL:8},window.E_MJ_TYPE={NONE:0,W1:1,W2:2,W3:3,W4:4,W5:5,W6:6,W7:7,W8:8,W9:9,W10:10,T1:11,T2:12,T3:13,T4:14,T5:15,T6:16,T7:17,T8:18,T9:19,T10:20,B1:21,B2:22,B3:23,B4:24,B5:25,B6:26,B7:27,B8:28,B9:29,B10:30,FD:31,FN:32,FX:33,FB:34,ZHONG:35,FA:36,BAI:37,FCHUN:41,FXIA:42,FQIU:43,FDONG:44,FMEI:45,FLAN:46,FZHU:47,FJU:48,CAISHEN:49,YUANBAO:50,MAO:51,LAOSHU:52},window.E_LobbyView={LOBBY:0,CREATE:1,GOLD:2,ROOM:3},window.E_PlatformVersionType={IOS:1,ANDROID:2},window.E_ResourceChangeReason={DEFAULT:0,CREATE_ROOM:1,GAME_BEGIN:2,GAME_FINISHED:3,GAME_SELLETE_ROLLBACK:4,GAME_SELLETE_NORAML:5,GAME_SELLETE_AA:6,GOLD_ROOM_PUMP:7,ROOM_PUMP_CONSUME:8,SYSTEM_SUBSIDY:9,REGISTER:10,MAGIC_EXPRESS:11,BANK_SAVE:1e3,BANK_TAKE:1001,BANK_TRAN:1002,GIVE:1003,SUPPORT:1004,SIGN:1005,BACK_RECHARE:1006,PAY_RECHARE:1007,AGENT_RECHARE:1008,TURNTABLE:1009,SHARE:1010,FRIEND_REWARD:1011,BIND_PHONE:1012,SEND_HORN:1013,USER_MAIL:1014,BIND_AGENT:1015,INVITE_ENTER:1016,AGENT_GIVE:1017,CLUB_RECHARGE:1018,BACK_CLUB_RECHARGE:1019,EXIT_CLUB:1020,SYSTEM_MAIL:1021,APP_PAY_TAKE:1022,APPLY_POS:1023,LOTTERY_PURCHASE:1040,GOLD_COLOR:1041,FADEOUT:1042,ACHIEVEMENT:1043,BATTERY_MALL_PURCHASE:1044,USE_RED_PACKET:1045,MATCH_REWARDS:1046,GAME_MATCH_FEE:1047,MATCH_FAIL:1048,ACHIEVEMENT_REWARDS:1049},window.E_LoginStatus={FAILURE:0,CANCEL:-1,SUCCEED:1},window.E_FeedbackType={GAME:1,LOGIN:2,PAY:3,REPORT:4,ONTHER:5},window.E_FeedbackStatus={NONE:0,NO_READ:1,READ:2,CLOSE:3},window.E_LobbyLayoutType={TYPT_1:1,TYPT_2:2},window.E_BankRecordType={SAVE:1,TAKE:2,TRANSFER:3},window.E_SHARE_WAY={DEFAULT:1,IMAGE_LOCAL:2,IMAGE_URL:3,TEXT_AND_IMAGE_URL:4,TEXT_AND_IMAGE_LOCAL:5,TEXT:6},window.E_FriendNotifyType={REQ_ADD:1,ANSWER_ADD:2,REWARD:3,MESSAGE:4,INVITE_PLAYGAME:5,DEL:6},window.E_FriendOnlineStatus={OFF:0,ON:1},window.E_FriendRewardStatus={OFF:0,ON:1},window.E_AnswerAddFriendsGroup={AGREE:1,REFUSE:2},window.E_FriendsGroupNotifyType={REQ_JOIN:1,INVITE_JOIN:2,DELETED:3,QUIT:4,DISMISS:5,REQ_JOIN_OK:6,REQ_JOIN_FAIL:7,ECV_INVITE_JOIN:8,REFUSE_JOIN:9,AGREE_JOIN:10,TRANSFER:11,AUTH:12},window.E_FriendsGroupMsgType={ROOM:1,ACCO:2},window.E_FriendsGroupMemberStatus={NORMAL:0,KING:1,MANAGER:2},window.E_FriendsGroupPowerType={NO:0,DEL:1,DESK:2,VIP:4,FIRE_COIN:8,SET:16,ALL:31},window.E_NOTIFY_MSG_TYPE={SMT_CHAT:1,SMT_EJECT:2,SMT_GLOBAL:4,SMT_PROMPT:8,SMT_TABLE_ROLL:16},window.E_GameType={PK:1,MJ:2,BR:3,DW:4,QT:5},window.E_PayWay={WEI_XIN:1,ZHI_FU_BAO:2,QQ_QIAN_BAO:3},window.E_PayType={PING_GUO:1,WEI_XIN:2,HUI_FU_BAO:3,WANG_SHI_FU:4,JIAN_FU:5,XIN_BAO:6,HUI_FU_BAO_ZL:7,QU_ZHI_FU:8,ZHI_YI_FU:9,JUN_FU_TONG:10,ZHI_FU_GOU:100,MO_FANG:200},window.E_PAIWEI_INFO={Sign_ENTER:1,Sign_LEFT:2,LobbyID:1e4},window.rankMatchLevel={NOVICE_ONE_STAR:0,NOVICE_TWO_STAR:1,NOVICE_THREE_STAR:2,NOVICE_FOUR_STAR:3,NOVICE_FIVE_STAR:4,ELITE_ONE_STAR:5,ELITE_TWO_STAR:6,ELITE_THREE_STAR:7,ELITE_FOUR_STAR:8,ELITE_FIVE_STAR:9,MASTER_ONE_STAR:10,MASTER_TWO_STAR:11,MASTER_THREE_STAR:12,MASTER_FOUR_STAR:13,MASTER_FIVE_STAR:14,EXPERT_ONE_STAR:15,EXPERT_TWO_STAR:16,EXPERT_THREE_STAR:17,EXPERT_FOUR_STAR:18,EXPERT_FIVE_STAR:19,ARTIST_ONE_STAR:20,ARTIST_TWO_STAR:21,ARTIST_THREE_STAR:22,ARTIST_FOUR_STAR:23,ARTIST_FIVE_STAR:24,KING_ONE_STAR:25,KING_TWO_STAR:26,KING_THREE_STAR:27,KING_FOUR_STAR:28,KING_FIVE_STAR:29,SUPREME_ONE_STAR:30,SUPREME_TWO_STAR:31,SUPREME_THREE_STAR:32,SUPREME_FOUR_STAR:33,SUPREME_FIVE_STAR:34},window.E_BANNER_TYPE={IMG:1,VEDIO:2,OTHER:3},cc._RF.pop()},{}],GlobalError:[function(e,t){"use strict";function i(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"bce97RK4XdPArZvfWfPhsYh","GlobalError"),window.GlobalError=window.GlobalError?window.GlobalError:{},GlobalError.ERROR_GAME_CONNECT_FAILED=-3,GlobalError.ERROR_LOBBY_CONNECT_FAILED=-2,GlobalError.ERROR_CONNECT_TIMEOUT=-1,GlobalError.ERROR_ACCOUNT_EXISTS=1,GlobalError.ERROR_ACCOUNT_NOTEXISTS=2,GlobalError.ERROR_PASSWD_FALSE=3,GlobalError.ERROR_NO_USER_DATA=4,GlobalError.ERROR_ALREADY_LOGON=5,GlobalError.ERROR_DESK_FULL=6,GlobalError.ERROR_NO_THIS_DESK=7,GlobalError.ERROR_DESKSTATION_HAVENOUSER=8,GlobalError.ERROR_INVALID_DESK=9,GlobalError.ERROR_DESK_NOT_INDISMISSS=10,GlobalError.ERROR_NO_BUY_DESK_CONFIG=11,GlobalError.ERROR_USER_ALREADY_LOGON=12,GlobalError.ERROR_TARGET_USER_NOT_EXISTS=13,GlobalError.ERROR_ACCOUNT_NOT_MATCH=14,GlobalError.ERROR_SERVICE_FULL=15,GlobalError.ERROR_SERVICE_ROOM_NO_MONEYEQUIRE=16,GlobalError.ERROR_ROOM_EXISTING=17,GlobalError.ERROR_NOT_ENOUGH_JEWELS=18,GlobalError.ERROR_CANNOT_SEND_MYSELF=19,GlobalError.ERROR_NO_MATCH_DATA=20,GlobalError.ERROR_NO_THIS_ROOM=21,GlobalError.ERROR_NO_GRADE_DATA=22,GlobalError.ERROR_NO_ROOMOPENED_DATA=23,GlobalError.ERROR_ROOM_TOKEN_NOTMATCH=24,GlobalError.ERROR_NO_MAIL_DATA=25,GlobalError.ERROR_NO_REQ_SUPPORT_TIMES=26,GlobalError.ERROR_INVITE_CODE=27,GlobalError.ERROR_TOKEN_IS_INVALID=28,GlobalError.ERROR_CANNOT_BUYDESK_INROOM=29,GlobalError.ERROR_CANNOT_ENTERDESK_INROOM=30,GlobalError.ERROR_ACCOUNT_INVALID=31,GlobalError.ERROR_INVALID_MAIL=32,GlobalError.ERROR_NOVAILD_DESK=33,GlobalError.ERROR_HAVE_DIRTYWORD=34,GlobalError.ERROR_NEED_SET_BANKPASSWD=35,GlobalError.ERROR_BANKPASSWD_FALSE=36,GlobalError.ERROR_BANK_SAVEMONEY_TOOMUCH=37,GlobalError.ERROR_BANK_TAKEMONEY_TOOMUCH=38,GlobalError.ERROR_BUY_DESK_TOPLIMIT=39,GlobalError.ERROR_FRIEND_ALREADY_EXISTS=40,GlobalError.ERROR_FRIEND_ALREDAY_REQADD=41,GlobalError.ERROR_FIRNED_CANNOT_ADDMYSELF=42,GlobalError.ERROR_FRIEND_ISNOT_FRIEND=43,GlobalError.ERROR_FRIEND_ALREADY_INVITE=44,GlobalError.ERROR_GAME_CANNOT_GAMEBEGIN=45,GlobalError.ERROR_ACCOUNT_SEAL=46,GlobalError.ERROR_FRIENDSGROUP_NOT_EXISTS=47,GlobalError.ERROR_FRIENDSGROUP_NO_MASTER=48,GlobalError.ERROR_FRIENDSGROUP_EVE_LIMIT=49,GlobalError.ERROR_FRIENDSGROUP_ALL_LIMIT=50,GlobalError.ERROR_FRIENDSGROUP_JOIN_LIMIT=51,GlobalError.ERROR_FRIENDSGROUP_PEOPLE_FULL=52,GlobalError.ERROR_FRIENDSGROUP_REPEAT_SEND=53,GlobalError.ERROR_FRIENDSGROUP_ALREADY_IN=54,GlobalError.ERROR_FRIENDSGROUP_NOT_NOTIY=55,GlobalError.ERROR_FRIENDSGROUP_ERROR_NOTIY=56,GlobalError.ERROR_FRIENDSGROUP_ERROR_WORD=57,GlobalError.ERROR_FRIENDSGROUP_CREATE_FULL=58,GlobalError.ERROR_FRIENDSGROUP_ERROR_ID=59,GlobalError.ERROR_FRIENDSGROUP_ILLEGAL_OPER=60,GlobalError.ERROR_FRIENDSGROUP_ERR_DISMISS=61,GlobalError.ERROR_FRIEND_ERR_REWARDCOUNT=62,GlobalError.ERROR_FRIENDSGROUP_ERR_JOIN_ROOM=63,GlobalError.ERROR_STOP_JOIN=64,GlobalError.ERROR_FRIENDSGROUP_DESK_NOT_EXISTS=65,GlobalError.ERROR_FRIENDSGROUP_DESK_PLAYING=66,GlobalError.ERROR_PHONE_NO_BIND=67,GlobalError.ERROR_DESKSTATION_NOTEXISTS=68,GlobalError.ERROR_DESKSTATION_HAVEUSER=69,GlobalError.ERROR_NO_MANAGER=70,GlobalError.ERROR_FRIENDSGROUP_MANA_LIMIT=71,GlobalError.ERROR_FRIENDSGROUP_ALREADY_NOTIY=72,GlobalError.ERROR_FRIEND_ROOM_DESK_FULL=73,GlobalError.ERROR_NO_SET_PEOPLE=74,GlobalError.ERROR_NOT_ENOUGH_MONEY=75,GlobalError.ERROR_CANNOT_DEL_USER=76,GlobalError.ERROR_FRIENDSGROUP_ERR_CREATE_ROOM=77,GlobalError.ERROR_FRIENDSGROUP_FIRECOIN_LIMIT=78,GlobalError.ERROR_FRIENDSGROUP_NO_FIRECOIN_INROOM=79,GlobalError.ERROR_NOT_AGENT=80,GlobalError.ERROR_FRIENDSGROUP_FIRECOIN_RECOVER=81,GlobalError.ERROR_GAME_PLAYING_ERR_SIT=82,GlobalError.ERROR_FRIENDSGROUP_OPP_CREATE_FULL=83,GlobalError.ERROR_SERVER_CLOSE=84,GlobalError.ERROR_NAME_REPEAT=85,GlobalError.ERROR_FRIENDSGROUP_HAVE_ROOM=86,GlobalError.ERROR_FRIENDSGROUP_NOT_JEWELS=87,GlobalError.ERROR_FRIENDSGROUP_NOT_MONEY=88,GlobalError.ERROR_GAME_NO_START=89,GlobalError.ERROR_MAC_NOTMATCH=90,GlobalError.ERROR_CREATE_ROOM=91,GlobalError.ERROR_XIANLIAO_NO_BIND=92,GlobalError.ERROR_MATCH_PLAYING=93,GlobalError.ERROR_MATCH_OVER=94,GlobalError.ERROR_LOCATION_CLOSED=95,GlobalError.ERROR_RANKMATCH_OVER=96,GlobalError.ERROR_CHECKPOINTS_INVALID=97,GlobalError.ERROR_BARRIERMATCH_NO_SET=98,GlobalError.ERROR_BARRIERMATCH_OVER=99,GlobalError.ERROR_MATCH_START_SOON=100,GlobalError.ERROR_NO_CHAT_DATA=101,GlobalError.ERROR_CHAT_DATA_TOPLIMIT=102,GlobalError.ERROR_ACCOUNT_TALK=103,GlobalError.ERROR_NOT_ENOUGH_GIFTCARD=104,GlobalError.ERROR_NOT_REVIVE_GAMESTATUS=105,GlobalError.ERROR_MATCH_NOTEXISTS=106,GlobalError.KEY_VALUE_TAB=[[[GlobalError.ERROR_GAME_CONNECT_FAILED],"\u6e38\u620f\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25"],[[GlobalError.ERROR_LOBBY_CONNECT_FAILED],"\u5927\u5385\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25"],[[GlobalError.ERROR_CONNECT_TIMEOUT],"\u8bf7\u6c42\u8fde\u63a5\u670d\u52a1\u5668\u8d85\u65f6"],[[GlobalError.ERROR_ACCOUNT_EXISTS],"\u8d26\u53f7\u5df2\u7ecf\u5b58\u5728"],[[GlobalError.ERROR_ACCOUNT_NOTEXISTS],"\u8d26\u53f7\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_PASSWD_FALSE],"\u5bc6\u7801\u9519\u8bef"],[[GlobalError.ERROR_NO_USER_DATA],"\u6ca1\u6709\u73a9\u5bb6\u6570\u636e"],[[GlobalError.ERROR_ALREADY_LOGON],"\u73a9\u5bb6\u5df2\u7ecf\u767b\u5f55\u6e38\u620f"],[[GlobalError.ERROR_DESK_FULL],"\u684c\u5b50\u4eba\u6570\u6ee1\u4e86"],[[GlobalError.ERROR_NO_THIS_DESK],"\u6ca1\u6709\u8fd9\u4e2a\u684c\u5b50"],[[GlobalError.ERROR_DESKSTATION_HAVENOUSER],"\u8fd9\u4e2a\u5ea7\u4f4d\u4e0a\u6ca1\u6709\u73a9\u5bb6"],[[GlobalError.ERROR_INVALID_DESK],"\u684c\u5b50\u4e0d\u53ef\u7528"],[[GlobalError.ERROR_DESK_NOT_INDISMISSS],"\u684c\u5b50\u6ca1\u6709\u5904\u4e8e\u89e3\u6563\u72b6\u6001"],[[GlobalError.ERROR_NO_BUY_DESK_CONFIG],"\u6ca1\u6709\u8fd9\u4e2a\u914d\u7f6e"],[[GlobalError.ERROR_USER_ALREADY_LOGON],"\u73a9\u5bb6\u5df2\u7ecf\u767b\u5f55\u4e86"],[[GlobalError.ERROR_TARGET_USER_NOT_EXISTS],"\u76ee\u6807\u73a9\u5bb6\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_ACCOUNT_NOT_MATCH],"\u8d26\u53f7\u4e0d\u5339\u914d"],[[GlobalError.ERROR_SERVICE_FULL],"\u670d\u52a1\u5668\u4eba\u6570\u5df2\u6ee1"],[[GlobalError.ERROR_SERVICE_ROOM_NO_MONEYEQUIRE],"\u4e0d\u6ee1\u8db3\u8fdb\u5165\u623f\u95f4\u6761\u4ef6"],[[GlobalError.ERROR_ROOM_EXISTING],"\u6e38\u620f\u4e2d\u4e0d\u80fd\u79bb\u5f00\u623f\u95f4"],[[GlobalError.ERROR_NOT_ENOUGH_JEWELS],"\u94bb\u77f3\u4e0d\u8db3"],[[GlobalError.ERROR_CANNOT_SEND_MYSELF],"\u4e0d\u80fd\u8d60\u9001\u7ed9\u81ea\u5df1"],[[GlobalError.ERROR_NO_MATCH_DATA],"\u76ee\u6807\u6570\u636e\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_NO_THIS_ROOM],"\u623f\u95f4\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_NO_GRADE_DATA],""],[[GlobalError.ERROR_NO_ROOMOPENED_DATA],""],[[GlobalError.ERROR_NO_MAIL_DATA],""],[[GlobalError.ERROR_ROOM_TOKEN_NOTMATCH],"token\u4e0d\u5339\u914d"],[[GlobalError.ERROR_NO_REQ_SUPPORT_TIMES],"\u4eca\u5929\u53ef\u7533\u6e05\u7834\u4ea7\u6b21\u6570\u4e0d\u8db3"],[[GlobalError.ERROR_INVITE_CODE],"\u9080\u8bf7\u7801\u9519\u8bef"],[[GlobalError.ERROR_TOKEN_IS_INVALID],"token\u65e0\u6548"],[[GlobalError.ERROR_CANNOT_BUYDESK_INROOM],"\u4f60\u4ee5\u5728\u623f\u95f4\u4e2d\u65e0\u6cd5\u521b\u5efa\u623f\u95f4 \u81ea\u52a8\u52a0\u5165\u4e2d.."],[[GlobalError.ERROR_CANNOT_ENTERDESK_INROOM],""],[[GlobalError.ERROR_ACCOUNT_INVALID],"\u8d26\u53f7\u4e0d\u5408\u6cd5"],[[GlobalError.ERROR_INVALID_MAIL],"\u6ca1\u6709\u8fd9\u4e2a\u90ae\u4ef6"],[[GlobalError.ERROR_NOVAILD_DESK],"\u684c\u5b50\u5df2\u8d2d\u4e70\u5b8c"],[[GlobalError.ERROR_HAVE_DIRTYWORD],"\u8f93\u5165\u5185\u5bb9\u542b\u654f\u611f\u8bcd\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"],[[GlobalError.ERROR_NEED_SET_BANKPASSWD],"\u8bf7\u5148\u8bbe\u7f6e\u94f6\u884c\u5bc6\u7801"],[[GlobalError.ERROR_BANKPASSWD_FALSE],"\u94f6\u884c\u5bc6\u7801\u9519\u8bef"],[[GlobalError.ERROR_BANK_SAVEMONEY_TOOMUCH],"\u5b58\u7684\u91d1\u5e01\u4e0d\u80fd\u8d85\u8fc7\u8eab\u4e0a\u7684\u91d1\u5e01"],[[GlobalError.ERROR_BANK_TAKEMONEY_TOOMUCH],"\u53d6\u7684\u91d1\u5e01\u4e0d\u80fd\u8d85\u8fc7\u94f6\u884c\u7684\u91d1\u5e01"],[[GlobalError.ERROR_BUY_DESK_TOPLIMIT],"\u521b\u5efa\u623f\u95f4\u5df2\u8fbe\u4e0a\u9650"],[[GlobalError.ERROR_FRIEND_ALREADY_EXISTS],"\u5df2\u7ecf\u662f\u597d\u53cb\u4e86"],[[GlobalError.ERROR_FRIEND_ALREDAY_REQADD],"\u5df2\u7ecf\u53d1\u9001\u6dfb\u52a0\u597d\u53cb\u8bf7\u6c42"],[[GlobalError.ERROR_FIRNED_CANNOT_ADDMYSELF],"\u4e0d\u80fd\u52a0\u81ea\u5df1\u4e3a\u597d\u53cb"],[[GlobalError.ERROR_FRIEND_ISNOT_FRIEND],"\u5bf9\u65b9\u8fd8\u4e0d\u662f\u597d\u53cb"],[[GlobalError.ERROR_FRIEND_ALREADY_INVITE],"\u5df2\u7ecf\u6536\u5230\u9080\u8bf7\u4e86"],[[GlobalError.ERROR_GAME_CANNOT_GAMEBEGIN],"\u672a\u6ee1\u8db3\u6e38\u620f\u5f00\u59cb\u6761\u4ef6"],[[GlobalError.ERROR_ACCOUNT_SEAL],""],[[GlobalError.ERROR_FRIENDSGROUP_NOT_EXISTS],"\u4ff1\u4e50\u90e8\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_FRIENDSGROUP_NO_MASTER],"\u4e0d\u662f\u7fa4\u4e3b"],[[GlobalError.ERROR_FRIENDSGROUP_EVE_LIMIT],"\u6bcf\u5929\u53ea\u80fd\u66f4\u65391\u6b21\u540d\u5b57"],[[GlobalError.ERROR_FRIENDSGROUP_ALL_LIMIT],"\u6700\u591a\u53ea\u80fd\u66f4\u65393\u6b21\u540d\u5b57"],[[GlobalError.ERROR_FRIENDSGROUP_JOIN_LIMIT],"\u52a0\u5165\u4ff1\u4e50\u90e8\u5df2\u8fbe\u4e0a\u9650"],[[GlobalError.ERROR_FRIENDSGROUP_PEOPLE_FULL],"\u4ff1\u4e50\u90e8\u4eba\u6570\u5df2\u6ee1"],[[GlobalError.ERROR_FRIENDSGROUP_REPEAT_SEND],"\u91cd\u590d\u53d1\u9001\u6d88\u606f"],[[GlobalError.ERROR_FRIENDSGROUP_ALREADY_IN],"\u5df2\u7ecf\u5728\u4ff1\u4e50\u90e8\u4e2d"],[[GlobalError.ERROR_FRIENDSGROUP_NOT_NOTIY],"\u901a\u77e5\u6d88\u606f\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_FRIENDSGROUP_ERROR_NOTIY],"\u901a\u77e5\u6d88\u606f\u5f02\u5e38"],[[GlobalError.ERROR_FRIENDSGROUP_ERROR_WORD],"\u5305\u542b\u975e\u6cd5\u5b57\u7b26"],[[GlobalError.ERROR_FRIENDSGROUP_CREATE_FULL],"\u521b\u5efa\u4ff1\u4e50\u90e8\u6570\u91cf\u5df2\u7ecf\u5230\u4e0a\u9650"],[[GlobalError.ERROR_FRIENDSGROUP_ERROR_ID],"\u76ee\u6807id\u9519\u8bef"],[[GlobalError.ERROR_FRIENDSGROUP_ILLEGAL_OPER],"\u975e\u6cd5\u64cd\u4f5c"],[[GlobalError.ERROR_FRIENDSGROUP_ERR_DISMISS],"\u4ff1\u4e50\u90e8\u521b\u5efa\u4e00\u5929\u540e\u624d\u80fd\u89e3\u6563"],[[GlobalError.ERROR_FRIEND_ERR_REWARDCOUNT],"\u6bcf\u5929\u6253\u8d4f\u597d\u53cb\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"],[[GlobalError.ERROR_FRIENDSGROUP_ERR_JOIN_ROOM],"\u975e\u4ff1\u4e50\u90e8\u6210\u5458\u7981\u6b62\u52a0\u5165\u4ff1\u4e50\u90e8\u623f\u95f4"],[[GlobalError.ERROR_STOP_JOIN],"\u6e38\u620f\u4e2d\u9014\u7981\u6b62\u52a0\u5165"],[[GlobalError.ERROR_FRIENDSGROUP_DESK_NOT_EXISTS],"\u4ff1\u4e50\u90e8\u724c\u684c\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_FRIENDSGROUP_DESK_PLAYING],"\u6e38\u620f\u8fdb\u884c\u4e2d\uff0c\u724c\u5c40\u7ed3\u675f\u540e\u89e3\u6563"],[[GlobalError.ERROR_PHONE_NO_BIND],"\u624b\u673a\u672a\u7ed1\u5b9a"],[[GlobalError.ERROR_DESKSTATION_NOTEXISTS],"\u5ea7\u4f4d\u4e0d\u5b58\u5728"],[[GlobalError.ERROR_DESKSTATION_HAVEUSER],"\u8fd9\u4e2a\u5ea7\u4f4d\u4e0a\u5df2\u7ecf\u6709\u73a9\u5bb6"],[[GlobalError.ERROR_NO_MANAGER],"\u6ca1\u6709\u6743\u9650\u7684\u64cd\u4f5c"],[[GlobalError.ERROR_FRIENDSGROUP_MANA_LIMIT],"\u4ff1\u4e50\u90e8\u7ba1\u7406\u5458\u5df2\u8fbe\u4e0a\u9650"],[[GlobalError.ERROR_FRIENDSGROUP_ALREADY_NOTIY],"\u6d88\u606f\u5df2\u7ecf\u88ab\u5176\u5b83\u73a9\u5bb6\u64cd\u4f5c"],[[GlobalError.ERROR_FRIEND_ROOM_DESK_FULL],"\u623f\u95f4\u4eba\u6570\u5df2\u6ee1\uff0c\u4e0d\u80fd\u8fdb\u5165\u623f\u95f4"],[[GlobalError.ERROR_NO_SET_PEOPLE],"\u6ca1\u6709\u8bbe\u7f6e\u4eba\u6570"],[[GlobalError.ERROR_NOT_ENOUGH_MONEY],"\u91d1\u5e01\u4e0d\u8db3"],[[GlobalError.ERROR_CANNOT_DEL_USER],"\u5728\u6e38\u620f\u4e2d\u65e0\u6cd5\u5220\u9664\u8be5\u73a9\u5bb6"],[[GlobalError.ERROR_FRIENDSGROUP_ERR_CREATE_ROOM],"\u521b\u5efa\u4ff1\u4e50\u90e8\u623f\u95f4\u5931\u8d25"],[[GlobalError.ERROR_FRIENDSGROUP_FIRECOIN_LIMIT],"\u706b\u5e01\u4e0d\u8db3"],[[GlobalError.ERROR_FRIENDSGROUP_NO_FIRECOIN_INROOM],"\u6e38\u620f\u4e2d\u65e0\u6cd5\u5145\u503c\u5151\u6362\u706b\u5e01"],[[GlobalError.ERROR_NOT_AGENT],"\u4e0d\u662f\u4ee3\u7406\uff0c\u65e0\u6cd5\u64cd\u4f5c"],[[GlobalError.ERROR_FRIENDSGROUP_FIRECOIN_RECOVER],"\u706b\u5e01\u56de\u6536\u8d85\u8fc7\u9650\u5236"],[[GlobalError.ERROR_GAME_PLAYING_ERR_SIT],"\u6e38\u620f\u4e2d\u7981\u6b62\u5750\u4e0b"],[[GlobalError.ERROR_FRIENDSGROUP_OPP_CREATE_FULL],"\u5bf9\u65b9\u521b\u5efa\u4ff1\u4e50\u90e8\u6570\u91cf\u4e0a\u9650"],[[GlobalError.ERROR_SERVER_CLOSE],"\u670d\u52a1\u5668\u505c\u670d\u7ef4\u62a4\u4e2d"],[[GlobalError.ERROR_NAME_REPEAT],"\u8be5\u540d\u5b57\u5df2\u88ab\u5360\u7528"],[[GlobalError.ERROR_FRIENDSGROUP_HAVE_ROOM],"\u60a8\u8fd8\u6709\u672a\u89e3\u6563\u7684\u724c\u684c\u6216vip\u623f\uff0c\u4e0d\u80fd\u8fdb\u884c\u6b64\u64cd\u4f5c\uff01"],[[GlobalError.ERROR_FRIENDSGROUP_NOT_JEWELS],"\u7fa4\u4e3b\u94bb\u77f3\u4e0d\u8db3"],[[GlobalError.ERROR_FRIENDSGROUP_NOT_MONEY],"\u7fa4\u4e3b\u91d1\u5e01\u4e0d\u8db3"],[[GlobalError.ERROR_NO_MAIL_DATA],"\u6ca1\u6709\u90ae\u4ef6\u6570\u636e"],[[GlobalError.ERROR_GAME_NO_START],"\u6e38\u620f\u670d\u52a1\u5668\u672a\u542f\u52a8"],[[GlobalError.ERROR_MAC_NOTMATCH],"\u8be5\u8d26\u53f7\u5df2\u88ab\u5176\u4ed6\u8bbe\u5907\u7ed1\u5b9a\uff0c\u5982\u662f\u672c\u4eba\u8d26\u53f7\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u89e3\u7ed1"],[[GlobalError.ERROR_CREATE_ROOM],"\u8bbe\u7f6e\u7684\u5165\u573a\u9650\u5236\u4e0d\u80fd\u4f4e\u4e8e\u5e95\u6ce8"],[[GlobalError.ERROR_XIANLIAO_NO_BIND],"\u8be5\u95f2\u804a\u672a\u7ed1\u5b9a\u5fae\u4fe1\u8d26\u53f7"],[[GlobalError.ERROR_MATCH_PLAYING],"\u6bd4\u8d5b\u4e2d"],[[GlobalError.ERROR_MATCH_OVER],"\u6bd4\u8d5b\u5df2\u7ecf\u7ed3\u675f"],[[GlobalError.ERROR_LOCATION_CLOSED],"\u8fdb\u5165\u623f\u95f4\u524d\u8bf7\u5148\u5f00\u542f\u6e38\u620f\u83b7\u53d6\u4f4d\u7f6e\u529f\u80fd"],[[GlobalError.ERROR_RANKMATCH_OVER],"\u6392\u4f4d\u8d5b\u5df2\u7ecf\u7ed3\u675f"],[[GlobalError.ERROR_CHECKPOINTS_INVALID],"\u73a9\u5bb6\u4e0d\u80fd\u8fdb\u5165\u8be5\u5173\u5361"],[[GlobalError.ERROR_BARRIERMATCH_NO_SET],"\u95ef\u5173\u8d5b\u672a\u8bbe\u7f6e"],[[GlobalError.ERROR_BARRIERMATCH_OVER],"\u95ef\u5173\u8d5b\u5df2\u7ecf\u7ed3\u675f"],[[GlobalError.ERROR_MATCH_START_SOON],"\u6bd4\u8d5b\u573a\u5373\u5c06\u5f00\u59cb\uff0c\u8bf7\u7b49\u5f85\u6bd4\u8d5b"],[[GlobalError.ERROR_NO_CHAT_DATA],"\u6ca1\u6709\u804a\u5929\u8bb0\u5f55"],[[GlobalError.ERROR_CHAT_DATA_TOPLIMIT],"\u83b7\u53d6\u804a\u5929\u8bb0\u5f55\u8fbe\u5230\u4e0a\u9650"],[[GlobalError.ERROR_ACCOUNT_TALK],"\u8d26\u53f7\u5df2\u7ecf\u88ab\u7981\u8a00"],[[GlobalError.ERROR_NOT_ENOUGH_GIFTCARD],"\u793c\u5238\u4e0d\u8db3"],[[GlobalError.ERROR_NOT_REVIVE_GAMESTATUS],"\u4e0d\u662f\u6bd4\u8d5b\u590d\u6d3b\u9636\u6bb5"],[[GlobalError.ERROR_MATCH_NOTEXISTS],"\u4e0d\u5b58\u5728\u8fd9\u573a\u6bd4\u8d5b"]];for(var n,a={},s=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=i(e))){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(GlobalError.KEY_VALUE_TAB);!(n=s()).done;){var r=n.value;a[r[0].toString()]=r[1]}GlobalError.getErrorStr=function(e){return a[e.toString()]||tools.stringFormat("\u672a\u5b9a\u4e49\u7684\u9519\u8bef code = {0}",e)},cc._RF.pop()},{}],GlobalFunction:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"45dd6wQ+n5NJJl4n678p0nw","GlobalFunction"),window.getResourcePrefab=function(e,t){e="prefab/"+e;var i=null,o=window.BundleName;cc.assetManager.loadBundle(o,function(o,n){n.load(e,function(e,o){e?console.log("\u8f7d\u5165\u9884\u5236\u8d44\u6e90\u5931\u8d25\uff0c \u539f\u56e0:"+e):o instanceof cc.Prefab?(i=cc.instantiate(o),t(i)):console.log(" \u4f60\u8f7d\u5165\u7684\u4e0d\u662f\u9884\u5236\u8d44\u6e90 ")})})},String.prototype.format=function(e){var t=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof e){for(var i in e)if(null!=e[i]){var o=new RegExp("({"+i+"})","g");t=t.replace(o,e[i])}}else for(var n=0;n<arguments.length;n++)null!=arguments[n]&&(o=new RegExp("({)"+n+"(})","g"),t=t.replace(o,arguments[n]));return t},cc.Node.prototype.loadTexture=function(e){var t=this.getComponent(cc.Sprite);if(t){var i=window.BundleName;cc.assetManager.loadBundle(i,function(i,o){o.load(e,cc.SpriteFrame,function(e,i){e?cc.error("get res erro"):t&&(t.spriteFrame=i)})})}else cc.error(" node \u6ca1\u6709sprite\u63a7\u4ef6 ")},cc.Node.prototype.newSetTag=function(e){this.customTag=e},cc.Node.prototype.newGetTag=function(){return null!=this.customTag&&null!=this.customTag||cc.error(" tag is null or undifiend "),this.customTag},cc.Button.prototype._onTouchEnded=function(e){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(MYAudioEngine.playClickSound(),cc.Component.EventHandler.emitEvents(this.clickEvents,e),this.node.emit("click",this)),this._pressed=!1,this._updateState(),e.stopPropagation())},window.cloneObject=function(e){if(e&&("array"!=typeof e||0!=e.length))return JSON.parse(JSON.stringify(e))},window.F_InitListView=function(e,t,i,o){var n=i.getComponent(cc.ScrollView),a=n.content;for(var s in a.removeAllChildren(),e){var r=cc.instantiate(o);a.addChild(r),r.active=!0,t(i,r,e[s],s)}n.horizontal&&n.scheduleOnce(function(){n.scrollToPercentHorizontal(.01,.1)},.016)},window.createSprite=function(e){var t=new cc.Node,i=t.addComponent(cc.Sprite),o=window.BundleName;return cc.assetManager.loadBundle(o,function(t,o){o.load(e,cc.SpriteFrame,function(t,o){e&&(i.spriteFrame=o)})}),t},window.setTexture=function(e,t){var i=window.BundleName;cc.assetManager.loadBundle(i,function(i,o){o.load(t,cc.SpriteFrame,function(t,i){t?console.log(t):e.spriteFrame=i})})},window.F_CreateRichColorLabel=function(e){for(var t,o=new cc.Node,n=o.addComponent(cc.RichText),a="",s=i(e);!(t=s()).done;){var r=t.value,c=r.str,u=r.color.toHEX("rrggbb");a+="<color=#"+String(u)+">"+c+"</color>"}return n.string=a,o},window.createLabel=function(e){var t=new cc.Node;return t.addComponent(cc.Label).string=e,t},window.createAtlasLabel=function(e,t){var i=new cc.Node,o=i.addComponent(cc.Label);o.string=e;var n=window.BundleName;return cc.assetManager.loadBundle(n,function(e,i){i.load(t,cc.LabelAtlas,function(e,t){e&&console.log(e),o.font=t})}),i},window.createBitmapFontLabel=function(e,t){var i=new cc.Node,o=i.addComponent(cc.Label);o.string=e;var n=window.prefabMap.get("bitmapFont"+t);if(n)o.font=n;else{var a=window.BundleName;cc.assetManager.loadBundle(a,function(e,i){i.load(t,cc.BitmapFont,function(e,i){e&&console.log(e),window.prefabMap.get("bitmapFont"+t),o.font=i})})}return i},window.skeletonAnimationCreate=function(e,t,i){var o=new cc.Node,n=o.addComponent(sp.Skeleton),a=window.BundleName;return cc.assetManager.loadBundle(a,function(o,a){a.load(e,sp.SkeletonData,function(e,o){n.skeletonData=o,n.animation=t,i&&setTimeout(function(){n.setSkin(i)},100)})}),n.premultipliedAlpha=!1,n.loop=!1,o},window.printInfo=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);if(DEBUG>=2){var o;if(0!==t.length)return void console.log((o=tools).stringFormat.apply(o,[e].concat(t)));console.log(e)}},window.dump=function(e,t){!DEBUG>=2||console.log(cloneObject(e),t)},window.objIsEmpty=function(e){return null==e||null==e},window.tableIsEmpty=function(e){if(null==e||null==e)return!0;for(var t in e)return!1;return!0},window.getDateTime=function(e){var t=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),n=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return t+" / "+(i=i<10?"0"+i:i)+" / "+(o=o<10?"0"+o:o)+"     "+(n=n<10?"0"+n:n)+" : "+(a=a<10?"0"+a:a)+" : "+(s<10?"0"+s:s)},window.F_CreateWebViewLayer=function(e){var t=new cc.Node;return t.addComponent(cc.WebView).url=e,t.width=2*C_WinSize.width,t.height=2*C_WinSize.height,t.x=C_WinSize.width,t.y=C_WinSize.height,cc.director.getScene().addChild(t),t},window.F_GetDateStringByTime=function(e){var t=new Date(1e3*e);return t.toLocaleDateString().replace(/V/g,"-")+" "+t.toTimeString().substr(0,8)},window.F_GetDateNoTimeStringByTime=function(e){return new Date(1e3*e).toLocaleDateString().replace(/V/g,"-")},window.F_GetTime=function(){return Date.parse(new Date)/1e3},window.F_RandomNum=function(e,t){return parseInt(Math.random()*(t-e+1)+e,10)},window.F_Object2Arr=function(e){var t=[];for(var i in e){var o=e[i];t.push(o)}return t},window.objectGetArr=function(e){var t=[];for(var i in e){var o=e[i];t.push(o)}return t},window.F_GetMoneyDisplay=function(e){return e/G_MULTI_NUM},window.F_ChangeShowMulNum=function(e,t){if(void 0!==e){if(G_IS_SHOW_POINT){var i=e/G_MULTI_NUM;return t?i.toFixed(2):i}return e}},window.gameCommon={},gameCommon.RESPATH={sound_began_bet:"sound/GameCommonRes/audio/sound/began_bet",sound_stop_bet:"sound/GameCommonRes/audio/sound/stop_bet",sound_fly_card:"sound/GameCommonRes/audio/sound/fly_card",sound_bet_chip:"sound/GameCommonRes/audio/sound/bet_chip_mp3",sound_shouchouma:"sound/GameCommonRes/audio/sound/shouchouma",sound_flock_chip:"sound/GameCommonRes/audio/sound/flock_chip",sound_xiu:"sound/GameCommonRes/audio/sound/xiu",sound_clock:"sound/GameCommonRes/audio/sound/clock",sound_countDown:"sound/GameCommonRes/audio/sound/countDown"},window.filterShangzhuangList=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.userID&&0!=o.userID&&t.push(o)}return t},window.getFloatScore=function(e,t,i,o,n){if(e&&t){var a=null;a=t>=0?createBitmapFontLabel("+"+Math.abs(t)/G_MULTI_NUM,"font/result_font_num_win_yellow"):createBitmapFontLabel("-"+Math.abs(t)/G_MULTI_NUM,"font/result_font_num_lose_blue"),e.addChild(a),console.log("---------scoreNode:",a),a.x=i||0,a.y=o||0;var s,r,c,u,h,l,d;d=i||-65,n?(s=cc.moveBy(.4,cc.v2(60,35)),r=cc.fadeIn(.4),c=cc.moveBy(.5,cc.v2(0,35)),u=cc.fadeOut(.5),h=cc.spawn(c,u),l=cc.delayTime(1.5)):(s=cc.moveBy(.4,cc.v2(0,50)),r=cc.fadeIn(.4),c=cc.moveBy(.5,cc.v2(d,20)),u=cc.fadeOut(.5),h=cc.spawn(c,u),l=cc.delayTime(1.5)),a.runAction(cc.sequence(cc.spawn(s,r),l,cc.spawn(u,h),cc.callFunc(function(){a.removeFromParent()})))}},window.pengArrowDirection=function(e,t){if(0==e){if(1==t)return 90;if(2==t)return 0;if(3==t)return 270}else if(1==e){if(2==t)return 0;if(3==t)return 270;if(0==t)return 180}else if(2==e){if(1==t)return 90;if(3==t)return 270;if(0==t)return 180}else if(3==e){if(1==t)return 90;if(2==t)return 0;if(0==t)return 180}},window.F_GetMoneyWithRatio=function(e,t){return void 0!==e?Number(e)*t:0},window.F_GetMoneyInput=function(e){return F_GetMoneyWithRatio(e,G_MULTI_NUM)},window.Utf8ToGb2312=function(e){var t="",i="",o="",n="",a=-1;if(-1==(a=e.indexOf("%")))return e;for(;-1!=a;){if(a<3)if(t+=e.substr(0,a-1),i=(e=e.substr(a+1,e.length-a)).substr(0,2),e=e.substr(2,e.length-2),!1&parseInt("0x"+i))t+=String.fromCharCode(parseInt("0x"+i));else if(!1&parseInt("0x"+i)){o=e.substr(1,2),e=e.substr(3,e.length-3);var s=(31&parseInt("0x"+i))<<6;s|=63&parseInt("0x"+o),t+=String.fromCharCode(s)}else o=e.substr(1,2),n=(e=e.substr(3,e.length-3)).substr(1,2),e=e.substr(3,e.length-3),s=(15&parseInt("0x"+i))<<12,s|=(63&parseInt("0x"+o))<<6,s|=63&parseInt("0x"+n),t+=String.fromCharCode(s);else t+=e.substring(0,a),e=e.substring(a);a=e.indexOf("%")}return t+e},window.randomInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},window.getRankInfo=function(e,t){for(var i=0,o=0;o<window.rankInfoArr.length;o++)if(window.rankInfoArr[o].gameExp>e){i=o;break}return 0!=i&&(i-=1),t?i:rankInfoArr[i]},window.getNextRankInfo=function(e){var t=getRankInfo(e,!0);return rankInfoArr[t+1]},cc._RF.pop()},{}],HZMJ_Common:[function(e,t){"use strict";var i,o;cc._RF.push(t,"99e5f0XtT9Ij6/ZW7gpc3W3","HZMJ_Common"),window.HZMJ_MACROS_DEF=((i={PLAY_COUNT:4,MEN_CARD_NUM:28,HAND_CARD_NUM:14,OUT_CARD_NUM:60,HUA_CARD_NUM:8,MAX_HUPAI_TYPE:4,MAX_CANHU_CARD_NUM:34,MAX_COUNT_GANG_FEN:13,MAX_COUNT_HUPAI_FEN:3,MAX_COUNT_HORSE_FEN:8,MAX_COUNT_GEN_ZHUANG_FEN:1}).MEN_CARD_NUM=28,i.MAX_REMAIN_MEN_PAI_NUM=110,i.GANG_TYPE_MAX=7,i.MAX_GANG_TYPE_INDEX=16,i.MAX_GENZHUANG_INDEX=3,i.MJTABLE_CARDTYPE0=0,i.MJTABLE_CARDTYPE1=1,i.ACTION_NO=0,i.ACTION_CHI=1,i.ACTION_CHI_FRONT=2,i.ACTION_CHI_MID=3,i.ACTION_CHI_BACK=3,i.ACTION_PENG=5,i.ACTION_KAN=6,i.ACTION_GANG=7,i.ACTION_AN_GANG=8,i.ACTION_BU_GANG=9,i.ACTION_MING_GANG=10,i.ACTION_CHI_TNG=11,i.ACTION_TING_PAI=12,i.ACTION_HU=13,i.ACTION_PASS=16,i.ACTION_FANCAI=14,i.ACTION_GANGKAI=15,i.OUT=20,i.Start_HandCount=13,i.MAX_GANG_UION_NUM=4,i.MAX_CHI_UION_NUM=3,i.CPG_MAX_PILE_NUM=4,i.Out_Time=15,i.MAX_MAIMA_COUNT=6,i),window.HZMJ_CPG_TIMES={TIMES_TWO:2,TIMES_THREE:3,TIMES_EACH_OTHER_THREE:4},window.HZMJ_HUTYPE_NAME_DEF={},window.HZMJ_HUTYPE_NAME_DEF[255]="",window.HZMJ_HUTYPE_NAME_DEF[3]="\u5e73\u80e1",window.HZMJ_HUTYPE_NAME_DEF[6]="\u6760\u4e0a\u82b1",window.HZMJ_HUTYPE_NAME_DEF[32]="\u5927\u80e1",window.HZMJ_HUTYPE_NAME_DEF[58]="\u4e03\u5c0f\u5bf9",window.HZMJ_HUTYPE_NAME_DEF[91]="\u5355\u540a",window.HZMJ_HUTYPE_NAME_DEF[61]="\u6e05\u4e00\u8272",window.HZMJ_HUTYPE_NAME_DEF[75]="\u98ce\u4e00\u8272",window.HZMJ_HUTYPE_NAME_DEF[79]="\u5927\u4e09\u5143",window.HZMJ_HUTYPE_NAME_DEF[84]="\u5341\u4e09\u5e7a",window.HZMJ_HUTYPE_NAME_DEF[91]="\u5355\u540a",window.HZMJ_HUTYPE_NAME_DEF[92]="\u5355\u8c6a\u534e",window.HZMJ_HUTYPE_NAME_DEF[93]="\u53cc\u8c6a\u534e",window.HZMJ_HUTYPE_NAME_DEF[94]="\u4e09\u8c6a\u534e",window.HZMJ_HUTYPE_NAME_DEF[95]="\u8e72\u8e72\u9f50",window.HZMJ_HUTYPE_NAME_DEF[96]="\u53cd\u8e29",window.HZMJ_HUTYPE_Cardtype={},window.HZMJ_HUTYPE_Cardtype[255]="",window.HZMJ_HUTYPE_Cardtype[3]=1,window.HZMJ_HUTYPE_Cardtype[6]=1,window.HZMJ_HUTYPE_Cardtype[32]=2,window.HZMJ_HUTYPE_Cardtype[46]=2,window.HZMJ_HUTYPE_Cardtype[58]=4,window.HZMJ_HUTYPE_Cardtype[61]=5,window.HZMJ_HUTYPE_Cardtype[79]=8,window.HZMJ_HUTYPE_Cardtype[91]=3,window.HZMJ_HUTYPE_Cardtype[92]=8,window.HZMJ_HUTYPE_Cardtype[93]=16,window.HZMJ_HUTYPE_Cardtype[94]=32,window.HZMJ_HUTYPE_Cardtype[95]=8,window.HZMJ_HUTYPE_Cardtype[96]=1,window.HZMJ_HU_FEN_TYPE={},window.HZMJ_HU_FEN_TYPE[0]="",window.HZMJ_HU_FEN_TYPE[1]="\u81ea\u6478",window.HZMJ_HU_FEN_TYPE[2]="\u88ab\u81ea\u6478",window.HZMJ_HU_FEN_TYPE[3]="\u70b9\u70ae",window.HZMJ_HU_FEN_TYPE[4]="\u5403\u80e1",window.HZMJ_HU_FEN_TYPE[5]="\u627f\u5305",window.HZMJ_GANG_FEN_TYPE={},window.HZMJ_GANG_FEN_TYPE[0]="",window.HZMJ_GANG_FEN_TYPE[1]="\u6697\u6760",window.HZMJ_GANG_FEN_TYPE[2]="\u660e\u6760",window.HZMJ_GANG_FEN_TYPE[3]="\u660e\u6760",window.HZMJ_GANG_FEN_TYPE[4]="\u88ab\u6697\u6760",window.HZMJ_GANG_FEN_TYPE[5]="\u70b9\u6760",window.HZMJ_GANG_FEN_TYPE[6]="\u88ab\u660e\u6760",window.HZMJ_GANG_FEN_TYPE[7]="\u88ab\u660e\u6760",window.HZMJ_STATION={},window.HZMJ_STATION[0]="",window.HZMJ_STATION[1]="\u672c\u5bb6",window.HZMJ_STATION[2]="\u4e0b\u5bb6",window.HZMJ_STATION[4]="\u5bf9\u5bb6",window.HZMJ_STATION[8]="\u4e0a\u5bb6",window.HZMJ_STATION[10]="\u4e0a\u5bb6\u4e0e\u4e0b\u5bb6",window.HZMJ_STATION[6]="\u5bf9\u5bb6\u4e0e\u4e0b\u5bb6",window.HZMJ_STATION[12]="\u4e0a\u5bb6\u4e0e\u5bf9\u5bb6",window.HZMJ_STATION[14]="\u4e09\u5bb6",window.HZMJ_GENZHUANG_TYPE={},window.HZMJ_GENZHUANG_TYPE[0]="\u8bf7\u5145\u503c",window.HZMJ_GENZHUANG_TYPE[1]="\u8ddf\u5e84",window.HZMJ_GENZHUANG_TYPE[2]="\u88ab\u8ddf\u5e84",window.HZMJ_HORSE_FEN_TYPE={},window.HZMJ_HORSE_FEN_TYPE[0]="",window.HZMJ_HORSE_FEN_TYPE[1]="\u8d62\u9a6c",window.HZMJ_HORSE_FEN_TYPE[2]="\u8f93\u9a6c",window.HZMJ_NOTIFY_AssistantID=((o={SUB_C_OUT_CARD:50,SUB_C_OPERATE_CARD:51,SUB_C_TRUSTEE:52,SUB_C_ZUO_SHENG_YI:53,SUB_C_CHOOSE_CHI:54,SUB_S_GAME_START:100,SUB_S_OUT_CARD:101,SUB_S_SEND_CARD:102,SUB_S_OPERATE_NOTIFY:103,SUB_S_OPERATE_RESULT:104,SUB_S_GAME_END:105,SUB_S_TRUSTEE:106,SUB_S_GAME_END_ALL:107,SUB_S_QIHU_NOTIFY:108,SUB_S_OUT_CARD_RESULT:109,SUB_S_PICK_FOLLOWER:110,SUB_S_ZHUA_AFTER_PICK:111,SUB_S_LIMIT_OUT:112,SUB_S_REMOV_OUT_LIMIT:113}).SUB_S_REMOV_OUT_LIMIT=114,o.SUB_S_ZSY_POPUP=117,o.SUB_S_CPG_TIMES_PROMPT=118,o),window.HZMJ_GameStation={GS_STATUS_FREE:0,GS_STATUS_PLAYING:1,GS_FOLLOWER_CHECK:2},window.HZMJ_TYPE={MJ_TYPE_NONE:0,MJ_TYPE_W1:1,MJ_TYPE_W2:2,MJ_TYPE_W3:3,MJ_TYPE_W4:4,MJ_TYPE_W5:5,MJ_TYPE_W6:6,MJ_TYPE_W7:7,MJ_TYPE_W8:8,MJ_TYPE_W9:9,MJ_TYPE_T1:11,MJ_TYPE_T2:12,MJ_TYPE_T3:13,MJ_TYPE_T4:14,MJ_TYPE_T5:15,MJ_TYPE_T6:16,MJ_TYPE_T7:17,MJ_TYPE_T8:18,MJ_TYPE_T9:19,MJ_TYPE_B1:21,MJ_TYPE_B2:22,MJ_TYPE_B3:23,MJ_TYPE_B4:24,MJ_TYPE_B5:25,MJ_TYPE_B6:26,MJ_TYPE_B7:27,MJ_TYPE_B8:28,MJ_TYPE_B9:29,MJ_TYPE_FD:31,MJ_TYPE_FN:32,MJ_TYPE_FX:33,MJ_TYPE_FB:34,MJ_TYPE_ZHONG:35,MJ_TYPE_FA:36,MJ_TYPE_BAI:37,MJ_TYPE_FCHUN:41,MJ_TYPE_FXIA:42,MJ_TYPE_FQIU:43,MJ_TYPE_FDONG:44,MJ_TYPE_FMEI:45,MJ_TYPE_FLAN:46,MJ_TYPE_FZHU:47,MJ_TYPE_FJU:48,MJ_TYPE_CAISHEN:49,MJ_TYPE_YUANBAO:50,MJ_TYPE_MAO:51,MJ_TYPE_LAOXU:52},cc._RF.pop()},{}],HZMJ_CtrlBtns:[function(e,t){"use strict";cc._RF.push(t,"2658erCVm1ONIq/0xnnHvpm","HZMJ_CtrlBtns"),cc.Class({extends:cc.Component,properties:{ctrlBtnsBg:cc.Node,tingBtn:cc.Node,chiBtn:cc.Node,pengBtn:cc.Node,gangBtn:cc.Node,huBtn:cc.Node,zimoBtn:cc.Node,guoBtn:cc.Node,chiNode:cc.Node,ChiLayout:cc.Node,ChiCardsPre:cc.Prefab},onLoad:function(){this.node.children.forEach(function(e){return e.active=!1}),this.initEvent()},initEvent:function(){GameEvent.on("onHandleCard",this.show,this),GameEvent.on("onGuo",this.guoEvent,this),GameEvent.on("onHideCtrlBtn",this.hide,this)},closeEvent:function(){GameEvent.off("onHandleCard",this.show,this),GameEvent.off("onGuo",this.guoEvent,this),GameEvent.off("onHideCtrlBtn",this.hide,this)},show:function(e,t){if(t&&(this.deskComponentTarget=t),!cc.mj.Data.isPlayback){var i=e;cc.mj.Data.showCtrlBtns=!0,this.ctrlBtnsBg&&(this.ctrlBtnsBg.active=!0),i.isGuo&&(this.guoBtn.active=!0,this.guoBtn.getChildByName("nomor_2").active=!1),i.isPeng&&(this.pengBtn.active=!0),i.isChi&&(this.chiBtn.active=!0,this.chiValue={},this.chiValue=e.chiUion),e.gangUion.length>0?this.gangValue=e.gangUion[0]:this.gangValue=null,(i.isGang||i.isBuGang||i.isAnGang)&&(this.gangHandType={isGang:!0},i.isBuGang?this.gangHandType={isBuGang:!0}:i.isAnGang&&(this.gangHandType={isAnGang:!0}),this.gangBtn.active=!0),i.isTing&&(this.tingBtn.active=!0,this.huHandType={isTing:!0}),i.isHu&&(this.huBtn.active=!0,this.huHandType={isHu:!0},this.guoBtn.getChildByName("nomor_2").active=!0),i.isZiMo&&(this.zimoBtn.active=!0,this.huHandType={isZiMo:!0}),this.byMJCardType=e.byMJCardType,this.eventData=e}},guoEvent:function(e){e.uid===cc.mj.Data.uid&&this.hide()},hide:function(){cc.mj.Data.showCtrlBtns=!1,this.ctrlBtnsBg&&(this.ctrlBtnsBg.active=!1),this.chiNode&&(this.chiNode.active=!1),this.node.children.forEach(function(e){return e.active=!1}),this.gangHandType=null,this.huHandType=null},btnClickEvent:function(e,t){var i=this;switch(t){case"ting":if(this.deskComponentTarget){var o={eventType:HZMJ_MACROS_DEF.ACTION_TING_PAI};this.deskComponentTarget.userResponseEvent(o)}this.hide();break;case"chi":if(this.chiValue.length>1){this.chiNode.active=!0,this.SendChoosedChi(),this.ChiLayout.children.forEach(function(e){e.destroy()});for(var n=0;n<this.chiValue.length;n++){var a=this.chiValue[n];this.setChiCard(a)}}else{if(this.deskComponentTarget){var s={eventType:HZMJ_MACROS_DEF.ACTION_CHI,chiValue:this.chiValue[0]};this.deskComponentTarget.userResponseEvent(s)}this.hide()}break;case"peng":if(this.deskComponentTarget){var r={eventType:HZMJ_MACROS_DEF.ACTION_PENG};this.deskComponentTarget.userResponseEvent(r)}this.hide();break;case"gang":if(this.deskComponentTarget&&this.gangValue){var c={eventType:HZMJ_MACROS_DEF.ACTION_GANG,gangValue:this.gangValue};this.deskComponentTarget.userResponseEvent(c)}this.hide();break;case"hu":case"zm":if(this.deskComponentTarget){var u={eventType:HZMJ_MACROS_DEF.ACTION_HU};this.deskComponentTarget.userResponseEvent(u)}this.hide();break;case"guo":if(this.deskComponentTarget){var h=function(e){var t={eventType:HZMJ_MACROS_DEF.ACTION_PASS,iSGuoAction:e};i.deskComponentTarget.userResponseEvent(t)};if(this.huBtn.active)createMsgBox({msg:"\u786e\u5b9a\u8981\u9009\u62e9\u8fc7\u7684\u64cd\u4f5c\u5417?",btn1:"\u786e  \u5b9a",btn2:"\u53d6  \u6d88",callbackFun:function(e){"\u786e  \u5b9a"==e?h(!0):i.show(i.eventData,i.deskComponentTarget)}});else this.gangBtn.active?h(!0):h(!1)}this.hide()}},setChiCard:function(e){var t=this,i=cc.instantiate(this.ChiCardsPre);this.ChiLayout.addChild(i),i.active=!0;var o=i.getChildByName("btn").getComponent(cc.Button),n=new cc.Component.EventHandler;n.target=this.node,n.component="HZMJ_CtrlBtns",n.handler="Chicallback",n.customEventData=e,o.clickEvents.push(n),i.getChildByName("cards").getComponentsInChildren("MJCommon_Card").forEach(function(i,o){i.init(e[o],!0,!1,"daoCard",0,t.byMJCardType)})},Chicallback:function(e,t){if(this.deskComponentTarget){this.chiNode.active=!0;var i={eventType:HZMJ_MACROS_DEF.ACTION_CHI,chiValue:t};this.deskComponentTarget.userResponseEvent(i)}this.hide()},SendChoosedChi:function(){this.deskComponentTarget&&this.deskComponentTarget.SendChoosedChi()},onDestroy:function(){this.closeEvent()}}),cc._RF.pop()},{}],HZMJ_Data:[function(e,t){"use strict";cc._RF.push(t,"859f1uS/BBOLIx7fpKgj845","HZMJ_Data"),cc.Class({extends:cc.Component,properties:{uid:null,isGaming:!1,isWatchMode:!1,roomResult:null,isPlayback:!1,playbackData:null,playbackNum:0},init:function(){},getPlayerByKeyValue:function(e,t){if("uid"==e){var i=GameSocket.getDeskUserList();for(var o in i){var n=i[o];if(n.userID==t)return n}}},getPlayerData:function(){return this.getPlayerByKeyValue("uid",cc.mj.userInfoMgr.uid)},onSync:function(){this.deleteData()},getPlayerInfo:function(){},deleteData:function(){this.uid=null,this.roomResult=null,this.isGaming=!1,this.isPlayback=!1,this.playbackData=null,this.playbackNum=0,this.showCtrlBtns=null,this.selectedCard=null,this.notcanPutCard=null,this.moveFlag=null,this.isDingZhuang=null,this.turnFlag=null,this.showRoomOverFlag=!1,this.curPutCard=null,this.mopaiAction=!1}}),cc._RF.pop()},{}],HZMJ_EditTool:[function(e,t,i){"use strict";cc._RF.push(t,"33388i4mJ1O/b6o80sdAXwE","HZMJ_EditTool");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._nameMap={playOne:"Bottom",playTwo:"Left",playThree:"Top",playFour:"Right"},e.playerRootNode=null,e.cardItemNode=null,e.path="assets/resources/HZMJ/cards.json",e._isCleaning=!1,e._isLoading=!1,e._isSaving=!1,e}return n(i,t),Object.defineProperty(i.prototype,"clean",{get:function(){return this._isCleaning},set:function(){if(!this._isCleaning){this._isCleaning=!0;for(var e=0,t=this.playerRootNode.children;e<t.length;e++){var i=t[e],o=i.getChildByName("showHandCards"),n=i.getChildByName("handCards");n||(n=i.getChildByName("handCards3D"));var a=i.getChildByName("pushCards3D");n.removeAllChildren(),a.removeAllChildren(),o&&o.removeAllChildren()}this._isCleaning=!1}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"load",{get:function(){return this._isLoading},set:function(){var e=this;this._isLoading||(this._isLoading=!0,this.readFile(this.path,function(t,i){if(e._isLoading=!1,t)cc.error(t);else{console.log("load data",i);var o=JSON.parse(i);for(var n in o)e._deserializePlayerCard(o[n],e.playerRootNode.getChildByName(n))}}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"save",{get:function(){return this._isSaving},set:function(){var e=this;if(!this._isSaving){this._isSaving=!0;for(var t={},i=0,o=this.playerRootNode.children;i<o.length;i++){var n=o[i];t[n.name]=this._serializePlayerCard(n)}this.writeFile(this.path,JSON.stringify(t),function(i){e._isSaving=!1,i?cc.error(i):console.log("write data sucess",JSON.stringify(t))})}},enumerable:!1,configurable:!0}),i.prototype._deserializePlayerCard=function(e,t){var i=t.getChildByName("showHandCards"),o=t.getChildByName("handCards");o||(o=t.getChildByName("handCards3D"));var n=t.getChildByName("pushCards3D");o.removeAllChildren(),n.removeAllChildren(),i&&i.removeAllChildren();for(var a=new Map,s=0,r=this.cardItemNode.children;s<r.length;s++){var c=r[s];a.set(c.name,c)}for(var u=0,h=e.hand_cards;u<h.length;u++){var l=h[u];(p=a.get(l.name))||cc.error("get card item from scene CardItem failed",l.name),(m=cc.instantiate(p)).active=l.active,m.x=l.x,m.y=l.y,m.parent=o}for(var d=0,f=e.push_cards;d<f.length;d++)l=f[d],(p=a.get(l.name))||cc.error("get card item from scene CardItem failed",l.name),(m=cc.instantiate(p)).active=l.active,m.x=l.x,m.y=l.y,m.parent=n;if(i)for(var _=0,g=e.show_hand_cards;_<g.length;_++){var p,m;l=g[_],(p=a.get(l.name))||cc.error("get card item from scene CardItem failed",l.name),(m=cc.instantiate(p)).active=l.active,m.x=l.x,m.y=l.y,m.parent=i}},i.prototype._serializePlayerCard=function(e){var t={hand_cards:[],push_cards:[],show_hand_cards:[]},i=e.getChildByName("showHandCards"),o=e.getChildByName("handCards");o||(o=e.getChildByName("handCards3D"));for(var n=e.getChildByName("pushCards3D"),a=0,s=o?o.children:[];a<s.length;a++){-1!==(f=(d=s[a]).name).indexOf("-")&&(f=f.split("-")[0]);var r={name:f=this._nameMap[e.name]+"HandCard",active:d.active,x:Number(d.x.toFixed(2)),y:Number(d.y.toFixed(2))};t.hand_cards.push(r)}for(var c=0,u=n?n.children:[];c<u.length;c++)-1!==(f=(d=u[c]).name).indexOf("-")&&(f=f.split("-")[0]),r={name:f=this._nameMap[e.name]+"PushCard",active:d.active,x:Number(d.x.toFixed(2)),y:Number(d.y.toFixed(2))},t.push_cards.push(r);for(var h=0,l=i?i.children:[];h<l.length;h++){var d,f;-1!==(f=(d=l[h]).name).indexOf("-")&&(f=f.split("-")[0]),r={name:f=this._nameMap[e.name]+"ShowHandCard",active:d.active,x:Number(d.x.toFixed(2)),y:Number(d.y.toFixed(2))},t.show_hand_cards.push(r)}return t},i.prototype.readFile=function(t,i){var o=Editor.Project.path.replace("\\","/")+"/"+t;e("fs").readFile(o,"utf-8",function(e,t){if(e)return console.error("load "+o+" error:",e),void(i&&i(e,null));console.info("load "+o+" sucess"),i&&i(null,t)})},i.prototype.writeFile=function(t,i,o){var n=Editor.Project.path.replace("\\","/")+"/"+t,a=n.substr(0,n.lastIndexOf("/")+1),s=e("fs"),r=function(){s.writeFile(n,i,function(e){if(e)return console.error("save "+n+" error:",e),void(o&&o(null));console.info("save "+n+" sucess:"),o&&o(null)})};s.exists(a,function(e){e?r():s.mkdir(a,function(e){if(e)return console.error("save "+n+" mkdir error:",e),void(o&&o(e));r()})})},a([c(cc.Node)],i.prototype,"playerRootNode",void 0),a([c(cc.Node)],i.prototype,"cardItemNode",void 0),a([c({displayName:"\u914d\u7f6e\u8def\u5f84"})],i.prototype,"path",void 0),a([c({displayName:"\u6e05\u7406"})],i.prototype,"clean",null),a([c({displayName:"\u52a0\u8f7d"})],i.prototype,"load",null),a([c({displayName:"\u4fdd\u5b58"})],i.prototype,"save",null),a([r],i)}(cc.Component);i.default=u,cc._RF.pop()},{fs:void 0}],HZMJ_GameOver:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"8eeb8PPDJRFvajN7tB1FlIS","HZMJ_GameOver"),cc.Class({extends:cc.Component,properties:{gameCards:cc.Node,huangZhuang:cc.Node,gameOverplayers:cc.Node,gameBtn:cc.Node,closeBtn:cc.Node,returnBtn:cc.Node,gameBtnSpriteFame:[cc.SpriteFrame],rewardRichText:cc.RichText,bgNode:cc.Node,contentBGNode:cc.Node,bgSpines:[sp.Skeleton],titleSpines:[sp.Skeleton],gaungQuanSpine:sp.Skeleton,contentBGSpines:[sp.Skeleton],leftBGSpines:[sp.Skeleton],leftBGSpriteFame:[cc.Node],leftBGWinSpriteFame:[cc.Node],leftEffectSpines:[sp.Skeleton],drawSpine:sp.Skeleton},onLoad:function(){this._isShowSettle=!0,this._recordNodeShow={},this.resize()},start:function(){},resize:function(){var e=cc.Canvas.instance,t=cc.view.getFrameSize(),i=cc.sourceDesignSize;if(i||(i=cc.view.getDesignResolutionSize()),t.width/t.height>i.width/i.height){e.fitWidth=!1,e.fitHeight=!0;var o=i.height/t.height*t.width/i.width;this.bgNode.scaleX=o,this.bgNode.scaleY=o,this.contentBGNode.scaleX=o,this.contentBGNode.scaleY=o,console.log("GameOverUI \u9002\u914d \u957f\u5c4f \u9002\u914d\u9ad8\u5ea6",i.width,i.height,t.width,t.height)}else e.fitWidth=!0,e.fitHeight=!1,t.height,i.height,this.bgNode.scale=i.width/t.width*t.height/i.height,console.log("GameOverUI \u9002\u914d \u77ed\u5c4f \u9002\u914d\u9ad8\u5ea6",i.width,i.height,t.width,t.height)},show:function(e){var t=this;this.unscheduleAllCallbacks(),this.node.stopAllActions();var i=e.isReplay,o=e.resultType,n=e.playsData;console.log(tools.getCurTime()+" \u5355\u5c40\u7ed3\u7b97",JSON.stringify(e)),this._isShowSettle=!0,this.node.active=!0,this.gameBtn.getComponent(cc.Sprite).spriteFrame=this.gameBtnSpriteFame[0],this.node.children.forEach(function(e){return e.active=!0}),this.gameCards.children.forEach(function(e){return e.active=!1}),this.returnBtn.active=!1,this.rewardRichText.node.active=!1,this.gameOverplayers.active=!1,this.gameOverplayers.children.forEach(function(e){return e.active=!1}),this.huangZhuang.active=!1,this.bgSpines.forEach(function(e){e.node.active=!1});var a=this.bgSpines[o];a.node.active=!0,this.titleSpines.forEach(function(e){e.node.active=!1});var s=this.titleSpines[o];s.node.active=!0,this.contentBGSpines.forEach(function(e){e.node.active=!1});var r=this.contentBGSpines[o];r.node.active=!0,this.leftBGSpines.forEach(function(e){e.node.active=!1});var c=this.leftBGSpines[o];c.node.active=!1,this.leftBGSpriteFame.forEach(function(e){e.active=!1}),this.leftBGWinSpriteFame.forEach(function(e){e.active=!1});var u=this.leftBGSpriteFame[o];if(1==o){u.active=!0;for(var h=e.playsData[e.mySeatNo],l=0,d=0;d<4;d++)255!=h.byHuDouble[d]&&(l=32==h.byHuDouble[d]||91==h.byHuDouble[d]||3==h.byHuDouble[d]?0:61==h.byHuDouble[d]||58==h.byHuDouble[d]?1:2);var f="";if(1==l)this.scheduleOnce(function(){(f=u.getChildByName("zhonghu")).active=!0,f.getChildByName("amition").active=!0},1);else{var _=0;2==l?((f=u.getChildByName("dahu")).active=!0,_=.5):0==l&&((f=u.getChildByName("xiaohu")).active=!0,_=.2);var g=f.getChildByName("amition1"),p=f.getChildByName("amition2");g.active=!1,p.active=!1;var m=g.getComponent(sp.Skeleton),y=function(){p.active=!0,g.active=!1;var e=p.getComponent(sp.Skeleton);t.playSkelenAnimation(e,"xunhuan",!0,null)};this.scheduleOnce(function(){g.active=!0,p.active=!1,t.playSkelenAnimation(m,"tiao",!1,y)},_)}}else{var C=0;0==o?C=.5:2==o&&(C=.7),this.scheduleOnce(function(){u.active=!0},C)}this.leftEffectSpines.forEach(function(e){e.node.active=!1});var I=this.leftEffectSpines[o];I.node.active=!0,this.gaungQuanSpine.node.active=1===o,this.drawSpine.node.active=0===o,i||(c.node.active=!1,I.node.active=!0);var v=[a,s,r,c,I,this.gaungQuanSpine,this.drawSpine];v.forEach(function(e){t.playSkelenAnimation(e,"KaiShi",!1,null)}),this.scheduleOnce(function(){var i;i=e.rewardGiftCard,t.scheduleOnce(function(){if(i>0){t.rewardRichText.node.active=!0;var e=0;t.rewardRichText.string="\u793c\u5238 "+e,t.rewardGift=function(){e+=i/100>=1?10:i/1e3>=1?100:i/1e4>=1?1e3:1,++e>i?(t.unschedule(t.rewardGift),t.rewardRichText.string="\u793c\u5238 "+i):t.rewardRichText.string="\u793c\u5238 "+e},t.schedule(t.rewardGift,.001/i)}},.1),0!==o&&(t.gameCards.active=!0,t.gameOverplayers.active=!0,t.gameCards.active=!0,n.forEach(function(e,i){if(!(e.userID<=0)){if(1==e.resultType){var o=t.gameCards.children[0];o.getComponent("HZMJ_gameOverItem").initData(e),o.active=!0}var n=t.gameOverplayers.children[i];n.active=!0,n.getChildByName("name").getComponent(cc.Label).string=tools.getCutStringByCount(decodeURI(e.name),5),n.getChildByName("name").color=1==e.resultType?cc.color(255,234,20):cc.color(87,40,40),n.getChildByName("score").getComponent(cc.Label).string=e.score,n.getChildByName("score").color=1==e.resultType?cc.color(255,255,255):cc.color(176,59,52),n.getChildByName("bg").getComponent("SpriteArray").index=1==e.resultType?1:0;var a=n.getChildByName("head").getChildByName("avatar"),s=function(e){a&&cc.isValid(a)&&(a.getComponent(cc.Sprite).spriteFrame=e)}.bind(t),r=e.avatar;AvatarManager.requestHeadRes(r,e.userID,s,null),n.getChildByName("bank").active=e.isBanker,n.getChildByName("image_Hu").active=1==e.resultType}})),v.forEach(function(e){t.playSkelenAnimation(e,"XunHuan",!0,null)})},1),this.gameBtn.active=!1,this.closeBtn.active=!1,i&&(this.gameBtn.active=!1,this.closeBtn.active=!1),e.isGoldRoom&&(this.returnBtn.active=!0,this.closeBtn.active=!0)},hide:function(){this.node.active=!1},onContinueBtnClick:function(){GameEvent.emit("closeGameOver"),new(e("GameLogicBase")),GameEvent.emit("onclosebtn")},onBtnreturnClick:function(){GameSocket.requestStand()},onHePaiBtnClick:function(){if(this._isShowSettle){this._isShowSettle=!this._isShowSettle,this.gameBtn.getComponent(cc.Sprite).spriteFrame=this.gameBtnSpriteFame[1];for(var e,t=i(this.node.children);!(e=t()).done;){var o=e.value;o!=this.gameBtn&&o!=this.closeBtn&&(o.active=!1)}}},playSkelenAnimation:function(e,t,i,o){e.loop=i,e.animation=t,e.setCompleteListener(function(){o&&this.scheduleOnce(o,.2)}.bind(this))}}),cc._RF.pop()},{GameLogicBase:"GameLogicBase"}],HZMJ_GameTableLogic:[function(e,t){"use strict";cc._RF.push(t,"7bc2dRvWdRHFa9AQnni4KZx","HZMJ_GameTableLogic");var i=[{people:2,roomids:[7,8,9,10,11]},{people:3,roomids:[12,13,14,15,16]},{people:4,roomids:[2,3,4,5,6]}];cc.Class({extends:e("GameLogicBase"),properties:{},ctor:function(){},ctorData:function(){if(GameManager.setLogic(this,this.setPlayInfo.bind(this)),this.playCount=4,this._outTime=0,this._blockTime=0,this._autoBlockTime=5,this._restMahjongNum=136,this._bSuperClient=!1,this._playType=G_INVALID_BYTE_VALUE,this._gameBeginStatus=!1,this.m_StartVisible=!1,this.m_OverVisible=!1,G_SHOW_GAME_VOICE=!1,this._oldGetCardList={},this._oldGetCardCount=0,this.playInfo||this.__initData(),(this.isMatchRoom()||this.isBarrierMatchRoom())&&(this.playCount=2,this._logicInfo.seatCount=this.playCount),this.isGoldRoom())for(var e=RoomListManager.getRoomInfo().roomID,t=0;t<i.length;t++)for(var o=i[t].roomids,n=0;n<o.length;n++)if(e==o[n])return this.playCount=i[t].people,void(this._logicInfo.seatCount=this.playCount)},onLoad:function(){console.log("********\u8fdb\u5165\u9ebb\u5c06\u903b\u8f91\u754c\u9762***********"),this.ctorData()},__initData:function(){this._restMahjongNum=136,this.handArrData={},this.handArrCount={},this._cpgArrData={},this.roomCardAllScore={},this._isMeTuoGuan=!1;for(var e=0;e<HZMJ_MACROS_DEF.PLAY_COUNT;e++){this.handArrData[e]={};for(var t=0;t<HZMJ_MACROS_DEF.HAND_CARD_NUM;t++)this.handArrData[e][t]=G_INVALID_BYTE_VALUE;this.handArrCount[e]=HZMJ_MACROS_DEF.HAND_CARD_NUM-1,this.roomCardAllScore[e]=0}this.__recordAllUserName()},__recordAllUserName:function(){this._nameList={},this._UserIdList={};for(var e=0;e<HZMJ_MACROS_DEF.PLAY_COUNT;e++)this._nameList[e]=this.getUserNameBySeat(e),this._UserIdList[e]=this.getUserIdBySeat(e)},setPlayInfo:function(e){this.playInfo=e;var t={seatCount:HZMJ_MACROS_DEF.PLAY_COUNT,playInfo:e},i=GameManager.getGameUI();this._super(i,t)},start:function(){},_initReplayData:function(){RoomListManager.setRoomInfo({gameID:this.playInfo.gameID}),RoomListManager.setCurRuleInfo(this.playInfo.gameRules);for(var e=0,t=0;t<HZMJ_MACROS_DEF.PLAY_COUNT;t++)this.playInfo.user[t]&&e++;this.playCount=e;var i={deskPasswd:this.playInfo.bRoomPassward,masterID:"",masterName:this.playInfo.bRoomMasterName,runGameCount:this.playInfo.bCurPlayCount,totalGameCount:this.playInfo.bAllPlayCount};for(this.tableUI.showVipRoomInfo(i),this.tableUI.setRoomPswText(this.playInfo.bCurPlayCount,this.playInfo.bCurQuanFeng),t=0;t<this.playCount;t++){var o=this.playInfo.user[t],n={};n.nickName=o.nickName,n.dwUserID=o.dwUserID,n.money=0,n.hearUrl=o.hearUrl,n.bBoy=o.bBoy,n.score=o.iScore,n.headURL=o.hearUrl,n.userID=o.dwUserID,n.name=o.nickName,this.tableUI.addUser(n,this.logicToViewSeatNo(t))}},startReplayGame:function(){var e=this;cc.mj.Data.isPlayback=!0,this._initReplayData(),this.__initData(),this.__recordAllUserName(),this.tableUI.setReplayUI(),this.tableUI.ShowNetWork(!1);var t={};t.byNtStation=this.playInfo.bBankerPos,t.byCard=[],t.byCradCount=[];for(var i=0;i<this.playCount;i++){for(var o=this.playInfo.handArrData[i],n=0,a=[],s=0;s<HZMJ_MACROS_DEF.HAND_CARD_NUM;s++)a.push(o[s]),o[s]!=G_INVALID_BYTE_VALUE&&(n+=1);t.byCard.push(a),t.byCradCount.push(n)}this.handArrData=cloneObject(t.byCard),this.handArrCount=cloneObject(t.byCradCount),t.iMenNums=this.playInfo.bMenRestNum,t.iPlayintCount=this.playInfo.bCurPlayCount,this.mySeatNo=0,this.curBankerSeatNO=t.byNtStation,this._iMenNums=t.iMenNums,this.tableUI.Showdirection(t.byNtStation,this.playInfo.byLackFengWei),this.gameStationLogic(t),this.tableUI.setChuPaiEnabled(-1),this.tmpDelay=function(){var t=0;e.playMahjong=function(){var i=e.playInfo.event[t];if(i){switch(i.eventType){case"get":e._replayOptionGetCard(i);break;case"out":e._replayOptionOutCard(i);break;case"chi":e._replayOptionChi(i);break;case"peng":e._replayOptionPeng(i);break;case"gang":case"bugang":case"angang":e._replayOptionGang(i);break;case"hua":e._replayOptionHua(i);break;case"getAfterPickFlower":e._replayOptionPickFlower(i);break;case"hu":e._replayOptionHu(i);break;case"GameEnd":e.unschedule(e.playMahjong),e._replayOptionGameEnd(i)}t+=1}else t+=1},e.schedule(e.playMahjong,.5),e.unschedule(e.tmpDelay)},this.schedule(this.tmpDelay,.1)},getUserdwUserIDBySeat:function(e){if(this.playInfo)return this.playInfo.user[e].dwUserID},getUserSexBySeat:function(e){return this.playInfo?(console.log("getUserSexBySeat replay",e,this.playInfo),this.playInfo.user[e.toString()].bBoy):(console.log("getUserSexBySeat normal",null),this._super(e))},_formatCards:function(e,t){for(var i={count:0,cards:[]},o=0;o<t;o++){var n=e[o];n&&(n!=G_INVALID_BYTE_VALUE&&i.count++,i.cards.push(n))}return i},_replayOptionGetCard:function(e){this.tableUI.getCard(e.bUser,e.cardValue,15)},_replayOptionOutCard:function(e){var t=this._formatCards(e.handData,HZMJ_MACROS_DEF.HAND_CARD_NUM);this.tableUI.outCard(e.bUser,e.cardValue,t.cards,t.count,e.handCardIndex)},_replayOptionChi:function(e){var t=this._formatCards(e.handData,HZMJ_MACROS_DEF.HAND_CARD_NUM),i={eventType:HZMJ_MACROS_DEF.ACTION_CHI,byStation:e.bUser,eventSendPlayerViewSeatNO:this.logicToViewSeatNo(e.bUser),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(e.bBeUser),curMahJongValue:e.cardValue,resultList:[e.chiList[0],e.chiList[1],e.chiList[2],G_INVALID_BYTE_VALUE],handCount:t.count,handList:t.cards};this.tableUI.eventChiPengGang(i)},_replayOptionPeng:function(e){var t=this._formatCards(e.handData,HZMJ_MACROS_DEF.HAND_CARD_NUM),i={eventType:HZMJ_MACROS_DEF.ACTION_PENG,byStation:e.bUser,eventSendPlayerViewSeatNO:this.logicToViewSeatNo(e.bUser),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(e.bBeUser),curMahJongValue:e.cardValue,handCount:t.count,handList:t.cards};this.tableUI.eventChiPengGang(i)},_replayOptionGang:function(e){var t=HZMJ_MACROS_DEF.ACTION_MING_GANG;"bugang"===e.eventType?t=HZMJ_MACROS_DEF.ACTION_BU_GANG:"angang"===e.eventType&&(t=HZMJ_MACROS_DEF.ACTION_AN_GANG);var i=this._formatCards(e.handData,HZMJ_MACROS_DEF.HAND_CARD_NUM),o={eventType:t,byStation:e.bUser,eventSendPlayerViewSeatNO:this.logicToViewSeatNo(e.bUser),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(e.bBeUser),curMahJongValue:e.cardValue,handCount:i.count,handList:i.cards};this.tableUI.eventChiPengGang(o)},_replayOptionHua:function(e){var t={};t.byCurrentUser=e.bUser,t.byCardCount=e.cardCount,t.byHuaCard={};for(var i=0;i<=HZMJ_MACROS_DEF.HUA_CARD_NUM-1;i++)t.byHuaCard[i]=e.byHuaCard[i];t.byHuaCardCount=e.huaCardCount,t.byWildHuaCard={};for(var o=0;o<=HZMJ_MACROS_DEF.HUA_CARD_NUM-1;o++)t.byWildHuaCard[o]=e.byWildHuaCard[o];t.byWildHuaCardCount=e.wildHuaCardCount;for(var n=[],a=0;a<HZMJ_MACROS_DEF.HUA_CARD_NUM;a++)t.byHuaCard[a]!=G_INVALID_BYTE_VALUE&&n.push(t.byHuaCard[a]);for(var s=0;s<HZMJ_MACROS_DEF.HUA_CARD_NUM;s++)t.byWildHuaCard[s]!=G_INVALID_BYTE_VALUE&&n.push(t.byWildHuaCard[s]);this.tableUI.ShowflowerCard(this.logicToViewSeatNo(t.byCurrentUser),n,t.byHuaCardCount,t.byWildHuaCardCount),this.tableUI.ShowMyHandCard(this.logicToViewSeatNo(t.byCurrentUser),e.handData)},_replayOptionPickFlower:function(e){this.tableUI.ShowMyHandCard(this.logicToViewSeatNo(e.bUser),e.handData),this.tableUI.showRestNum(!0,e.iMenNums)},_replayOptionHu:function(e){this.tableUI.eventHu(this.logicToViewSeatNo(e.bUser),this.logicToViewSeatNo(e.bBeUser))},_replayOptionGameEnd:function(e){for(var t=this.getGameCountInfo(),i=[],o=0;o<35&&e.UserHuPaiLeiXing[o];o++)i.push(e.UserHuPaiLeiXing[o]);for(var n={bZimo:e.bZimo,bIsLiuJu:e.bIsLiuJu,byDianPao:[],byBeDianPao:e.byBeDianPao,byPs:e.byPs,byArHandPai:[],byArHandPaiCount:[],byBaoCard:255,byHorsePai:[],byHaveHorsePai:[],iHaveHorseCount:[],iHorseCount:[],iHuTypeEx:[],iFanCount:[],bycountGangFen:[],llGameScore:[],llAllScore:[],UserGCPData:[],HuPaiLeiXing:[],UserHuPaiLeiXing:i,byHuDouble:[],byDouble:[],byHuaCardCount:[],byWildHuaCardCount:[],byOtherUserHuaType:[],byTaiCount:e.byTaiCount,byHuMode:[],bNotPrompt:e.bNotPrompt,curGameCount:void 0,allGameCount:t,byNtStation:this.getCurBankerSeatNO(),userID:[],userName:[],usersHeadUrl:[]},a=0;a<HZMJ_MACROS_DEF.PLAY_COUNT;a++){var s=e.userList[a];if(s){var r=this.playInfo.user[a];n.userID[a]=r.dwUserID,n.userName[a]=r.nickName,n.usersHeadUrl[a]=r.hearUrl,n.byDianPao[a]=e.bDianPao[a],n.byArHandPai[a]=s.handData,n.byArHandPaiCount[a]=s.handCardCount,n.llGameScore[a]=s.llGameScore,n.llAllScore[a]=s.llAllScore;for(var c=0;c<=4;c++)s.UserGCPData&&s.UserGCPData[c]&&(s.UserGCPData[c].byData=s.UserGCPData[c].handData);n.UserGCPData[a]=s.UserGCPData,n.byHuDouble[a]=s.byHuDouble,n.byDouble[a]=s.byDouble,n.byHuaCardCount[a]=s.byHuaCardCount,n.byWildHuaCardCount[a]=s.byWildHuaCardCount,n.byOtherUserHuaType[a]=s.byOtherUserHuaType,n.byHuMode[a]=s.byHuMode}}n.tableUIComponent=this.tableUI,GameEvent.emit("showGameOver",n,!0)},userResponse:function(e){var t,i=e.eventType;switch(i==HZMJ_MACROS_DEF.ACTION_PASS&&0==e.iSGuoAction&&this.tableUI.setChuPaiEnabled(-1),i){case HZMJ_MACROS_DEF.OUT:t=null,t=GameSocket.createNetMsg(6,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_OUT_CARD),e.bClickTingOut?(t.pushBOOL(!0),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u51fa\u724c \u542c \u6570\u636e","true")):(t.pushBOOL(!1),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u51fa\u724c \u542c \u6570\u636e","false")),t.pushBYTE(e.curMahJongValue),t.crossedARMPush(4),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u51fa\u724c \u6570\u636e",e.curMahJongValue),GameSocket.sendData(t);break;case HZMJ_MACROS_DEF.ACTION_PASS:case HZMJ_MACROS_DEF.ACTION_TING_PAI:case HZMJ_MACROS_DEF.ACTION_PENG:case HZMJ_MACROS_DEF.ACTION_HU:t=null,(t=GameSocket.createNetMsg(5,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_OPERATE_CARD)).pushBYTE(e.eventType),t.crossedARMPush(4),GameSocket.sendData(t),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u78b0 \u6570\u636e",e.eventType);break;case HZMJ_MACROS_DEF.ACTION_GANG:t=null,(t=GameSocket.createNetMsg(5,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_OPERATE_CARD)).pushBYTE(HZMJ_MACROS_DEF.ACTION_GANG);for(var o=0;o<=3;o++)t.pushBYTE(e.gangValue);GameSocket.sendData(t),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u6760 \u6570\u636e",e.gangValue);break;case HZMJ_MACROS_DEF.ACTION_CHI:t=null,(t=GameSocket.createNetMsg(5,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_OPERATE_CARD)).pushBYTE(HZMJ_MACROS_DEF.ACTION_CHI);for(var n=0;n<=2;n++)t.pushBYTE(e.chiValue[n]);t.pushBYTE(G_INVALID_BYTE_VALUE),GameSocket.sendData(t),console.log("\u64cd\u4f5c\u65e5\u5fd7 \u5403 \u6570\u636e",e.chiValue)}},SendDataZSY:function(e){var t=null;(t=GameSocket.createNetMsg(1,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_ZUO_SHENG_YI)).pushBOOL(e),GameSocket.sendData(t)},SendChoosedChi:function(){var e=null;(e=GameSocket.createNetMsg(1,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_CHOOSE_CHI)).pushBOOL(!0),GameSocket.sendData(e)},dealGameStationResp:function(e){if(HZMJ_GameStation.GS_STATUS_FREE==this.gameStatus){var t={};t.bAgree=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),t.byOutTime=e.popBYTE(),t.byBlockTime=e.popBYTE(),t.byMJCardType=e.popBYTE(),t.isMenNums=e.popINT(),t.iPlayintCount=e.popINT(),t.iBaseFen=e.popINT(),t.llAllScore=tools.popArray("LONGLONG",e,HZMJ_MACROS_DEF.PLAY_COUNT),t.bSuperFlag=e.popBOOL(),t.iTimeRemaining=e.popINT(),t.playCount=e.popBYTE(),this.playCount=t.playCount,this._logicInfo.seatCount=this.playCount,this.tableUI.setRoomPswText(t.iPlayintCount,t.byQuanFeng),this._GameRules=t,this._outTime=t.byOutTime,this._blockTime=t.byBlockTime;var i=this.getGameCountInfo();t.curCount=i,console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u6e38\u620f\u72b6\u6001Free \u6570\u636e",t),this.tableUI.ShowNetWork(!1),this.tableUI.showTableBtn(!0),this.tableUI.StartTimeschedule(t.iTimeRemaining,!0),0!=i&&(this.tableUI.uiInfo.startBtn&&(this.tableUI.uiInfo.startBtn.active=!1),this.sendAgreeGame()),this.tableUI.onGameStationFree(t),this.isMatchRoom()||this.isBarrierMatchRoom()?this.tableUI.playerinforOrGameRulerStatic(!1):this.tableUI.playerinforOrGameRulerStatic(!0),this.m_OverVisible=!1}else if(HZMJ_GameStation.GS_STATUS_PLAYING==this.gameStatus||HZMJ_GameStation.GS_FOLLOWER_CHECK==this.gameStatus){var o={};o.bTing=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),o.bTinging=e.popBOOL(),o.bTuoGuan=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),o.byOutTime=e.popBYTE(),o.byBlockTime=e.popBYTE(),o.byArHandPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.HAND_CARD_NUM),o.byArHandPaiCount=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT),this.handArrData=cloneObject(o.byArHandPai),this.handArrCount=cloneObject(o.byArHandPaiCount),o.byArOutPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.OUT_CARD_NUM),o.byArOutPaiCount=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT),o.byMJCardType=e.popBYTE();var n=Number(cc.sys.localStorage.getItem(G_CARD_COLOR)||0);o.byMJCardType=n,o.byNowOutStation=e.popBYTE(),o.byTingCanOut=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),o.byNtStation=e.popBYTE(),o.byArMenPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.MEN_CARD_NUM),o.byBaoCard=e.popBYTE(),o.iMenNums=e.popINT(),o.iPlayintCount=e.popINT(),o.iBaseFen=e.popINT(),o.llAllScore=tools.popArray("LONGLONG",e,HZMJ_MACROS_DEF.PLAY_COUNT),o.CPGNotifyMes=this.__tagCPGNotifyMes(e),o.UserGCPData=this.__resolveChiPengGangData(e),o.bSuperFlag=e.popBOOL(),o.byOutAfterHuCard=tools.popArray("BYTE",e,34),o.remainingTimer=e.popINT(),o.iTimeRemaining=e.popINT(),o.playCount=e.popBYTE(),this.playCount=o.playCount,this._logicInfo.seatCount=this.playCount,this.__recordAllUserName(),this.tableUI.playerinforOrGameRulerStatic(!1),this.tableUI.ShowNetWork(!0),this.tableUI.Showdirection(o.byNtStation,o.byLackFengWei),this.tableUI.setRoomPswText(o.iPlayintCount,o.byQuanFeng),this.tableUI.StartTimeschedule(o.iTimeRemaining),this._iMenNums=o.iMenNums,this._GameRules=o,this.mySeatNo=this.getMySeatNO(),this._playType=o.byJingType,this._outTime=o.byOutTime,this._blockTime=o.byBlockTime,this.curBankerSeatNO=o.byNtStation,this.tableUI.showTableBtn(!1),this.tableUI.hideGameStatic(!1),this.m_OverVisible=!1,cc.mj.Data.zhuangUid=this.getUserIdBySeat(this.curBankerSeatNO);for(var a=0;a<HZMJ_MACROS_DEF.PLAY_COUNT;a++)this.tableUI.addPlayer(this.getUserIdBySeat(a),this.getViewSeatByID(this.getUserIdBySeat(a)),o.byMJCardType);cc.mj.Data.isWatchMode=this.isMeWatching();for(var s=0;s<HZMJ_MACROS_DEF.PLAY_COUNT;s++){var r=s,c=[];if(o.byHuaCard)for(var u=0;u<HZMJ_MACROS_DEF.HUA_CARD_NUM;u++)o.byHuaCard[s][u]!=G_INVALID_BYTE_VALUE&&c.push(o.byHuaCard[s][u]);if(o.byWildHuaCard)for(var h=0;h<HZMJ_MACROS_DEF.HUA_CARD_NUM;h++)o.byWildHuaCard[s][h]!=G_INVALID_BYTE_VALUE&&c.push(o.byWildHuaCard[s][h]);o.byHuaCardCount&&o.byWildHuaCardCount&&(0==o.byHuaCardCount[s]&&0==o.byWildHuaCardCount[s]||this.tableUI.ShowflowerCard(this.logicToViewSeatNo(r),c,o.byHuaCardCount[s],o.byWildHuaCardCount[s]))}if(o.bankerViewSeat=this.logicToViewSeatNo(this.getCurBankerSeatNO()),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u6e38\u620f\u72b6\u6001Free \u6570\u636e",o),this.tableUI.onGameStationGame(o),this.tableUI.showUserBankerbShow(this.logicToViewSeatNo(o.byNtStation),!0),this.isGoldRoom())for(var l=0;l<=HZMJ_MACROS_DEF.PLAY_COUNT-1;l++)l==this.getMySeatNO()&&(this._isMeTuoGuan=o.bTuoGuan[l]),this.tableUI.showUserAuto(this.logicToViewSeatNo(l),o.bTuoGuan[l]);this.tableUI.showCurCanHUCard(o.byOutAfterHuCard);var d=[];if(o.byCannotOutPai)for(var f=0;f<o.byCannotOutPai.length;f++)G_INVALID_BYTE_VALUE!=o.byCannotOutPai[f]&&d.push(o.byCannotOutPai[f]);for(var _=0;_<d.length;_++)this.tableUI.checkhandCardList(this.logicToViewSeatNo(this.getMySeatNO()),d[_]);for(var g=o.CPGNotifyMes[this.getMySeatNO()],p=[],m=0;m<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1&&G_INVALID_BYTE_VALUE!=g.byTingCanOut[m];m++)p.push(g.byTingCanOut[m]);var y=G_INVALID_BYTE_VALUE,C=[];if(g.bHu&&C.push(HZMJ_MACROS_DEF.ACTION_HU),g.bTing)for(var I=0;I<p.length;I++)this.tableUI.showTingsanjiao(this.logicToViewSeatNo(this.getMySeatNO()),p[I]);if(g.bGang&&(y=g.iGangData[0][1],C.push(HZMJ_MACROS_DEF.ACTION_GANG)),g.bPeng&&(y=g.byPeng,C.push(HZMJ_MACROS_DEF.ACTION_PENG)),g.bChi&&C.push(HZMJ_MACROS_DEF.ACTION_CHI),C.length<1)return;o.bHaveChoosedChi&&g.bChi||C.push(HZMJ_MACROS_DEF.ACTION_PASS);var v=g.byUser;G_INVALID_BYTE_VALUE==v&&(v=this.getMySeatNO());for(var E=[],S=0;S<=HZMJ_MACROS_DEF.MAX_CHI_UION_NUM-1&&G_INVALID_BYTE_VALUE!=g.byChi[S][0];S++)E.push(g.byChi[S]);for(var N=[],R=[],b=0;b<=HZMJ_MACROS_DEF.MAX_GANG_UION_NUM-1&&G_INVALID_BYTE_VALUE!=g.iGangData[b][1];b++)R.push(g.iGangData[b][0]),N.push(g.iGangData[b][1]);var T={eventSendPlayerViewSeatNO:this.logicToViewSeatNo(this.getMySeatNO()),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(v),eventType:HZMJ_MACROS_DEF.ACTION_NO,eventTypeList:C,curMahJongValue:y,outTime:this._blockTime,chiUion:E,gangUion:N,gangTypeList:R,handList:this.handArrData[this.getMySeatNO()],handCount:this.handArrCount[this.getMySeatNO()]};cc.mj.Data.isWatchMode||this.tableUI.waitUserResponse(T)}},__resolveChiPengGangNotify:function(e){for(var t={},i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++){t[i]={},t[i].bZhuaPai=e.popBOOL(),t[i].bChi=e.popBOOL(),t[i].bPeng=e.popBOOL(),t[i].bGang=e.popBOOL(),t[i].bKan=e.popBOOL(),t[i].bSaoHu=e.popBOOL(),t[i].bTing=e.popBOOL(),t[i].bHu=e.popBOOL(),t[i].bHaveReturn=e.popBOOL(),t[i].bCanAction=e.popBOOL(),t[i].bCanChi={};for(var o=0;o<=2;o++)t[i].bCanChi[o]=e.popBOOL();t[i].byPeng=e.popBYTE(),t[i].byChi={};for(var n=0;n<=2;n++){t[i].byChi[n]={};for(var a=0;a<=2;a++)t[i].byChi[n][a]=e.popBYTE()}t[i].iGangData={};for(var s=0;s<=3;s++){t[i].iGangData[s]={};for(var r=0;r<=1;r++)t[i].iGangData[s][r]=e.popBYTE()}t[i].byTingCanOut={};for(var c=0;c<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1;c++)t[i].byTingCanOut[c]=e.popBYTE();t[i].byMaxThing=e.popBYTE(),t[i].byHuType={};for(var u=0;u<=HZMJ_MACROS_DEF.MAX_HUPAI_TYPE-1;u++)t[i].byHuType[u]=e.popBYTE();t[i].iHuPs=e.popBYTE(),t[i].byDianPao=e.popBYTE(),t[i].byBeDianPao=e.popBYTE(),t[i].byBlockTime=e.popBYTE(),t[i].byUser=e.popBYTE(),t[i].byPs=e.popBYTE()}return t},gameStationLogic:function(e){if(this.curBankerSeatNO=e.byNtStation,cc.mj.Data.zhuangUid=this.getUserIdBySeat(this.curBankerSeatNO),this.tableUI.showUserBankerbShow(this.logicToViewSeatNo(this.getCurBankerSeatNO()),!0),this.playInfo)for(var t=0;t<this.playCount;t++)this.tableUI.addPlayer(this.playInfo.user[t].dwUserID,this.logicToViewSeatNo(t),e.byMJCardType);else for(var i=0;i<HZMJ_MACROS_DEF.PLAY_COUNT;i++)this.tableUI.addPlayer(this.getUserIdBySeat(i),this.getViewSeatByID(this.getUserIdBySeat(i)),e.byMJCardType);e.bankerViewSeat=this.logicToViewSeatNo(this.getCurBankerSeatNO()),cc.mj.Data.isGaming=!0,cc.mj.Data.uid=this.getMyID(),this.tableUI.onGameBeginMessage(e),this.tableUI.showRestNum(!0,e.iMenNums)},getUserNameList:function(){return this._nameList},getUserIdList:function(){return this._UserIdList},dealGameMessage:function(e){var t=e.bAssistantID;switch(new Date,t){case HZMJ_NOTIFY_AssistantID.SUB_S_GAME_START:this.__initData(),this.m_StartVisible=!0,this.m_OverVisible=!1,this.__recordAllUserName();var i={};this.setGameStatus(HZMJ_GameStation.GS_STATUS_PLAYING),i.byNtStation=e.popBYTE(),i.byCard=this.__resolveHandData(e),i.byCradCount=this.__resolveHandCount(e),i.byArMenPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.MEN_CARD_NUM),i.bySezi0=e.popBYTE(),i.bySezi1=e.popBYTE(),i.byGetPaiDir=e.popBYTE(),i.byGetPai=e.popBYTE(),i.byMJCardType=e.popBYTE();var o=Number(cc.sys.localStorage.getItem(G_CARD_COLOR)||0);if(i.byMJCardType=o,i.byBaoCard=e.popBYTE(),i.iMenNums=e.popINT(),i.iPlayintCount=e.popINT(),i.bSuperFlag=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),i.iTimeRemaining=e.popINT(),i.byLackFengWei=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),i.byHuCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM,HZMJ_MACROS_DEF.MAX_CANHU_CARD_NUM),i.byCardRemainNum=tools.popArray("BYTE",e,255),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u6e38\u620f\u5f00\u59cb \u6570\u636e",i),this.tableUI.setRoomPswText(i.iPlayintCount,i.byQuanFeng),this.mySeatNo=this.getMySeatNO(),this.curBankerSeatNO=i.byNtStation,this._iMenNums=i.iMenNums,this.tableUI.showUserBankerbShow(this.logicToViewSeatNo(i.byNtStation),!0),this.tableUI.Showdirection(i.byNtStation,i.byLackFengWei),this.tableUI.showTableBtn(!1),this._gameBeginStatus=!0,this.tableUI.ShowNetWork(!0),this.tableUI.hideGameStatic(!1),this.gameStationLogic(i),this.tableUI.playerinforOrGameRulerStatic(!1),this.tableUI.TimeUnschedule(),this.tableUI.StartTimeschedule(i.iTimeRemaining),this.isGoldRoom())for(var n=0;n<=HZMJ_MACROS_DEF.PLAY_COUNT-1;n++)this.tableUI.showUserAuto(this.logicToViewSeatNo(n),!1);cc.mj.Data.isWatchMode=this.isMeWatching();break;case HZMJ_NOTIFY_AssistantID.SUB_S_PICK_FOLLOWER:(O={}).byCurrentUser=e.popBYTE(),O.byCard=this.__resolveHandData(e,O.byCurrentUser),O.byCardCount=e.popBYTE(),O.byHuaCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HUA_CARD_NUM),O.byHuaCardCount=e.popBYTE(),O.byWildHuaCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HUA_CARD_NUM),O.byWildHuaCardCount=e.popBYTE();for(var a=[],s=0;s<HZMJ_MACROS_DEF.HUA_CARD_NUM;s++)O.byHuaCard[s]!=G_INVALID_BYTE_VALUE&&a.push(O.byHuaCard[s]);for(var r=0;r<HZMJ_MACROS_DEF.HUA_CARD_NUM;r++)O.byWildHuaCard[r]!=G_INVALID_BYTE_VALUE&&a.push(O.byWildHuaCard[r]);this.tableUI.ShowflowerCard(this.logicToViewSeatNo(O.byCurrentUser),a,O.byHuaCardCount,O.byWildHuaCardCount),this.tableUI.ShowMyHandCard(this.logicToViewSeatNo(O.byCurrentUser),O.byCard),this.m_StartVisible,this.tableUI.setChuPaiEnabled(-1);break;case HZMJ_NOTIFY_AssistantID.SUB_S_ZHUA_AFTER_PICK:(O={}).byPaiIndex=e.popBYTE(),O.byCardData=e.popBYTE(),O.byCurrentUser=e.popBYTE(),O.byCard=this.__resolveHandData(e,O.byCurrentUser),O.byArMenPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.MEN_CARD_NUM),O.byCardCount=e.popBYTE(),O.iMenNums=e.popINT(),O.bCanOutCard=e.popBOOL();for(var c=!1,u=0;u<HZMJ_MACROS_DEF.HAND_CARD_NUM;u++)41==O.byCard[u]?c=!0:42==O.byCard[u]?c=!0:43==O.byCard[u]?c=!0:44==O.byCard[u]?c=!0:45==O.byCard[u]?c=!0:46==O.byCard[u]?c=!0:47==O.byCard[u]?c=!0:48==O.byCard[u]&&(c=!0);if(this._iMenNums=O.iMenNums,this.tableUI.ShowMyHandCard(this.logicToViewSeatNo(O.byCurrentUser),O.byCard),this.tableUI.showRestNum(!0,O.iMenNums),this.logicToViewSeatNo(this.getMySeatNO())==this.logicToViewSeatNo(O.byCurrentUser)&&0==c&&1==O.bCanOutCard)if(this.m_StartVisible){var h=this.logicToViewSeatNo(this.getCurBankerSeatNO());this.tableUI.setChuPaiEnabled(h)}else{var l=this.logicToViewSeatNo(O.byCurrentUser);this.tableUI.setChuPaiEnabled(l)}break;case HZMJ_NOTIFY_AssistantID.SUB_S_OUT_CARD:this.m_StartVisible=!1,(O={}).bTing=e.popBOOL(),O.byDeskStation=e.popBYTE(),O.byOutCardValue=e.popBYTE(),O.byHandCard=this.__resolveHandData(e,O.byDeskStation),O.byCardCount=e.popBYTE(),O.byHuCard=tools.popArray("BYTE",e,34),O.handCardIndex=e.popINT(),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u51fa\u724c \u6570\u636e",O),this.tableUI.outCard(O.byDeskStation,O.byOutCardValue,O.byHandCard,O.byCardCount,O.handCardIndex),O.bTing&&this.tableUI.eventTing(this.logicToViewSeatNo(O.byDeskStation)),O.byDeskStation==this.getMySeatNO()&&(this.tableUI.showCurCanHUCard(O.byHuCard),this.tableUI.setChuPaiEnabled(-1));break;case HZMJ_NOTIFY_AssistantID.SUB_S_OUT_CARD_RESULT:this.m_StartVisible=!1,(O={}).bResult=e.popBOOL(),O.byErrorCode=e.popBYTE(),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u51fa\u724c\u7ed3\u679c \u6570\u636e",O),O.bResult;break;case HZMJ_NOTIFY_AssistantID.SUB_S_SEND_CARD:O={},this._gameBeginStatus=!1,O.byPaiIndex=e.popBYTE(),O.byCardData=e.popBYTE(),O.byCurrentUser=e.popBYTE(),O.byCard=this.__resolveHandData(e,O.byCurrentUser),O.byArMenPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.MEN_CARD_NUM),O.byCardCount=e.popBYTE(),O.iMenNums=e.popINT(),O.bCanOutCard=e.popBOOL(),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u6293\u724c \u6570\u636e",O),this._iMenNums=O.iMenNums,GameEvent.emit("onHideCtrlBtn"),this.tableUI.getCard(O.byCurrentUser,O.byCardData,this._outTime,O),this.tableUI.showRestNum(!0,O.iMenNums);break;case HZMJ_NOTIFY_AssistantID.SUB_S_OPERATE_NOTIFY:(O={}).bChi=e.popBOOL(),O.bPeng=e.popBOOL(),O.bGang=e.popBOOL(),O.bHu=e.popBOOL(),O.bTing=e.popBOOL(),O.byUser=e.popBYTE(),O.byChi=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_CHI_UION_NUM,3),O.byPeng=e.popBYTE(),O.byGangData=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_GANG_UION_NUM,2),O.byTingCanOut=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),O.byHuCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),O.byCardRemainNum=tools.popArray("BYTE",e,255),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u5403\u78b0\u6760\u80e1\u901a\u77e5\u4e8b\u4ef6\u4e8b\u4ef6 \u6570\u636e",O);for(var d=O,f=[],_=0;_<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1&&G_INVALID_BYTE_VALUE!=d.byTingCanOut[_];_++)f.push(d.byTingCanOut[_]);var g=G_INVALID_BYTE_VALUE,p=[];if(d.bHu&&p.push(HZMJ_MACROS_DEF.ACTION_HU),d.bTing)for(var m=0;m<f.length;m++)this.tableUI.showTingsanjiao(this.logicToViewSeatNo(O.byUser),f[m]);if(d.bGang&&(g=d.byGangData[0][1],p.push(HZMJ_MACROS_DEF.ACTION_GANG)),d.bPeng&&(g=d.byPeng,p.push(HZMJ_MACROS_DEF.ACTION_PENG)),d.bChi&&(g=d.byGangData[0][1],p.push(HZMJ_MACROS_DEF.ACTION_CHI)),p.length<1)return;p.push(HZMJ_MACROS_DEF.ACTION_PASS);var y=d.byUser;G_INVALID_BYTE_VALUE==y&&(y=this.getMySeatNO()),d.bHu&&(this._HuPosition=y);for(var C=[],I=0;I<=HZMJ_MACROS_DEF.MAX_CHI_UION_NUM-1&&G_INVALID_BYTE_VALUE!=d.byChi[I][0];I++)C.push(d.byChi[I]);for(var v=[],E=[],S=0;S<=HZMJ_MACROS_DEF.MAX_GANG_UION_NUM-1&&G_INVALID_BYTE_VALUE!=d.byGangData[S][1];S++)E.push(d.byGangData[S][0]),v.push(d.byGangData[S][1]);var N={eventSendPlayerViewSeatNO:this.logicToViewSeatNo(this.getMySeatNO()),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(y),eventType:HZMJ_MACROS_DEF.ACTION_NO,eventTypeList:p,curMahJongValue:g,outTime:this._blockTime,chiUion:C,gangUion:v,gangTypeList:E,handCount:this.handArrCount[this.getMySeatNO()]};if(this._isMeTuoGuan&&(N.outTime=this._autoBlockTime),this.handArrData)for(var R=0;R<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1&&G_INVALID_BYTE_VALUE!=this.handArrData[this.getMySeatNO()][R];R++)this.handArrCount[this.getMySeatNO()]=R+1;this.handArrCount&&(N.handCount=this.handArrCount[this.getMySeatNO()]),this.tableUI.waitUserResponse(N);break;case HZMJ_NOTIFY_AssistantID.SUB_S_OPERATE_RESULT:if((O={}).bClearAction=e.popBOOL(),O.bZhua=e.popBOOL(),O.byActionType=e.popBYTE(),O.byStation=e.popBYTE(),O.byBeStation=e.popBYTE(),O.byCardValue=e.popBYTE(),O.byData=tools.popArray("BYTE",e,4),O.byCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),O.byArOutPai=tools.popArray("BYTE",e,60),O.byCardCount=e.popBYTE(),O.byOutCanHuCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),O.byHuCard=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM,HZMJ_MACROS_DEF.MAX_CANHU_CARD_NUM),O.byCardRemainNum=tools.popArray("BYTE",e,255),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u64cd\u4f5c\u7ed3\u679c \u6570\u636e",O),13!=O.byActionType&&14!=O.byActionType&&15!=O.byActionType&&O.byCardValue==G_INVALID_BYTE_VALUE)return;this.handArrData=cloneObject(O.byArHandPai);var b={eventType:O.byActionType,byStation:O.byStation,eventSendPlayerViewSeatNO:this.logicToViewSeatNo(O.byStation),eventRecvPlayerViewSeatNO:this.logicToViewSeatNo(O.byBeStation),curMahJongValue:O.byCardValue,resultList:[O.byData[0],O.byData[1],O.byData[2],O.byData[3]],handList:O.byArHandPai,handCount:O.byHandCardCount,outTime:this._outTime};if(GameEvent.emit("onHideCtrlBtn"),this.getUserIdBySeat(b.byStation)===cc.mj.Data.uid||cc.mj.Data.isPlayback||(cc.mj.Data.notcanPutCard=!1),HZMJ_MACROS_DEF.ACTION_AN_GANG==O.byActionType)b.resultList=[O.byData[3],O.byData[3],O.byData[3],O.byData[3]];else{if(HZMJ_MACROS_DEF.ACTION_TING_PAI==O.byActionType)return void this.tableUI.eventTing(this.logicToViewSeatNo(O.byStation));if(HZMJ_MACROS_DEF.ACTION_HU==O.byActionType)return void this.tableUI.eventHu(this.logicToViewSeatNo(O.byStation),this.logicToViewSeatNo(O.byBeStation));if(HZMJ_MACROS_DEF.ACTION_FANCAI==O.byActionType)return void this.tableUI.eventFanCai(this.logicToViewSeatNo(O.byStation),this.logicToViewSeatNo(O.byBeStation));if(HZMJ_MACROS_DEF.ACTION_GANGKAI==O.byActionType)return void this.tableUI.eventGngKai(this.logicToViewSeatNo(O.byStation),this.logicToViewSeatNo(O.byBeStation))}this.tableUI.eventChiPengGang(b);break;case HZMJ_NOTIFY_AssistantID.SUB_S_LIMIT_OUT:(O={}).byUser=e.popBYTE(),O.byCannotOutCard=tools.popArray("BYTE",e,2);for(var T=[],L=0;L<O.byCannotOutCard.length;L++)G_INVALID_BYTE_VALUE!=O.byCannotOutCard[L]&&T.push(O.byCannotOutCard[L]);for(var M=0;M<T.length;M++)this.tableUI.checkhandCardList(this.logicToViewSeatNo(O.byUser),T[M]);break;case HZMJ_NOTIFY_AssistantID.SUB_S_REMOV_OUT_LIMIT:(O={}).byUser=e.popBYTE(),O.byCannotOutCard=tools.popArray("BYTE",e,2),this.tableUI.CanlehandCardColor(this.logicToViewSeatNo(O.byUser));break;case HZMJ_NOTIFY_AssistantID.SUB_S_CPG_TIMES_PROMPT:(O={}).CPGTimesType=e.popBYTE(),O.name=e.popNCHAR(64),O.bCPGUser=e.popBOOL();var G=O.name,A="";2==O.CPGTimesType?A=1==O.bCPGUser?"\u60a8\u628a\u3010"+G+"\u3011\u5403\u78b0\u6760\u4e862\u6b21":"\u60a8\u88ab\u3010"+G+"\u3011\u5403\u78b0\u6760\u4e862\u6b21":3==O.CPGTimesType?A=1==O.bCPGUser?"\u60a8\u628a\u3010"+G+"\u3011\u505a\u751f\u610f\u4e86":"\u60a8\u88ab\u3010"+G+"\u3011\u505a\u751f\u610f\u4e86":4==O.CPGTimesType&&(A="\u60a8\u548c\u3010"+G+"\u3011\u4e92\u76f8\u505a\u751f\u610f"),this.tableUI.ShowChiPengGangtips(A);break;case HZMJ_NOTIFY_AssistantID.SUB_S_GAME_END:if(this.m_OverVisible)return;this.m_OverVisible=!0;var O={};if(O.bZimo=e.popBOOL(),O.bIsLiuJu=e.popBOOL(),O.byDianPao=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.byBeDianPao=e.popBYTE(),O.byPs=e.popBYTE(),O.byArHandPai=this.__resolveHandData(e),O.byArHandPaiCount=this.__resolveHandCount(e),O.byHuDouble=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.PLAY_COUNT,HZMJ_MACROS_DEF.MAX_HUPAI_TYPE),O.iFanCount=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.bTing=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.GoldRoom=this.isGoldRoom()&&!this.isBarrierMatchRoom(),O.llGameScore=tools.popArray("LONGLONG",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.llWinFailDouble=tools.popArray("LONGLONG",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.bycountGangFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iGenZhuangScore=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iHuFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iMaFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iMaiMaShu=e.popINT(),O.GoldRoom)for(var D=0;D<4;D++)0!=O.llGameScore[D]&&(O.llGameScore[D]=F_GetMoneyDisplay(Number(O.llGameScore[D])));O.byMaPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_MAIMA_COUNT,2),O.iJiZhuangTimes=e.popINT(),O.bHuType=e.popBYTE(),O.UserGCPData=this.__resolveChiPengGangData(e),O.byRemainMenPai=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_REMAIN_MEN_PAI_NUM),O.byRemainMenPaiCount=e.popBYTE(),O.CountHuFenStruct=this._resolveCountHuFenStruct(e,HZMJ_MACROS_DEF.PLAY_COUNT),O.CountGangFenStruct=this._resolveCountGangFenStruct(e,HZMJ_MACROS_DEF.PLAY_COUNT),O.CountGenZhuangFenStruct=this._resolveCountGenZhuangFenStruct(e,HZMJ_MACROS_DEF.PLAY_COUNT),O.CountHorseFenStruct=this._resolveCountHorseFenStruct(e,HZMJ_MACROS_DEF.PLAY_COUNT),O.rewardGiftCard=e.popINT();var w=this.getGameCountInfo();O.curGameCount=void 0,O.allGameCount=w,O.byNtStation=this.getCurBankerSeatNO(),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u5c0f\u7d50\u7b97\u4e8b\u4ef6 \u6570\u636e",O),this.tableUI.setbNotPrompt(O.bNotPrompt);for(var B=0;B<HZMJ_MACROS_DEF.PLAY_COUNT;B++)this.tableUI.ShowPlayHandCard(this.logicToViewSeatNo(B),O.byArHandPai[B],O.byArHandPaiCount[B],O.byDianPao[B],O.byPs);GameEvent.emit("onGameOver",O);break;case HZMJ_NOTIFY_AssistantID.SUB_S_GAME_END_ALL:(O={}).iHuCount=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iZimo=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iJiePao=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iDianPao=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iDianGang=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iBuGang=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.iAnGangCount=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.llGameScore=tools.popArray("LONGLONG",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.userID=tools.popArray("INT",e,HZMJ_MACROS_DEF.PLAY_COUNT),O.wanfa=this.tableUI._wanfaString,O.sumCount=this.getGameCountInfo(),O.roomPsw=window.deskPasswd,O.roomMastId=this.getRoomMasterId(),console.log(tools.getCurTime()+" \u724c\u5c40\u65e5\u5fd7 \u603b\u7ed3\u7b97 \u6570\u636e",O),this.m_OverVisible=!1,this.tableUI.setAllResultData(O),this.tableUI.setAllResultData(O,this.getGameCountInfo());break;case HZMJ_NOTIFY_AssistantID.ASS_CHANGE_PAI_RESULT:e.crossedARM(3),e.popBOOL();for(var k={},U=0;HZMJ_MACROS_DEF.HAND_CARD_NUM-1;U++)k[U]=e.popBYTE();e.popBYTE();break;case HZMJ_NOTIFY_AssistantID.SUB_S_TRUSTEE:(O={}).bTrustee=e.popBOOL()}},__resolveGangFenData:function(e){for(var t=[],i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++)t[i]={},t[i].byGangType=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),t[i].byXiangYingStation=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),t[i].bBaoTing=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),t[i].byGangNums=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),t[i].iAllFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),t[i].byNums=e.popBYTE();return t},_resolveCountHuFenStruct:function(e,t){for(var i=[],o=0;o<t;o++)i[o]={},i[o].byNameType=tools.popArray("BYTE",e,3),i[o].byXiangYingStation=tools.popArray("BYTE",e,3),i[o].byXiangYingStationEx=tools.popArray("BYTE",e,3),i[o].iAllFen=tools.popArray("INT",e,3),i[o].byNums=e.popBYTE();return i},_resolveCountGangFenStruct:function(e,t){for(var i={},o=0;o<t;o++)i[o]={},i[o].byGangType=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),i[o].byXiangYingStation=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),i[o].bBaoTing=tools.popArray("BOOL",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),i[o].byGangNums=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),i[o].iAllFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.MAX_COUNT_GANG_FEN),i[o].byNums=e.popBYTE();return i},_resolveCountGenZhuangFenStruct:function(e,t){for(var i={},o=0;o<t;o++)i[o]={},i[o].byGenZhuangType=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GEN_ZHUANG_FEN),i[o].byXiangYingStation=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_GEN_ZHUANG_FEN),i[o].iAllFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.MAX_COUNT_GEN_ZHUANG_FEN),i[o].byNums=e.popBYTE();return i},_resolveCountHorseFenStruct:function(e,t){for(var i={},o=0;o<t;o++)i[o]={},i[o].byBuyHorseType=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_HORSE_FEN),i[o].byMaiStation=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_HORSE_FEN),i[o].byBeiMaiStation=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_COUNT_HORSE_FEN),i[o].iAllFen=tools.popArray("INT",e,HZMJ_MACROS_DEF.MAX_COUNT_HORSE_FEN),i[o].byNums=e.popBYTE();return i},__resolveHuPaiData:function(e){for(var t={},i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++)t[i]={},t[i].byNameType=tools.popArray("BYTE",e,3),t[i].byXiangYingStation=tools.popArray("BYTE",e,3),t[i].byXiangYingStationEx=tools.popArray("BYTE",e,3),t[i].iAllFen=tools.popArray("INT",e,3),t[i].byNums=e.popBYTE();return t},__resolveChiPengGangData:function(e){for(var t={},i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++){t[i]={};for(var o=0;o<=4;o++){t[i][o]={},t[i][o].byType=e.popBYTE(),t[i][o].iStation=e.popBYTE(),t[i][o].iBeStation=e.popBYTE(),t[i][o].iOutpai=e.popBYTE(),t[i][o].byData={};for(var n=0;n<=3;n++)t[i][o].byData[n]=e.popBYTE()}}return this._cpgArrData=cloneObject(t),t},__resolveHandData:function(e,t){if(void 0!==t&&null!=t){for(var i={},o=0;o<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1;o++)i[o]=e.popBYTE();return this.handArrData&&(this.handArrData[t]=cloneObject(i)),i}for(var n={},a=0;a<=HZMJ_MACROS_DEF.PLAY_COUNT-1;a++){n[a]=[];for(var s=0;s<=HZMJ_MACROS_DEF.HAND_CARD_NUM-1;s++)n[a].push(e.popBYTE())}return this.handArrData=cloneObject(n),n},__resolveHandCount:function(e,t){if(void 0!==t&&null!=t){var i=e.popBYTE();return this.handArrCount[t]=i,i}for(var o={},n=0;n<=HZMJ_MACROS_DEF.PLAY_COUNT-1;n++)o[n]=e.popBYTE();return this.handArrCount=cloneObject(o),o},getHandArrData:function(){return this.handArrData},getHandArrCount:function(){return this.handArrCount},sendPao:function(e){var t=GameSocket.createNetMsg(1,MSG_MAIN_LOADER_GAME,HZMJ_NOTIFY_AssistantID.SUB_C_DIANPAO);t.pushBYTE(e),GameSocket.sendData(t)},sendMing:function(){},clearUI:function(){this.tableUI.clearUI()},showAllResultUI:function(){this.tableUI.showAllResult()},logicToViewSeatNo:function(e){if(null==e)return G_INVALID_BYTE_VALUE;if(e<0||e>=this._logicInfo.seatCount)return G_INVALID_BYTE_VALUE;var t=(e+this.seatOffset+this._logicInfo.seatCount)%this._logicInfo.seatCount;return this.playCount&&2==this.playCount&&(1==t?t=2:3==t&&(t=2)),this.playCount&&3==this.playCount&&(2==t&&(t=3),3==e&&(t=G_INVALID_BYTE_VALUE)),console.log("\u903b\u8f91\u5ea7\u4f4d\u53f7\u8f6c\u4e3a\u89c6\u56fe\u5ea7\u4f4d\u53f7 deskStation:"+e+" viewSeat:"+t+" seatOffset:"+this.seatOffset+" seatCount:"+this._logicInfo.seatCount+" playCount:"+this.playCount),t},__tagCPGNotifyMes:function(e){for(var t=[],i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++)t[i]=[],t[i].bZhuaPai=e.popBOOL(),t[i].bChi=e.popBOOL(),t[i].bPeng=e.popBOOL(),t[i].bGang=e.popBOOL(),t[i].bKan=e.popBOOL(),t[i].bSaoHu=e.popBOOL(),t[i].bTing=e.popBOOL(),t[i].bHu=e.popBOOL(),t[i].bHaveReturn=e.popBOOL(),t[i].bCanAction=e.popBOOL(),t[i].bCanChi=tools.popArray("BOOL",e,3),t[i].byPeng=e.popBYTE(),t[i].byChi=tools.popArray("BYTE",e,3,3),t[i].iGangData=tools.popArray("BYTE",e,4,2),t[i].byTingCanOut=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.HAND_CARD_NUM),t[i].byMaxThing=e.popBYTE(),t[i].byHuType=tools.popArray("BYTE",e,HZMJ_MACROS_DEF.MAX_HUPAI_TYPE),t[i].iHuPs=e.popBYTE(),t[i].byDianPao=e.popBYTE(),t[i].byBeDianPao=e.popBYTE(),t[i].byBlockTime=e.popBYTE(),t[i].byUser=e.popBYTE(),t[i].byPs=e.popBYTE();return t},changeTabIndex:function(e){for(var t=[],i=0;i<e.length;i++){t[i+1]=[];for(var o=0;o<e[i].length;o++)t[i+1][o+1]=e[i][o]}return t},gameBeginClearUI:function(){this.tableUI.onGameBeginClearUI()},getRate:function(){return this.isGoldRoom()||this.isPrivateRoom()?G_MULTI_NUM:1},getLeftReadyTime:function(){return 30},getIsMeTuoGuan:function(){return this._isMeTuoGuan},setGameRuleInfo:function(){this.playCount=this.tableUI.getGameRulesRs()}}),cc._RF.pop()},{GameLogicBase:"GameLogicBase"}],HZMJ_GameTableUI:[function(e,t){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"f21a4rNNxFD95KI0LvE68H8","HZMJ_GameTableUI");var s=e("EventEmiter").GlobalEvent;cc.Class({extends:e("GameViewBase"),properties:{PlayerUIPrefab:cc.Prefab,PlayersLayer:cc.Node,sitPos0:cc.Node,sitPos1:cc.Node,sitPos2:cc.Node,sitPos3:cc.Node,setup_Node:[cc.Node],BankNode_Node:[cc.Node],bg_count:cc.Node,roomPswText:cc.Node,masterNameText:cc.Node,Text_time:cc.Node,Text_RoomWanfa:cc.Node,Text_GameRuler:cc.Node,Text_GameName:cc.Label,Text_Homeowner:cc.Label,Text_GameTime:cc.Label,btn_chat:cc.Node,btn_voice:cc.Node,changeBtn:cc.Node,baoPaiBox:cc.Node,pointNode:cc.Node,centerBar:cc.Node,playInfo:cc.Node,ctrlBtns:e("HZMJ_CtrlBtns"),players:[e("HZMJ_User")],back_node:cc.Node,mjSpriteAlt:cc.SpriteAtlas,overGameNode:cc.Node,overGameMaskNode:cc.Node,Button_SuperClient:cc.Node,Skeleton:[sp.SkeletonData],Button_Ting:cc.Node,Image_GuoHu:cc.Node,HuPaiLayer:cc.Node,HuPaiLayerPrefab:cc.Prefab,img_createrCard:cc.Node,background_1:cc.Node,background_2:cc.Node,loading_Start:cc.Node,btn_img:cc.Node,btn_Start:cc.Node,btn_Table:cc.Node,Text_Infortips:cc.Node,Text_Playtips:cc.Node,Text_Metips:cc.Node,ChangeNode:cc.Node,Voice_Node:cc.Node,cardPrefabs:[cc.Prefab],cardsJson:cc.JsonAsset,LabelNoticeNode:cc.Node},ctor:function(){console.log("")},setPlayInfo:function(e){this.onLoadSuper(),this._allResultInfo=null,this._playInfo=e},onEnable:function(){this._super(),DataNotify.addListener(this),MYAudioEngine.stopMusic(),this._playBGMusic(),cc.sys.localStorage.setItem(G_LIVE_BROADCAST,1),s.instance.on("NORMAL_NOTICE",this.onNormalNotice,this)},onDisable:function(){this._super(),DataNotify.removeListener(this),s.instance.off("NORMAL_NOTICE",this.onNormalNotice,this)},start:function(){console.log("********start***********"),this.resetSize(this.node),this.initUI(),this.uiInfo&&this.uiInfo.playInfo&&this.tableLogic.startReplayGame()},onEnter:function(){this.super.onEnter(this),this.initUI()},onLoad:function(){console.log("********\u8fdb\u5165\u9ebb\u5c06UI\u754c\u9762***********");var t=cc.view.getFrameSize();if(cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),t.height>t.width&&cc.view.setFrameSize(t.height,t.width),cc.mjSpriteAlt=this.mjSpriteAlt,this._initCards(),cc.mj={},!cc.mj.Data){var i=e("HZMJ_Data");cc.mj.Data=new i,cc.mj.Data.init()}this.gameInforArry=[],this.TouristInforArry=[],this.onLoadSuper=this._super,GameManager.setUI(this,this.setPlayInfo.bind(this)),this.pointNode.active=!1,this.playInfo.active=!1,this.initEvent(),this.m_deskStation=-1,cc.mj.Data.CardType=!1,this.isShowStopSvr=!0,this.isShowNotice=!1,this.LabelNoticeNode.active=!0,this.noticeList=[],this.noticeListSpec=[],this.nPlayIndex=0},resetSize:function(){var e=cc.Canvas.instance,t=cc.view.getFrameSize(),i=cc.view.getDesignResolutionSize();t.width/t.height>i.width/i.height?(e.fitHeight=!0,e.fitWidth=!1,console.log("TableUI \u9002\u914d \u957f\u5c4f \u56fa\u5b9a\u9ad8\u5ea6",i.width,i.height,t.width,t.height)):(e.fitWidth=!0,e.fitHeight=!1,console.log("TableUI \u9002\u914d \u77ed\u5c4f \u56fa\u5b9a\u5bbd\u5ea6",i.width,i.height,t.width,t.height)),cc.sourceDesignSize=i,this.fitBg()},fitBg:function(){var e=this.node.getChildByName("Bg").getChildByName("back"),t=cc.view.getFrameSize(),i=cc.sourceDesignSize;if(t.width/t.height>i.width/i.height){var o=i.height/t.height*t.width/i.width;e.scaleX=o,e.scaleY=o}else{var n=i.width/t.width*t.height/i.height;e.scaleX=n,e.scaleY=n}},fitScreen:function(e,t){var i=e.width/t.width,o=e.height/t.height,n=e.getChildByName("Bg").getChildByName("back"),a=e.height/n.height;n.width*=a,n.height*=a,i>o&&(a=e.width/n.width,n.width*=a,n.height*=a)},initUI:function(){this.initUIData()},initUIData:function(){var e=this,t={};t.seatCount=HZMJ_MACROS_DEF.PLAY_COUNT,t.roomMasterText=this.masterNameText,t.voiceBtn=this.btn_voice,t.chatBtn=this.btn_chat,t.changeBtn=this.changeBtn,t.beginBtn=this.btn_Start,t.playInfo=this._playInfo,t.playerPrefab=this.PlayerUIPrefab,t.btn_loading_Startimg=this.loading_Start,t.img_createrCard=this.img_createrCard,t.btn_img=this.btn_img,t.btn_room=this.btn_Table,t.sitPosArr={},this.playPOS=[];for(var i=0;i<4;i++)t.sitPosArr[i]=this["sitPos"+i],this.playPOS[i]=t.sitPosArr[i].getPosition();t.sitInforArr={};for(var o=0;o<4;o++)t.sitInforArr[o]=this.setup_Node[o];if(this.setUiInfo(t),this.setCardIsCanTuoGuan(!1),this.setGoldIsCanTuoGuan(!0),this.setBarrierMatchIsCanTuoGuan(!0),this.setPrivateIsCanTuoGuan(!0),this._tingFlagList={},this._mingFlag={},this.isTingPai=!1,this.upsideGroupTing=!1,this.m_bNotPrompt=!1,this._isInforChangeSeat=!1,this.playerinforOrGameRulerStatic(!1),this._playInfo){a=this._playInfo.gameID;var n=GameManager.getRegistGameNameByGameID(a);document.title=G_APP_NAME_CH+"-"+n}else{var a=RoomListManager.getRoomInfo().gameID,s=GameManager.getRegistGameNameByGameID(a);document.title=G_APP_NAME_CH+"-"+s}var r=document.getElementById("lobbyQRCode");r&&r.remove();var c=document.getElementById("GAMEQRCode");c&&c.remove();var u=document.getElementById("GameZhanjiQRCode");u&&u.remove(),this.setShowPlaytips(!1),this._playInfo?(this.btn_img.active=!1,this.centerBar.active=!1):(this.InitWXvoiceconfig(),this.scheduleOnce(function(){e.setShareInfo(),e.requestSystemNotice();var t="G_RULES_ITEM"+window.deskPasswd;0==Number(cc.sys.localStorage.getItem(t)||0)&&(e.initGameRuler(),cc.sys.localStorage.setItem(t,1))},.5)),this.overGameNode&&(this.overGameNode.zIndex=G_GAME_SET_ZORDER_TAG+1),this.showGameBackColor(Number(cc.sys.localStorage.getItem(G_GAME_BACK)||0))},_initCards:function(){var e=this.cardsJson.json,t=!1,i=cc.view.getFrameSize();i.width/i.height>2&&(t=!0);for(var o=0;o<this.players.length;o++){var n=this.players[o].node,a=e[n.name];this._deserializePlayerCard(a,n,o,t)}},_deserializePlayerCard:function(e,t,i,n){var a={BottomHandCard:0,BottomPushCard:1,BottomShowHandCard:2,LeftHandCard:3,LeftPushCard:4,LeftShowHandCard:5,TopHandCard:6,TopPushCard:7,TopShowHandCard:8,RightHandCard:9,RightPushCard:10,RightShowHandCard:11},s=t.getChildByName("showHandCards"),r=t.getChildByName("handCards");r||(r=t.getChildByName("handCards3D"));var c=t.getChildByName("pushCards3D");r.removeAllChildren(),c.removeAllChildren(),s&&s.removeAllChildren();for(var u,h=o(e.hand_cards);!(u=h()).done;){var l=u.value,d=this.cardPrefabs[a[l.name]],f=cc.instantiate(d);f.active=l.active,f.x=l.x,f.y=l.y,f.parent=r}for(var _,g=o(e.push_cards);!(_=g()).done;){var p=_.value,m=this.cardPrefabs[a[p.name]],y=cc.instantiate(m);y.active=p.active,y.x=p.x,y.y=p.y,1==i&&n&&(y.x=y.x+50),3==i&&n&&(y.x=y.x-50),y.parent=c}if(s)for(var C,I=o(e.show_hand_cards);!(C=I()).done;){var v=C.value,E=this.cardPrefabs[a[v.name]],S=cc.instantiate(E);S.active=v.active,S.x=v.x,S.y=v.y,S.parent=s}},_playBGMusic:function(){var e=this;if(this.bgMusic)MYAudioEngine.playMusic(this.bgMusic),console.log("play game bgmusic");else{var t="";this.tableLogic.isGoldRoom()&&(t="sound/HZMJ/background/bg_Private"),this.bg_count.active=!1,this.tableLogic.isMatchRoom()&&(t="sound/HZMJ/background/bg_Match",this.bg_count.active=!0),this.tableLogic.isBarrierMatchRoom()&&(t="sound/HZMJ/background/bg_BarrierMatch");var i=window.BundleName;cc.assetManager.loadBundle(i,function(i,o){o.loadDir(t,cc.AudioClip,function(t,i){t?console.error(t):(e.bgMusic=i,MYAudioEngine.playMusic(e.bgMusic),console.log("play game bgmusic async"))})})}},doSitBtn_TouchEnded:function(e,t){var i=Number(t),o=this.getGameRulesRs();2==o?0!=i&&(i=1):3==o&&(3==i&&(i=2),this.m_deskStatio=i),console.log("\u70b9\u51fb\u5750\u4e0b\u6309\u94ae\u53d1\u9001\u5750\u4e0b\u547d\u4ee4"+i),this.tableLogic.sendSit(i)},playerinforOrGameRulerStatic:function(e){if(this.setup_Node[0].active=e,this.setup_Node[1].active=e,this.setup_Node[2].active=e,this.setup_Node[3].active=e,this.Text_GameRuler.active=e,this.PlayersLayer.active=!e,console.log("playerinforOrGameRulerStatic:",this.getGameRulesRs()),e){var t=this.getGameRulesRs();2==t?(this.setup_Node[1].active=!1,this.setup_Node[3].active=!1):3==t&&(this.setup_Node[2].active=!1)}},getPlayer:function(e){if(this.uiInfo&&this.uiInfo.playInfo){if(this.players&&this.players[e])return this.players[e]}else if(this.players&&this.players[this.tableLogic.getViewSeatByID(e)])return this.players[this.tableLogic.getViewSeatByID(e)]},addPlayer:function(e,t,i){null!=t&&255!=t&&(this.m_byMJCardType=i,this.players[t].initShow(e,i,this))},startCountdownEvent:function(){this.turnCenterBar(!0,-1,15)},turnCenterBar:function(e,t,i){var o=this;if(this.timeDownCb&&this.unschedule(this.timeDownCb,1),this.centerBar.active=e,e){this.m_flag=e,this.m_index=t,this.m_time=15;var n=this.centerBar.getChildByName("pointer").children,a=this.centerBar.getChildByName("time").getComponent(cc.Label);if(a.node.active=!1,n.forEach(function(e){return e.active=!1}),-1!==t||i){if(!cc.mj.Data.isPlayback){a.node.active=!0;var s=i||15;a.string=(s<10?"0"+s:s)+"",this.timeDownCb=function(){--s<0?(o.unschedule(o.timeDownCb),a.string="",o.turnCenterBar(o.m_flag,o.m_index,o.m_time)):a.string=(s<10?"0"+s:s)+""},this.schedule(this.timeDownCb,1)}if(-1===t)return;cc.mj.Data.turnFlag=t,cc.turnFlag=t,n[t].active=!0,n[t].getComponent(cc.Animation).play()}}},Showdirection:function(e,t){var i=this.getGameRulesRs(),o=this.tableLogic.logicToViewSeatNo(e),n=this.centerBar.getChildByName("bg").children;if(!i||4!=i&&2!=i){if((!i||3==i)&&t)switch(t){case 1:0==o?(n[0].getComponent(cc.Label).string="\u4e1c",n[3].getComponent(cc.Label).string="\u897f",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u5317"):1==o?(n[0].getComponent(cc.Label).string="\u897f",n[3].getComponent(cc.Label).string="\u5317",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u4e1c"):3==o&&(n[0].getComponent(cc.Label).string="\u5317",n[3].getComponent(cc.Label).string="\u4e1c",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u897f");break;case 2:0==o?(n[0].getComponent(cc.Label).string="\u4e1c",n[3].getComponent(cc.Label).string="\u5357",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u5317"):1==o?(n[0].getComponent(cc.Label).string="\u5357",n[3].getComponent(cc.Label).string="\u5317",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u4e1c"):3==o&&(n[0].getComponent(cc.Label).string="\u5317",n[3].getComponent(cc.Label).string="\u4e1c",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u5357");break;case 3:0==o?(n[0].getComponent(cc.Label).string="\u4e1c",n[3].getComponent(cc.Label).string="\u5357",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u897f"):1==o?(n[0].getComponent(cc.Label).string="\u5357",n[3].getComponent(cc.Label).string="\u897f",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u4e1c"):3==o&&(n[0].getComponent(cc.Label).string="\u897f",n[3].getComponent(cc.Label).string="\u4e1c",n[2].getComponent(cc.Label).string="",n[1].getComponent(cc.Label).string="\u5357")}}else 0==o?(n[0].getComponent(cc.Label).string="\u4e1c",n[1].getComponent(cc.Label).string="\u5317",n[2].getComponent(cc.Label).string="\u897f",n[3].getComponent(cc.Label).string="\u5357"):1==o?(n[0].getComponent(cc.Label).string="\u5357",n[3].getComponent(cc.Label).string="\u897f",n[2].getComponent(cc.Label).string="\u5317",n[1].getComponent(cc.Label).string="\u4e1c"):2==o?(n[0].getComponent(cc.Label).string="\u897f",n[3].getComponent(cc.Label).string="\u5317",n[2].getComponent(cc.Label).string="\u4e1c",n[1].getComponent(cc.Label).string="\u5357"):3==o&&(n[0].getComponent(cc.Label).string="\u5317",n[3].getComponent(cc.Label).string="\u4e1c",n[2].getComponent(cc.Label).string="\u5357",n[1].getComponent(cc.Label).string="\u897f")},movePointNode:function(e){var t=e;if(this.pointNode.active=t.flag,t.flag){var i=this.pointNode.parent.convertToNodeSpaceAR(t.worldPos);this.pointNode.setPosition(i),this.pointNode.stopAllActions();var o=0;switch(t.deviation){case 0:case 2:o=40;break;case 1:case 3:o=30}var n=cc.sequence(cc.moveTo(.5,i.x,i.y+o+15),cc.moveTo(.5,i.x,i.y+o));this.pointNode.runAction(n.repeatForever())}},sendPutPai:function(e){var t=e,i={eventType:HZMJ_MACROS_DEF.OUT,bClickTingOut:!1,curMahJongValue:t.card,curMahJongIndex:0};this.tableLogic.userResponse(i)},getCard:function(e,t,i,o){var n=this;if(this.scheduleOnce(function(){for(var e=0;e<4;e++)n.players[e].setHideCurChuPai(!0)},.8),MYAudioEngine.playEffect("sound/HZMJ/sound_res/zhuapai"),this.uiInfo&&this.uiInfo.playInfo){var a={uid:this.tableLogic.getUserdwUserIDBySeat(e),deskStation:e};this.nextPushUidEvent(a);var s={uid:this.tableLogic.logicToViewSeatNo(e),card:t,isBack:!1,lastCardNum:null};this.drawCardEvent(s)}else{var r={uid:this.tableLogic.getUserIdBySeat(e),deskStation:e};if(this.nextPushUidEvent(r),o){var c={uid:this.tableLogic.getUserIdBySeat(e),card:t,isBack:!1,lastCardNum:null,HandCard:o.byCard};this.drawCardEvent(c)}else{var u={uid:this.tableLogic.getUserIdBySeat(e),card:t,isBack:!1,lastCardNum:null};this.drawCardEvent(u)}}},outCard:function(e,t,i,o){if(this.uiInfo&&this.uiInfo.playInfo){var n={deskStation:this.tableLogic.logicToViewSeatNo(e),uid:this.tableLogic.getUserdwUserIDBySeat(e),card:t,isBack:!1,handList:i,handCount:o};this.sendCardEvent(n)}else{var a={uid:this.tableLogic.getUserIdBySeat(e),card:t};this.sendCardEvent(a)}this.playGameVoice(this.tableLogic.logicToViewSeatNo(e),t)},playGameVoice:function(e,t){var i=this.tableLogic.getUserSexBySeat(this.tableLogic.viewToLogicSeatNo(e));if(0==e){var o=Number(cc.sys.localStorage.getItem(G_SOUND_TYPE)||3);0==o?i=!0:1==o&&(i=!1)}var n=t.toString().toLowerCase();i?MYAudioEngine.playEffect("sound/HZMJ/sound_res/man/"+n):MYAudioEngine.playEffect("sound/HZMJ/sound_res/woman/"+n)},__dealGameBase:function(e){e.bSuperFlag&&(this.Button_SuperClient.active=!0),this._superClientLayer&&(this._superClientLayer.active=!1)},onGameStationFree:function(e){this.__dealGameBase(e),this.Text_RoomWanfa.active=this.tableLogic.isRoom(),this.setBackground(),this.tableLogic.isRoom()&&(this.Text_RoomWanfa.getComponent(cc.Label).string=this.getGameWanfa()),this.showRestNum(!1,0),this.turnCenterBar(!1,0,0)},onGameStationGame:function(e){this.__dealGameBase(e),this.setBaoPai(!0,e.byBaoCard),this.setHandCard(),this.showRestNum(!0,e.iMenNums),this.setBackground(),this.Text_RoomWanfa.active=this.tableLogic.isRoom(),this.tableLogic.isRoom()&&(this.Text_RoomWanfa.getComponent(cc.Label).string=this.getGameWanfa()),RoomListManager.getRoomInfo();for(var t=[],i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++){var o={uid:null,handleCard:[],hasSendCards:[],drawCard:[],handCards:[],chiCards:[],pengCards:[],gangCards:[],anGangCards:[],BeChiCard:[],viewSeatNoBeChi:[],viewSeatNoBePeng:[],viewSeatNoBeGang:[]};if(o.uid=this.tableLogic.getUserIdBySeat(i),t.push(o),0!=e.byArOutPaiCount[i])for(var n=0;n<e.byArOutPaiCount[i];n++)t[i].hasSendCards.push(e.byArOutPai[i][n]);for(var a=e.UserGCPData[i],s=0;s<=HZMJ_MACROS_DEF.CPG_MAX_PILE_NUM-1&&HZMJ_MACROS_DEF.ACTION_NO!=a[s].byType;s++){for(var r=a[s].byType,c=[],u=0;u<=3;u++)G_INVALID_BYTE_VALUE!=a[s].byData[u]?c.push(a[s].byData[u]):HZMJ_MACROS_DEF.ACTION_AN_GANG==r&&c.push(a[s].byData[3]);var h={eventType:r,eventSendPlayerViewSeatNO:this.tableLogic.logicToViewSeatNo(a[s].iStation),eventRecvPlayerViewSeatNO:this.tableLogic.logicToViewSeatNo(a[s].iBeStation),curMahJongValue:a[s].iOutpai,resultList:c};switch(h.eventType){case HZMJ_MACROS_DEF.ACTION_CHI:for(var l=0;l<h.resultList.length;l++)t[i].chiCards.push(h.resultList[l]);t[i].BeChiCard.push(h.curMahJongValue),t[i].viewSeatNoBeChi.push(h.eventRecvPlayerViewSeatNO);break;case HZMJ_MACROS_DEF.ACTION_PENG:t[i].pengCards.push(h.curMahJongValue),t[i].viewSeatNoBePeng.push(h.eventRecvPlayerViewSeatNO);break;case HZMJ_MACROS_DEF.ACTION_MING_GANG:case HZMJ_MACROS_DEF.ACTION_BU_GANG:t[i].gangCards.push(h.curMahJongValue),t[i].viewSeatNoBeGang.push(h.eventRecvPlayerViewSeatNO);break;case HZMJ_MACROS_DEF.ACTION_AN_GANG:t[i].anGangCards.push(h.curMahJongValue)}}}var d={nextPushCardUid:this.tableLogic.getUserIdBySeat(e.byNowOutStation),roomOverResult:null,gameOverResult:null,players:t};GameEvent.emit("onSync",d),e.byNowOutStation==G_INVALID_BYTE_VALUE&&(this.turnCenterBar(!0,0),this.setChuPaiEnabled(-1))},userResponseEvent:function(e){this.tableLogic.userResponse(e)},SendChoosedChi:function(){this.tableLogic.SendChoosedChi()},waitUserResponse:function(e){if(this.turnCenterBar(!0,e.eventSendPlayerViewSeatNO,15),this.setChuPaiEnabled(e.eventSendPlayerViewSeatNO),0==e.eventSendPlayerViewSeatNO){var t=e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_GANG),i={isGuo:e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_PASS),isPeng:e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_PENG),isTing:e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_TING_PAI),isChi:e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_CHI),isGang:t,isBuGang:t,isAnGang:t,isHu:e.eventTypeList.includes(HZMJ_MACROS_DEF.ACTION_HU),isZiMo:!1,gangUion:e.gangUion,chiUion:e.chiUion,byMJCardType:this.m_byMJCardType};cc.mj.Data.isGetedCards?this.ctrlBtns.show(i,this):cc.mj.Data.ctrlOperateData=i}},eventHu:function(e){this.playGameVoice(e,"hu"),this.players[e]&&this.players[e].showCardType(3);for(var t=0;t<4;t++)this.players[t].setHideCurChuPai(!0)},eventFanCai:function(e){this.playGameVoice(e,"qiangganghu"),this.players[e]&&this.players[e].showGangHuType(3);for(var t=0;t<4;t++)this.players[t].setHideCurChuPai(!0)},eventGngKai:function(e){this.playGameVoice(e,"gangshanghua"),this.players[e]&&this.players[e].showGangHuType(3);for(var t=0;t<4;t++)this.players[t].setHideCurChuPai(!0)},eventTing:function(e){this.playGameVoice(e,"ting"),this.players[e]&&this.players[e].showCardType(5)},addPlayerBaiscInfo:function(e){return e.userName=this.tableLogic.getUserNameList(),e.userID=this.tableLogic.getUserIdList(),e.usersHeadUrl=this.tableLogic.getHeadURLList(),e},setAllResultData:function(e){e=this.addPlayerBaiscInfo(e),this._allResultInfo=cloneObject(e),console.log(">>>>resultInfo"+JSON.stringify(e)),GameEvent.emit("onRoomOver",this._allResultInfo)},showAllResult:function(e){GameEvent.emit("showRoomOver",e)},showResult:function(){},eventChiPengGangUI:function(e,t){for(var i=0;i<4;i++)this.players[i].setHideCurChuPai(!0);if(t)switch(t){case"chi":var o=e.byStation,n=0,a=0;this.uiInfo&&this.uiInfo.playInfo?(n=this.tableLogic.getUserdwUserIDBySeat(o),a=this.tableLogic.logicToViewSeatNo(o)):a=this.tableLogic.getUserIdBySeat(o);var s={uid:a,uidd:n,chiCard:e.resultList,curMahJongValue:e.curMahJongValue,isBack:!1,viewSeatNoBeChi:e.eventRecvPlayerViewSeatNO,handCount:e.handCount,handList:e.handList};this.chiEvent(s);break;case"peng":var r=e.byStation;a=0,n=0,this.uiInfo&&this.uiInfo.playInfo?(n=this.tableLogic.getUserdwUserIDBySeat(r),a=this.tableLogic.logicToViewSeatNo(r)):a=this.tableLogic.getUserIdBySeat(r);var c={uid:a,uidd:n,pengCard:e.curMahJongValue,isBack:!1,viewSeatNoBePeng:e.eventRecvPlayerViewSeatNO};this.pengEvent(c),0!=e.eventSendPlayerViewSeatNO&&this.getCard(r,255,15);break;case"gang":var u=e.byStation,h=(a=0,n=0,{uid:a=this.uiInfo&&this.uiInfo.playInfo?this.tableLogic.logicToViewSeatNo(u):this.tableLogic.getUserIdBySeat(u),card:e.curMahJongValue,type:e.gangType,isBack:!1,viewSeatNoBeGang:e.eventRecvPlayerViewSeatNO});this.gangEvent(h)}},eventChiPengGang:function(e){var t="";if(HZMJ_MACROS_DEF.ACTION_CHI==e.eventType)t="chi";else if(HZMJ_MACROS_DEF.ACTION_PENG==e.eventType)t="peng";else if(HZMJ_MACROS_DEF.ACTION_AN_GANG==e.eventType||HZMJ_MACROS_DEF.ACTION_BU_GANG==e.eventType||HZMJ_MACROS_DEF.ACTION_MING_GANG==e.eventType){var i=1;switch(e.eventType){case HZMJ_MACROS_DEF.ACTION_AN_GANG:i=3;break;case HZMJ_MACROS_DEF.ACTION_BU_GANG:i=2;break;case HZMJ_MACROS_DEF.ACTION_MING_GANG:i=1}e.gangType=i,e.bAnGang,t="gang"}this.playGameVoice(e.eventSendPlayerViewSeatNO,t),"anGang"!=t&&"mingGang"!=t||(t="gang"),this.eventChiPengGangUI(e,t),this.uiInfo.playInfo||(this.turnCenterBar(!0,this.tableLogic.logicToViewSeatNo(e.byStation),15),this.setChuPaiEnabled(this.tableLogic.logicToViewSeatNo(e.byStation)))},onGameBeginMessage:function(e){GameEvent.emit("hideOverLayout"),this.setBaoPai(!0,e.byBaoCard),this.setHandCard(),this._playInfo||(this.turnCenterBar(!0,e.bankerViewSeat),this.setChuPaiEnabled(e.bankerViewSeat))},showRestNum:function(e,t){void 0!==t&&(this.playInfo.active=e,this.playInfo.getChildByName("zhangshu").children[0].getComponent(cc.Label).string=""+(t||0))},closeCard:function(){GameEvent.emit("closeCard")},dealCards:function(e,t,i){var o=this;cc.mj.Data.isGetedCards=!0;var n={drawCard:null,handCards:[]};if(14===t){n.drawCard=i[13];for(var a=0;a<t-1;a++)n.handCards.push(i[a])}else for(var s=0;s<t;s++)n.handCards.push(i[s]);this.players[e].showHandCard(n),cc.mj.Data.ctrlOperateData&&!cc.mj.Data.isWatchMode&&this.scheduleOnce(function(){o.ctrlBtns.show(cc.mj.Data.ctrlOperateData,o)},.3)},setBaoPai:function(e,t){t==G_INVALID_BYTE_VALUE&&(e=!1),this.baoPaiBox.active=e,e&&(cc.mj.Data.ghostCard=[],t!=G_INVALID_BYTE_VALUE&&(this._baoPaiValue=t,cc.mj.Data.ghostCard.push(t),this.baoPaiBox.children[0].getComponent("MJCommon_Card").init(t,!1,!1,"outCard",0)))},setHandCard:function(){for(var e=this.tableLogic.getHandArrData(),t=this.tableLogic.getHandArrCount(),i=0;i<=HZMJ_MACROS_DEF.PLAY_COUNT-1;i++){var o=this.tableLogic.logicToViewSeatNo(i);o!==G_INVALID_BYTE_VALUE&&this.dealCards(o,t[i],e[i])}},syncEvent:function(e){var t=this,i=e;cc.mj.Data.showCtrlBtns=!1,cc.mj.Data.onSync(i),cc.mj.Data.isGaming=!0,cc.mj.Data.uid=this.tableLogic.getMyID(),void 0!==i.nextPushCardUid&&(cc.mj.Data.isGaming=!0);for(var o=function(e){var o=t.tableLogic.getViewSeatByID(t.tableLogic.getUserIdBySeat(e));if(null==o)return"break";var n=t.players[o];if(n.data.hasSendCards=i.players[e].hasSendCards,n.data.chiCards=i.players[e].chiCards,n.data.pengCards=i.players[e].pengCards,n.data.gangCards=i.players[e].gangCards,n.data.anGangCards=i.players[e].anGangCards,n.data.viewSeatNoBeChis=i.players[e].viewSeatNoBeChi,n.data.viewSeatNoBePengs=i.players[e].viewSeatNoBePeng,n.data.viewSeatNoBeGangs=i.players[e].viewSeatNoBeGang,n.data.chiCards.forEach(function(a,s){if(3==n.data.chiCards.length)0==s&&t.players[o].setChiPengGang(n.data.chiCards,3,5,!1,n.data.viewSeatNoBeChis[s],!0,i.players[e].BeChiCard[0]);else if(6==n.data.chiCards.length){if(0==s){for(var r=[],c=0;c<3;c++)r.push(n.data.chiCards[c]);t.players[o].setChiPengGang(r,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[0])}if(4==s){for(var u=[],h=3;h<6;h++)u.push(n.data.chiCards[h]);t.players[o].setChiPengGang(u,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[1])}}else if(9==n.data.chiCards.length){if(0==s){for(var l=[],d=0;d<3;d++)l.push(n.data.chiCards[d]);t.players[o].setChiPengGang(l,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[0])}if(3==s){for(var f=[],_=3;_<6;_++)f.push(n.data.chiCards[_]);t.players[o].setChiPengGang(f,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[1])}if(6==s){for(var g=[],p=6;p<9;p++)g.push(n.data.chiCards[p]);t.players[o].setChiPengGang(g,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[2])}}else if(12==n.data.chiCards.length){if(0==s){for(var m=[],y=0;y<3;y++)m.push(n.data.chiCards[y]);t.players[o].setChiPengGang(m,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[0])}if(3==s){for(var C=[],I=3;I<6;I++)C.push(n.data.chiCards[I]);t.players[o].setChiPengGang(C,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[1])}if(6==s){for(var v=[],E=6;E<9;E++)v.push(n.data.chiCards[E]);t.players[o].setChiPengGang(v,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[2])}if(9==s){for(var S=[],N=9;N<12;N++)S.push(n.data.chiCards[N]);t.players[o].setChiPengGang(S,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[3])}}else if(15==n.data.chiCards.length){if(0==s){for(var R=[],b=0;b<3;b++)R.push(n.data.chiCards[b]);t.players[o].setChiPengGang(R,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[0])}if(3==s){for(var T=[],L=3;L<6;L++)T.push(n.data.chiCards[L]);t.players[o].setChiPengGang(T,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[1])}if(6==s){for(var M=[],G=6;G<9;G++)M.push(n.data.chiCards[G]);t.players[o].setChiPengGang(M,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[2])}if(9==s){for(var A=[],O=9;O<12;O++)A.push(n.data.chiCards[O]);t.players[o].setChiPengGang(A,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[3])}if(12==s){for(var D=[],w=12;w<15;w++)D.push(n.data.chiCards[w]);t.players[o].setChiPengGang(D,3,5,!1,n.data.viewSeatNoBeChis[0],!0,i.players[e].BeChiCard[4])}}n.data.chiCards[s]=a}),n.data.pengCards.forEach(function(e,i){t.players[o].setChiPengGang(e,3,1,!1,n.data.viewSeatNoBePengs[i]),n.data.pengCards[i]=e}),n.data.gangCards.forEach(function(e,i){t.players[o].setChiPengGang(e,4,1,!1,n.data.viewSeatNoBeGangs[i]),n.data.gangCards[i]=e}),n.data.anGangCards.forEach(function(e,i){t.players[o].setChiPengGang(e,4,3),n.data.anGangCards[i]=e}),t.players[o].data.chiCards=n.data.chiCards,t.players[o].data.pengCards=n.data.pengCards,t.players[o].data.gangCards=n.data.gangCards,t.players[o].data.anGangCards=n.data.anGangCards,n.data.uid===i.nextPushCardUid&&n.data.uid===cc.mj.Data.uid){for(var a=255,s=t.players[o].data.handCards.length-1;s>=0;s--)if(255!=t.players[o].data.handCards[s]){a=t.players[o].data.handCards[s],t.players[o].data.handCards.splice(s,1);break}t.players[o].initHandCards(),255!=a&&t.players[o].getCardInTurn(a)}else t.players[o].initHandCards(),0!=i.nextPushCardUid&&o==t.tableLogic.logicToViewSeatNo(t.tableLogic.getSeatByID(i.nextPushCardUid))&&t.players[o].getCardInTurn(255);n.data.hasSendCards.forEach(function(e){t.players[o].chupaiAction(e,!0)}),i.nextPushCardUid===cc.mj.Data.uid&&(cc.mj.Data.notcanPutCard=!1)},n=0;n<=HZMJ_MACROS_DEF.PLAY_COUNT-1&&"break"!==o(n);n++);void 0!==i.nextPushCardUid&&GameEvent.emit("onNextPushUid",{uid:i.nextPushCardUid,deskStation:this.tableLogic.getSeatByID(i.nextPushCardUid),time:5}),this.tableLogic.isBarrierMatchRoom()||(i.roomOverResult&&i.roomOverResult.length&&GameEvent.emit("onRoomOver",{data:i.roomOverResult}),i.gameOverResult&&i.gameOverResult.length&&0===cc.mj.Data.getPlayerData().state?GameEvent.emit("onGameOver",{data:i.gameOverResult,noDelayTime:!0}):GameEvent.emit("hideOverLayout"))},ShowMyHandCard:function(e,t){this.players&&this.players[e]&&this.players[e].setHandCard(t)},ShowflowerCard:function(e,t,i,o){this.players&&this.players[e]&&this.players[e].setflowerCard(e,t,i,o)},setChuPaiEnabled:function(e){this.players&&this.players[0]&&(0==e?this.players[0].setChuPaiEnabled(!1):this.players[0].setChuPaiEnabled(!0))},checkhandCardList:function(e,t){this.players&&this.players[e]&&this.players[e].checkhandCardList(t)},showTingsanjiao:function(e,t){this.players&&this.players[e]&&(-1==t?this.players[e].showTingsanjiao(t,!1):this.players[e].showTingsanjiao(t))},CanlehandCardColor:function(e){this.players&&this.players[e]&&this.players[e].CanlehandCardColor()},ShowPlayHandCard:function(e,t,i,o,n){this.players&&this.players[e]&&this.players[e].ShowPlayHandCard(t,i,o,n)},ShowZSYpopup:function(){var e=function(e){"\u505a\u751f\u610f"==e?this.tableLogic.SendDataZSY(!0):this.tableLogic.SendDataZSY(!1)}.bind(this),t={msg:"\u662f\u5426\u505a\u751f\u610f",btn1:"\u505a\u751f\u610f",btn2:"\u53d6  \u6d88"};t.callbackFun=e,createMsgBox(t)},ShowChiPengGangtips:function(e){this.playTipsAmition(this.Text_Metips,e)},playTipsAmition:function(e,t,i){e.active=!0,t&&(e.getChildByName("text").getComponent(cc.Label).string=t+"");var o=function(){e.active=!1}.bind(this),n=i||3,a=cc.callFunc(o),s=cc.delayTime(n);e.runAction(cc.sequence(s,a))},doButtonTipClick:function(){},onCurMatchComeSoon:function(){this.setShowPlaytips(!0)},setShowPlaytips:function(e){var t=this;void 0===e&&(e=!1),this.Text_Playtips.active=e,1==e&&this.scheduleOnce(function(){t.Text_Playtips.active=!1},5)},setMyHandCard:function(){},backToLobby:function(){console.log("\u8fd4\u56de\u5927\u5385"),this.tableLogic.backLobby()},initEvent:function(){GameEvent.on("onSync",this.syncEvent,this),GameEvent.on("onStartCountdown",this.startCountdownEvent,this),GameEvent.on("onConfirmBanker",this.showBankerEvent,this),GameEvent.on("onSendCard",this.sendCardEvent,this),GameEvent.on("onReSendCard",this.reSendCardEvent,this),GameEvent.on("onDrawCard",this.drawCardEvent,this),GameEvent.on("onNextPushUid",this.nextPushUidEvent,this),GameEvent.on("onPeng",this.pengEvent,this),GameEvent.on("onGang",this.gangEvent,this),GameEvent.on("onHu",this.huEvent,this),GameEvent.on("movePoint",this.movePointNode,this),GameEvent.on("reSendPutPai",this.sendPutPai,this),GameEvent.on("reSetGame",this.reSetGame,this),GameEvent.on("onGameOver",this.gameOverEvent,this),GameEvent.on("onRoomOver",this.roomOverEvent,this),GameEvent.on("sendStartGame",this.sendStartGame,this),GameEvent.on("onBackToLobby",this.backToLobby,this),GameEvent.on("onclosebtn",this.onclosebtn,this)},closeEvent:function(){GameEvent.off("onSync",this.syncEvent,this),GameEvent.off("onStartCountdown",this.startCountdownEvent,this),GameEvent.off("onConfirmBanker",this.showBankerEvent,this),GameEvent.off("onSendCard",this.sendCardEvent,this),GameEvent.off("onReSendCard",this.reSendCardEvent,this),GameEvent.off("onDrawCard",this.drawCardEvent,this),GameEvent.off("onNextPushUid",this.nextPushUidEvent,this),GameEvent.off("onPeng",this.pengEvent,this),GameEvent.off("onGang",this.gangEvent,this),GameEvent.off("onHu",this.huEvent,this),GameEvent.off("movePoint",this.movePointNode,this),GameEvent.off("reSendPutPai",this.sendPutPai,this),GameEvent.off("reSetGame",this.reSetGame,this),GameEvent.off("onGameOver",this.gameOverEvent,this),GameEvent.off("onRoomOver",this.roomOverEvent,this),GameEvent.off("sendStartGame",this.sendStartGame,this),GameEvent.off("onBackToLobby",this.backToLobby,this),GameEvent.off("onclosebtn",this.onclosebtn,this)},showBankerEvent:function(e){var t=e.getUserData().data;cc.mj.Data.zhuangUid=t.BankerUid;var i=cc.mj.Data.getPlayerByKeyValue("uid",t.BankerUid);i&&this.players[i.localId]&&(this.players[i.localId].showZhuangInfo(t.BankerCount),this.turnCenterBar(!0,i.localId),this.setChuPaiEnabled(i.localId))},showUserBankerbShow:function(e,t){for(var i=0;i<this.uiInfo.seatCount;i++)this.BankNode_Node[i]&&(this.BankNode_Node[i].active=!1);this.BankNode_Node[e]&&(this.BankNode_Node[e].active=t)},onclosebtn:function(){this.btn_Start.active=!1},sendCardEvent:function(e){var t,i=e;this.reSendLength=0,t=this.uiInfo&&this.uiInfo.playInfo?this.getPlayer(i.deskStation):this.getPlayer(i.uid),i.uid!==this.tableLogic.getMyID()||cc.mj.Data.isPlayback?GameEvent.emit("chupai",{uid:i.uid,card:i.card,isBack:i.isBack,handList:i.handList,handCount:i.handCount}):(this.uiInfo&&this.uiInfo.playInfo?GameEvent.emit("chupai",{uid:i.uid,card:i.card,isBack:i.isBack,handList:i.handList,handCount:i.handCount}):GameEvent.emit("chupai",{uid:i.uid,card:i.card,isBack:i.isBack}),GameEvent.emit("selectPai",{isShow:!1}),cc.mj.Data.notcanPutCard=!0),t&&(t.chupaied=!1)},reSendCardEvent:function(e){e.getUserData().data,GameEvent.emit("initHandTouch")},playSkelenAnimation:function(e,t,i,o,n){t=t||!1;var a=new cc.Node,s=a.addComponent(sp.Skeleton),r=0;"xiaojiesuan"==e&&(r=1),s.skeletonData=this.Skeleton[r],s.premultipliedAlpha=!1,s.loop=t,s.animation="animation",s.timeScale=1,n&&this.scheduleOnce(function(){s.setSkin(n)},.1),o?o.addChild(a):this.node.addChild(a),a.setScale(1.5,1.5),a.name=e,s.setCompleteListener(function(){i&&i(),this.scheduleOnce(function(){a.destroy()},.25)}.bind(this))},setSuperLookResult:function(e){null==this._superClientLayer?(this._superClientLayer=this.addLayer(this.studio.layout,"SXTDH/src/SuperClient",e,function(e){this.tableLogic.userResponse(e)}),this._superClientLayer.setLocalZOrder(G_PLAYERUI_ZORDER_TAG+1)):(this._superClientLayer.setIsVisible(!0),this._superClientLayer.updateAllData(e))},showCurCanHUCard:function(e){var t=this,i=[];for(var o in e){var n=e[o];null!=n&&n!=G_INVALID_BYTE_VALUE&&i.push(n)}if(i.length>0){var a=Number(cc.sys.localStorage.getItem(G_TING_CARD)||0);this.HuPaiLayer.active=0==a;var s=this.HuPaiLayer.children[0];s.children.forEach(function(e){e.destroy()}),i.forEach(function(e){var i=cc.instantiate(t.HuPaiLayerPrefab);i.setScale(1.3,1.3),s.addChild(i),i.getComponent("MJCommon_Card").init(e,!0,!1,"outCard",0,!0)})}else this.HuPaiLayer.active=!1},setBackground:function(){var e;20161004==(e=RoomListManager.getRoomInfo()).gameID?(this.background_1.active=!1,this.background_2.active=!0):20211004==e.gameID&&(this.background_1.active=!0,this.background_2.active=!1)},StartTimeschedule:function(e,t){var i,o=this;if(this.tableLogic.isGoldRoom()||this.tableLogic.isMatchRoom()||this.tableLogic.isBarrierMatchRoom())(i={}).count=20;else{var n=RoomListManager.getCurRuleInfo();i=JSON.parse(n)}8==i.count||16==i.count||(this.RoomTime=e,this.timePlay&&this.unschedule(this.timePlay),this.timePlay=function(){if(o.RoomTime--,o.RoomTime<0)o.unschedule(o.timePlay),o.tableLogic.getGameStatus()==HZMJ_GameStation.GS_STATUS_PLAYING?console.log("*****************************************\u6e38\u620f\u72b6\u6001**********************************************"):t&&(o.tableLogic.isMeWatching()?o.tableLogic.doLeftRoom():o.tableLogic.sendDismissRoom());else{var e,i,n=Math.floor(o.RoomTime/60),a=o.RoomTime%60;if(e=n<10?"0"+n:n,i=a<10?"0"+a:a,o.Text_GameName.getComponent(cc.Label).string=e+":"+i,t){var s=Number(e);o.Text_GameTime.getComponent(cc.Label).string=s<=0?i+" \u79d2\u672a\u5f00\u5c40\u623f\u95f4\u5c06\u89e3\u6563":e+":"+i+" \u672a\u5f00\u5c40\u623f\u95f4\u5c06\u89e3\u6563"}}},this.schedule(this.timePlay,1))},ShowNetWork:function(){},TimeUnschedule:function(){this.unschedule(this.timePlay),this.Text_GameName.getComponent(cc.Label).string="00:00",this.Text_GameTime.getComponent(cc.Label).string=" "},setRoomPswText:function(e){var t="";this.roomInfor&&(t=t+tools.stringFormat("\u623f\u53f7: {0}",this.roomInfor.deskPasswd)+"         ",this.Text_Homeowner.getComponent(cc.Label).string="\u623f\u4e3b\uff1a"+this.roomInfor.masterName),this.uiInfo&&this.uiInfo.playInfo?t+="                ":t=t+tools.stringFormat("\u7b2c{0}\u8f6e",e)+"         ",this.roomPswText.active=!0,this.roomPswText.getComponent(cc.Label).string=t,this.Text_time.active=!1,this.uiInfo&&this.uiInfo.playInfo&&(this.Text_time.active=!1,this.Text_GameTime.active=!1)},doOtherThings:function(e){this.roomInfor=e},getGameRulesRs:function(){if(this.tableLogic.isGoldRoom()||this.tableLogic.isMatchRoom()||this.tableLogic.isBarrierMatchRoom())return this.tableLogic.isBarrierMatchRoom()?4:this.tableLogic.playCount;var e=RoomListManager.getCurRuleInfo();return JSON.parse(e).rs},getGameWanfa:function(){var e;if(this.tableLogic.isGoldRoom())return"";e=RoomListManager.getCurRuleInfo();var t,i="";return 15==(t=JSON.parse(e)).count?i+="\u672c\u5c40\u65f6\u957f\uff1a15\u5206\u949f ":24==t.count?i+="\u672c\u5c40\u65f6\u957f\uff1a24\u5206\u949f ":30==t.count?i+="\u672c\u5c40\u65f6\u957f\uff1a30\u5206\u949f ":60==t.count?i+="\u672c\u5c40\u65f6\u957f\uff1a30\u5206\u949f ":8==t.count?i+="\u672c\u5c40\u603b\u5c40\uff1a8\u5c40 ":16==t.count&&(i+="\u672c\u5c40\u603b\u5c40\uff1a16\u5c40 "),i},onGameBeginClearUI:function(){this.clearUI()},clearUI:function(){this.resetAllViewToGame()},cleanSendPai:function(){},drawCardEvent:function(e){var t=e,i=this.getPlayer(t.uid);i&&i.getCardInTurn(t.card,null,null,t.isBack,t.HandCard)},nextPushUidEvent:function(e){var t=e;0===cc.mj.Data.turnFlag&&t.uid==cc.mj.Data.uid&&(cc.mj.Data.notcanPutCard=!1);var i=cc.mj.Data.getPlayerByKeyValue("uid",t.uid),o=this.tableLogic.logicToViewSeatNo(t.deskStation);i&&this.players[o]&&(this.turnCenterBar(!0,o,t.time),this.setChuPaiEnabled(o),t.uid===cc.mj.Data.uid||cc.mj.Data.isPlayback||(cc.mj.Data.notcanPutCard=!1)),GameEvent.emit("hideOverLayout")},chiEvent:function(e){var t=e,i=this.getPlayer(t.uid);i&&(this.uiInfo&&this.uiInfo.playInfo?i.chi(t.chiCard,t.curMahJongValue,t.uidd===cc.mj.Data.uid,t.isBack,t.viewSeatNoBeChi,t.handCount,t.handList):i.chi(t.chiCard,t.curMahJongValue,t.uid===cc.mj.Data.uid,t.isBack,t.viewSeatNoBeChi,t.handCount,t.handList))},pengEvent:function(e){var t=e,i=this.getPlayer(t.uid);i&&(this.uiInfo&&this.uiInfo.playInfo?i.peng(t.pengCard,t.uidd===cc.mj.Data.uid,t.isBack,t.viewSeatNoBePeng):i.peng(t.pengCard,t.uid===cc.mj.Data.uid,t.isBack,t.viewSeatNoBePeng))},gangEvent:function(e){var t=e,i=this.getPlayer(t.uid);i&&i.gang(t)},huEvent:function(e){var t=e,i=this.getPlayer(t.uid),o=3;t.huPaiResult&&t.huPaiResult.isZiMo&&(o=4),this.scheduleOnce(function(){i&&i.showCardType(o)},0)},gameOverEvent:function(e){var t=this,i=e;cc.mj.Data.isGaming=!1;for(var o=0;o<4;o++)this.showUserAuto(o,!1);this.turnCenterBar(!0,-1),this.showRestNum(!0,0),GameEvent.emit("onHideCtrlBtn");var n=0;e.noDelayTime&&(n=0),this.turnCenterBar(!0,0,60),this.scheduleOnce(function(){var e=t.tableLogic.isGoldRoom();i.mySeatNo=t.tableLogic.getMySeatNO(),i.goldRoom=e,i.isBarrierMatchRoom=t.tableLogic.isBarrierMatchRoom(),i.byMJCardType=t.m_byMJCardType,i=t.addPlayerBaiscInfo(i),t.showResult(i),t.showRestNum(!1,0),GameEvent.emit("showGameOver",i)},n)},roomOverEvent:function(e){var t=e;cc.mj.Data.roomResult=t},sendStartGame:function(){for(var e=0;e<4;e++)this.players[e].flowerCardsdestroy();this.btn_Start.active=!1,this.tableLogic.sendAgreeGame(),this.m_bNotPrompt},setbNotPrompt:function(e){this.m_bNotPrompt=e},reSetGame:function(){cc.mj.Data.zhuangUid=null,cc.mj.Data.isGetedCards=!1,cc.mj.Data.ctrlOperateData=null,cc.mj.Data.ghostCard=null,cc.mj.Data.roomResult=null,cc.mj.Data.isGaming=!1,cc.mj.Data.isPlayback=!1,cc.mj.Data.playbackData=null,cc.mj.Data.playbackNum=0,cc.mj.Data.showCtrlBtns=null,cc.mj.Data.selectedCard=null,cc.mj.Data.notcanPutCard=null,cc.mj.Data.moveFlag=null,cc.mj.Data.isDingZhuang=null,cc.mj.Data.turnFlag=null,cc.mj.Data.showRoomOverFlag=!1,cc.mj.Data.curPutCard=null,cc.mj.Data.mopaiAction=!1,this.pointNode.active=!1,this.players.forEach(function(e){return e.reset()}),GameEvent.emit("onHideCtrlBtn"),this.btn_Start.active=!1,this.showCurCanHUCard({})},hidehideOverLayout:function(){this.overGameNode&&this.overGameNode.active&&GameEvent.emit("hideOverLayout")},resetAllViewToGame:function(){GameEvent.emit("hideOverLayout"),this.overGameMaskNode.active=!1,this.showRestNum(!1,0),this.reSetGame()},showGameBackColor:function(e){0==e?this.back_node.color=new cc.Color(48,110,90):1==e?this.back_node.color=new cc.Color(38,75,48):2==e?this.back_node.color=new cc.Color(40,75,113):3==e&&(this.back_node.color=new cc.Color(45,93,90))},dealNotifyDeskUserLogonORoutRoom:function(e){this.gameInforArry.push(e),this.playTipsAmition(this.Text_Infortips,e)},dealNotifyDeskUserIsTourist:function(e){var t=e.user;if(e.bTourist){for(var i=!1,o=0;o<this.TouristInforArry.length;o++){var n=this.TouristInforArry[o];if(n&&n.userID==t.userID){i=!0;break}}0==i&&this.TouristInforArry.push(t)}else for(var a=0;a<this.TouristInforArry.length;a++){var s=this.TouristInforArry[a];if(s&&s.userID==t.userID){this.TouristInforArry.splice(a,1);break}}},btnShareImage:function(){var e=this.tableLogic.getUserInfoListOfViewSeat();this.simpleAddLayer("prefab/GameCreaterImage",this.getGameRulesRs(),e)},btnGameLocation:function(){if(!this._playInfo){var e=this.tableLogic.getUserInfoListOfViewSeat();this.simpleAddLayer("prefab/GameLocation",this.getGameRulesRs(),e)}},btnGameInfor:function(){this._playInfo},btnGameRuler:function(){this.initGameRuler()},initGameRuler:function(){},requestSystemNotice:function(){var t=this,i=NoticeManager.getNormalNoticeList(),o=new(e("LobbyLogic"));tableIsEmpty(i)?o.requestSystemNotice(function(e){e?t.startSystemNotice():console.log("\u83b7\u53d6\u7cfb\u7edf\u516c\u544a\u5931\u8d25.........")}):this.startSystemNotice()},startSystemNotice:function(){var e=NoticeManager.getNormalNoticeList();for(var t in e){var o=i({},e[t]),n=this.makeNoticeContent(o);o.content=n.newContent,o.Headurl=n.Headurl,o.type&&1==o.type?this.noticeList.push(o):o.type&&100==o.type?(this.noticeList=[],this.noticeListSpec=[],this.noticeList.push(o),this.isShowStopSvr=!0):this.noticeListSpec.push(o)}this.showNotice()},showNotice:function(){var e=this;if(!this.isShowNotice){var t=this;this.isShowNotice=!0,function i(){var o={};if(t.noticeListSpec.length>0)o=t.noticeListSpec[0];else{if(0==t.noticeList.length)return void(t.isShowNotice=!1);t.nPlayIndex=Math.floor(Math.random()*t.noticeList.length),o=t.noticeList[t.nPlayIndex]}var n=t.LabelNoticeNode.getChildByName("Image_Bg_Notice").getChildByName("mask").getChildByName("txt");t.curPlayingNode=n,t.curPlayingNotice=o,n.getComponent(cc.RichText).string=o.content;var a=n.getChildByName("Avata_Node");a.active=!1,e.makeNoticePlayHead(a,o),n.getComponent(cc.RichText)._updateRichText();var s=n.width+n.parent.width+10,r=s/128,c=n.x;n.runAction(cc.sequence(cc.moveBy(r,-s,0),cc.callFunc(function(){n.x=c,0==t.curPlayingNotice.type&&t.noticeListSpec.splice(0,1),i()})))}()}},makeNoticeContent:function(e){if("object"!=typeof e)return"";var t=e.tag,i=e.content,o="",n="        ",a=i.split("#");if(a.length>=1&&t&&t>=1){var s=decodeURI(a[0]);t&&1==t?a[1]?(o=a[1],i="\u6b22\u8fce\u7528\u6237"+n+"<color=#00FF00> "+s+" </color>\u7684\u5230\u6765,\u8ba9\u6211\u4eec\u4e00\u8d77\u4e3a\u5bb6\u4e61\u4ee3\u8a00\uff01"):i="\u6b22\u8fce\u7528\u6237<color=#00FF00> "+s+" </color>\u7684\u5230\u6765,\u8ba9\u6211\u4eec\u4e00\u8d77\u4e3a\u5bb6\u4e61\u4ee3\u8a00\uff01":t&&2==t?a[3]?(o=a[3],i="\u606d\u559c\u7528\u6237"+n+"<color=#00FF00> "+s+" </color>\u5728<color=#00FF00> "+a[1]+" </color>\u4e2d\u8d62\u5f97<color=#00FF00> "+a[2]+" </color>"):i="\u606d\u559c\u7528\u6237<color=#00FF00> "+s+" </color>\u5728<color=#00FF00> "+a[1]+" </color>\u4e2d\u8d62\u5f97<color=#00FF00> "+a[2]+" </color>":t&&3==t?a[3]?(o=a[3],i="\u606d\u559c\u7528\u6237"+n+"<color=#00FF00> "+s+" </color>\u5728<color=#00FF00> "+a[1]+" </color>\u4e2d<color=#00FF00> "+a[2]+" </color>"):i="\u606d\u559c\u7528\u6237<color=#00FF00> "+s+" </color>\u5728<color=#00FF00> "+a[1]+" </color>\u4e2d<color=#00FF00> "+a[2]+" </color>":t&&4==t?a[2]?(o=a[2],i="\u7528\u6237"+n+"<color=#00FF00> "+s+" </color>\u62a5\u540d\u4e86<color=#00FF00> "+a[1]+" </color>"):i="\u7528\u6237<color=#00FF00> "+s+" </color>\u62a5\u540d\u4e86<color=#00FF00> "+a[1]+" </color>":t&&5==t&&(a[2]?(o=a[2],i="\u7528\u6237"+n+"<color=#00FF00> "+s+" </color>\u9886\u53d6\u4e86<color=#00FF00> "+a[1]+" </color>"):i="\u7528\u6237<color=#00FF00> "+s+" </color>\u9886\u53d6\u4e86<color=#00FF00> "+a[1]+" </color>")}var r={};return r.newContent=i,r.Headurl=o,r},makeNoticePlayHead:function(e,t){var i=e.getChildByName("Image_Avata").getComponent(cc.Sprite),o=t.tag,n=t.Headurl;if(o&&e&&""!=n){1==o||2==o||3==o?(e.active=!0,e.x=120):4!=o&&5!=o||(e.active=!0,e.x=75);var a=window.BundleName;cc.assetManager.loadBundle(a,function(e,t){t.load({url:n,type:"png"},function(e,t){if(e)console.error("load remote spriteframe res failed url:"+url,e.message||e);else{var o=new cc.SpriteFrame(t);i.node&&cc.isValid(i.node)&&(i.spriteFrame=o)}})})}},onNormalNotice:function(e){if(!this.isShowStopSvr){var t={};if("object"!=typeof e)return t.content=e,t.type=1,this.noticeList.push(t),void this.showNotice();t=i({},e);var o=this.makeNoticeContent(t);t.content=o.newContent,t.Headurl=o.Headurl,e.type&&1==e.type?this.noticeList.push(t):e.type&&100==e.type?(this.noticeList=[],this.noticeListSpec=[],this.noticeList.push(t),this.isShowStopSvr=!0):this.noticeListSpec.push(t),this.showNotice()}},showTableBtn:function(){this.btn_Table.active=!1},hideGameStatic:function(){this.img_createrCard.active=!1,this.loading_Start.active=!1,this.btn_img.active=!1,this.btn_Start.active=!1},btnGameTable:function(){var e=this;if(!this._playInfo){if(this.tableLogic.isGoldRoom())return void console.log("\u91d1\u5e01\u573a\u6ca1\u6709\u6362\u684c");this.tableLogic.requestCreaterDesk(function(){buyDesk;var t=RoomListManager.getRoomInfo().gameID,i=RoomListManager.getCurRuleInfo(),o=JSON.parse(i).count;e.lobbyRoomLogic.buyDesk(t,o,i)})}},setReplayUI:function(){for(var e=0;e<this.tableLogic.playCount;e++)this.showUserReady(this.tableLogic.logicToViewSeatNo(e),!1);this.Text_time.active=!1,this.btn_Table.active=!1,this.uiInfo.voiceBtn.active=!1,this.uiInfo.voiceBtn.active=!1,this.uiInfo.chatBtn.active=!1},onDestroy:function(){this.closeEvent()},dealNotifyRandomChangeSeat:function(e,t){if(!this._isInforChangeSeat){this._isInforChangeSeat=!0;var i=this.tableLogic.getUserInfoListOfViewSeat(),o=[],n=this.getGameRulesRs();if(2!=n){if(4==n)for(var a=0;a<this.tableLogic._logicInfo.seatCount;a++)o[this.tableLogic.logicToViewSeatNo(a)]=this.getUserByUserID(a,e);else if(3==n)for(var s=0;s<this.tableLogic._logicInfo.seatCount;s++)o[this.tableLogic.logicToViewSeatNo(s)]=this.getUserByUserID(s,e);this.playTipsAmition(this.ChangeNode,null,1);for(var r=0;r<this.tableLogic._logicInfo.seatCount;r++)for(var c=0;c<this.tableLogic._logicInfo.seatCount;c++){var u,h;if(u=3==n&&2==r?i[3]:i[r],h=3==n&&2==c?o[3]:o[c],u.userID==h.userID){this.PlayMovePoint(u.deskStation,h.deskStation,n);break}}this.scheduleOnce(function(){t&&t(e)},1)}}},getUserByUserID:function(e,t){for(var i=0;i<t.length;i++){var o=t[i];if(o.deskStation==e)return o}return null},PlayMovePoint:function(e,t,i){3==i&&(2==e&&(e=3),2==t&&(t=3));var o=this.setup_Node[e],n=this.playPOS[t];o.runAction(cc.moveTo(.5,n.x,n.y))},playVoiceH5:function(e){this.Voice_Node.active=!0,G_SHOW_GAME_VOICE=!0;var t=function(){this.Voice_Node.active=!1,G_SHOW_GAME_VOICE=!1}.bind(this),i=function(e){wx.playVoice({localId:e}),wx.onVoicePlayEnd({success:function(e){var i=e.localId;t&&t(i)}})}.bind(this);wx.downloadVoice({serverId:e,isShowProgressTips:0,success:function(e){var t=e.localId;i&&i(t)}})},InitWXvoiceconfig:function(){var t=(new(e("LobbyLogic"))).getUserID(),i=function(e){var t=t||function(e){var t={},i=t.lib={},o=function(){},n=i.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return new a.init(i,t)}}),s=t.enc={},r=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,n=e.min(4*t,n),t){for(var c=0;c<t;c+=s)this._doProcessBlock(o,c);c=o.splice(0,t),i.sigBytes-=n}return new a.init(c,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new l.HMAC.init(e,i).finalize(t)}}});var l=t.algo={};return t}(Math);(function(){var e=t,i=(a=e.lib).WordArray,o=a.Hasher,n=[],a=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,o=i[0],a=i[1],s=i[2],r=i[3],c=i[4],u=0;80>u;u++){if(16>u)n[u]=0|e[t+u];else{var h=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=h<<1|h>>>31}h=(o<<5|o>>>27)+c+n[u],h=20>u?h+(1518500249+(a&s|~a&r)):40>u?h+(1859775393+(a^s^r)):60>u?h+((a&s|a&r|s&r)-1894007588):h+((a^s^r)-899497514),c=r,r=s,s=a<<30|a>>>2,a=o,o=h}i[0]=i[0]+o|0,i[1]=i[1]+a|0,i[2]=i[2]+s|0,i[3]=i[3]+r|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(o+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)})();var i=WechatAppID,o=(new Date).getTime().toString(),n=(1e3*Math.random()).toString(),a="jsapi_ticket="+e.jsapi_ticket+"&noncestr="+n+"&timestamp="+o+"&url="+location.href.split("#")[0],s=t.SHA1(a,{string:!0}).toString();wx.config({debug:!1,appId:i,timestamp:o,nonceStr:n,signature:s,jsApiList:["startRecord","stopRecord","playVoice","uploadVoice","downloadVoice","onVoicePlayEnd","translateVoice","updateAppMessageShareData","updateTimelineShareData"]}),wx.ready(function(){wx.setEnableDebug({enableDebug:!0})})}.bind(this);ConfigDataManager.getWXjsapi_ticket(t,i)},scheduleNETWork:function(){}}),cc._RF.pop()},{EventEmiter:"EventEmiter",GameViewBase:"GameViewBase",HZMJ_CtrlBtns:"HZMJ_CtrlBtns",HZMJ_Data:"HZMJ_Data",HZMJ_User:"HZMJ_User",LobbyLogic:"LobbyLogic"}],HZMJ_HuItem:[function(e,t,i){"use strict";cc._RF.push(t,"0b1c9k93DRLd6talupvCUVC","HZMJ_HuItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ruleLabel=null,t.penGangPre=null,t.byMJCardType=0,t}return n(t,e),t.prototype.init=function(e){var t=this,i=e.find(function(e){return e.iHuFen>0});this.byMJCardType=e.byMJCardType,console.log("HZMJ_HuItem init info = ",i);var o=cc.find("cards/penGangs",this.node),n=cc.find("cards/showCards",this.node);if(o.children.forEach(function(e){return e.active=!1}),n.children.forEach(function(e){return e.active=!1}),i){var a=0;i.anGangCards.forEach(function(e){t.addPenGang(a,3,e,o),a+=1}),i.gangCards.forEach(function(e){t.addPenGang(a,2,e,o),a+=1}),i.pengCards.forEach(function(e){t.addPenGang(a,1,e,o),a+=1});var s=this.byMJCardType,r=e.handCardCount;i.handCards.forEach(function(e,t){var i=n.children[t];i.active=!0,i.getComponent("MJCommon_Card").init(e,!1,!1,"outCard",0,s),t>=r&&(i.x+=10)})}this.showHuLabel(i)},t.prototype.addPenGang=function(e,t,i,o){var n=o.children[e];n||(n=cc.instantiate(this.penGangPre),o.addChild(n)),n.active=!0;var a=n.getChildByName("cards").getComponentsInChildren("MJCommon_Card"),s=n.getChildByName("backCards"),r=n.getChildByName("backCards2"),c=n.getChildByName("topCard");a.push(c.getComponent("MJCommon_Card"));var u=this.byMJCardType;a.forEach(function(e){e.node.active=!1,e.init(i,!1,!1,"outCard",0,u)}),s.active=!1,r.active=!1,3==t&&(s.active=!0,1==this.byMJCardType?r.active=!0:r.active=!1),c.active=1!==t},t.prototype.showHuLabel=function(e){var t="",i="";if(e){e.iFanCount,window.HZMJ_HUTYPE_NAME_DEF[1];for(var o=0;o<4;o++)255!=e.byHuDouble[o]&&(i=i+" "+window.HZMJ_HUTYPE_NAME_DEF[e.byHuDouble[o]]);var n="\u6760\u5206\u6570:"+e.bycountGangFen+"\u5206",a="\u80e1\u724c\u5206\u6570:"+e.iHuFen+"\u5206",s="";2==e.iJiZhuangTimes&&(s=" \u6025\u8f6c"),t="  \u724c\u578b:"+i+"  "+n+"  "+a+s}this.ruleLabel.string=t},a([c(cc.Label)],t.prototype,"ruleLabel",void 0),a([c(cc.Prefab)],t.prototype,"penGangPre",void 0),a([r],t)}(cc.Component);i.default=u,cc._RF.pop()},{}],HZMJ_OverLayout:[function(e,t){"use strict";cc._RF.push(t,"9bdb6TSp7tHKKDCx8JpLnCo","HZMJ_OverLayout"),cc.Class({extends:e("BaseLayer"),properties:{bgMask:cc.Node,overView:cc.Node,startBtn:cc.Node,changeBtn:cc.Node,gameOverPre:cc.Prefab,gameOver:e("HZMJ_GameOver"),roomOver:e("HZMJ_RoomOver")},onLoad:function(){GameEvent.on("showGameOver",this.initGameOver,this),GameEvent.on("showRoomOver",this.initRoomOver,this),GameEvent.on("onReady",this.readyHide,this),GameEvent.on("onStart",this.hide,this),GameEvent.on("onDealCards",this.hide,this),GameEvent.on("hideOverLayout",this.hide,this),GameEvent.on("closeGameOver",this.btnClick,this),GameEvent.on("shareRecord",this.shareRecord,this)},getHuType:function(e,t){var i=RoomListManager.getRoomInfo(),o="";if(1==e)o="\u5e73\u80e11\u53f0 ";else if(2==e)o="\u8fb9\u50121\u53f0 ";else if(3==e)o="\u5bf9\u50121\u53f0 ";else if(4==e)o="\u5d4c\u50121\u53f0 ";else if(5==e)o="\u5355\u540a1\u53f0 ";else if(6==e)o="\u95e8\u6e051\u53f0 ";else if(7==e)o="\u81ea\u64781\u53f0 ";else if(8==e)o="\u5927\u540a"+this.getGameScore(2)+" ";else if(9==e)o="\u5bf9\u5bf9\u80e1"+this.getGameScore(2)+" ";else if(10==e)o="\u6760\u5f001\u53f0 ";else if(11==e)o="\u9001\u67601\u53f0 ";else if(12==e)o="\u62c9\u67601\u53f0\u3001 ";else if(13==e){if(20161004==i.gameID)return"\u5929\u80e113\u53f0";20211004==i.gameID&&(o="\u5929\u80e124\u53f0 ")}else 14==e?20161004==i.gameID?o="\u5730\u80e113\u53f0 ":20211004==i.gameID&&(o="\u5730\u80e112\u53f0 "):15==e?o="\u6e05\u4e00\u8272"+this.getGameScore(1)+" ":16==e?o="\u6df7\u4e00\u8272"+this.getGameScore(2)+" ":17==e?20161004==i.gameID?o="\u5b57\u4e00\u827220\u53f0 ":20211004==i.gameID&&(o="\u5b57\u4e00\u827240\u53f0 "):18==e?o="\u6d77\u5e95\u635e\u67081\u53f0 ":19==e?20161004==i.gameID?o="\u4e1c\u5357\u897f\u531720\u53f0 ":20211004==i.gameID&&(o="\u4e1c\u5357\u897f\u531750\u53f0 "):20==e?20161004==i.gameID?o="\u516b\u82b113\u53f0 ":20211004==i.gameID&&(o="\u516b\u82b125\u53f0 "):21==e?20161004==i.gameID?o="\u56db\u82b18\u53f0 ":20211004==i.gameID&&(o="\u56db\u82b112\u53f0 "):22==e?o="\u7ea2\u4e2d1\u53f0 ":23==e?o="\u53d1\u8d221\u53f0 ":24==e?o="\u767d\u677f1\u53f0 ":25==e?20161004==i.gameID?o="\u4e2d\u53d1\u767d10\u53f0 ":20211004==i.gameID&&(o="\u4e2d\u53d1\u767d25\u53f0 "):26==e?o="\u6b63\u98ce1\u53f0 ":27==e?o="\u5708\u98ce1\u53f0 ":28==e?o="\u6b63\u82b1"+2*this.byHuaCardCount[t]+"\u53f0 ":29==e?o="\u91ce\u82b1"+1*this.byWildHuaCardCount[t]+"\u53f0 ":30==e?o="\u65ad\u5e7a\u4e5d2\u53f0 ":31==e?o="\u677f\u9ad86\u53f0 ":32==e?o="\u592a\u677f\u9ad825\u53f0 ":33==e?o="\u592a\u592a\u677f\u9ad850\u53f0 ":34==e?o="\u53cc\u677f\u9ad815\u53f0 ":35==e?o="":36==e&&(o="\u677f\u9ad812\u53f0");return o},getGameScore:function(e){var t="",i=RoomListManager.getCurRuleInfo();if(""==i)return t;var o=JSON.parse(i).model;return 1==e?7==o?t="10\u53f0":8==o?t="12\u53f0":9==o?t="12\u53f0":10==o?t="14\u53f0":11==o?t="16\u53f0":12==o&&(t="18\u53f0"):2==e&&(7==o?t="8\u53f0":8==o?t="8\u53f0":9==o?t="10\u53f0":10==o?t="12\u53f0":11==o?t="14\u53f0":12==o&&(t="16\u53f0")),t},genCPGData:function(e,t){if(t)for(var i=0;i<=4;i++)if(t[i]){if(G_INVALID_BYTE_VALUE==t.byType)break;var o=!1;if(HZMJ_MACROS_DEF.ACTION_AN_GANG==t.byType&&(o=!0),o)for(var n=0;n<=3;n++)t[i].byData[n]=t[i].byData[3];for(var a=void 0,s=0,r=0;r<=3;r++)G_INVALID_BYTE_VALUE!=t[i].byData[r]&&0!=t[i].byData[r]&&(0==r&&(a=t[i].byData[r]),s++);if(3==s)if(HZMJ_MACROS_DEF.ACTION_CHI==t[i].byType)for(var c=0;c<3;c++){var u=t[i].byData[c];e.ChiCards.push(u)}else e.pengCards.push(a);else 4==s&&(o?e.anGangCards.push(a):e.gangCards.push(a))}},initGameOver:function(e,t){if(console.log("\u724c\u5c40\u65e5\u5fd7\uff1a\u5c0f\u7ed3\u7b97\u6570\u636e\u5c55\u793a",e,t),e){for(var i={isReplay:t||!1,mySeatNo:e.mySeatNo,resultType:0,isGoldRoom:e.goldRoom,isBarrierMatchRoom:e.isBarrierMatchRoom,byMJCardType:e.byMJCardType,playsData:[],rewardGiftCard:e.rewardGiftCard},o=0;o<=HZMJ_MACROS_DEF.PLAY_COUNT-1;o++){var n=e.bIsLiuJu?0:e.byDianPao[o]?1:2;o==e.mySeatNo&&(i.resultType=n);for(var a={userID:e.userID[o],name:e.userName[o],avatar:e.usersHeadUrl[o],score:e.llGameScore[o],isBanker:o==e.byNtStation,byHuMode:255,resultType:n,handCards:[],ChiCards:[],pengCards:[],gangCards:[],anGangCards:[],gangCount:0,buGangCount:0,anGangCount:0,byTaiCount:e.byTaiCount,handCardCount:e.byArHandPaiCount[o],byPs:e.byDianPao[o]?e.byPs:255,byHuDouble:e.byHuDouble[o],iFanCount:e.iFanCount[o],iHuFen:e.iHuFen[o],bycountGangFen:e.bycountGangFen[o],iJiZhuangTimes:1==n?e.iJiZhuangTimes:255,byMJCardType:e.byMJCardType},s=0;s<=e.byArHandPaiCount[o]-1;s++)a.handCards.push(e.byArHandPai[o][s]);this.genCPGData(a,e.UserGCPData[o]),i.playsData.push(a)}if(i.isBarrierMatchRoom)window.gameResultInfo=i;else{if(this.gameOver)this.gameOver.show(i);else{var r=cc.instantiate(this.gameOverPre);r.parent=this.overView,this.gameOver=r.getComponent("HZMJ_GameOver"),this.gameOver.show(i)}this.bgMask.active=!0,this.overView.active=!0}}},changeIndex:function(e){for(var t=[],i=0;i<e.length;i++)e[i]!=G_INVALID_BYTE_VALUE&&t.push(e[i]);return t},backToHall:function(){console.log("\u8fd4\u56de\u5927\u5385\u8fd4\u56de\u5927\u5385"),GameEvent.emit("onBackToLobby")},shareRecord:function(e,t){var i=RoomListManager.getCurRuleInfo();if(""!=i){var o=RoomListManager.getRoomInfo().gameID;this.simpleAddLayer("prefab/GameZhanjiCreaterImage",o,e,i,t)}},initRoomOver:function(){var e=this;GameEvent.emit("hideChatDialog"),cc.mj.Data.showRoomOverFlag=!0;var t=cc.mj.Data.roomResult;this.changeType(2);for(var i,o={index:-1,llGameScore:0},n=[],a=0;a<HZMJ_MACROS_DEF.PLAY_COUNT;a++)(i={avatar:"",uid:"",nickname:"",llGameScore:0,iHuCount:0,iMingGangCount:0,iAnGangCount:0}).uid=t.userID[a],i.nickname=t.userName[a],i.avatar=t.usersHeadUrl[a],i.llGameScore=t.llGameScore[a],i.iHuCount=t.iHuCount[a],i.iMingGangCount=t.iDianGang[a]+t.iBuGang[a],i.iAnGangCount=t.iAnGangCount[a],n.push(i);if(this.roomOver)this.roomOver.show(t,n,o);else{var s=window.BundleName;cc.assetManager.loadBundle(s,function(i,a){a.load("HZMJ/roomOver",function(i,a){if(i)console.log("\u8f7d\u5165\u9884\u5236HZMJ/roomOver\u8d44\u6e90\u5931\u8d25\uff0c \u539f\u56e0:"+i);else{var s=cc.instantiate(a);s.parent=e.overView,e.roomOver=s.getComponent("HZMJ_RoomOver"),e.roomOver.show(t,n,o)}})})}this.bgMask.active=!0,this.overView.active=!0},changeType:function(e){this.typeFlag=e,1!==e&&this.gameOver&&this.gameOver.hide(),2!==e&&this.roomOver&&this.roomOver.hide()},btnClick:function(){if(cc.mj.Data.roomResult)return this.initRoomOver();GameEvent.emit("reSetGame"),GameEvent.emit("sendStartGame"),this.gameOver&&this.gameOver.hide(),this.bgMask.active=!1,this.startBtn.active=!0},backToHome:function(){GameEvent.emit("onDismiss")},readyHide:function(e){e.getUserData().data.uid===cc.mj.Data.uid&&this.hide()},hide:function(){this.bgMask.active=!1,this.overView.active=!1},onDestroy:function(){GameEvent.off("showGameOver",this.initGameOver,this),GameEvent.off("showRoomOver",this.initRoomOver,this),GameEvent.off("onReady",this.readyHide,this),GameEvent.off("onStart",this.hide,this),GameEvent.off("onDealCards",this.hide,this),GameEvent.off("hideOverLayout",this.hide,this)}}),cc._RF.pop()},{BaseLayer:"BaseLayer",HZMJ_GameOver:"HZMJ_GameOver",HZMJ_RoomOver:"HZMJ_RoomOver"}],HZMJ_PlayerInfoItem:[function(e,t,i){"use strict";cc._RF.push(t,"8013cpyoSdADKZkXxZldo08","HZMJ_PlayerInfoItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(e){console.log("HZMJ_PlayerInfoItem init data = ",e);var t=window.UserInfoManager.getMyInfo().userID;this.node.children.forEach(function(i,o){cc.find("info/bank",i).active=e[o].isBanker,cc.find("info/bg/bg_win",i).active=e[o].userID==t,cc.find("info/image_Hu",i).active=e[o].iHuFen>0,cc.assetManager.loadRemote(e[o].avatar,function(e,t){if(e)return console.log("load err"),void console.log(e);cc.find("info/head/avatar",i).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)}),cc.find("info/name",i).getComponent(cc.Label).string=e[o].name})},a([r],t)}(cc.Component));i.default=c,cc._RF.pop()},{}],HZMJ_RoomOver:[function(e,t){"use strict";cc._RF.push(t,"8f258Zyh81Kgpk6Xn+5zpYj","HZMJ_RoomOver"),cc.Class({extends:cc.Component,properties:{roomOverItemPre:cc.Prefab,roomOverPlayers:cc.Node,timeText:cc.Label,wanfaText:cc.Label,sumCountText:cc.Label,roomPswText:cc.Label},show:function(e,t,i){var o=this;this.node.active=!0,this.roomOverPlayers.children.forEach(function(e){return e.active=!1}),this.userInfoList=[];var n=this;t.forEach(function(t,a){if(0!=t.uid){var s=o.roomOverPlayers.children[a];s||(s=cc.instantiate(o.roomOverItemPre),o.roomOverPlayers.addChild(s));var r={name:"",face:"",score:0};r.name=t.nickname,r.face=t.avatar,r.score=t.llGameScore,n.userInfoList.push(r),cc.winSize.width/1280<1&&(o.roomOverPlayers.getComponent(cc.Layout).spacingX=-70,o.roomOverPlayers.getComponent(cc.Layout).paddingLeft=-40,s.setScale(.78)),s.getComponent("HZMJ_roomOverItem").initData(t,e.roomMastId),s.active=!0,t.llGameScore>i.llGameScore&&(i={index:a,llGameScore:t.llGameScore})}}),-1!==i.index&&this.roomOverPlayers.getComponentsInChildren("HZMJ_roomOverItem")[i.index].setBigWin(),this.timeText.string=tools.getCurTime(),this.sumCountText.string="\u5c40\u6570:"+e.sumCount[1],this.roomPswText.string="\u623f\u95f4\u53f7:"+e.roomPsw,this.deskPasswd=e.roomPsw},hide:function(){this.node.active=!1},onShareBtnClick:function(){GameEvent.emit("shareRecord",deskPasswd,this.userInfoList)},onBackBtnClick:function(){console.log("\u8fd4\u56de\u5927\u5385\u8fd4\u56de\u5927\u5385"),GameEvent.emit("onBackToLobby")}}),cc._RF.pop()},{}],HZMJ_TingTipsCard:[function(e,t){"use strict";cc._RF.push(t,"412e1MgffxHTo5GcM7A44J0","HZMJ_TingTipsCard"),cc.Class({extends:cc.Component,properties:{cardComponent:e("MJCommon_Card"),beiLvLabel:cc.Label},setViewData:function(e,t){this.beiLvLabel.string="x "+t,this.cardComponent.init(e,!1,!1,"outCard",0)}}),cc._RF.pop()},{MJCommon_Card:"MJCommon_Card"}],HZMJ_User:[function(e,t){"use strict";cc._RF.push(t,"0bd3c9bcmVHpZqg8m/mJ7xH","HZMJ_User"),cc.Class({extends:cc.Component,properties:{sitIndex:0,handCards:cc.Node,showHandCards:cc.Node,pushCards:cc.Node,chuPai:cc.Node,showCurChuPai:cc.Node,cardType:cc.Node,pengGangs:cc.Node,pengGangsPre:cc.Prefab,flowerCards:cc.Node,flowerCardsPre:cc.Prefab,flowerNumber:cc.Node,flowerNumberPre:cc.Prefab,flowerCardSprite:[cc.SpriteFrame]},onLoad:function(){this.node.active=!1,GameEvent.on("chupai",this.chupaiEvent,this),GameEvent.on("initHandTouch",this.initHandTouch,this),cc.winSize.width/1280<1&&(0!=this.sitIndex?this.handCards.setScale(.9):this.handCards.setScale(.775),this.pushCards.setScale(.9),this.pengGangs.setScale(.9));var e=cc.view.getFrameSize();e.width/e.height>2&&0==this.sitIndex&&this.handCards.setScale(1.1)},onDestroy:function(){GameEvent.off("chupai",this.chupaiEvent,this),GameEvent.off("initHandTouch",this.initHandTouch,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},initShow:function(e,t,i){this.data||(this.data={}),this.data.uid=e,this.byMJCardType=t,this.reset(),this.node.active=!0,this.targetComponent=i},remove:function(){this.data=null,this.node.active=!1},showHandCard:function(e){var t=this;if(e&&this.data){var i=this.byMJCardType;if(this.data.handCards=[].concat(e.handCards)||[],0===this.sitIndex&&e||cc.mj.Data.isPlayback){var o=this.handCards.getComponentsInChildren("MJCommon_Card");cc.mj.Data.isPlayback&&0!==this.sitIndex&&(o=this.showHandCards.getComponentsInChildren("MJCommon_Card")),3===this.sitIndex&&(o=o.reverse()),e.handCards.forEach(function(e,n){o[n]&&(o[n].init(e,!1,!0,"handCard",t.sitIndex,i),o[n].index=n,o[n].sitIndex=0)}),e.drawCard&&0!==e.drawCard&&this.getCardInTurn(e.drawCard)}else this.handCards.active=!0,this.handCards.children.forEach(function(e){e.active=!0,e.getChildByName("bg").active=1==i}),3===this.sitIndex?this.handCards.children[0].active=!1:this.handCards.children[13].active=!1}},getCardInTurn:function(e,t,i,o,n){o&&(3===this.sitIndex?this.showHandCards.children[0].active=!1:0===this.sitIndex?this.handCards.children[13].active=!1:this.showHandCards.children[13].active=!1,this.data.handCards=[].concat(this.lastHandCards));var a=null;if(0===this.sitIndex)n?this.copyCard(n):this.addCard(e),(a=this.handCards.children[13].getComponent("MJCommon_Card")).init(e,!1,!0,"handCard",this.sitIndex,this.byMJCardType),a.index=13,a.sitIndex=this.sitIndex;else{var s=this.handCards;switch(cc.mj.Data.isPlayback&&(s=this.showHandCards,n?this.copyCard(n):this.addCard(e)),this.sitIndex){case 3:(a=s.children[0].getComponent("MJCommon_Card")).node.active=!0,cc.mj.Data.isPlayback&&a.init(e,!1,!1,"handCard",this.sitIndex,this.byMJCardType),a.node.y+=20;break;case 2:(a=s.children[13].getComponent("MJCommon_Card")).node.active=!0,cc.mj.Data.isPlayback&&a.init(e,!1,!1,"handCard",this.sitIndex,this.byMJCardType),a.node.x-=20;break;case 1:(a=s.children[13].getComponent("MJCommon_Card")).node.active=!0,cc.mj.Data.isPlayback&&a.init(e,!1,!1,"handCard",this.sitIndex,this.byMJCardType),a.node.y-=20}a.sitIndex=this.sitIndex}this.currMoPai=a},addCard:function(e){this.lastHandCards=[].concat(this.data.handCards),this.data.handCards.push(e)},copyCard:function(e){this.lastHandCards=[].concat(this.data.handCards),this.data.handCards=[];for(var t=0;t<14;t++)this.data.handCards.push(e[t])},chupaiEvent:function(e){var t=e;this.data&&t.uid===this.data.uid?(console.log("\u76f8\u540c"),(!this.curChupaiEventTime||(new Date).getTime()-this.curChupaiEventTime>500)&&(this.chupaied=!1,this.setChupai(t.card,t.isBack,t.handList),this.curChupaiEventTime=(new Date).getTime())):console.log("\u4e0d\u76f8\u540c")},setChupai:function(e,t,i){if(t)return this.chupaiAction(e,!0,t);this.chupaied||(this.chupaied=!0,cc.mj.Data.curPlayer=this,this.chupaiAction(e,null,null,i),0===this.sitIndex||cc.mj.Data.isPlayback||this.initHandCards())},serverChupai:function(e){var t=this.curChupai.getComponent("MJCommon_Card");t&&t.id!==e&&(this.chuPai&&(this.chuPai.active=!1),this.initHandCards(),t.init(e))},setHandCard:function(e){this.data.handCards=[];for(var t=0;t<14;t++)this.data.handCards.push(e[t]);this.initHandCards()},chupaiAction:function(e,t,i){if(i)return this.lastPutCard&&(this.pushCards.children[this.lastPutCard].active=!1),void(this.data.handCards=[].concat(this.lastHandCards));var o=null,n=this.pushCards.children,a=4,s=RoomListManager.getCurRuleInfo();""!==s&&(a=JSON.parse(s).rs);var r=[],c=!0;0==this.sitIndex?2==a?r=[[0,19],[20,39],[40,54]]:3==a?r=[[5,14],[25,34],[45,54]]:4==a&&(r=[[5,14],[25,34],[45,54]]):1==this.sitIndex?r=3==a?[[1,10],[13,22],[25,34]]:[[1,10],[13,22],[28,33]]:2==this.sitIndex?(c=!1,2==a?r=[[54,35],[34,15],[14,0]]:3==a?r=[[49,40],[29,20],[9,0]]:4==a&&(r=[[49,40],[29,20],[9,0]])):3==this.sitIndex&&(c=!1,r=[[33,24],[21,12],[9,1]]);for(var u=0;u<r.length&&!o;u++)if(c){for(var h=r[u][0];h<=r[u][1];h++)if(!n[h].active){o=n[h],this.lastPutCard=h;break}}else for(var l=r[u][0];l>=r[u][1];l--)if(!n[l].active){o=n[l],this.lastPutCard=l;break}if(o&&(this.curChupai=o,o.getComponent("MJCommon_Card").init(e,!0,!1,"outCard",this.sitIndex,this.byMJCardType)),!t){if(this.curChupai&&(this.curChupai.active=!1),this.chuPai.oldPos||(this.chuPai.oldPos=this.chuPai.getPosition()),this.chuPai.getComponentInChildren("MJCommon_Card").init(e,!1,!1,"handCard",0,this.byMJCardType),this.showCurChuPai.getComponentInChildren("MJCommon_Card").init(e,!1,!1,"handCard",0,this.byMJCardType),this.chuPai&&(this.chuPai.active=!0),cc.v2(0,0),0===this.sitIndex){var d=cc.mj.Data.selectedCard;d&&e===d.id?d=cc.mj.Data.selectedCard.node:(d=this.handCards.getComponentsInChildren("MJCommon_Card").find(function(t){return t.id>=e}))?d=d.node:this.currMoPai&&(d=this.currMoPai.node),this.lastHandCards=[].concat(this.data.handCards),d.convertToWorldSpaceAR(cc.v2(0,0)),cc.mj.Data.isWatchMode?this.removeHandCard(255):this.removeHandCard(e),this.moveHand()}else this.currMoPai&&this.currMoPai.node.convertToWorldSpaceAR(cc.v2(0,0)),cc.mj.Data.isPlayback&&(this.lastHandCards=[].concat(this.data.handCards),this.removeHandCard(e),this.moveHand());this.moveCardToPut()}},setHideCurChuPai:function(e){void 0===e&&(e=!0),this.showCurChuPai.active&&(this.showCurChuPai.active=!1)},moveCardToPut:function(){var e=this;if(this.chuPai&&this.curChupai){this.showCurChuPai.active=!1;var t=this.showCurChuPai,i=function(){t.active=!1}.bind(this),o=cc.callFunc(i),n=cc.delayTime(.1);t.runAction(cc.sequence(n,o));var a=this.curChupai.convertToWorldSpaceAR(cc.v2(0,0)),s=this.chuPai.parent.convertToNodeSpaceAR(a);this.chuPai.runAction(cc.sequence(cc.moveTo(.15,s),cc.scaleTo(.06,.5),cc.callFunc(function(){e.chuPai.active=!1,e.curChupai&&(e.curChupai.active=!0),GameEvent.emit("movePoint",{flag:!0,worldPos:e.curChupai.convertToWorldSpaceAR(cc.v2(0,0)),deviation:e.sitIndex})})))}},removeHandCard:function(e){if(cc.mj.Data.curPutCard&&cc.mj.Data.curPutCard.id===e)cc.mj.Data.curPutCard.hide();else{var t=this.handCards.getComponentsInChildren("MJCommon_Card");cc.mj.Data.isPlayback&&0!==this.sitIndex&&(t=this.showHandCards.getComponentsInChildren("MJCommon_Card"));for(var i=0;i<t.length;i++)if(t[i].id===e){t[i].hide();break}}for(var o=0;o<this.data.handCards.length;o++)if(this.data.handCards[o]===e)return this.data.handCards.splice(o,1)},moveHand:function(){var e=this;if(cc.mj.Data.isPlayback)return this.initHandCards();var t=this.handCards.getComponentsInChildren("MJCommon_Card"),i=t[t.length-1];if(1===this.sitIndex&&(i=t[0]),!i.node.active)return this.initHandCards(this.data.handCards);var o=cc.mj.Data.curPutCard;if(o&&!o.num&&(o.num=t.indexOf(o)),!o)return this.initHandCards();var n=t.indexOf(t.find(function(e){return e.id>=i.id})),a=t[n];n>o.num?(i.id<a.id&&(a=t[n-=1]),t.forEach(function(e,t){t>o.num&&t<=n&&e.node.runAction(cc.moveTo(.12,e.node.x-e.node.width,e.node.y))})):n<o.num&&t.forEach(function(e,t){t>=n&&t<o.num&&e.node.runAction(cc.moveTo(.12,e.node.x+e.node.width,e.node.y))}),13===n||o.num<=12&&12===n?i.node.runAction(cc.sequence(cc.moveTo(.12,a.oldPos.x,0),cc.callFunc(function(){t.forEach(function(e){e.oldPos&&e.node.setPosition(e.oldPos)}),e.initHandCards()}))):i.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.1,i.node.x,120),cc.rotateBy(.01,15)),cc.moveTo(.12,a.oldPos.x,120),cc.spawn(cc.moveTo(.1,a.oldPos.x,0),cc.rotateBy(.01,0)),cc.callFunc(function(){t.forEach(function(e){e.oldPos&&e.node.setPosition(e.oldPos)}),e.initHandCards()}))),this.initHandTouch()},initHandTouch:function(){0===this.sitIndex&&this.handCards.getComponentsInChildren("MJCommon_Card").forEach(function(e){e.isUnEnabled?console.log("\u9650\u5236\u51fa\u724c"):(e.isSelected=!1,e.node.y=0,e.node.color=cc.Color.WHITE)})},setChuPaiEnabled:function(e){if(0===this.sitIndex)for(var t=this.handCards.getComponentsInChildren("MJCommon_Card"),i=0;i<t.length;i++)t[i].setChuPaiEnabled(e)},showTingsanjiao:function(e,t){if(void 0===t&&(t=!0),0===this.sitIndex)for(var i=this.handCards.getComponentsInChildren("MJCommon_Card"),o=0;o<i.length;o++)t?i[o].id===e&&i[o].showTingsanjiao(!0):i[o].showTingsanjiao(!1)},checkhandCardList:function(e){if(0===this.sitIndex)for(var t=this.handCards.getComponentsInChildren("MJCommon_Card"),i=0;i<t.length;i++)t[i].id===e&&t[i].setPaiEnabled(!1)},CanlehandCardColor:function(){if(0===this.sitIndex)for(var e=this.handCards.getComponentsInChildren("MJCommon_Card"),t=0;t<e.length;t++)e[t].setPaiEnabled(!0)},setShowAllPengGang:function(e){void 0===e&&(e=!1),this.pengGangs.active=e},initHandCards:function(e,t){var i=this;e=e||this.data.handCards,this.handCards.active=!0;var o=this.data;e&&0===this.sitIndex&&(o.handCards=e.sort(function(e,t){return e-t})),cc.mj.Data.isPlayback&&0!==this.sitIndex&&(o.handCards=e.sort(function(e,t){return e-t}));var n,a=o.handCards,s=3*(o.pengCards.length+o.anGangCards.length+o.gangCards.length)+o.chiCards.length;if((n=cc.mj.Data.isPlayback&&0!==this.sitIndex?this.showHandCards.getComponentsInChildren("MJCommon_Card"):this.handCards.getComponentsInChildren("MJCommon_Card")).forEach(function(e){e.reset(),e.sitIndex=i.sitIndex}),0===this.sitIndex||cc.mj.Data.isPlayback){3===this.sitIndex&&(n=n.reverse());var r=this.byMJCardType;a.forEach(function(e,o){var a=n[o+s];a&&(a.init(e,!1,!0,"handCard",i.sitIndex,r),a.index=o,a.sitIndex=i.sitIndex,t&&a.hide())}),s>13&&(cc,log("ERROR"));var c=n[s].node.convertToWorldSpaceAR(cc.v2(0,0)),u=this.pengGangs.parent.convertToNodeSpaceAR(c);0==this.sitIndex?this.pengGangs.x=u.x-70:3===this.sitIndex?(cc.mj.Data.isPlayback,this.pengGangs.y=u.y-40):2===this.sitIndex?this.pengGangs.x=u.x+30:this.pengGangs.y=u.y+40}else{var h=n;if(3===this.sitIndex&&(h=n.reverse()),!(h&&h.length&&h[s]))return;var l=h[s].node.convertToWorldSpaceAR(cc.v2(0,0)),d=this.pengGangs.parent.convertToNodeSpaceAR(l);3===this.sitIndex?this.pengGangs.y=d.y-40:2===this.sitIndex?this.pengGangs.x=d.x+30:this.pengGangs.y=d.y+40;for(var f=s;f<h.length-1;f++){var _=h[f];_.index=f,_.oldPos&&_.node.setPosition(_.oldPos),_.node.active=!0,t&&_.hide()}}},ShowPlayHandCard:function(e,t,i,o){console.log("ShowPlayHandCard "+this.node.name+" "+this.sitIndex,e,t);var n,a=0;if(i){for(var s=[],r=0;r<14;r++)255!=e[r]&&s.push(e[r]);s.push(o),a=t+1,n=s}else a=t,n=e;var c,u=this.data,h=3*(u.pengCards.length+u.anGangCards.length+u.gangCards.length)+u.chiCards.length;0==this.sitIndex?c=this.handCards.getComponentsInChildren("MJCommon_Card"):(c=this.showHandCards.getComponentsInChildren("MJCommon_Card"),3===this.sitIndex&&(c=c.reverse()),this.handCards.active=!1,this.showHandCards&&(this.showHandCards.active=!0));var l=this.byMJCardType,d=this.sitIndex;n.forEach(function(e,t){if(!(t+1>a)){var o=t+h,n=c[o];n&&(n.init(e,!1,!0,"handCard",d,l),n.index=o,n.sitIndex=d,t+1==a&&1==i&&(1===d?n.node.y-=20:2===d?n.node.x-=20:3===d&&(n.node.y+=20)),console.log("\u663e\u793a\u660e\u724c",d,h,o,e))}})},playGameAudio:function(e){this.targetComponent.playGameVoice(this.sitIndex,e)},showCardType:function(e){var t="peng";switch(e){case 0:t="Chi";break;case 1:t="Peng";break;case 2:t="Gang";break;case 3:t="Hu";break;case 4:t="ZiMo";break;case 5:t="Ting"}this.playGameAudio(t),this.targetComponent.playSkelenAnimation(t,!1,null,this.cardType,t)},showGangHuType:function(e){var t="Peng";switch(e){case 0:t="Chi";break;case 1:t="Peng";break;case 2:t="Gang";break;case 3:t="Hu";break;case 4:t="ZiMo";break;case 5:t="Ting"}this.targetComponent.playSkelenAnimation(t,!1,null,this.cardType,t)},setChiPengGang:function(e,t,i,o,n,a,s){var r=this;void 0===o&&(o=!1);var c=this.pengGangs.children.find(function(t){return t.pai==e});if(c||(c=this.pengGangs.children.find(function(e){return!e.active})),o&&c)2===i?c.getChildByName("topCard").active=!1:c.active=!1;else{c||(c=cc.instantiate(this.pengGangsPre),this.pengGangs.addChild(c)),c.active=!0,c.pai=e;var u=c.getChildByName("cards").getComponentsInChildren("MJCommon_Card");u.push(c.getChildByName("topCard").getComponent("MJCommon_Card"));var h=this.byMJCardType;u.forEach(function(o,c){o.node.active=!1,c+1>t||(0==r.sitIndex?a?o.init(e[c],!0,!1,"daoCard",r.sitIndex,h):o.init(e,!0,!1,"daoCard",r.sitIndex,h):a?o.init(e[c],!1,!1,"daoCard",r.sitIndex,h):o.init(e,!1,!1,"daoCard",r.sitIndex,h),3==t&&1==i?1==c&&r.setCardColor(o,n):3==t&&5==i?e[c]==s&&r.setCardColor(o,n):4==t&&1==i&&3==c&&r.setCardColor(o,n))}),c.getChildByName("backCards").active=!1,c.getChildByName("backCards2").active=!1,3==i&&(c.getChildByName("backCards").active=!0,1==this.byMJCardType?c.getChildByName("backCards2").active=!0:c.getChildByName("backCards2").active=!1)}},setCardColor:function(e,t){0==this.sitIndex?e.node.color=cc.color(180,180,180):e.node.color=cc.color(130,130,130),0==this.sitIndex?1==t?e.setImageTag(!0,0):2==t?e.setImageTag(!0,90):3==t&&e.setImageTag(!0,180):1==this.sitIndex?0==t?e.setImageTag(!0,270):2==t?e.setImageTag(!0,90):3==t&&e.setImageTag(!0,180):2==this.sitIndex?0==t?e.setImageTag(!0,270):1==t?e.setImageTag(!0,0):3==t&&e.setImageTag(!0,180):3==this.sitIndex&&(0==t?e.setImageTag(!0,270):1==t?e.setImageTag(!0,0):2==t&&e.setImageTag(!0,90))},setflowerCard:function(e,t,i,o,n){void 0===n&&(n=!1);var a=i+o,s=this.flowerCards.children.find(function(e){return e.pai==t});s||(s=this.flowerCards.children.find(function(e){return!e.active})),this.flowerCards.children.forEach(function(e){e.destroy()});var r=this.flowerNumber.children.find(function(e){return e.pai==t});r||(r=this.flowerNumber.children.find(function(e){return!e.active})),this.flowerNumber.children.forEach(function(e){e.destroy()}),s||(s=cc.instantiate(this.flowerCardsPre),this.flowerCards.addChild(s)),r||(r=cc.instantiate(this.flowerNumberPre),this.flowerNumber.addChild(r)),s.active=!0,s.pai=t,r.active=!0,r.pai=t;var c=r.getChildByName("image_just");c.active=!1;var u=r.getChildByName("image_wild");u.active=!1,i>0&&(c.active=!0,c.getChildByName("num").getComponent(cc.Sprite).spriteFrame=this.flowerCardSprite[i]),o>0&&(u.active=!0,u.getChildByName("num").getComponent(cc.Sprite).spriteFrame=this.flowerCardSprite[o]),3===this.sitIndex&&s.getChildByName("cards").getComponentsInChildren("MJCommon_Card").forEach(function(e,t){e.node.zIndex=100-t});var h=this.byMJCardType;s.getChildByName("cards").getComponentsInChildren("MJCommon_Card").forEach(function(i,o){i.node.active=!1,o+1>a||(0==e?i.init(t[o],!0,!1,"outCard",e,h):i.init(t[o],!1,!1,"outCard",e,h))})},chi:function(e,t,i,o,n){if(i||cc.mj.Data.isPlayback&&!o){this.lastHandCards=[].concat(this.data.handCards);for(var a=0;a<3;a++)e[a]!=t&&this._removeArrayChi(this.data.handCards,e[a])}if(o)this.data.handCards=[].concat(this.lastHandCards),this.data.chiCards=[].concat(this.lastChiCards);else for(var s=0;s<e.length-1;s++)this.lastChiCards=[].concat(this.data.chiCards),this.data.chiCards.push(e[s]);if(this.setChiPengGang(e,3,5,o,n,!0,t),this.initHandCards(),!o){if(0===this.sitIndex)for(var r=this.handCards.children,c=r.length-1;c>=0;c--)if(r[c].active){r[c].x-=20,r[c].getComponent("MJCommon_Card").index=13;break}this.showCardType(0),GameEvent.emit("movePoint",{flag:!1}),cc.mj.Data.curPlayer&&cc.mj.Data.curPlayer.curChupai&&(cc.mj.Data.curPlayer.curChupai.active=!1,cc.mj.Data.curPlayer.curChupai=null)}},peng:function(e,t,i,o){if(t||cc.mj.Data.isPlayback&&!i){var n={};this.data.handCards.forEach(function(e){n[e]?n[e]++:n[e]=1}),this.lastHandCards=[].concat(this.data.handCards),this._removeArray(this.data.handCards,e),3===n[e+""]&&this.data.handCards.push(e)}if(i?(this.data.handCards=[].concat(this.lastHandCards),this.data.pengCards=[].concat(this.lastPengCards)):(this._removeArray(this.data.pengCards,e),this.lastPengCards=[].concat(this.data.pengCards),this.data.pengCards.push(e)),this.setChiPengGang(e,3,1,i,o,!1),this.initHandCards(),!i){if(0===this.sitIndex)for(var a=this.handCards.children,s=a.length-1;s>=0;s--)if(a[s].active){a[s].getComponent("MJCommon_Card").index=13;break}this.showCardType(1),GameEvent.emit("movePoint",{flag:!1}),cc.mj.Data.curPlayer&&cc.mj.Data.curPlayer.curChupai&&(cc.mj.Data.curPlayer.curChupai.active=!1,cc.mj.Data.curPlayer.curChupai=null)}},gang:function(e){var t=e.type,i=e.card||e.pengCard,o=e.isBack,n=e.viewSeatNoBeGang;o||(3===t?(this._removeArray(this.data.anGangCards,i),this.lastAnGangCards=[].concat(this.data.anGangCards),this.data.anGangCards.push(i)):(this._removeArray(this.data.gangCards,i),this.lastGangCards=[].concat(this.data.gangCards),this.data.gangCards.push(i))),this.setChiPengGang(i,4,t,o,n,!1),o?(this.data.pengCards=[].concat(this.lastPengCards),this.data.anGangCards=[].concat(this.lastAnGangCards),this.data.gangCards=[].concat(this.lastGangCards),this.data.handCards=[].concat(this.lastHandCards)):(this.lastPengCards=[].concat(this.data.pengCards),this._removeArray(this.data.pengCards,i),this.lastHandCards=[].concat(this.data.handCards),this._removeArray(this.data.handCards,i)),this.initHandCards(),o||(this.showCardType(2),GameEvent.emit("movePoint",{flag:!1}),cc.mj.Data.curPlayer&&cc.mj.Data.curPlayer.curChupai&&2!==t&&3!==t&&(cc.mj.Data.curPlayer.curChupai.active=!1,cc.mj.Data.curPlayer.curChupai=null))},_removeArray:function(e,t){if(e&&e.length)for(;;){for(var i=!1,o=0;o<e.length;o++)if(e[o]===t){i=!0,e.splice(o,1);break}if(!i)break}},_removeArrayChi:function(e,t){if(e&&e.length)for(var i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},flowerCardsdestroy:function(){this.flowerCards&&this.flowerCards.children.forEach(function(e){e.destroy()}),this.flowerNumber&&this.flowerNumber.children.forEach(function(e){e.destroy()})},reset:function(){this.handCards.children.forEach(function(e){return e.active=!1}),this.showHandCards&&this.showHandCards.children.forEach(function(e){return e.active=!1}),this.pushCards.children.forEach(function(e){return e.active=!1}),this.pengGangs.children.forEach(function(e){return e.active=!1}),this.data&&(this.data.handCards=[],this.data.pengCards=[],this.data.chiCards=[],this.data.gangCards=[],this.data.anGangCards=[]),this.lastHandCards=null,this.lastPutCard=null,this.lastPengCards=null,this.lastChiCards=null,this.lastGangCards=null,this.lastAnGangCards=null,this.chuPai&&(this.chuPai.active=!1),this.showCurChuPai&&(this.showCurChuPai.active=!1),this.curChupai=null}}),cc._RF.pop()},{}],HZMJ_gameOverItem:[function(e,t){"use strict";cc._RF.push(t,"a37159RSc5KOpr3D4nK10sZ","HZMJ_gameOverItem"),cc.Class({extends:cc.Component,properties:{ruleLabel:cc.Label,cardsNode:cc.Node,penGangPre:cc.Prefab,countLabel:cc.Label},initData:function(e){var t=this,i=this.cardsNode.getChildByName("penGangs"),o=this.cardsNode.getChildByName("showCards");this.byMJCardType=e.byMJCardType,i.children.forEach(function(e){return e.active=!1}),o.children.forEach(function(e){return e.active=!1});var n=0;e.anGangCards.forEach(function(e){t.addPenGang(n,3,e,i),n+=1}),e.gangCards.forEach(function(e){t.addPenGang(n,2,e,i),n+=1}),e.pengCards.forEach(function(e){t.addPenGang(n,1,e,i),n+=1}),e.ChiCards.forEach(function(o,a){if(3==e.ChiCards.length){if(0==a){for(var s=[],r=0;r<3;r++)s.push(e.ChiCards[r]);t.addChi(n,1,s,i),n+=1}}else if(6==e.ChiCards.length){if(0==a){for(var c=[],u=0;u<3;u++)c.push(e.ChiCards[u]);t.addChi(n,1,c,i),n+=1}if(4==a){for(var h=[],l=3;l<6;l++)h.push(e.ChiCards[l]);t.addChi(n,1,h,i),n+=1}}else if(9==e.ChiCards.length){if(0==a){for(var d=[],f=0;f<3;f++)d.push(e.ChiCards[f]);t.addChi(n,1,d,i),n+=1}if(3==a){for(var _=[],g=3;g<6;g++)_.push(e.ChiCards[g]);t.addChi(n,1,_,i),n+=1}if(6==a){for(var p=[],m=6;m<9;m++)p.push(e.ChiCards[m]);t.addChi(n,1,p,i),n+=1}}else if(12==e.ChiCards.length){if(0==a){for(var y=[],C=0;C<3;C++)y.push(e.ChiCards[C]);t.addChi(n,1,y,i),n+=1}if(3==a){for(var I=[],v=3;v<6;v++)I.push(e.ChiCards[v]);t.addChi(n,1,I,i),n+=1}if(6==a){for(var E=[],S=6;S<9;S++)E.push(e.ChiCards[S]);t.addChi(n,1,E,i),n+=1}if(9==a){for(var N=[],R=9;R<12;R++)N.push(e.ChiCards[R]);t.addChi(n,1,N,i),n+=1}}else if(15==e.ChiCards.length){if(0==a){for(var b=[],T=0;T<3;T++)b.push(e.ChiCards[T]);t.addChi(n,1,b,i),n+=1}if(3==a){for(var L=[],M=3;M<6;M++)L.push(e.ChiCards[M]);t.addChi(n,1,L,i),n+=1}if(6==a){for(var G=[],A=6;A<9;A++)G.push(e.ChiCards[A]);t.addChi(n,1,G,i),n+=1}if(9==a){for(var O=[],D=9;D<12;D++)O.push(e.ChiCards[D]);t.addChi(n,1,O,i),n+=1}if(12==a){for(var w=[],B=12;B<15;B++)w.push(e.ChiCards[B]);t.addChi(n,1,w,i),n+=1}}});var a=this.byMJCardType,s=e.handCardCount;e.handCards.forEach(function(e,t){var i=o.children[t];i.active=!0,i.getComponent("MJCommon_Card").init(e,!1,!1,"outCard",0,a),t>=s&&(i.x+=10)}),e.isBanker;var r="",c="";if(1==e.resultType){c="\u500d\u6570:"+e.iFanCount+"\u500d";for(var u="",h=(HZMJ_HUTYPE_NAME_DEF[1],0);h<4;h++)255!=e.byHuDouble[h]&&(u=u+" "+HZMJ_HUTYPE_NAME_DEF[e.byHuDouble[h]]);var l="\u6760\u5206\u6570:"+e.bycountGangFen+"\u5206",d="\u80e1\u724c\u5206\u6570:"+e.iHuFen+"\u5206",f="";2==e.iJiZhuangTimes&&(f=" \u6025\u8f6c"),r="  \u724c\u578b:"+u+"  "+l+"  "+d+f}this.countLabel.string=c,this.ruleLabel.string=r},addPenGang:function(e,t,i,o){var n=o.children[e];n||(n=cc.instantiate(this.penGangPre),o.addChild(n)),n.active=!0;var a=n.getChildByName("cards").getComponentsInChildren("MJCommon_Card"),s=n.getChildByName("backCards"),r=n.getChildByName("backCards2"),c=n.getChildByName("topCard");a.push(c.getComponent("MJCommon_Card"));var u=this.byMJCardType;a.forEach(function(e){e.node.active=!1,e.init(i,!1,!1,"outCard",0,u)}),s.active=!1,r.active=!1,3==t&&(s.active=!0,1==this.byMJCardType?r.active=!0:r.active=!1),c.active=1!==t},addChi:function(e,t,i,o){var n=o.children[e];n||(n=cc.instantiate(this.penGangPre),o.addChild(n)),n.active=!0;var a=n.getChildByName("cards").getComponentsInChildren("MJCommon_Card"),s=n.getChildByName("backCards"),r=n.getChildByName("backCards2"),c=n.getChildByName("topCard");a.push(c.getComponent("MJCommon_Card"));var u=this.byMJCardType;a.forEach(function(e,t){e.node.active=!1,e.init(i[t],!1,!1,"outCard",0,u)}),s.active=3===t,r.active=!1,c.active=1!==t}}),cc._RF.pop()},{}],HZMJ_roomOverItem:[function(e,t){"use strict";cc._RF.push(t,"766fep8R51I0ISA+b5e64zS","HZMJ_roomOverItem"),cc.Class({extends:cc.Component,properties:{infoNodes:[cc.Node],resultNodes:cc.Node},initData:function(e,t){this.infoNodes.forEach(function(e){return e.active=!1});var i=this.infoNodes[0],o=i.getChildByName("header").children[0].children[0].getComponent(cc.Sprite),n=i.getChildByName("nickName").getComponent(cc.Label),a=i.getChildByName("id").getComponent(cc.Label),s=i.getChildByName("hp").getComponent(cc.Label),r=i.getChildByName("mg").getComponent(cc.Label),c=i.getChildByName("ag").getComponent(cc.Label),u=i.getChildByName("scoreLabel").getComponent(cc.Label),h=i.getChildByName("roomMaster");e.avatar&&AvatarManager.requestHeadRes(e.avatar,e.uid,function(e){o&&(o.spriteFrame=e)}),n.string=e.nickname,a.string="ID:"+e.uid,s.string=""+e.iHuCount,r.string=""+e.iMingGangCount,c.string=""+e.iAnGangCount;var l=RoomListManager.getRoomInfo();l.type==E_ROOM_TYPE.PRIVATE||l.type==E_ROOM_TYPE.TABLE||l.type==E_ROOM_TYPE.GOLD?u.string=F_GetMoneyDisplay(e.llGameScore,2):u.string=e.llGameScore,e.totalScore>0&&(u.string="+"+u.string),i.active=!0,this.resultNodes.children.forEach(function(e){return e.active=!1}),e.uid==t?h.active=!0:h.active=!1},setBigWin:function(){this.resultNodes.getChildByName("icon_winner").active=!0}}),cc._RF.pop()},{}],LayerMask:[function(e,t){"use strict";cc._RF.push(t,"eafe96mOvNIdK0qPpH+fWRD","LayerMask"),cc.Class({extends:cc.Component,properties:{maskOpacity:{type:cc.Integer,default:150},customColor:{default:new cc.Color},clickToClose:!0,clickToHide:!1},clickCallback:null,start:function(){this.maskWidth=null,this.maskHeight=null},onLoad:function(){var e=this,t=new cc.Node;t.zIndex=-1;var i=t.addComponent(cc.Sprite);i.sizeMode=cc.Sprite.SizeMode.CUSTOM,t.width=this.maskWidth||2e3,t.height=this.maskHeight||2e3;var o=window.BundleName;cc.assetManager.loadBundle(o,function(o,n){e.customColor?(n.load("lobby/image_bg_white",cc.SpriteFrame,function(e,t){i&&(i.spriteFrame=t)}),t.color=e.customColor):(n.load("lobby/image_bg_black",cc.SpriteFrame,function(e,t){i&&(i.spriteFrame=t)}),e.customColor&&(t.color=e.customColor)),t.opacity=e.maskOpacity,e.LayerMaskButton=new cc.Node,e.LayerMaskButton.width=t.width,e.LayerMaskButton.height=t.height,e.LayerMaskButton.addComponent(cc.Button),t.addChild(e.LayerMaskButton),e.clickToClose&&e.LayerMaskButton.on("click",function(){e.clickCallback&&e.clickCallback(),e.node.destroy()}),e.clickToHide&&e.LayerMaskButton.on("click",function(){e.clickCallback&&e.clickCallback(),e.node.active=!1}),e.mask=t,e.node.addChild(t)})},setLayerMaskButton:function(e){e&&this.LayerMaskButton&&this.LayerMaskButton.destroy()},setLayerClickCallback:function(e){this.clickCallback=e},update:function(){},onCloseBtn:function(){this.node.destroy()}}),cc._RF.pop()},{}],LoadingLayer:[function(e,t){"use strict";cc._RF.push(t,"82658423bBAw5v7kU/2AJ9g","LoadingLayer"),cc.Class({extends:e("BaseLayer"),properties:{message:cc.Label,outTime:{default:10,type:cc.Integer},offset:{default:30,type:cc.Integer},otherThing:{default:null,type:cc.Node},loadingTextBgNode:cc.Node},start:function(){},init:function(e,t,i){var o=this;this.message.string=e,this.message._forceUpdateRenderData(!0),this.loadingTextBgNode.width=this.message.node.width+2*this.offset+(this.otherThing?this.otherThing.width:0),t=t||this.outTime,this.scheduleOnce(function(){o.node.parent=null},t),i&&(this.getComponent("LayerMask"),this.getComponent("LayerMask").enabled=!0)},onDestroy:function(){this.node.stopAllActions(),this.unscheduleAllCallbacks()},onDisable:function(){this.node.stopAllActions(),this.unscheduleAllCallbacks()}}),window.loadingLayer=null,window.loadingLayerPrefab=null,window.createLoading=function(e,t,i){var o=cc.director.getScene();if(t=t||G_COMMON_LOADING_TIME,removeLoading(e),loadingLayerPrefab){var n=cc.instantiate(loadingLayerPrefab);n.msg=e,n.zIndex=G_LOADING_ZORDER_TAG,n.name="LoadingLayer",o&&(o.addChild(n),window.loadingLayer=n,n.getComponent("LoadingLayer").init(e,t,i))}else{var a=window.prefabMap.get("prefab/LoadingLayer"),s=cc.instantiate(a);s.msg=e,s.zIndex=G_LOADING_ZORDER_TAG,s.name="LoadingLayer",o&&(o.addChild(s),window.loadingLayer=s,loadingLayerPrefab=a,s.getComponent("LoadingLayer").init(e,t,i))}},window.removeLoading=function(){cc.director.getScene(),loadingLayer&&(loadingLayer.parent=null,loadingLayer=null)},cc._RF.pop()},{BaseLayer:"BaseLayer"}],LoadingPrefab:[function(e,t){"use strict";cc._RF.push(t,"6cf666CQHVMeJdZs3LKIFx3","LoadingPrefab"),cc.Class({extends:e("BaseLayer"),properties:{progressBar:cc.ProgressBar,BG:cc.Sprite},onLoad:function(){},start:function(){},init:function(){this.progressBar.progress=0,this.node.width=this.maskWidth||cc.view.getVisibleSize().width,this.node.height=this.maskHeight||cc.view.getVisibleSize().height}}),window.loadsceneRes=function(e,t){removeLoading(),t()},cc._RF.pop()},{BaseLayer:"BaseLayer"}],LobbyBaseLayer:[function(e,t){"use strict";cc._RF.push(t,"a9f87KWruJEOJeRkUmAHeLM","LobbyBaseLayer"),t.exports=cc.Class({extends:e("BaseLayer"),ctor:function(){},onLoad:function(){this._super()},onDiamondChanged:function(){},onMoneyChanged:function(){},onGiftCardChanged:function(){},onTransfernumChanged:function(){},onLogonGamePeoplecountChange:function(){},onLogonNewMsgComing1:function(){},onLogonNewMsgComing2:function(){},onScoreChanged:function(){},onPointChanged:function(){},onBgChanged:function(){},onMapChanged:function(){},onOpenRoomChanged:function(){},onLobbyLayoutTypeChanged:function(){},onBankMoneyChanged:function(){},onFriendNotifyAdd:function(){},onFriendNotifyDel:function(){},onFriendAdd:function(){},onFriendDel:function(){},onBuyDeskInfoDel:function(){},onBuyDeskInfoUpdate:function(){},onFriendOnlineStatusChange:function(){},onDeskUserSit:function(){},onDeskUserUp:function(){},onFriendRedSpotChange:function(){},onMailRedSpot:function(){},onFriendsGroupAdd:function(){},onFriendsGroupDel:function(){},onFriendsGroupNotifyAdd:function(){},onFriendsGroupNotifyDel:function(){},onFriendsGroupMemberAdd:function(){},onFriendsGroupMemberDel:function(){},onFriendsGroupRoomMsgAdd:function(){},onFriendsGroupRoomMsgDel:function(){},onFriendsGroupRoomMsgUpdate:function(){},onFriendsGroupAccoMsgAdd:function(){},onFriendsGroupAccoMsgDel:function(){},onFriendsGroupNameChange:function(){},onFriendsGroupRedSpotChange:function(){},onFriendsGroupNoticeChange:function(){},onFriendsGroupWechatChange:function(){},onFriendsGroupScoreChange:function(){},onFriendsGroupDeskAdd:function(){},onFriendsGroupDeskChange:function(){},onFriendsGroupDeskDel:function(){},onFriendsGroupVIPDeskAdd:function(){},onFriendsGroupVIPDeskChange:function(){},onFriendsGroupVIPDeskDel:function(){},onFriendsGroupStatusChange:function(){},onFriendsGroupPowerChange:function(){},onFriendsGroupMemberFireCoinChange:function(){},onCurMatchStart:function(){},onCurMatchChange:function(){},onCurMatchFail:function(){},onCurMatchComeSoon:function(){},onCurMatchResult:function(){},showMatchGameDeskInfo:function(){},onDestroy:function(){this._super()},onEnable:function(){DataNotify.addListener(this)},onDisable:function(){DataNotify.removeListener(this)}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],LobbyLogic:[function(e,t){"use strict";cc._RF.push(t,"2fefcSvgyxN8qszBQRZ+jh1","LobbyLogic");var i,o=(i=e("../../Conn/ReqHttp"))&&i.__esModule?i:{default:i};t.exports=cc.Class({extends:e("LogicBasis"),ctor:function(){this.LoginRoomLogic=new(e("LoginRoomLogic")),this.LobbyRoomLogic=new(e("LobbyRoomLogic")),this.SystemNoticeLogic=new(e("SystemNoticeLogic"))},enterGame:function(e,t,i){console.log("LobbyLogic.enterGame[roomID = {0}]"+e);var o=RoomListManager.getRoomByRoomID(e);console.log(JSON.stringify(o)+"roomInfo>>>>>>>>>>>>>>>>>>>>>>>"),this.LoginRoomLogic.enterRoom(o,this.getUserID(),this.getUserToken(),t,i)},requestFriendsGroupList:function(){},getMyFeedback:function(e){this.FeedbackLogic.getMyFeedback(e)},requestSystemNotice:function(e,t,i){this.SystemNoticeLogic.requestSystemNotice(e,t,i)},requestPayPrepayID:function(e,t,i,o){this.SystemNoticeLogic.requestPayPrepayID(e,t,i,o)},requestShopMommodity:function(e){this.SystemNoticeLogic.requestShopMommodity(e)},requestPaijuList:function(e){this.SystemNoticeLogic.requestPaijuList(e)},requestZhanjiList:function(e,t){this.SystemNoticeLogic.requestZhanjiList(e,t)},requestZhanjiDetailsList:function(e,t){this.SystemNoticeLogic.requestZhanjiDetailsList(e,t)},requesSmalltZhanjiDetailsList:function(e,t){this.SystemNoticeLogic.requesSmalltZhanjiDetailsList(e,t)},requestGongGaoMommodity:function(e){this.SystemNoticeLogic.requestGongGaoMommodity(e)},requestShartReward:function(e){this.SystemNoticeLogic.requestShartReward(e)},requestQualifyingCount:function(e){this.LobbyRoomLogic.requestQualifyingCount(e)},requestLoaderCheckLogon:function(e){this.LobbyRoomLogic.requestLoaderCheckLogon(e)},requestExchangeRead:function(e,t){this.LobbyRoomLogic.requestExchangeRead(e,t)},requestCheckPointConfig:function(e){this.LobbyRoomLogic.requestCheckPointConfig(e)},requestRoomRecord:function(e){this.RoomRecordLogic.requestRoomRecord(e)},joinRoom:function(e){this.LobbyRoomLogic.joinRoom(e)},requestGameList:function(e){GameSocket.requestGameList(e)},requestWinRankList:function(e,t){RankManager.requestWinRankList(e,t)},requestRichRankList:function(e,t,i){RankManager.requestRichRankList(e,t,i)},requestMailList:function(e){MailManager.requestIsMailDate(e)},requestAllRoomList:function(e){RoomListManager.requestAllRoomList(e)},requestRoomListByGameID:function(e,t){RoomListManager.requestRoomListByGameID(e,t)},requestUserInfoByUserID:function(e,t){UserInfoManager.requestUserInfoByUserID(e,t)},getMyInfo:function(){return UserInfoManager.getMyInfo()},sendHornMessage:function(e){LobbySocket.requestHorn(e)},requestIsUseSign:function(e,t){SignInfoManager.requestIsUseSign(e,t)},requestIsUseTurntable:function(e,t){SignInfoManager.requestIsUseTurntable(e,t)},requestAgentConfig:function(e){LobbySocket.requestAgentConfig(e)},requestMyResource:function(){setTimeout(function(){LobbySocket.requestMyResource()},200);var e=this.createNetMsg(0,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_USERINFO_FLUSH);this.sendData(e,function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t={};t.jewels=e.popINT(),t.money=e.popLONGLONG(),console.log(t,"_Resolve_LogonUserInfoFlush")}})},requestLogonUserinfoFlush:function(e,t){LobbySocket.requestLogonUserinfoFlush(e,t)},requestDissmissDesk:function(e){LobbySocket.requestDissmissDesk(e)},requestUserBuyRoomList:function(e){var t=LobbySocket.getMyInfo().userID;o.default.requestUserBuyRoomList(t,function(t){0==t.status?(console.log("\u83b7\u53d6\u623f\u95f4\u5217\u8868"),console.log(t.data),RoomRecordManager.setRoomRecordList(t.data),e&&e(RoomRecordManager.getRoomRecordList())):createTips(t.msg)})},requestDissmissRoom:function(e){var t=LobbySocket.getMyInfo().userID;o.default.requestDissmissRoom(t,e,function(e){0==e.status||createTips(e.msg)})}}),cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp",LobbyRoomLogic:"LobbyRoomLogic",LogicBasis:"LogicBasis",LoginRoomLogic:"LoginRoomLogic",SystemNoticeLogic:"SystemNoticeLogic"}],LobbyMoneyFieldItem:[function(e,t){"use strict";cc._RF.push(t,"87e6c0VxwFNj6qvOYWvUnZn","LobbyMoneyFieldItem"),cc.Class({extends:cc.Component,properties:{game1:cc.Sprite,game2:cc.Sprite,anim1:sp.Skeleton,anim2:sp.Skeleton,loading1:cc.Sprite,loading2:cc.Sprite,callBack:null},onLoad:function(){this.spriteFrameSession=null,this._onLoadCompleteHandler=null,this.loadComplete=!1,this.playAnim=!0,this.lastPlay=0,this.random=3+3*Math.random(),this.loading1.node.runAction(cc.repeatForever(cc.rotateBy(1,360))),this.loading2.node.runAction(cc.repeatForever(cc.rotateBy(1,360)))},onEnable:function(){this.game1.node.on(cc.Node.EventType.TOUCH_END,this._onClick1,this),this.game2.node.on(cc.Node.EventType.TOUCH_END,this._onClick2,this)},onDisable:function(){this.game1.node.off(cc.Node.EventType.TOUCH_END,this._onClick1,this),this.game2.node.off(cc.Node.EventType.TOUCH_END,this._onClick2,this)},onDestroy:function(){this.callBack=null,this.spriteFrameSession&&(this.spriteFrameSession.dispose(),this.spriteFrameSession=null),this._onLoadCompleteHandler=null},start:function(){},_playAnimation:function(){this.lastPlay=0,this.playAnim?this.anim1.setAnimation(0,"animation"):this.anim2.setAnimation(0,"animation"),this.playAnim=!this.playAnim},_onClick1:function(){this.callBack(this.id1,"playtype")},_onClick2:function(){this.callBack(this.id2,"playtype")},updateData:function(e,t){e||(e=0),t||(t=0),this.id1=e,this.id2=t,this._onLoadCompleteHandler=this.onLoadComplete.bind(this)},onLoadComplete:function(){this.loading1.node.active=!1,this.loading1.node.pauseAllActions(),this.loading2.node.active=!1,this.loading2.node.pauseAllActions(),this.loadComplete=!0,this._onLoadCompleteHandler=null,this.game1.getComponent(cc.Sprite).spriteFrame=this.spriteFrameSession.getTaskContent(0),this.game2.getComponent(cc.Sprite).spriteFrame=this.spriteFrameSession.getTaskContent(1),this._playAnimation()},update:function(e){this.loadComplete&&(this.lastPlay+=e,this.lastPlay>this.random&&(this.random=3+3*Math.random(),this._playAnimation()))}}),cc._RF.pop()},{}],LobbyMoneyFieldList:[function(e,t){"use strict";cc._RF.push(t,"7b316cxGKFLsp7NThbnWmgC","LobbyMoneyFieldList"),cc.Class({extends:cc.Component,properties:{lobbyAnimaton:{default:null,type:cc.Animation},listView:{type:cc.ScrollView,default:null},rankItem:cc.Prefab,callBack:null},onLoad:function(){var e,t,i=Global.Res.GameData;for(var o in i)(t=(e=cc.instantiate(this.rankItem)).getComponent("LobbyMoneyFieldItem")).callBack=this.callBack,this.listView.content.addChild(e),t.updateData(o,0)},onDestroy:function(){this.callBack=null},start:function(){}}),cc._RF.pop()},{}],LobbyPlayTypeItem:[function(e,t){"use strict";cc._RF.push(t,"32023xpzplByKnfmjqc0iIO","LobbyPlayTypeItem"),cc.Class({extends:cc.Component,properties:{texture:[cc.SpriteFrame],bg:cc.Sprite,nameLable:cc.Label,baseZhu:cc.Label,baseZhuStatic:cc.Label,baseMoney:cc.Label,baseMoneyStatic:cc.Node},start:function(){},updateData:function(e,t){this.id=e,this.index=t+1,this.bg.node.getComponent(cc.Sprite).spriteFrame=this.texture[t];var i=Global.Res.RoomData[10*e+t+1];i?(this.baseZhu.node.active=!0,this.baseZhuStatic.node.active=!0,this.baseMoney.node.active=!0,this.baseMoneyStatic.active=!0,this.nameLable.string=i.describe,this.baseZhu.string=i.basepoint,this.baseMoney.string=i.basemoney):(this.nameLable.string=Global.Strings.COMMON[1],this.baseZhu.node.active=!1,this.baseZhuStatic.node.active=!1,this.baseMoney.node.active=!1,this.baseMoneyStatic.active=!1)},onClick:function(){this.id}}),cc._RF.pop()},{}],LobbyPlayTypeList:[function(e,t){"use strict";cc._RF.push(t,"350d5r0SZBAM4IWbb9BYRp9","LobbyPlayTypeList"),cc.Class({extends:cc.Component,properties:{listView:{type:cc.ScrollView,default:null},rankItem:cc.Prefab,itemList:null},onLoad:function(){this.itemList=[]},start:function(){},updateShow:function(e){var t;this.id=e;for(var i=0;i<3;i++)null==(t=this.itemList[i])&&(t=cc.instantiate(this.rankItem),this.itemList[i]=t,this.listView.content.addChild(t)),t.getComponent("LobbyPlayTypeItem").updateData(e,i)}}),cc._RF.pop()},{}],LobbyProtocolId:[function(e,t){"use strict";cc._RF.push(t,"7950bWY/vBJgpenLnW1bkRg","LobbyProtocolId"),window.MSG_MAIN_LOGON_REGISTER=100,window.MSG_ASS_LOGON_REGISTER_NORMAL=1,window.MSG_ASS_LOGON_REGISTER_TENCENT=2,window.MSG_MAIN_LOGON_LOGON=101,window.MSG_ASS_LOGON_LOGON_BY_NAME=1,window.MSG_MAIN_LOGON_DESK=102,window.MSG_ASS_LOGON_BUY_DESK=1,window.MSG_ASS_LOGON_ENTER_DESK=2,window.MSG_MAIN_LOADER_LOGON=500,window.MSG_ASS_LOADER_LOGON=1,window.MSG_ADD_LOADER_LOGOUT=2,window.MSG_MAIN_LOGON_NOTIFY=103,window.MSG_NTF_LOGON_USER_SQUEEZE=1,window.MSG_NTF_LOGON_NOTICE=2,window.MSG_NTF_LOGON_HORN=3,window.MSG_NTF_LOGON_USER_EXIST=4,window.MSG_NTF_LOGON_RESOURCE_CHANGE=5,window.MSG_NTF_LOGON_SUPPORT_INFO=6,window.MSG_NTF_LOGON_USERCOUNT_CHANGE=7,window.MSG_NTF_LOGON_FRIEND_NOTIFY=8,window.MSG_NTF_LOGON_FRIEND_ADDOK=9,window.MSG_NTF_LOGON_FRIEND_DELOK=10,window.MSG_NTF_LOGON_FRIEND_DELNOTIFY=11,window.MSG_NTF_LOGON_FRIEND_LOGINOROUT=12,window.MSG_NTF_LOGON_FRIEND_REDSPOT=13,window.MSG_NTF_LOGON_CLOSE_SERVER=14,window.MSG_NTF_LOGON_EMAIL_REDSPOT=15,window.MSG_NTF_LOGON_GAME_PEOPLECOUNT_CHANGE=20,window.MSG_NTF_LOGON_WORLD_CHAT=21,window.MSG_NTF_LOGON_REWARD_NEW_USER=22,window.MSG_MAIN_LOGON_OTHER=104,window.MSG_ASS_LOGON_OTHER_SEND_HORN=1,window.MSG_ASS_LOGON_OTHER_SEND_GIFT=2,window.MSG_ASS_LOGON_OTHER_SEND_GRADE=3,window.MSG_ASS_LOGON_OTHER_SEND_ROOMOPENED=4,window.MSG_ASS_LOGON_OTHER_USERINFO_FLUSH=5,window.MSG_ASS_LOGON_OTHER_EMAIL_LIST=6,window.MSG_ASS_LOGON_OTHER_EMAIL_INFO=7,window.MSG_ASS_LOGON_OTHER_EMAIL_DELETE=8,window.MSG_ADD_LOGON_OTHER_REQ_SUPPORT=9,window.MSG_ASS_LOGON_OTHER_ROBOT_TAKEMONEY=10,window.MSG_ASS_LOGON_OTHER_REQ_SIMPLE_GRADELIST=11,window.MSG_ASS_LOGON_OTHER_REQ_SIMPLE_GRADEINFO=12,window.MSG_ASS_LOGON_OTHER_REQ_GRADELIST=13,window.MSG_ASS_LOGON_OTHER_REQ_GRADEINFO=14,window.MSG_ASS_LOGON_OTHER_REQ_USERINFO=15,window.MSG_ASS_LOGON_OTHER_REQ_DISSMISS_DESK=16,window.MSG_ASS_LOGON_OTHER_REQ_SAVE_POSITION=17,window.MSG_ASS_LOGON_OTHER_REQ_ENTERTHEGAMEROOM=18,window.MSG_ASS_LOGON_OTHER_JOIN_MATCH_SCENE=19,window.MSG_ASS_LOGON_OTHER_EXIT_MATCH_SCENE=20,window.MSG_ASS_LOGON_OTHER_GET_WORLD_CHAT=26,window.MSG_ASS_LOGON_OTHER_SEND_WORLD_CHAT=27,window.MSG_ASS_LOGON_OTHER_REWARD_NEW_USER=28,window.MSG_ASS_LOGON_OTHER_REQ_ENTER_OR_LEAVE_THE_GAMERO=18,window.MSG_MAIN_LOGON_BANK=105,window.MSG_ASS_LOGON_BANK_SAVE_MONEY=1,window.MSG_ASS_LOGON_BANK_TAKE_MONEY=2,window.MSG_ASS_LOGON_BANK_TRANSFER=3,window.MSG_ASS_LOGON_BANK_SETPASSWD=4,window.MSG_ASS_LOGON_BANK_RESETPASSWD=5,window.MSG_ASS_LOGON_BANK_RECORD=6,window.MSG_ASS_LOGON_BANK_MOENY_FOR_JEWELS=7,window.MSG_MAIN_LOGON_FRIEND=106,window.MSG_ASS_LOGON_FRIEND_LIST=1,window.MSG_ASS_LOGON_FRIEND_ADD=2,window.MSG_ASS_LOGON_FRIEND_ANSWER_ADD=3,window.MSG_ASS_LOGON_FRIEND_DEL=4,window.MSG_ASS_LOGON_FRIEND_REWARD=5,window.MSG_ASS_LOGON_FRIEND_TAKEREWARD=6,window.MSG_ASS_LOGON_FRIEND_SERACH=7,window.MSG_ASS_LOGON_FRIEND_CHANGEBATCH=8,window.MSG_ASS_LOGON_FRIEND_NOTIFYLIST=9,window.MSG_ASS_LOGON_FRIEND_DELNOTIFY=10,window.MSG_ASS_LOGON_FRIEND_INVITEPLAY=11,window.MSG_ASS_LOGON_FRIEND_DEL_REDSPOT=12,window.MSG_ASS_LOGON_FRIEND_ERROR=13,window.MSG_MAIN_LOGON_FRIENDSGROUP=107,window.MSG_ASS_LOGON_FRIENDSGROUP_LIST=1,window.MSG_ASS_LOGON_FRIENDSGROUP_MEMBER=2,window.MSG_ASS_LOGON_FRIENDSGROUP_ALL_NOTIFY_MSG=3,window.MSG_ASS_LOGON_FRIENDSGROUP_ALL_ROOM_MSG=4,window.MSG_ASS_LOGON_FRIENDSGROUP_ALL_ACCO_MSG=5,window.MSG_ASS_LOGON_FRIENDSGROUP_CREATE=6,window.MSG_ASS_LOGON_FRIENDSGROUP_REQ_JOIN=7,window.MSG_ASS_LOGON_FRIENDSGROUP_INVITE=8,window.MSG_ASS_LOGON_FRIENDSGROUP_ANSWER_OPER=9,window.MSG_ASS_LOGON_FRIENDSGROUP_DEL_MEMBER=10,window.MSG_ASS_LOGON_FRIENDSGROUP_QUIT=11,window.MSG_ASS_LOGON_FRIENDSGROUP_DISMISS=12,window.MSG_ASS_LOGON_FRIENDSGROUP_CHANGE_NAME=13,window.MSG_ASS_LOGON_FRIENDSGROUP_DEL_NOTIFY_MSG=14,window.MSG_ASS_LOGON_FRIENDSGROUP_SIMPLE_INFO=15,window.MSG_ASS_LOGON_FRIENDSGROUP_DEL_REDSPOT=16,window.MSG_ASS_LOGON_FRIENDSGROUP_SEND_NOTICE=17,window.MSG_ASS_LOGON_FRIENDSGROUP_QUERY_ACCO=18,window.MSG_ASS_LOGON_FRIENDSGROUP_DESK_LIST_MSG=19,window.MSG_ASS_LOGON_FRIENDSGROUP_DELETE_DESK_INFO=20,window.MSG_ASS_LOGON_FRIENDSGROUP_QUERY_DESK_ACCO=21,window.MSG_ASS_LOGON_FRIENDSGROUP_REQ_TRANSFER=22,window.MSG_ASS_LOGON_FRIENDSGROUP_REQ_AUTH_MEM=23,window.MSG_ASS_LOGON_FRIENDSGROUP_MODIFY_WECHAT=24,window.MSG_ASS_LOGON_FRIENDSGROUP_MODIFY_POWER=25,window.MSG_ASS_LOGON_FRIENDSGROUP_CHANGE_FIRECOIN=26,window.MSG_MAIN_FRIENDSGROUP_NOTIFY=108,window.MSG_NTF_LOGON_FRIENDSGROUP_NOTIFY_MSG=1,window.MSG_NTF_LOGON_FRIENDSGROUP_ROOM_MSG=2,window.MSG_NTF_LOGON_FRIENDSGROUP_ACCO_MSG=3,window.MSG_NTF_LOGON_FRIENDSGROUP_REDSPOT=4,window.MSG_NTF_LOGON_FRIENDSGROUP_MSG_HAVE_CHANGE=5,window.MSG_NTF_LOGON_FRIENDSGROUP_CREATE_FG=6,window.MSG_NTF_LOGON_FRIENDSGROUP_NAME_CHANGE=7,window.MSG_NTF_LOGON_FRIENDSGROUP_PEOPLE_CHANGE=8,window.MSG_NTF_LOGON_FRIENDSGROUP_DISMISS=9,window.MSG_NTF_LOGON_FRIENDSGROUP_NOTICE_CHANGE=10,window.MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_MSG=11,window.MSG_NTF_LOGON_FRIENDSGROUP_DESK_INFO_CHANGE=12,window.MSG_NTF_LOGON_FRIENDSGROUP_STATUS_CHANGE=13,window.MSG_NTF_LOGON_FRIENDSGROUP_WECHAT_CHANGE=14,window.MSG_NTF_LOGON_FRIENDSGROUP_POWER_CHANGE=15,window.MSG_NTF_LOGON_FRIENDSGROUP_NEW_VIPROOM_MSG=16,window.MSG_NTF_LOGON_FRIENDSGROUP_VIPROOM_CHANGE=17,window.MSG_NTF_LOGON_FRIENDSGROUP_FIRECOIN_CHANGE=18,window.MSG_MAIN_MATCH_NOTIFY=109,window.MSG_NTF_LOGON_MATCH_NOTIFY_SIGNUP_CHANGE=1,window.MSG_NTF_LOGON_MATCH_NOTIFY_START_MATCH=2,window.MSG_NTF_LOGON_MATCH_NOTIFY_START_CHANGE_TIME=3,window.MSG_NTF_LOGON_MATCH_NOTIFY_START_CHANGE_FAIL=4,window.MSG_NTF_LOGON_MATCH_NOTIFY_START_MATCH_RIGHTAWAY=5,cc._RF.pop()},{}],LobbyRankItem:[function(e,t){"use strict";cc._RF.push(t,"4fbd9dcc+FGL5cgS6hHUAJX","LobbyRankItem"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,rankImage:cc.Sprite,rankLabel:cc.Label,headImage:cc.Sprite,recodeLabel:cc.Label,rankImageList:null},updateData:function(e,t,i){this.rankImageList[t]?(this.rankLabel.node.active=!1,this.rankImage.node.active=!0,this.rankImage.spriteFrame=this.rankImageList[t]):(this.rankLabel.node.active=!0,this.rankImage.node.active=!1,this.rankLabel.string=t+1+""),this.nameLabel.string=i.name}}),cc._RF.pop()},{}],LobbyRankList:[function(e,t){"use strict";cc._RF.push(t,"ad438Y9vjlB/oAf2YhD2ObM","LobbyRankList"),cc.Class({extends:cc.Component,properties:{listView:{type:cc.ScrollView,default:null},rankItem:cc.Prefab,noroom:cc.Sprite,rankImageList:{type:cc.SpriteFrame,default:[]}},onLoad:function(){this.itemArray=[],this.onClick(null,"1")},start:function(){},onClick:function(e,t){for(var i,o=(void 0).length,n=0;n<o;n++)null==(i=this.itemArray[n])?(i=cc.instantiate(this.rankItem),this.itemArray[n]=i,i.getComponent("LobbyRankItem").rankImageList=this.rankImageList,this.listView.content.addChild(i)):null==i.parent&&this.listView.content.addChild(i),i.getComponent("LobbyRankItem").updateData(t,n,(void 0)[n]);if(0==n)this.noroom.node.active=!0,this.listView.node.active=!1;else{for(this.noroom.node.active=!1,this.listView.node.active=!0,o=this.itemArray.length;n<o;n++)(i=this.itemArray[n]).parent=null;this.listView.scrollToTop(.5)}}}),cc._RF.pop()},{}],LobbyRoomLogic:[function(e,t){"use strict";cc._RF.push(t,"9555cCFVJZJyqTbIXl7Kg6z","LobbyRoomLogic");var i,o=(i=e("../../Conn/ReqHttp"))&&i.__esModule?i:{default:i};cc.Class({extends:e("LogicBasis"),ctor:function(){this.LoginRoomLogic=new(e("LoginRoomLogic"))},buyDesk:function(e,t,i,o){console.log("buyDesk info:  "),console.log("gameID = ",e),console.log("count = ",t),console.log("jsonStr = ",i);var n=Package.buildWritePack(282);n.writeBegin(MSG_MAIN_LOGON_DESK,MSG_ASS_LOGON_BUY_DESK),n.writeInt(this.getUserID()),n.writeInt(1),n.writeInt(e),n.writeInt(t),n.writeByte(0),n.writeString(i,256),n.writeByte(0),n.writeInt(0),n.writeInt(0);var a=function(e){var t=function(e){var t={};return t.userID=e.readInt(),t.roomID=e.readInt(),t.deskIdx=e.readInt(),t.passwd=e.readString(20),t.passwdLen=e.readInt(),t.jewels=e.readInt(),t.byMasterNotPlay=e.readByte(),window.testModule&&cc.sys.localStorage.setItem("roomNo",t.passwd),t};if(e.bHandleCode===G_HANDLE_CODE_OK){var i=t(e);console.log("=====================\u521b\u5efa\u623f\u95f4\u6210\u529f\n",i),this.joinRoom(i.passwd),DataNotify.onOpenRoomChanged(),o&&o()}else if(GlobalError.ERROR_CANNOT_BUYDESK_INROOM==e.bHandleCode){var n=t(e),a=cc.director.getScene().getChildByName("Canvas").getChildByName("Hall_Node"),s=null;if(a&&(s=a.getComponent("LobbyScene")),null==s)return void console.log("LobbyRoomLogic LobbyScene == null ");var r=function(){s.unschedule(r),s&&s.enterGameByRoomID&&(console.log("LobbyScene.enterGameByRoomID()"),s.enterGameByRoomID(n.roomID))}.bind(this),c=RoomListManager.getRoomNameByRoomID(n.roomID);createLoading(tools.stringFormat("\u60a8\u5df2\u7ecf\u5728{0}\u6e38\u620f\u4e2d",c)),console.log("\u5df2\u7ecf\u5728\u623f\u95f4\u91cc\u9762"),s.schedule(r,1,!0)}}.bind(this);LobbySocket.send(n,a,"\u8bf7\u6c42\u521b\u5efa\u623f\u95f4...")},getBuyConfig:function(e,t,i,n){var a=GameBuyConfigManager.getGameBuyConfigByGameID(e,t);if(0===a.length){var s=UserInfoManager.getMyInfo().userID;o.default.buyDeskList(s,n,function(o){if(0===o.status){for(var n=0;n<o.data.length;n++){var a=o.data[n];a.sort(function(e,t){return e.count-t.count}),GameBuyConfigManager.push(a[0].gameID,a)}var s=GameBuyConfigManager.getGameBuyConfigByGameID(e,t);i&&i(s)}else createTips(o.msg),i&&i({})})}else i&&i(a)},joinRoom:function(e,t){var i=MSG_MAIN_LOGON_DESK,o=MSG_ASS_LOGON_ENTER_DESK,n=this.createNetMsg(28,i,o);n.pushINT(this.getUserID()),n.pushINT(6),n.pushNCHAR(e,20);var a=function(e){var i=function(e){var t={};return t.userID=e.popINT(),t.roomID=e.popINT(),t.deskIdx=e.popINT(),t};if(e.bHandleCode===G_HANDLE_CODE_OK){var o=i(e);this.enterGame(o.roomID,o.deskIdx),t&&t()}else if(GlobalError.ERROR_CANNOT_ENTERDESK_INROOM==e.bHandleCode){var n=i(e),a=cc.director.getScene().getChildByName("Canvas").getChildByName("Hall_Node"),s=null;if(a&&(s=a.getComponent("LobbyScene")),null==s)return void console.log("LobbyRoomLogic LobbyScene == null ");var r=function(){s.unschedule(r),s&&s.enterGameByRoomID&&(console.log("LobbyScene.enterGameByRoomID()"),s.enterGameByRoomID(n.roomID))}.bind(this),c=RoomListManager.getRoomNameByRoomID(n.roomID);createLoading(tools.stringFormat("\u60a8\u5df2\u7ecf\u5728{0}\u6e38\u620f\u4e2d",c)),console.log("\u5df2\u7ecf\u5728\u623f\u95f4\u7684\u903b\u8f91\u5df2\u7ecf\u5728\u623f\u95f4\u7684\u903b\u8f91\u5df2\u7ecf\u5728\u623f\u95f4\u7684\u903b\u8f91"),s.schedule(r,1,!0)}}.bind(this);this.sendData(n,a,"\u6b63\u5728\u52a0\u5165\u623f\u95f4...")},enterGame:function(e){console.log("enterGame beg");var t=RoomListManager.getRoomByRoomID(e);this.LoginRoomLogic.enterRoom(t,this.getUserID(),this.getUserToken())},requestQualifyingCount:function(e){if(window.rankInfoArr.length>0)return e&&e();o.default.requestQualifyingCount(sCallback)},requestCheckPointConfig:function(e){if(window.CheckPointInfoArr.length>0)return e&&e(window.CheckPointInfoArr);o.default.getCheckpointConfig(sCallback)},requestEnterGoldRoom:function(e){if(e<0||e>6||!e)console.error("\u623f\u95f4\u7c7b\u578b\u9519\u8bef\uff01\uff01\uff01",e);else{var t=MSG_MAIN_LOADER_LOGON,i=MSG_ASS_LOADER_LOGON,o=this.createNetMsg(4,t,i);o.pushINT(e),this.sendData(o,function(){console.log("\u65e5\u5fd7: \u63a5\u6536\u5230\u767b\u5165\u4fe1\u606f")},"\u767b\u5165\u623f\u95f4...")}},requestLoaderCheckLogon:function(e){var t=UserInfoManager.getMyInfo().userID;o.default.requestLoaderCheckLogon(t,function(t){0==t.status?e&&e():createTips(t.msg)})},requestExchangeRead:function(e,t){var i=UserInfoManager.getMyInfo().userID;o.default.giftBuyFortunella(i,t,function(t){0==t.status?(e&&e(),createTips(t.msg)):createTips(t.msg)})}}),cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp",LogicBasis:"LogicBasis",LoginRoomLogic:"LoginRoomLogic"}],LobbySocket:[function(e,t){"use strict";cc._RF.push(t,"368b5Gn9npHSqR8X6nKKcji","LobbySocket");var i=e("../../Conn/ReqHttp").default,o=(cc.sys.isNative,20),n=e("EventEmiter").GlobalEvent,a=cc.Class({extends:e("TcpClient"),properties:{},ctor:function(){this.connectResult=null,this.loginDelegate=null,this.name="LobbySocket",this.isReconnected=!1,this.reconnectCount=0,this.isSimulateLogin=!1,this.isSqueeze=!1,NetConfig.isLocalServerAddress()},switchAccount:function(){this.close(),createLoading("\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e..",8,!0),G_USER_PASSWORD=null,cc.sys.isNative?cc.game.restart():cc.director.loadScene("mLogin")},setTCPHeartCheckInterval:function(e){this.setHeartCheckInterval(e)},getMyInfo:function(){return UserInfoManager.getMyInfo()},connectService:function(e){var t=this;this.superConnectService=this._super;var i=function(){var i=NetConfig.getServerAddress(),o=NetConfig.getServerPort(),n=NetConfig.getSendPort();t.connectResult=e,t.superConnectService(i,o,n,t.onSocketMsg.bind(t))};e?(this.connectResult=e,this.getLogonServerInfo(i)):(this.connectResult=null,i()),this.setHeartCheckInterval(15)},getLogonServerInfo:function(e){var t=this;i.getLogonServer(function(i){if(0==i.status){if(null==i.data.ip||0==i.data.port)return createTips("\u767b\u5f55\u670d\u52a1\u5668IP\u548c\u7aef\u53e3\u4fe1\u606f\u9519\u8bef"),void(t.connectResult&&t.connectResult(!1));NetConfig.setServerAddress(i.data.ip),NetConfig.setServerPort(i.data.port),e(!0)}else createTips(i.msg),t.connectResult&&t.connectResult(!1)},function(){createTips("\u767b\u5f55\u670d\u52a1\u5668IP\u548c\u7aef\u53e3\u83b7\u53d6\u5931\u8d25"),e(!1)})},onConnectMessage:function(e){this._super(e),this.isReconnected?(console.log("LobbySocket:onConnectMessage \u91cd\u65b0\u8fde\u63a5\u6210\u529f \u91cd\u8fde\u6b21\u6570 = "+this.reconnectCount),this.reconnectCount=0,this.isReconnected=!1,this.isSimulateLogin=!0,this.getMyInfo()?this.login(this.getMyInfo().userID,this.getMyInfo().userToken):this.onLoginFailed()):this.connectResult&&(this.connectResult(!0),this.connectResult=null)},onLogonNotifyMessage:function(e){MSG_NTF_LOGON_USER_SQUEEZE==e.bAssistantID?this.dealNotifyLogonUserSqueeze(e):MSG_NTF_LOGON_NOTICE==e.bAssistantID?this.dealNotifyLogonNotice(e):MSG_NTF_LOGON_HORN==e.bAssistantID?this.dealNotifyLogonHorn(e):MSG_NTF_LOGON_RESOURCE_CHANGE==e.bAssistantID?this.dealNotifyResourceChange(e):MSG_NTF_LOGON_SUPPORT_INFO==e.bAssistantID?this.dealNotifySupportInfo(e):MSG_NTF_LOGON_USERCOUNT_CHANGE==e.bAssistantID?RoomRecordManager.dealNotifyUserCountChange(e):MSG_NTF_LOGON_FRIEND_NOTIFY==e.bAssistantID?this.dealNotifyFriendNotify(e):MSG_NTF_LOGON_FRIEND_ADDOK==e.bAssistantID?this.dealNotifyFriendAdd(e):MSG_NTF_LOGON_FRIEND_DELOK==e.bAssistantID?this.dealNotifyFriendDel(e):MSG_NTF_LOGON_FRIEND_DELNOTIFY==e.bAssistantID?this.dealNotifyFriendNotifyDel(e):MSG_NTF_LOGON_FRIEND_LOGINOROUT==e.bAssistantID?this.dealNotifyFriendLoginOrOut(e):MSG_NTF_LOGON_FRIEND_REDSPOT==e.bAssistantID?this.dealNotifyFriendRedSpot(e):MSG_NTF_LOGON_CLOSE_SERVER==e.bAssistantID||MSG_NTF_LOGON_EMAIL_REDSPOT==e.bAssistantID||MSG_NTF_LOGON_GAME_PEOPLECOUNT_CHANGE==e.bAssistantID&&this.dealLogonGamePeoplecountChange(e)},login:function(e,t){var i=Package.buildWritePack(156);i.writeBegin(MSG_MAIN_LOGON_LOGON,MSG_ASS_LOGON_LOGON_BY_NAME),i.writeString(tools.getMachineID(),64),i.writeInt(e),i.writeString(t,64),i.writeString("0.0.0",24);var o=function(i){if(i.bHandleCode===G_HANDLE_CODE_OK){var o={name:i.popNCHAR(MAX_USER_NAME_LEN),phone:i.popNCHAR(24),sex:i.popBYTE(),money:i.popLONGLONG(),jewels:i.popINT(),roomID:i.popINT(),deskIdx:i.popINT(),logonIP:i.popNCHAR(24),headURL:i.popNCHAR(256),bankMoney:i.popLONGLONG(),bankPasswd:i.popNCHAR(20),longitude:i.popNCHAR(12),latitude:i.popNCHAR(12),address:i.popNCHAR(64),motto:i.popNCHAR(128),visitor:i.popBYTE(),combineMatchID:i.popLONGLONG(),matchStatus:i.popBYTE(),gameExp:parseInt(F_GetMoneyDisplay(i.popLONGLONG())),UserLevel:i.popBYTE(),idCard:i.popNCHAR(24),realName:i.popNCHAR(64),giftCard:i.popLONGLONG(),checkPointsNum:i.popINT(),transferNum:i.popINT(),goodsPhone:i.popNCHAR(24),goodsAddress:i.popNCHAR(64),peopleCount:i.popINT()};o.userID=e,o.userToken=t,UserInfoManager.setMyInfo(o),this.startLocation(e),this.onLoginSuccess(this.getMyInfo())}}.bind(this);this.send(i,o)},startLocation:function(e){var t=function(t){var i=i||function(e){var t={},i=t.lib={},o=function(){},n=i.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return new a.init(i,t)}}),s=t.enc={},r=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,n=e.min(4*t,n),t){for(var c=0;c<t;c+=s)this._doProcessBlock(o,c);c=o.splice(0,t),i.sigBytes-=n}return new a.init(c,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new l.HMAC.init(e,i).finalize(t)}}});var l=t.algo={};return t}(Math);(function(){var e=i,t=(a=e.lib).WordArray,o=a.Hasher,n=[],a=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,o=i[0],a=i[1],s=i[2],r=i[3],c=i[4],u=0;80>u;u++){if(16>u)n[u]=0|e[t+u];else{var h=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=h<<1|h>>>31}h=(o<<5|o>>>27)+c+n[u],h=20>u?h+(1518500249+(a&s|~a&r)):40>u?h+(1859775393+(a^s^r)):60>u?h+((a&s|a&r|s&r)-1894007588):h+((a^s^r)-899497514),c=r,r=s,s=a<<30|a>>>2,a=o,o=h}i[0]=i[0]+o|0,i[1]=i[1]+a|0,i[2]=i[2]+s|0,i[3]=i[3]+r|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(o+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)})();var o=WechatAppID,n=(new Date).getTime().toString(),a=(1e3*Math.random()).toString(),s="jsapi_ticket="+t.jsapi_ticket+"&noncestr="+a+"&timestamp="+n+"&url="+location.href.split("#")[0],r=i.SHA1(s,{string:!0}).toString();jWeixin.config({debug:!1,appId:o,timestamp:n,nonceStr:a,signature:r,jsApiList:["scanQRCode","getLocation"]}),jWeixin.ready(function(){jWeixin.getLocation({type:"wgs84",success:function(t){ConfigDataManager.saveUserAddress(t.longitude,t.latitude,e)},fail:function(){},cancel:function(){alert("\u7528\u6237\u62d2\u7edd\u6388\u6743\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e")}})})}.bind(this);ConfigDataManager.getWXjsapi_ticket(e,t)},onLoginSuccess:function(t){if(console.log("lobby socket onLoginSuccess \u767b\u5f55\u6210\u529f",t),t&&this.loginDelegate)if(0==t.roomID){var i=cc.director.getScene().getChildByName("Canvas"),o=i.getChildByName("lobby"),n=i.getChildByName("livebroadcast"),a=null;if(i&&o&&(a=o.getComponent("LobbyScene")),this.loginDelegate.onLoginSuccess&&this.loginDelegate.onLoginSuccess(),n)return;if(null==a)return console.log("lobby scnee == null load the lobby scene "),cc.director.getScene(),void loadsceneRes("Texture",function(){LOOBBY_STATIC=!1,window.isLogin=!0});a.updateUI&&a.updateUI()}else{var s=function(i){(new(e("LoginRoomLogic"))).enterRoom(i,t.userID,t.userToken),this.loginDelegate.onLoginSuccess&&this.loginDelegate.onLoginSuccess()}.bind(this),r=function(){var e=RoomListManager.getRoomByRoomID(t.roomID);e?(window.roomNo=0,loadsceneRes("Texture",function(){s(e)})):(this.clear(),this.onLoginFailed(),this.loginDelegate=null)}.bind(this),c=GameSocket.getRoomInfo();c?s(c):(new(e("LobbyLogic"))).requestAllRoomList(r)}},onLoginFailed:function(){var e=function(){cc.sys.isMobile?window.location.replace(wxShareURL):(this.reconnectCount=0,this.checkReconnect())}.bind(this),t={msg:"\n\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u7f51\u7edc",btn1:"\u786e\u5b9a"};t.callbackFun=e,createMsgBox(t),null!=this.loginDelegate&&(this.loginDelegate.onLoginFailed(),this.loginDelegate=null),this.isReconnected=!1},onDisconnect:function(){console.log(">>>>>>>onDisconnect lobby");var e=cc.director.getScene();console.log(">>>>>>>onDisconnect \u5927\u5385\u5fc3\u8df3\u91cd\u8fdelobby"),createRepeatConnectLayer(e),console.log(">>>>>>>onDisconnect \u5927\u5385\u5fc3\u8df3\u91cd\u8fdelobby 2222"),this.closeCallback&&this.closeCallback()},requestMyResource:function(){var e=this.createNetMsg(0,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_USERINFO_FLUSH);this.sendData(e,function(e){if(e.bHandleCode==G_HANDLE_CODE_OK){var t={};t.jewels=e.popINT(),t.money=e.popLONGLONG(),t.giftCard=e.popLONGLONG(),t.Transfernum=e.popINT(),DataNotify.onMoneyChanged(t.money),DataNotify.onDiamondChanged(t.jewels),DataNotify.onGiftCardChanged(t.giftCard),DataNotify.onTransfernumChanged(t.Transfernum)}})},setLoginDelegate:function(e){this.loginDelegate=e},clear:function(){this._super(),this.isReconnected=!1,this.reconnectCount=0,this.isSimulateLogin=!1,this.connectResult=null,this.loginDelegate=null,this.isSqueeze=!1,this.removeAllNetCallback(),GameSocket.clear(),GameSocket.setIsSendLogoutRoom(!1),this.close()},checkReconnect:function(){this.reconnectCount<o?(this.reconnectCount=this.reconnectCount+1,console.log("LobbySocket:checkReconnect \u5f00\u59cb\u91cd\u65b0\u8fde\u63a5 \u91cd\u8fde\u6b21\u6570 = ",this.reconnectCount),this.connectService()):(console.log("\u56de\u8c03\u91cd\u8fde\u5931\u8d25"),this.reconnectCount=0,this.isReconnected=!1,this.onLoginFailed(),this.loginDelegate=null)},reconnecService:function(){this.isReconnected=!0,this.checkReconnect()},onConnectSuccess:function(){this._super()},onConnectFailed:function(){this.super(),this.isReconnected?this.checkReconnect():this.connectResult&&(removeLoading(),createTips(GlobalError.getErrorStr(GlobalError.ERROR_LOBBY_CONNECT_FAILED)),this.connectResult(!1),this.connectResult=null)},dealNotifyLogonUserSqueeze:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(){this.backLogin()}.bind(this),i=cc.director.getScene();i.getChildByName(G_REPEAT_CONNECT_LAYER_TAG)&&i.removeChildByTag(G_REPEAT_CONNECT_LAYER_TAG),this.isSqueeze=!0,createClickTips("\u60a8\u7684\u8d26\u53f7\u5728\u5176\u4ed6\u8bbe\u5907\u767b\u9646",t)}},getIsSqueeze:function(){return this.isSqueeze},dealNotifyLogonNotice:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.interval=e.popINT(),t.times=e.popINT(),t.type=e.popINT(),t.tag=e.popINT(),t.title=e.popNCHAR(24),t.sizeCount=e.popINT(),t.content=e.popNCHAR(t.sizeCount),t}(e);console.log(tools.getCurTime()+" #### \u516c\u544a LobbySocket:dealNotifyLogonNotice",t);var i=C_Director.getScene();if(t.type==E_NoticeType.COMMON){i.children[0];var o=t.content;ChatMessageManager.push(o),ChatMessageManager.pushCommonMsg(o),n.instance.emit("NORMAL_NOTICE",t)}else if(t.type==E_NoticeType.IMMEDIATELY){var a=t.content;ChatMessageManager.push(a),ChatMessageManager.pushCommonMsg(a),n.instance.emit("NORMAL_NOTICE",t)}else t.type==E_NoticeType.STOP_SVR_PRE_TIP&&n.instance.emit("NORMAL_NOTICE",t)}},dealNotifyLogonHorn:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.userID=e.popINT(),t.userName=e.popNCHAR(MAX_USER_NAME_LEN),t.sizeCount=e.popINT(),t.content=e.popNCHAR(t.sizeCount),t}(e);console.log(t," LobbySocket:dealNotifyLogonHorn");var i=C_Director.getScene(),o=i.children[0],n=t.userName+": "+t.content;if(ChatMessageManager.push(n),console.log(o,i,C_Director),o.getChildByName("Panel_Notice")){var a=o.getComponent("LobbyScene"),s={};console.log("+++++++"),console.log(n),s.content="\u5927\u91cf\u4ee3\u7406\u62db\u6210\u63d0\u6210\u767e\u5206\u4e4b30-70,\u6d3b\u52a8\u671f\u95f4\u516d\u4e2a\u7684\u5f00\u59cb\u6709\u5956\u52b1",s.times=1,s.interval=1,a.pushNotice(s)}else{var r=window.prefabMap.get("prefab/NoticeLayer"),c=cc.instantiate(r),u=c.getComponent("NoticeLayer");c.x=cc.winSize.width/2,c.y=cc.winSize.height/2,u.init(n),console.log(i," notice",n),o.addChild(c)}}},dealNotifyResourceChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){console.log("!!!!!!!!!!!!");var t=function(e){var t={};return t.resourceType=e.popINT(),t.value=e.popLONGLONG(),t.reason=e.popINT(),t.param1=e.popINT(),t}(e),i=0,o="";if(E_ResourceType.GOLD==t.resourceType?(i=t.value-this.getMyInfo().money,o="\u91d1\u5e01"):E_ResourceType.CARD==t.resourceType?(i=t.value-this.getMyInfo().jewels,o="\u94bb\u77f3"):E_ResourceType.BANK==t.resourceType?(i=t.value-this.getMyInfo().bankMoney,o="\u94f6\u884c\u91d1\u5e01"):E_ResourceType.GiftCard==t.resourceType?(i=t.value-this.getMyInfo().giftCard,o="\u793c\u5238"):E_ResourceType.TRANSFERNUM==t.resourceType&&(i=t.value-this.getMyInfo().transferNum,o="\u5151\u6362\u6b21\u6570"),E_ResourceChangeReason.PAY_RECHARE==t.reason){var n=function(){}.bind(this),a={btn1:"\u786e\u5b9a"};a.msg=String("\n\u652f\u4ed8\u6210\u529f\uff0c\u83b7\u5f97"+o+" x "+i/G_MULTI_NUM),a.callbackFun=n,createMsgBox(a)}else if(E_ResourceChangeReason.BACK_RECHARE==t.reason){var s=function(){}.bind(this),r={btn1:"\u786e\u5b9a"};r.msg=String("\n\u540e\u53f0\u5145\u503c\uff0c\u83b7\u5f97"+o+" x "+i/G_MULTI_NUM),r.callbackFun=s,createMsgBox(r)}else if(E_ResourceChangeReason.FRIEND_REWARD==t.reason||E_ResourceChangeReason.SUPPORT==t.reason||E_ResourceChangeReason.SHARE==t.reason||E_ResourceChangeReason.BIND_PHONE==t.reason||E_ResourceChangeReason.BIND_AGENT==t.reason||E_ResourceChangeReason.INVITE_ENTER==t.reason||E_ResourceChangeReason.SYSTEM_MAIL==t.reason||E_ResourceChangeReason.MATCH_REWARDS==t.reason||E_ResourceChangeReason.ACHIEVEMENT_REWARDS==t.reason||E_ResourceChangeReason.USER_MAIL==t.reason){console.log(E_ResourceChangeReason.FRIEND_REWARD),console.log(E_ResourceChangeReason.SUPPORT),console.log(E_ResourceChangeReason.SHARE),console.log(E_ResourceChangeReason.BIND_PHONE),console.log(E_ResourceChangeReason.BIND_AGENT),console.log(E_ResourceChangeReason.INVITE_ENTER),console.log(E_ResourceChangeReason.SYSTEM_MAIL),console.log(E_ResourceChangeReason.USER_MAIL),console.log(t.reason);var c=function(){}.bind(this),u={btn1:"\u786e\u5b9a"};u.msg=tools.stringFormat("\n\u5956\u52b1\u9886\u53d6\u6210\u529f\uff0c\u83b7\u5f97{0} x {1}",o,F_GetMoneyDisplay(i)),u.callbackFun=c,createMsgBox(u)}console.log(E_ResourceType.GOLD==t.resourceType),console.log(E_ResourceType.CARD==t.resourceType),console.log(E_ResourceType.BANK==t.resourceType),E_ResourceType.GOLD==t.resourceType?DataNotify.onMoneyChanged(t.value):E_ResourceType.CARD==t.resourceType?DataNotify.onDiamondChanged(t.value):E_ResourceType.BANK==t.resourceType?DataNotify.onBankMoneyChanged(t.value):E_ResourceType.GiftCard==t.resourceType?DataNotify.onGiftCardChanged(t.value):E_ResourceType.TRANSFERNUM==t.resourceType&&DataNotify.onTransfernumChanged(t.value)}},dealNotifySupportInfo:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&function(e){var t={};t.supportTimesEveryDay=e.popINT(),t.supportMinLimitMoney=e.popINT(),t.supportMoneyCount=e.popINT(),t.leftSupportTimes=e.popINT()}(e)},dealNotifyFriendNotify:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendNotify=FriendManager._Resolve_OneFriendNotify(e),t}(e);DataNotify.onFriendNotifyAdd(t.friendNotify)}},dealNotifyFriendAdd:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friend=FriendManager._Resolve_OneFriendInfo(e),t}(e);DataNotify.onFriendAdd(t.friend)}},dealNotifyFriendDel:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendID=e.popINT(),t}(e);DataNotify.onFriendDel(t.friendID)}},dealNotifyFriendNotifyDel:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.notifyID=e.popINT(),t}(e);DataNotify.onFriendNotifyDel(t.notifyID)}},dealNotifyFriendLoginOrOut:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendID=e.popINT(),t.loginType=e.popINT(),t}(e);1==t.loginType?t.onlineStatus=E_FriendOnlineStatus.ON:2==t.loginType&&(t.onlineStatus=E_FriendOnlineStatus.OFF),DataNotify.onFriendOnlineStatusChange(t)}},dealNotifyFriendRedSpot:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.friendListRedSpotCount=e.popINT(),t.notifyListRedSpotCount=e.popINT(),t}(e);DataNotify.onFriendRedSpotChange(t)}},dealLogonGamePeoplecountChange:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.peopleCount=e.popINT(),t}(e);DataNotify.onLogonGamePeoplecountChange(t.peopleCount)}},dealLogonWorldChat:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.type=e.popBYTE(),t.userID=e.popINT(),t.name=e.popNCHAR(256),t.headURL=e.popNCHAR(MAX_USER_NAME_LEN),t.address=e.popNCHAR(64),t.chatContent=e.popNCHAR(100),t.time=e.popINT(),t.tag=e.popINT(),t.videoID=e.popINT(),t}(e),i=UserInfoManager.getMyInfo().userID;if(123363!=i&&124624!=i&&123071!=i||createTips("\u6536\u5230\u6d88\u606f="+t.chatContent),DataNotify.onLogonNewMsgComing2(t),DataNotify.onLogonNewMsgComing1(t),window.G_bGetChatList){var o=Object.keys(window.G_chatList).length;if(o>=1e3)for(var n=2;n<=1e3;n++)window.G_chatList[n-1]=window.G_chatList[n];window.G_chatList[o+1]=t}}},dealLogonRewardNewUser:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.giftCard=e.popINT(),t.money=e.popINT(),t}(e);createNewhandReward(t.giftCard,t.money)}},dealNotifyLuziInfo:function(){},backLogin:function(){cc.sys.isNative?cc.game.restart():window.location.replace(window.location.href)},requestHorn:function(e){var t=this.createNetMsg(1024,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_SEND_HORN);t.pushNCHAR(e,1024),this.sendData(t)},requestDissmissDesk:function(e){var t=this.createNetMsg(20,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_DISSMISS_DESK);t.pushNCHAR(String(e),20),this.sendData(t)},isInSelfRemoveList:function(e,t){var i=[{mainID:MSG_MAIN_LOGON_OTHER,assID:MSG_ASS_LOGON_OTHER_SEND_GRADE},{mainID:MSG_MAIN_LOGON_OTHER,assID:MSG_ASS_LOGON_OTHER_EMAIL_LIST}],o=tools.stringFormat("{0}_{1}",e,t);for(var n in i){var a=i[n];if(o==tools.stringFormat("{0}_{1}",a.mainID,a.assID))return!0}return!1},checkLobbyVersion:function(){},requestUserInfo:function(e,t){if(!(e<=0)){var i=this.createNetMsg(4,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_USERINFO);i.pushINT(Number(e)),this.sendData(i,function(i){if(G_HANDLE_CODE_OK==i.bHandleCode){var o=function(e){var t={};return t.name=e.readString(MAX_USER_NAME_LEN),t.headURL=e.readString(256),t.sex=e.popBYTE(),t.gameCount=e.popINT(),t.winCount=e.popINT(),t.onlineStatus=e.popBYTE(),t.longitude=e.readString(12),t.latitude=e.readString(12),t.address=e.readString(64),t.jewels=e.popINT(),t.money=e.popLONGLONG(),t.logonIP=e.readString(24),t.motto=e.readString(128),t.giftCard=e.popLONGLONG(),t}(i);console.log(o),o.userID=e,UserInfoManager.push(o.userID,o),t(o)}})}},requestLogonUserinfoFlush:function(e,t){var i=this.createNetMsg(1,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REWARD_NEW_USER);i.pushBYTE(e),this.sendData(i,function(e){G_HANDLE_CODE_OK==e.bHandleCode&&t&&t()})},requestSetAutograph:function(e,t){var i=this.createNetMsg(256,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_SET_AUTOGRAPH);i.pushNCHAR_NO(e,256),this.sendData(i,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_SET_AUTOGRAPH,function(e){G_HANDLE_CODE_OK==e.bHandleCode?t&&t(!0):t(!1)})},requestRoomUserCount:function(e,t){var i=this.createNetMsg(4,MSG_MAIN_LOGON_OTHER,MSG_ADD_LOGON_OTHER_QUERY_ROOMUSERCOUNT);i.pushINT(e),this.sendData(i,MSG_MAIN_LOGON_OTHER,MSG_ADD_LOGON_OTHER_QUERY_ROOMUSERCOUNT,function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var i=function(e){var t={};return t.userCount=e.popINT(),t}(e);t&&t(i.userCount)}})},requestSaveSignature:function(e,t){var i=this.createNetMsg(256,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_SIGN);i.pushNCHAR(e,256),this.sendData(i,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_SIGN,function(e){G_HANDLE_CODE_OK==e.bHandleCode&&t&&t()})},onEnterBackground:function(){this.isConnected()},onEnterForeground:function(){this.isConnected()?(this.sendHelloMessage(),this.tmpDelay=function(){var e=cc.director.getScene().getChildByName("Canvas").getChildByName("Hall_Node");null!=e&&(e=e.getComponent("LobbyScene")),null!=e&&e.updateUI&&e.updateUI()},this.scheduleOnce(this.tmpDelay,.01)):(this.tmpDelay=function(){createRepeatConnectLayer(cc.director.getScene())},this.scheduleOnce(this.tmpDelay,.01))},enterGameRoom:function(e){var t=this.createNetMsg(5,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_ENTERTHEGAMEROOM);t.pushBYTE(1),t.pushINT(e),this.sendData(t)},leftGameRoom:function(e){var t=this.createNetMsg(5,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_ENTERTHEGAMEROOM);t.pushBYTE(2),t.pushINT(e),this.sendData(t)},sendMatchJoinInfo:function(){console.log("LobbySocket.sendMatchJoinInfo()");var e=this.createNetMsg(0,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_JOIN_MATCH_SCENE);this.sendData(e)},sendMatchLeftInfo:function(){console.log("LobbySocket.sendMatchLeftInfo()");var e=this.createNetMsg(0,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_EXIT_MATCH_SCENE);this.sendData(e)},sendRankMatchInfo:function(e,t,i){console.log("LobbySocket.sendToDuanWeiInfo()");var o=this.createNetMsg(5,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_REQ_ENTER_OR_LEAVE_THE_GAMERO);o.pushBYTE(1),o.pushINT(1e4),this.sendData(o,i)},requestChatList:function(e,t){var i=this.createNetMsg(4,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_GET_WORLD_CHAT);i.pushINT(Number(e)),this.sendData(i,function(e){var i={msgCount:0};if(G_HANDLE_CODE_OK==e.bHandleCode){var o=e.popINT();i.msgCount=o;for(var n=1;n<o;n++){var a={};tempDatatype=e.popBYTE(),a.userID=e.popINT(),a.name=e.popNCHAR(256),a.headURL=e.popNCHAR(256),a.address=e.popNCHAR(64),a.chatContent=e.popNCHAR(100),a.time=e.popINT(),i[n]=a}}t(i)})},sendChat:function(e,t,i,o){var n=this.createNetMsg(112,MSG_MAIN_LOGON_OTHER,MSG_ASS_LOGON_OTHER_SEND_WORLD_CHAT);n.pushBYTE(e),n.pushNCHAR(t,100),n.pushINT(i),n.pushINT(o),this.sendData(n)},onSocketMsg:function(e){if(this.resolveNetMsgHead(e),e.bHandleCode!==G_HANDLE_CODE_OK){var t=GlobalError.getErrorStr(e.bHandleCode);""!==t?(console.warn(tools.getCurTime()+" SOCK_MSG_RSP failed maincmd:"+e.bMainID+" subcmd:"+e.bAssistantID+" errcode:"+e.bHandleCode+" errmsg:"+t),createTips(t),"\u623f\u95f4\u4e0d\u5b58\u5728"==t&&window.testModule&&cc.sys.localStorage.removeItem("roomNo")):console.warn(tools.getCurTime()+" SOCK_MSG_RSP failed maincmd:"+e.bMainID+" subcmd:"+e.bAssistantID+" errcode:"+e.bHandleCode+" errmsg:"+t)}e.bHandleCode==G_HANDLE_CODE_OK&&console.info(tools.getCurTime()+" SOCK_MSG_RSP sucess maincmd:"+e.bMainID+" subcmd:"+e.bAssistantID),MSG_MAIN_MATCH_NOTIFY==e.bMainID&&(MSG_NTF_LOGON_MATCH_NOTIFY_START_MATCH,e.bAssistantID);var i=this.getCallbackFun(e.getCmd());i?(removeLoading(),this.removeNetCallback(e.getCmd()),i(e)):(console.log("1",e.bMainID,e.bAssistantID),MSG_MAIN_LOGON_NOTIFY==e.bMainID?(console.log("2",e.bMainID,e.bAssistantID),this.onLogonNotifyMessage(e)):MSG_MAIN_FRIENDSGROUP_NOTIFY==e.bMainID?FriendsGroupManager.onFriendsGroupNotifyMessage(e):MSG_MAIN_MATCH_NOTIFY==e.bMainID&&(console.log("\u6536\u5230\u4e86\u6bd4\u8d5b\u573a\u7684\u4fe1\u606f"),MatchManager.onMatchgameNotifyMessage(e)),console.log("3",e.bMainID,e.bAssistantID),MSG_MAIN_LOADER_LOGON==e.bMainID?GameSocket.onLoginMessage(e):MSG_MAIN_LOADER_NOTIFY_USER==e.bMainID?GameSocket.onGameNotifyUserMessage(e):MSG_MAIN_LOADER_NOTIFY==e.bMainID?GameSocket.onGameNotifyMessage(e):MSG_MAIN_LOADER_FRAME==e.bMainID?GameSocket.onFrameMessage(e):MSG_MAIN_LOADER_GAME==e.bMainID?GameSocket.onGameMessage(e):MSG_MAIN_LOADER_RESOURCE_CHANGE==e.bMainID?GameSocket.onResourceChange(e):MSG_MAIN_LOADER_VCODE==e.bMainID?GameSocket.onGameYanCode(e):MSG_MAIN_LOADER_MATCH==e.bMainID?GameSocket.onMatchDeskChange(e):MSG_NTF_LOADER_DESK_NO_USER==e.bMainID?GameSocket.backLobby():MSG_MAIN_LOGON_NOTIFY==e.bMainID&&MSG_NTF_LOGON_WORLD_CHAT==e.bAssistantID?this.dealLogonWorldChat(e):MSG_MAIN_LOGON_NOTIFY==e.bMainID&&MSG_NTF_LOGON_REWARD_NEW_USER==e.bAssistantID?this.dealLogonRewardNewUser(e):e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectSuccess&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectFailed&&e.bMainID!=E_ClientNetStatusProtocolDef.NetStatusProtocol_DisConnect&&E_NET_CONNECT_MAINID.mainid_net_connect!=e.bMainID&&console.log("LobbySocket \u8fd8\u6536\u5230\u4e86 bMainID="+e.bMainID+", bAssistantID="+e.bAssistantID+" \u7684\u6d88\u606f\u6ca1\u6709\u89e3\u6790 \u8fde\u63a5\u6d88\u606f(1, 1)\u548c\u5fc3\u8df3\u6d88\u606f(1, 2)\u9664\u5916\uff0c\u5f80\u4e0b\u67e5\u770b\u662f\u5426\u662f\u6e38\u620f\u5f00\u53d1\u8005\u81ea\u5df1\u7ed1\u5b9a\u7684\u6d88\u606f"))}});t.exports=a,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp",EventEmiter:"EventEmiter",LobbyLogic:"LobbyLogic",LoginRoomLogic:"LoginRoomLogic",TcpClient:"TcpClient"}],LogicBasis:[function(e,t){"use strict";cc._RF.push(t,"36deb+4zUpOsZ6bChdh4ZaI","LogicBasis");var i=cc.Class({extends:cc.Component,ctor:function(){},sendData:function(e,t){LobbySocket.send(e,t)},getUserID:function(){return LobbySocket.getMyInfo().userID},getRoomCard:function(){return LobbySocket.getMyInfo().jewels},getWalletMoney:function(){return LobbySocket.getMyInfo().money},getWalletGiftCard:function(){return LobbySocket.getMyInfo().giftCard},getTransferNum:function(){return LobbySocket.getMyInfo().transferNum},getUserToken:function(){return LobbySocket.getMyInfo().userToken},getLogicName:function(){},getMyInfo:function(){return LobbySocket.getMyInfo()},getLoginAcc:function(){return LobbySocket.getMyInfo().account},getLoginPsw:function(){return LobbySocket.getMyInfo().passwd},getNickName:function(){return decodeURI(LobbySocket.getMyInfo().name)},isBoy:function(){return 0==LobbySocket.getMyInfo().sex},getAvataUrl:function(){return LobbySocket.getMyInfo().headURL},getLogonIP:function(){return LobbySocket.getMyInfo().logonIP},getBankMoney:function(){return LobbySocket.getMyInfo().bankMoney},getBankPasswd:function(){return LobbySocket.getMyInfo().bankPasswd},setBankPasswd:function(e){LobbySocket.getMyInfo().bankPasswd=e},getBankPasswdFlag:function(){return LobbySocket.getMyInfo().bankPasswdFlag},setBankPasswdFlag:function(e){LobbySocket.getMyInfo().bankPasswdFlag=e},setRoomCard:function(e){LobbySocket.getMyInfo().iJewels=e},getLongitude:function(){return LobbySocket.getMyInfo().longitude},getLatitude:function(){return LobbySocket.getMyInfo().latitude},getAddress:function(){return LobbySocket.getMyInfo().address},getGoodsAddress:function(){return LobbySocket.getMyInfo().goodsAddress},getPhone:function(){return LobbySocket.getMyInfo().goodsPhone},getRealName:function(){return LobbySocket.getMyInfo().realName},getIDCard:function(){return LobbySocket.getMyInfo().idCard},createNetMsg:function(e,t,i){return LobbySocket.createNetMsg(e,t,i)},bindingNetCallback:function(e,t,i){var o=e+"-"+t;LobbySocket.bindingNetCallback(o,i)},removeNetCallback:function(e,t){var i=e+"-"+t;LobbySocket.removeNetCallback(i)},closeSocket:function(){LobbySocket.clear()},backLogin:function(){this.closeSocket(),LobbySocket.close(),createLoading("\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e..",8,!0),window.location.reload()},onDisconnect:function(){},isConnected:function(){return LobbySocket.isConnected()}});t.exports=i,cc._RF.pop()},{}],LoginLogic:[function(e,t){"use strict";cc._RF.push(t,"f8d7fzwx1dBSLpxV9VZXfxJ","LoginLogic"),cc.Class({extends:e("LogicBasis"),ctor:function(){this.isConnecting=!1},accountRegist:function(e,t,i){var o=function(){var o=function(o){if(o.bHandleCode===G_HANDLE_CODE_OK){var n=this._Resolve_LogonResponseRegister(o);t(!0,n.userID,n.userToken),G_LOGIN_TYPE_XX=E_LoginType.PC,G_WX_UINIONID=null,n.regWay===E_RegWay.WX&&(G_LOGIN_TYPE_XX=E_LoginType.WX,G_WX_UINIONID=n.unionid),G_USER_PASSWORD=e.psw;var a=cc.sys.localStorage.getItem(G_LOGIN_TYPE);e.regWay===E_RegWay.COMMON?(cc.sys.localStorage.setItem(G_ACCOUNT_KEY,e.acc),cc.sys.localStorage.setItem(G_PASSWARD_KEY,i),a=E_LoginType.PC):e.regWay===E_RegWay.WECHAT?a=E_LoginType.WX:e.regWay===E_RegWay.QQ?a=E_LoginType.QQ:e.regWay===E_RegWay.PHONE&&(a=E_LoginType.PHONE,cc.sys.localStorage.setItem(G_ACCOUNT_KEY,e.acc),console.log("realPwd:",i),cc.sys.localStorage.setItem(G_PASSWARD_KEY,i)),cc.sys.localStorage.setItem(G_LOGIN_TYPE,a)}else 14==o.bHandleCode&&(alert("\u8d26\u53f7\u4e0d\u5339\u914d \u79fb\u9664\u672c\u5730\u6570\u636e \u8bf7\u5237\u65b0"),cc.sys.localStorage.removeItem("wechatArgs_"+G_PLATFORM_NAME),cc.sys.isNative?cc.game.restart():window.location.replace(window.location.href))}.bind(this),n=MSG_MAIN_LOGON_REGISTER,a=MSG_ASS_LOGON_REGISTER_NORMAL;console.log("MSG_ASS_LOGON_REGISTER_NORMAL");var s=LobbySocket.createNetMsg(MAX_USER_NAME_LEN+388+5+24+64+4,n,a);e.regType=E_RegType.PC,cc.sys.isMobile&&(e.regType=E_RegType.MOB),e.regWay=e.regWay||E_RegWay.COMMON,e.regStatus=e.regStatus||E_RegStatus.REG,e.sex=e.sex||E_UserSex.E_UserSex,e.headURL=e.headURL||"",""==e.headURL&&e.headURL;var r=Number(cc.sys.localStorage.getItem(G_SHARE_USERID));s.pushBYTE(e.regType),s.pushBYTE(e.regWay),s.pushNCHAR(e.acc,MAX_USER_NAME_LEN),s.pushNCHAR(e.psw,64),s.pushBYTE(e.regStatus),s.pushBYTE(e.sex),s.pushNCHAR(e.headURL,256),s.pushNCHAR(e.unionid,64),s.pushBYTE(0),s.pushINT(r),s.pushNCHAR("",24),s.pushNCHAR("",64),s.pushINT(r),LobbySocket.send(s,o,"")}.bind(this);this.isConnected()?o():this.connectSocket(function(e){e&&o()})},_Resolve_LogonResponseRegister:function(e){var t={};return t.userID=e.readInt(),t.userToken=e.readString(64),t.unionid=e.readString(64),t.regWay=e.readByte(),t},loginLobby:function(e,t){this.isConnected()?LobbySocket.login(e,t):this.connectSocket(function(i){i&&LobbySocket.login(e,t)})},connectSocket:function(e){var t=this;if(!this.isConnecting){this.isConnecting=!0;var i=null;LobbySocket.connectService(function(o){t.isConnecting=!1,t.unschedule(i),e&&(e(o),e=null)}),i=function(){t.isConnecting=!1},this.schedule(i,G_COMMON_TIMEOUT_TIME)}}}),cc._RF.pop()},{LogicBasis:"LogicBasis"}],LoginRoomLogic:[function(e,t){"use strict";cc._RF.push(t,"33b40UoB/lJ3rez44jdb+sj","LoginRoomLogic"),t.exports=cc.Class({ctor:function(){},enterRoom:function(e,t,i,o,n){RoomListManager.setRoomInfo(e),UserInfoManager.getMyInfo().checkPointsNum=o||0,UserInfoManager.getMyInfo().costType=n||0,GameManager.onGameUpdateSucceed()}}),cc._RF.pop()},{}],MJCommon_Card:[function(e,t){"use strict";cc._RF.push(t,"4dcc7ZgWqNB4K04POKIg9Ks","MJCommon_Card"),cc.Class({extends:cc.Component,properties:{background:cc.Node,valueNode:cc.Node,tingCardNode:cc.Node,imageType:cc.Node,ghostType:cc.Node,huType:cc.Node,anbgNode:cc.Node,anbgSprites:[cc.SpriteFrame]},onEnable:function(){this.arryTouchFlag=!1},onLoad:function(){var e=this;this.valueNode=this.node.children[0],this.background&&(this.valueNode=this.node.children[1]),this.grayColor=cc.color(180,180,180),this.whiteColor=cc.Color.WHITE,this.grayColor2=cc.color(125,125,125),this.sceneRotation=cc.director.getScene().children[0].angle,180==this.sceneRotation?this.isRotate=!0:this.isRotate=!1,this.oldPos=this.node.getPosition(),this.node.on(cc.Node.EventType.TOUCH_START,function(){e.touchCardCallBack&&"function"==typeof e.touchCardCallBack&&e.scheduleOnce(function(){e.touchCardCallBack(e.id)},.1),e.isUnEnabled||e.m_isEnable||(e.dateBegin=new Date,e.arryTouchFlag=!1)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.isUnEnabled)console.log("\u5f53\u524d\u7684\u724c\u7981\u6b62\u9009\u4e2d\u5f53\u524d\u7684\u724c\u7981\u6b62\u9009\u4e2d");else if(!(e.m_isEnable||cc.mj.Data.moveFlag&&cc.mj.Data.moveFlag!==e.id)){var i=t.getDelta();!e.isTouch||cc.mj.Data.isPlayback||cc.mj.Data.showCtrlBtns||e.isMeTurn()&&cc.mj.Data.isGaming&&(e.node.x+=e.isRotate?-i.x:i.x,e.node.y+=e.isRotate?-i.y:i.y,cc.mj.Data.moveFlag=e.id)}}),this.node.on(cc.Node.EventType.TOUCH_END,function(){return e.touch()}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){return e.touch()}),GameEvent.on("selectPai",this.selectPai,this),GameEvent.on("closeCard",this.closeCard,this),this._alt=cc.mjSpriteAlt,this.curNodeColor=this.whiteColor},init:function(e,t,i,o,n,a){if(this.reset(),this.isTouch=i,this.handTrue=t,this.id=e,this.oldId=e,this.node.getComponent(cc.Sprite).enabled=!0,this.valueNode.active=!0,this.anbgNode&&(this.anbgNode.active=!1),this.anbgNode&&"handCard"===o&&0===this.sitIndex&&cc.mj.Data.isWatchMode){this.isTouch=!1,this.node.active=!0,this.node.getComponent(cc.Sprite).enabled=!1,this.background&&(this.background.active=!1),this.valueNode.active=!1;var s=this.anbgSprites[0];return 1==a&&(s=this.anbgSprites[1]),this.anbgNode.getComponent(cc.Sprite).spriteFrame=s,this.anbgNode.active=!0,void console.log("show an hand card",e,this.node.active)}if(255!=e){this.node.active=!0,this.background&&(this.background.active=1==a);var r=o+"_"+n+"_"+e;this.valueNode.getComponent(cc.Sprite).spriteFrame=this._alt.getSpriteFrame(r)}},selectPai:function(e){if(!this.isUnEnabled&&!this.m_isEnable){var t=e;t&&t.isShow&&t.id===this.id?this.handTrue&&this.curNodeColor==this.whiteColor&&(this.curNodeColor=this.grayColor,this.node.color=this.grayColor):this.curNodeColor==this.grayColor&&(this.curNodeColor=this.whiteColor,this.node.color=this.whiteColor)}},setTouchCardCallBack:function(e){this.touchCardCallBack=e},setPutCardCallBack:function(e){this.putCardCallBack=e},setPaiEnabled:function(e){void 0===e&&(e=!0),this.isUnEnabled=!e,this.node.color=e?this.whiteColor:this.grayColor},setChuPaiEnabled:function(e){this.m_isEnable=e},setVerifyPutCardCallBack:function(e,t,i){this.handCardComponent=e,this.verifyPutCardCardType=t,this.verifyPutCardCallBack=i},closeCard:function(){this.isUnEnabled||this.m_isEnable||30===this.node.y&&this.isTouch&&(this.node.y=0,this.emitPai(!1),this.isSelected=!1)},emitPai:function(e){!0===this.isTouch&&GameEvent.emit("selectPai",{id:this.id,isShow:e})},touch:function(){var e=this;if(!this.isUnEnabled&&!this.m_isEnable&&this.isTouch&&!this.arryTouchFlag&&!cc.mj.Data.showCtrlBtns&&!cc.mj.Data.isPlayback&&(this.arryTouchFlag=!0,cc.mj.Data.isGaming&&1!=cc.mj.Data.CardType))if(0==cc.mj.Data.CardType&&(cc.mj.Data.CardType=!0,this.scheduleOnce(function(){cc.mj.Data.CardType=!1},.3)),2==Number(cc.sys.localStorage.getItem(G_OUTCARD_SOUND)||2))if(this.node.y-this.oldPos.y>20)cc.mj.Data.selectedCard&&(cc.mj.Data.selectedCard.node.y=0,cc.mj.Data.selectedCard.isSelected=!1),cc.mj.Data.selectedCard=this,cc.mj.Data.notcanPutCard=!0,cc.mj.Data.moveFlag=null,this.putCard();else{var t=function(){cc.mj.Data.selectedCard&&(cc.mj.Data.selectedCard.node.y=0,cc.mj.Data.selectedCard.isSelected=!1),e.isSelected=!0,e.emitPai(!0),e.node.setPosition(e.oldPos),console.log(tools.getCurTime()+" \u4f4d\u7f6e\u6570\u636e",e.oldPos),e.index,e.node.y=30,cc.mj.Data.selectedCard=e};if(cc.mj.Data.moveFlag&&(cc.mj.Data.moveFlag=null),(new Date).getTime()-this.dateBegin.getTime()>500)return t();if(this.isSelected){if(!this.isMeTurn()||cc.mj.Data.notcanPutCard||cc.mj.Data.mopaiAction)return void GameEvent.emit("initHandTouch");cc.mj.Data.notcanPutCard=!0,this.putCard()}else t()}else cc.mj.Data.selectedCard&&(cc.mj.Data.selectedCard.node.y=0,cc.mj.Data.selectedCard.isSelected=!1),cc.mj.Data.selectedCard=this,cc.mj.Data.notcanPutCard=!0,cc.mj.Data.moveFlag=null,this.putCard()},showTingsanjiao:function(e){this.tingCardNode&&(this.tingCardNode.active=e),this.tingFlag=e},setHu:function(e){this.huType&&(this.huType.active=e)},setGhost:function(e){this.ghostType&&(this.ghostType.active=e)},setImageTag:function(e,t){this.imageType&&(this.imageType.active=e,this.imageType.setRotation(t))},hide:function(){this.node.active=!1},showBg:function(){this.node.active=!0,this.getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("bg")&&(this.node.getChildByName("bg").active=!0)},show:function(){this.node&&(this.node.active=!0),this.getComponent(cc.Sprite).enabled=!0,this.node.getChildByName("bg")&&(this.node.getChildByName("bg").active=!1)},isMeTurn:function(){return 0===cc.mj.Data.turnFlag},mopaiAction:function(e){if(this.node.stopAllActions(),this.node.angle=0,this.hu=!1,this.sitIndex>0)return this.showBg(),void this.node.runAction(cc.sequence(cc.delayTime(.02),cc.callFunc(this.show,this)));this.node.y=110,cc.mj.Data.mopaiAction=!0,this.node.runAction(cc.sequence(cc.rotateTo(.02,0),cc.moveTo(.02,this.node.x,0),cc.moveTo(.008,this.node.x,12).easing(cc.easeOut(5)),cc.moveTo(.005,this.node.x,0),cc.callFunc(function(){cc.mj.Data.mopaiAction=!1,setTimeout(function(){e&&e()},1e3)})))},putCard:function(){var e=this.oldId;if(this.verifyPutCardCallBack&&this.verifyPutCardCardType!=G_INVALID_BYTE_VALUE){for(var t=this.handCardComponent.getComponentsInChildren("MJCommon_Card"),i=!1,o=0;o<t.length;o++){var n=t[o].id;if(Math.floor(n/10)==this.verifyPutCardCardType){i=!0;break}}if(Math.floor(e/10)!=this.verifyPutCardCardType&&i)return createTips("\u7f3a\u724c\u6ca1\u6253\u5b8c\u4e4b\u524d\u4e0d\u80fd\u6253\u5176\u4ed6\u724c"),void(this.verifyPutCardCallBack&&this.verifyPutCardCallBack())}console.log("iiiiiiiiiiiiiiiiiiiii"),this.emitPai(!1),this.isSelected=!1,cc.mj.Data.curPutCard=this,GameEvent.emit("reSendPutPai",{card:e}),this.putCardCallBack&&this.putCardCallBack(this.id)},upCardPosition:function(){this.node.y=30},downCardPosition:function(){this.node.y=0},setDingQue:function(e){e?(this.node.color=this.grayColor2,this.dingQueFlag=!0):(this.node.color=this.whiteColor,this.dingQueFlag=!1)},reset:function(){this.oldPos||this.onLoad(),this.tingCardNode&&(this.tingCardNode.active=!1),this.tingFlag=!1,this.ghostType&&(this.ghostType.active=!1),this.imageType&&(this.imageType.active=!1),this.huType&&(this.huType.active=!1),this.arryTouchFlag=!1,this.isTouch=!1,this.index=-1,this.sitIndex=0,this.node.angle=0,this.handTrue=!1,this.isSelected=!1,this.isUnEnabled=!1,this.arryTouchFlag=!1,this.node.setPosition(this.oldPos),this.isThreeSelected=!1,this.hu=!1,this.node.color=this.whiteColor,this.dingQueFlag=!1,this.id=-1,this.node.active=!1,this.moveFlag=!1},onDestroy:function(){GameEvent.off("selectPai",this.selectPai,this),GameEvent.off("closeCard",this.closeCard,this)}}),cc._RF.pop()},{}],MYAudioEngine:[function(e,t){"use strict";cc._RF.push(t,"92c38gl+EFK06J+QRlZmtui","MYAudioEngine"),t.exports=cc.Class({ctor:function(){this.effectClipMap=new Map,this.musicStatus=cc.sys.localStorage.getItem(G_MUSIC_SWITCH),null==this.musicStatus&&(cc.sys.localStorage.setItem(G_MUSIC_SWITCH,"1"),this.musicStatus="1"),this.soundStatus=cc.sys.localStorage.getItem(G_SOUND_SWITCH),null==this.soundStatus&&(cc.sys.localStorage.setItem(G_SOUND_SWITCH,"1"),this.soundStatus="1"),this.soundResList={btnClick:"btn_click"},this.bgmVolume=.3,this.sfxVolume=cc.sys.localStorage.getItem(G_SOUND_SIZE)||1,cc.audioEngine.setMusicVolume(this.bgmVolume),cc.audioEngine.setEffectsVolume(this.sfxVolume)},initRes:function(){var e=this,t=function(t){var i=e.soundResList[t],o=window.BundleName;cc.assetManager.loadBundle(o,function(o,n){n.load(i,function(i,o){i&&console.err("load sound err : "+i),e.soundResList[t]=o})})};for(var i in this.soundResList)t(i)},playMusic:function(e,t){null==t&&(t=!0),this.bgMusicFile=e,this.bgMusicFileLoop=t,"1"==this.musicStatus?(this.isPlayedMusic=!0,cc.audioEngine.playMusic(e,t)):this.isPlayedMusic=!1},playEffect:function(e,t){var i=this;if(null==t&&(t=!1),"1"==this.soundStatus)if("string"==typeof e)if(this.effectClipMap.get(e))cc.audioEngine.playEffect(this.effectClipMap.get(e),t);else{var o=window.BundleName;cc.assetManager.loadBundle(o,function(o,n){n.load(e,cc.AudioClip,function(o,n){if(o)return console.error(o);cc.audioEngine.playEffect(n,t),i.effectClipMap.set(e,n)})})}else cc.audioEngine.playEffect(e,t)},setEffectsVolume:function(e){this.sfxVolume=e,cc.audioEngine.setEffectsVolume(this.sfxVolume)},setSoundStatus:function(e){this.soundStatus=e?"1":"0",cc.sys.localStorage.setItem(G_SOUND_SWITCH,this.soundStatus)},getSoundStatus:function(){return"1"==this.soundStatus},setMusicStatus:function(e){this.musicStatus=e?"1":"0",cc.sys.localStorage.setItem(G_MUSIC_SWITCH,this.musicStatus)},getMusicStatus:function(){return"1"==this.musicStatus},pauseMusic:function(){cc.audioEngine.pauseMusic()},stopMusic:function(){cc.audioEngine.stopMusic()},resumeMusic:function(){this.isPlayedMusic?this.getMusicStatus()?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic():this.playMusic(this.bgMusicFile,this.bgMusicFileLoop)},getSound:function(e){return this.soundResList[e]},playClickSound:function(){}}),cc._RF.pop()},{}],MainCanvas:[function(e,t,i){"use strict";cc._RF.push(t,"1b683DKfE1HhJLYkd3k8a9S","MainCanvas");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=e("./uni.webview.1.5.6.js"),h=new(e("LoginLogic")),l=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingNode=null,e.playBtn=null,e.selectNode=null,e.toggleContainer=null,e.prefabs=[],e}return n(i,t),i.prototype.onLoad=function(){window.addEventListener("message",function(e){var t=e.data;console.log("\u6765\u81eauniapp\u7684\u6d88\u606f:",t)}),window.BundleName="HZMJ",this.loadingNode.active=!0,this.playBtn.active=!1,this.selectNode.active=!1,window.WechatAppID="wx85e582fb8e80518f",cc.loadData={},cc.loadData.loadGamePreData=[],cc.loadData.loadGamePreDataIndex=0,window.prefabMap=new Map,this.prefabs.forEach(function(e){window.prefabMap.set("prefab/"+e.name,e)}),cc.Tween.stopAllByTarget(this.loadingNode),cc.tween(this.loadingNode).by(1,{angle:360}).repeatForever().start();var e=cc.view.getFrameSize();cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),e.height>e.width&&cc.view.setFrameSize(e.height,e.width),cc.game.setFrameRate(45),window.GameEvent=new cc.EventTarget,window.ConfigDataManager.getConfigData(),document.title=window.G_APP_NAME_CH,cc.sys.localStorage.setItem(window.G_LIVE_BROADCAST,1),this.getGameList()},i.prototype.start=function(){window.login?(cc.Tween.stopAllByTarget(this.loadingNode),this.showSelectPanel()):this.doLoginLobby("Clark001","e10adc3949ba59abbe56e057f20f883e",1,"123456"),console.log("window.prefabMap:",window.prefabMap)},i.prototype.showSelectPanel=function(){this.loadingNode.active=!1,this.playBtn.active=!0,this.selectNode.active=!0},i.prototype.tryLogin=function(){var e=this,t=cc.sys.localStorage.getItem("userData");if(t)this.doLoginWechat(JSON.parse(t));else{var i=this.GetRequest(),o=i?i.code:void 0;o?(console.log("code = ",o),console.log("window['ConfigDataManager'].getWxUserInfo:",o),console.log("window['ConfigDataManager']:",window.ConfigDataManager),window.ConfigDataManager.getWxUserInfo(o,function(t){console.log("wechatLogin"),console.log(t);var i=t,o={};o.unionid=i.openid,o.regType=window.E_RegType.MOB,o.regWay=window.E_RegWay.WECHAT;var n,a=i.nickname;a=(n=a).indexOf("%")>-1?n.replace(/%/g,"%25"):n;var s=encodeURI(a);o.acc=s,o.psw=window.hex_md5(i.openid),o.regStatus=window.E_RegStatus.REG,o.sex=1==i.sex?1:0,o.headURL=i.headimgurl,cc.sys.localStorage.setItem("userData",JSON.stringify(o)),e.doLoginWechat(o)},function(e){console.error("\u83b7\u53d6\u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u5931\u8d25:",e)})):this.tryWechatLogin()}},i.prototype.doLoginWechat=function(e){var t=this;h.accountRegist(e,function(e,i,o){e&&window.MatchManager.requestCheckPointMatchInfo(function(e){console.log("requestCheckPointMatchInfo:",e),window.LobbySocket.setLoginDelegate(t),h.loginLobby(i,o),t.showSelectPanel(),window.login=!0},i)})},i.prototype.GetRequest=function(){var e=window.location.search,t={};if(-1!=e.indexOf("?"))for(var i=e.substr(1).split("&"),o=0;o<i.length;o++)t[i[o].split("=")[0]]=unescape(i[o].split("=")[1]);return t},i.prototype.tryWechatLogin=function(){var e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx85e582fb8e80518f&redirect_uri="+encodeURIComponent("https://new.ouone.hmzb.top/HZMJ")+"&response_type=code&scope=snsapi_userinfo&state=1&forcePopup=true#wechat_redirect";window.location.replace(e)},i.prototype.onClickPlayBtn=function(){u.postMessage({data:{msg:"hello uniapp"}})},i.prototype.onClickChuangGuanBtn=function(){var t=new(e("LobbyLogic")),i=globalThis.MatchManager.getCurCheckPointInfo().config[0];null!=i&&(t.getMyInfo().money<i.cost?console.error("\u91d1\u5e01\u4e0d\u8db3"):t.requestLoaderCheckLogon(function(){t.enterGame(18,1,1)}))},i.prototype.getGameList=function(){var e=function(e){if(0!==e.length){var t=function(){}.bind(this);window.RoomListManager.requestAllRoomList(t)}}.bind(this);window.GameListManager.requestGameList(e)},i.prototype.doLoginLobby=function(e,t,i,o){var n=function(e,t,o){var n=this;e&&function(){if(window.LobbySocket.setLoginDelegate(n),i===window.E_RegStatus.LOGIN)h.loginLobby(t,o);else{var e=function(e){"\u786e \u5b9a"===e&&h.loginLobby(t,o)}.bind(n),a={msg:"\u6ce8\u518c\u6210\u529f, \u76f4\u63a5\u767b\u5f55\u5427",btn1:"\u786e \u5b9a",btn2:"\u53d6 \u6d88"};a.callbackFun=e,window.createMsgBox(a)}cc.Tween.stopAllByTarget(n.loadingNode),n.showSelectPanel(),window.login=!0}()}.bind(this),a={unionid:""};a.regType=window.E_RegType.PC,a.regWay=window.E_RegWay.COMMON,a.acc=e,a.psw=t,a.regStatus=i,a.sex=window.E_UserSex.MALE,a.headURL="",cc.sys.localStorage.setItem("userData",JSON.stringify(a)),h.accountRegist(a,n,o)},a([c(cc.Node)],i.prototype,"loadingNode",void 0),a([c(cc.Node)],i.prototype,"playBtn",void 0),a([c(cc.Node)],i.prototype,"selectNode",void 0),a([c(cc.ToggleContainer)],i.prototype,"toggleContainer",void 0),a([c(cc.Prefab)],i.prototype,"prefabs",void 0),a([r],i)}(cc.Component);i.default=l,cc._RF.pop()},{"./uni.webview.1.5.6.js":"uni.webview.1.5.6",LobbyLogic:"LobbyLogic",LoginLogic:"LoginLogic"}],MatchCheckPointInfo:[function(e,t){"use strict";cc._RF.push(t,"cbda15OF2dNU6ukN+2N1Wrz","MatchCheckPointInfo"),cc.Class({extends:cc.Component,properties:{checkPointLabel:cc.Label},init:function(e){this.checkPointLabel.string=e.checkPointNum+"/"+e.count}}),cc._RF.pop()},{}],MatchCheckPointIntroLayer:[function(e,t){"use strict";cc._RF.push(t,"a0cbanIEJZOTJ06lVhorr75","MatchCheckPointIntroLayer"),cc.Class({extends:e("BaseLayer"),properties:{Button_Rule:cc.Button,Button_Detail:cc.Button,Image_Rule:cc.Node,Panel_Detail:cc.Node,ListView_Reward:cc.ScrollView,Panel_Reward:cc.Node},init:function(){this.LobbyLogic=new(e("LobbyLogic")),this.selectedButtonType=1;for(var t=1;t<=7;t++)this[tools.stringFormat("Text_{0}",t)]=this.Panel_Detail.getChildByName(tools.stringFormat("Text_{0}",t)).getComponent(cc.Label),this[tools.stringFormat("Text_{0}",t)].node.active=!1;this.Panel_Reward.active=!1,this.Panel_Detail.active=!1,this.Image_Rule.active=!1,this.initSelectedButton(),this.requestRewardInfo()},initSelectedButton:function(){if(this.Button_Rule.interactable=!(2==this.selectedButtonType),this.Button_Detail.interactable=!(1==this.selectedButtonType),this.Image_Rule.active=2==this.selectedButtonType,this.Panel_Detail.active=1==this.selectedButtonType,1==this.selectedButtonType){for(var e=1;e<=2;e++)this[tools.stringFormat("Text_{0}",e)].node.active=!0;this[tools.stringFormat("Text_{0}",1)].string=tools.stringFormat("\u6bd4\u8d5b\u540d\u79f0\uff1a{0}","\u95ef\u5173\u8d5b"),this[tools.stringFormat("Text_{0}",2)].string=tools.stringFormat("\u6bd4\u8d5b\u7c7b\u578b\uff1a{0}","\u95ef\u5173\u8d5b")}},initRewardListView:function(e){var t=function(e,t,i){var o=t.getChildByName("Text_Rank").getComponent(cc.Label),n=t.getChildByName("AtlasLabel_Gold").getComponent(cc.Label);o.string=i.name.replace("\u95ef\u5173\u8d5b","")+i.checkpointNumber+"\u5173",n.string=i.entryFee}.bind(this);F_InitListView(e,t,this.ListView_Reward,this.Panel_Reward,1)},requestRewardInfo:function(){var e=this;this.LobbyLogic.requestCheckPointConfig(function(t){for(var i=[],o=0;o<t.length;o++)for(var n=0;n<t[o].length;n++)i.push(t[o][n]);e.initRewardListView(i)})},doButton_DetailClick:function(){1!=this.selectedButtonType&&(this.selectedButtonType=1,this.initSelectedButton())},doButton_RuleClick:function(){2!=this.selectedButtonType&&(this.selectedButtonType=2,this.initSelectedButton())}}),cc._RF.pop()},{BaseLayer:"BaseLayer",LobbyLogic:"LobbyLogic"}],MatchCheckPointResultLayer:[function(e,t,i){"use strict";cc._RF.push(t,"700e8Y/XLpJ9JjeAgt5Jocd","MatchCheckPointResultLayer");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,r,c=e("../../../framework/PoolMgr"),u=e("../../../Games/HZMJ/module/HZMJ_HuItem"),h=e("../../../Games/HZMJ/module/HZMJ_PlayerInfoItem"),l=e("../../ui/SpriteArray"),d=e("Tools"),f=e("BaseLayer"),_=cc._decorator,g=_.ccclass,p=_.property;(function(e){e[e["\u7ee7\u7eed"]=0]="\u7ee7\u7eed",e[e["\u664b\u7ea7"]=1]="\u664b\u7ea7",e[e["\u6dd8\u6c70"]=2]="\u6dd8\u6c70",e[e["\u95ef\u5173\u6210\u529f"]=3]="\u95ef\u5173\u6210\u529f"})(s||(s={})),cc.Enum(s),function(e){e[e["\u6d41\u5c40"]=0]="\u6d41\u5c40",e[e["\u80dc\u5229"]=1]="\u80dc\u5229",e[e["\u5931\u8d25"]=2]="\u5931\u8d25"}(r||(r={})),cc.Enum(r);var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelItemContentNode=null,t.levelItemNode=null,t.levelItemIntervalNode=null,t.levelUpTip=null,t._resultType=s.\u7ee7\u7eed,t.nextBtn=null,t.scoreProcessLabel=null,t.rewardNode=null,t.rewardLabel=null,t.contentBGNode=null,t.levelBGNode=null,t.players=null,t.playInfos=null,t.huItem=null,t.costTipNode=null,t.costLabel=null,t.costTipLabel=null,t.spines=new Array,t.maxLevel=0,t.passLevel=0,t.nowLevel=0,t.maxScore=0,t.score=0,t.resultType=0,t.rewardGiftCard=0,t.reChallengeCost=0,t._delegate=null,t}return n(t,e),t.prototype.onLoad=function(){this.resize()},t.prototype.start=function(){},t.prototype.resize=function(){cc.Canvas.instance;var e=cc.view.getFrameSize();console.log("--\u89c6\u56fe\u8fb9\u6846\u5c3a\u5bf8\uff1aw:"+e.width+"  h:"+e.height);var t=cc.view.getDesignResolutionSize();if(console.log("--\u8bbe\u8ba1\u5206\u8fa8\u7387\uff1a"+t.width+"    h: "+t.height),t||(t=cc.view.getDesignResolutionSize()),this.contentBGNode=this.node.getChildByName("center"),e.width/e.height>t.width/t.height){var i=e.height*(t.width/t.height);o=(o=e.width/i)>1.13?1.13:o,this.contentBGNode.scaleX=o,this.contentBGNode.scaleY=o,console.log("GameOverUI \u9002\u914d \u957f\u5c4f \u56fa\u5b9a\u9ad8\u5ea6",t.width,t.height,e.width,e.height,o)}else{var o=e.height/t.height;console.log("GameOverUI \u9002\u914d \u77ed\u5c4f \u56fa\u5b9a\u5bbd\u5ea6",t.width,t.height,e.width,e.height)}},t.prototype.init=function(e,t,i,o){this._delegate=e,i||(i=globalThis.gameResultInfo),o=o||globalThis.MatchManager.getCurCheckPointInfo();var n=function(e,t,i){var o=t?t.resultType:0;console.log(d.getCurTime()+" \u51b2\u5173\u7ed3\u7b97","\u51b2\u5173\u7ed3\u679c:",JSON.stringify(e),"\u6e38\u620f\u5c0f\u7ed3\u7b97:",JSON.stringify(t),"\u914d\u7f6e:",JSON.stringify(i)),this.showCheckPointResult(e,i,o),this.showGameEndResult(t)}.bind(this);o?n(t,i,o):globalThis.MatchManager.requestCheckPointMatchInfo(function(){o=globalThis.MatchManager.getCurCheckPointInfo(),n(t,i,o)})},t.prototype.showCheckPointResult=function(e,t,i){var o=this,n=t.config[t.config.length-1];this.resultType=null==e?s.\u95ef\u5173\u6210\u529f:e.bAgain;var a=this.resultType==s.\u7ee7\u7eed?i:this.resultType+2;if(null==e)this.maxLevel=n.levelID,this.passLevel=n.levelID,this.score=n.score,this.maxScore=n.score,this.rewardGiftCard=n.award,this.reChallengeCost=t.config[0].cost;else{this.nowLevel=1==e.bAgain?e.checkPointNum-1:e.checkPointNum;var r=t.config[this.nowLevel];this.maxLevel=n.levelID,this.passLevel=1==e.bAgain?this.nowLevel:this.nowLevel-1,this.score=e.score,r||n.levelID==this.nowLevel&&(r=t.config[this.nowLevel-1]),this.maxScore=r.score,this.rewardGiftCard=r.award,this.reChallengeCost=r.cost}this.levelUpTip.node.active=!1,this.scoreProcessLabel.node.active=!1,this.costTipNode.active=!1,this.rewardNode.active=!1,this.spines.forEach(function(e,t){e.node.active=a==t,a==t&&o.playSkelenAnimation(e,"KaiShi",!1,function(){o.playSkelenAnimation(e,"XunHuan",!0,null)})}),this.resultType!=s.\u95ef\u5173\u6210\u529f&&(this.scoreProcessLabel.node.active=!0,this.scoreProcessLabel.string=this.score+"/"+this.maxScore),this.resultType!=s.\u95ef\u5173\u6210\u529f&&(this.levelUpTip.node.active=!0,this.levelUpTip.string="\u6ee1"+this.maxScore+"\u5206\u53ef\u664b\u7ea7"),this.resultType==s.\u95ef\u5173\u6210\u529f&&(this.rewardNode.active=!0,this.rewardLabel.string="X"+this.rewardGiftCard),this._showProgress(this.maxLevel,this.passLevel),this.resultType!=s.\u95ef\u5173\u6210\u529f&&this.resultType!=s.\u6dd8\u6c70||(this.levelUpTip.node.active=!1,this.scoreProcessLabel.node.active=!1,this.costTipNode.active=!0,this.costTipLabel.string=this.resultType==s.\u6dd8\u6c70?"\u590d\u6d3b\u8d39\u7528\uff1a":"\u91cd\u65b0\u6311\u6218\u8d39\u7528\uff1a",this.costLabel.string="X"+this.reChallengeCost/100)},t.prototype.showGameEndResult=function(e){this.players.children.forEach(function(e){e.active=!1}),e?(this.playInfos.init(e.playsData),this.huItem.init(e.playsData)):console.log("....\u4f60\u600e\u4e48\u6ca1\u6709\u6570\u636e\uff0cbug\u4e86\u90fd")},t.prototype._showProgress=function(e,t){if(console.log("showProgress maxLevel:"+e+" passLevel:"+t),this.levelItemContentNode.active=!0,!(e<=0)){for(var i=0,o=this.levelItemContentNode.children;i<o.length;i++)(a=o[i]).active=!1,c.PoolMgr.instance.putNode(a);this.levelItemContentNode.removeAllChildren();for(var n=1;n<=e;n++){var a;(a=c.PoolMgr.instance.getNode(this.levelItemNode,this.levelItemContentNode)).active=!0;var s=null;n<e&&((s=c.PoolMgr.instance.getNode(this.levelItemIntervalNode,this.levelItemContentNode)).active=!0),t>=n?(a.getChildByName("bright").active=!0,a.getChildByName("text").getComponent(cc.Label).string=""+n,a.getChildByName("text").color=cc.color(255,222,0),s&&(s.getChildByName("bright").active=!0)):(a.getChildByName("bright").active=!1,a.getChildByName("text").getComponent(cc.Label).string=""+n,a.getChildByName("text").color=cc.color(135,139,178),s&&(s.getChildByName("bright").active=!1))}this.levelBGNode&&(this.levelBGNode.active=!0)}},t.prototype.doButton_BackClick=function(){this._delegate.doLeftRoom()},t.prototype.doButton_NextClick=function(){if(this._delegate)switch(this.resultType){case s.\u7ee7\u7eed:case s.\u664b\u7ea7:this._delegate.sendAgreeGame(),this.node.destroy();break;case s.\u6dd8\u6c70:this._delegate.loginRoom(18,this.nowLevel,1);break;case s.\u95ef\u5173\u6210\u529f:this._delegate.loginRoom(18,1,1)}},t.prototype.playSkelenAnimation=function(e,t,i,o){e.loop=i,e.animation=t,e.setCompleteListener(function(){o&&this.scheduleOnce(o,.2)}.bind(this))},a([p(cc.Node)],t.prototype,"levelItemContentNode",void 0),a([p(cc.Node)],t.prototype,"levelItemNode",void 0),a([p(cc.Node)],t.prototype,"levelItemIntervalNode",void 0),a([p({type:cc.Label})],t.prototype,"levelUpTip",void 0),a([p(l.default)],t.prototype,"nextBtn",void 0),a([p({type:cc.Label,tooltip:"\u79ef\u5206\u8fdb\u5ea6"})],t.prototype,"scoreProcessLabel",void 0),a([p({type:cc.Node,tooltip:"\u5956\u52b1\u793c\u5238\u6839\u8282\u70b9"})],t.prototype,"rewardNode",void 0),a([p({type:cc.Label,tooltip:"\u5956\u52b1\u793c\u5238\u6570\u91cf"})],t.prototype,"rewardLabel",void 0),a([p(cc.Node)],t.prototype,"contentBGNode",void 0),a([p(cc.Node)],t.prototype,"levelBGNode",void 0),a([p(cc.Node)],t.prototype,"players",void 0),a([p(h.default)],t.prototype,"playInfos",void 0),a([p(u.default)],t.prototype,"huItem",void 0),a([p({type:cc.Node,tooltip:"\u91cd\u65b0\u6311\u6218\u6d88\u8017\u6839\u8282\u70b9"})],t.prototype,"costTipNode",void 0),a([p({type:cc.Label,tooltip:"\u590d\u6d3b\u6216\u91cd\u65b0\u6311\u6218\u6d88\u8017"})],t.prototype,"costLabel",void 0),a([p(cc.Label)],t.prototype,"costTipLabel",void 0),a([p({type:[sp.Skeleton],tooltip:"\u80cc\u666f\u9aa8\u9abc\u52a8\u753b"})],t.prototype,"spines",void 0),a([g],t)}(f);i.default=m,cc._RF.pop()},{"../../../Games/HZMJ/module/HZMJ_HuItem":"HZMJ_HuItem","../../../Games/HZMJ/module/HZMJ_PlayerInfoItem":"HZMJ_PlayerInfoItem","../../../framework/PoolMgr":"PoolMgr","../../ui/SpriteArray":"SpriteArray",BaseLayer:"BaseLayer",Tools:"Tools"}],MatchDeskInfo:[function(e,t){"use strict";cc._RF.push(t,"952ebuv8CFCBqp95Lh/zm+o","MatchDeskInfo");cc.Class({extends:e("BaseLayer"),properties:{list_scroll:cc.ScrollView,list_item:cc.Node},start:function(){},init:function(e){this.matchDeskInfo=e,this.list_item.active=!1,this.matchDeskInfo.DeskInfo&&this.matchDeskInfo&&this.initListViewDeskInfo(this.matchDeskInfo.DeskInfo)},initListViewDeskInfo:function(e){cc.error("HHHHHHHHHHHHHHHHHHH1",e);var t=function(e,t,i,o){this.onAddItemCallback(e,t,i,o)}.bind(this);F_InitListView(e,t,this.list_scroll,this.list_item,5)},onAddItemCallback:function(e,t,i,o){var n=t.getChildByName("Button_Desk"),a=n.getChildByName("Text_No").getComponent(cc.Label),s=n.getChildByName("Text_Status").getComponent(cc.Label);a.string=Number(o)+1,n.interactable=!1,a.node.color=new cc.Color(97,0,0),s.node.color=new cc.Color(97,0,0),0==i.status?(s.string="\u6bd4\u8d5b\u4e2d",n.interactable=!0,a.node.color=new cc.Color(255,0,0),s.node.color=new cc.Color(255,0,0)):1==i.status?s.string="\u5df2\u7ed3\u675f":2==i.status?s.string="\u7b49\u5f85\u4e2d":s.string="\u65e0\u72b6\u6001"}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchExpUserLevelInfo:[function(e,t){"use strict";cc._RF.push(t,"ec264aK8G9LW4+yP2VC6TpZ","MatchExpUserLevelInfo"),cc.Class({extends:cc.Component,properties:{matchRankLabel:cc.RichText},init:function(e){var t=getRankInfo(e.gameExp),i=getNextRankInfo(e.gameExp);this.matchRankLabel.string="<color = #ffffff>\u7ecf\u9a8c\u503c</c><color=#ffb573>"+(t.gameExp+1)+"</c><color=#ffffff>\u7b49\u7ea7:</color><color=#87d6ff>"+t.remark+"</color>\n <color = #ffffff>\u60a8\u8ddd\u79bb</c><color=#ffb573>"+i.remark+"</c><color=#ffffff>\u8fd8\u5dee</color><color=#87d6ff>"+(i.gameExp-e.gameExp)+"</color><color=#ffffff>\u7ecf\u9a8c</color>"}}),cc._RF.pop()},{}],MatchGameRank:[function(e,t){"use strict";cc._RF.push(t,"5a2c00pVPtGKrdAp5YZJQCD","MatchGameRank"),cc.Class({extends:e("BaseLayer"),properties:{AtlasLabel_Score_Win:cc.Label,AtlasLabel_Score_Lose:cc.Label,Image_No_Rank:cc.Node,Image_Rank:cc.Node,Text_Name:cc.Label,ListView_Rank:cc.ScrollView,Panel_Rank:cc.Node,Image_Avata:cc.Node,AtlasLabel_Rank:cc.Label},init:function(){var e=MatchManager.getMyMatchGameInfo(),t=function(e){console.log(e),this.initMyRankInfo(e),this.initRankListView(e.rankInfo)}.bind(this);GameSocket.requestMatchRankInfo(e.llPartOfMatchID,t)},initMyRankInfo:function(e){var t=UserInfoManager.getMyInfo().userID,i=e.rank,o=e.score;o>0?(this.AtlasLabel_Score_Win.node.active=!0,this.AtlasLabel_Score_Win.string="+"+F_GetMoneyDisplay(o)):(this.AtlasLabel_Score_Lose.node.active=!0,this.AtlasLabel_Score_Lose.string=F_GetMoneyDisplay(o)),this.Text_Name.string="",i>20?this.Image_No_Rank.active=!0:i<=3&&i>0?(this.Image_Rank.active=!0,this.Image_Rank.loadTexture(tools.stringFormat("Match/MatchReward/{0}",i))):(this.AtlasLabel_Rank.node.active=!0,this.AtlasLabel_Rank.string=i);var n=function(e){this.Text_Name.string=tools.getCutStringByCount(e.name,5),this.Text_Name.node.active=!0;var t=function(e){this.Image_Avata.active=!0,this.Image_Avata.getComponent(cc.Sprite).spriteFrame=e}.bind(this);AvatarManager.requestHeadRes(e.headURL,e.userID,t,this.Image_Avata)}.bind(this);UserInfoManager.requestUserInfoByUserID(t,n)},initRankListView:function(e){var t=function(e,t,i,o){var n=t.getChildByName("Image_Rank"),a=t.getChildByName("AtlasLabel_Rank").getComponent(cc.Label),s=t.getChildByName("Text_Name").getComponent(cc.Label),r=t.getChildByName("Image_Avata"),c=t.getChildByName("AtlasLabel_Score_Win").getComponent(cc.Label),u=t.getChildByName("AtlasLabel_Score_Lose").getComponent(cc.Label);c.node.active=!1,u.node.active=!1,s.string="",s.string=tools.getCutStringByCount(i.name,5),i.score>0?(c.node.active=!0,c.string="+"+F_GetMoneyDisplay(i.score)):(u.node.active=!0,u.string=F_GetMoneyDisplay(i.score)),n.active=!1,a.node.active=!1,o<=3?(n.active=!0,n.loadTexture(tools.stringFormat("Match/MatchReward/{0}",o))):(a.node.active=!0,a.string=o),AvatarManager.requestHeadRes(i.headURL,i.userID,function(e){r.getComponent(cc.Sprite).spriteFrame=e},r)}.bind(this);F_InitListView(e,t,this.ListView_Rank,this.Panel_Rank,1)},start:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchItem:[function(e,t,i){"use strict";cc._RF.push(t,"70c68PBseRHDbMl6r2y4gUj","MatchItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=e("Tools"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signUpNum=null,t.matchStartTimeLabel=null,t.leftTimesLabels=new Array,t.enrollCostLabel=null,t.signUpBtn=null,t.cancelSignUpBtn=null,t.stopSignUpBtn=null,t._matchId=0,t._leftTime=0,t._currentTime=0,t._endEnrollTime=0,t._isSignUp=!1,t}return n(t,e),t.prototype.start=function(){},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},t.prototype.init=function(e){console.log(u.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u573a\u6b21\u5217\u8868 item:",e),this._matchId=e.id,this.signUpNum.string="<color=#ffffff>\u5f53\u524d\u62a5\u540d\u4eba\u6570 <color=#ff0000>"+e.sign_up_people+"</color>/"+e.sign_up_max+" </c>",this.matchStartTimeLabel.string="\u6bd4\u8d5b\u65f6\u95f4 "+e.start_time,this._endEnrollTime=parseInt(new Date(e.match_date+" "+e.people_end).getTime()/1e3+""),this.enrollCostLabel.string=u.stringFormat("X{0}",e.game_money+e.fee),0==e.sign_up_status?(this.signUpBtn.active=!0,this.cancelSignUpBtn.active=!1,e.fee<=0&&(this.enrollCostLabel.string="\u514d\u8d39")):(this.cancelSignUpBtn.active=!0,this.signUpBtn.active=!1),this._leftTime=e.seconds,this.unscheduleAllCallbacks(),this._endEnrollTime=e.match_time-300,this._leftTime>1?(this._leftTime-300<=0&&(this.signUpBtn.active=!1,this.cancelSignUpBtn.active=!1,this.stopSignUpBtn.active=!0),this.schedule(this._matchTimeSchedule.bind(this),1,cc.macro.REPEAT_FOREVER)):(this._showLeftTime(0),this.signUpBtn.active=!1,this.cancelSignUpBtn.active=!1,this.stopSignUpBtn.active=!0)},t.prototype._matchTimeSchedule=function(){this._leftTime=this._leftTime-1,this._currentTime=this._currentTime+1,this._leftTime<=300||this._endEnrollTime-this._currentTime<=0?(this.signUpBtn.active=!1,this.cancelSignUpBtn.active=!1,this.stopSignUpBtn.active=!0):this.stopSignUpBtn.active=!1,this._showLeftTime(this._leftTime),this._leftTime<=0&&this.unschedule(this._matchTimeSchedule.bind(this))},t.prototype._showLeftTime=function(e){if(e>1){var t=e,i=(Math.floor(t/3600),Math.floor(t/3600)),o=(Math.floor(t/60%60),Math.floor(t/60%60)),n=(Math.floor(t%60),Math.floor(t%60)),a=[];a.push((u.fillZero2(i,1)+"").substr(0,1)),a.push((u.fillZero2(i,1)+"").substr(1,1)),a.push((u.fillZero2(o,1)+"").substr(0,1)),a.push((u.fillZero2(o,1)+"").substr(1,1)),a.push((u.fillZero2(n,1)+"").substr(0,1)),a.push((u.fillZero2(n,1)+"").substr(1,1));for(var s=0;s<6;s++)this.leftTimesLabels[s].string=a[s]}else for(var r=0,c=this.leftTimesLabels;r<c.length;r++)c[r].string="0"},t.prototype.onEnrollBtnClick=function(){var e=this;if(0!=this.signUpBtn.active){var t={msg:"\u5c06\u8f6c\u6362\u4f59\u989d\u4e3a\u6bd4\u8d5b\u7b79\u7801?",btn1:"\u786e\u5b9a",btn2:"\u53d6\u6d88",callbackFun:function(t){"\u786e\u5b9a"==t&&void 0!==e._matchId&&(console.log(u.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u8bf7\u6c42\u62a5\u540d matchid:"+e._matchId),globalThis.MatchManager.requestMatchEnroll(e._matchId,function(){console.log(u.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u8bf7\u6c42\u62a5\u540d matchid:"+e._matchId+"\u6210\u529f"),globalThis.createTips("\u62a5\u540d\u6210\u529f"),e.cancelSignUpBtn.active=!0,e.signUpBtn.active=!1}))}};globalThis.createMsgBox(t)}else globalThis.createTips("\u672c\u573a\u6bd4\u8d5b\u5df2\u7ecf\u62a5\u540d")},t.prototype.onCancelEnrollBtnClick=function(){var e=this,t={msg:"\u53d6\u6d88\u6bd4\u8d5b\u7b79\u7801\u5c06\u9000\u56de\uff0c\u4f46\u62a5\u540d\u8d39\u4e0d\u9000\u56de?",btn1:"\u786e\u5b9a",btn2:"\u53d6\u6d88",callbackFun:function(t){"\u786e\u5b9a"==t&&void 0!==e._matchId&&(console.log(u.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u8bf7\u6c42\u53d6\u6d88\u62a5\u540d matchid:"+e._matchId),globalThis.MatchManager.requestMatchEnrollCancel(e._matchId,function(){console.log(u.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u8bf7\u6c42\u53d6\u6d88\u62a5\u540d matchid:"+e._matchId+" \u6210\u529f"),globalThis.createTips("\u53d6\u6d88\u62a5\u540d\u6210\u529f"),e.cancelSignUpBtn.active=!1,e.signUpBtn.active=!0}))}};globalThis.createMsgBox(t)},t.prototype.onStopEnrollBtnClick=function(){this._leftTime<=0?globalThis.createTips("\u5df2\u7ecf\u8fc7\u4e86\u62a5\u540d\u65f6\u95f4"):globalThis.createTips("\u8ddd\u79bb\u5f00\u8d5b5\u5206\u949f\u5185\u4e0d\u80fd\u62a5\u540d")},a([c(cc.RichText)],t.prototype,"signUpNum",void 0),a([c(cc.Label)],t.prototype,"matchStartTimeLabel",void 0),a([c([cc.Label])],t.prototype,"leftTimesLabels",void 0),a([c(cc.Label)],t.prototype,"enrollCostLabel",void 0),a([c(cc.Node)],t.prototype,"signUpBtn",void 0),a([c(cc.Node)],t.prototype,"cancelSignUpBtn",void 0),a([c(cc.Node)],t.prototype,"stopSignUpBtn",void 0),a([r],t)}(cc.Component);i.default=h,cc._RF.pop()},{Tools:"Tools"}],MatchLevelUp:[function(e,t){"use strict";cc._RF.push(t,"a155frZpppM7JktS3effu4a","MatchLevelUp"),cc.Class({extends:e("BaseLayer"),properties:{Panel_Bg_Up:cc.Node,Panel_Bg_Out:cc.Node,Panel_Bg_Rank:cc.Node,Panel_Bg_Revive:cc.Node,Text_Tips_Rank:cc.Label,Text_Tips_Share:cc.Label,Text_Tips_Share_Fail:cc.Label,Text_Rank_Out:cc.Label,Text_Rank_Out_2:cc.Label,Image_Bg_Code_Fail:cc.Node,Text_Tips_Code:cc.Label,Text_revive_infor:cc.RichText,Text_revive_Time:cc.Label,Text_revive_Round:cc.Label,Button_Revive_Success:cc.Node,Button_notRevive_Fail:cc.Node,Image_Bg_EWM:cc.Node,Image_Bg_EWM_Fail:cc.Node,Text_Tips_Code_Fail:cc.Label,AtlasLabel_Rank:cc.Label,Text_Reward:cc.Label,Text_giftCard:cc.Label,Text_Desc_Rank:cc.Label,Panel_Anim:cc.Node,Skeleton_1:sp.SkeletonData,Skeleton_2:sp.SkeletonData,Skeleton_3:sp.SkeletonData,Skeleton_4:sp.SkeletonData,Skeleton_out:sp.SkeletonData,Text_bzpm:cc.Label,Text_dqjf:cc.Label,Text_qcpm:cc.Label},init:function(e,t){this._delegate=e,this._deskInfo=t,this.Panel_Bg_Up.active=!1,this.Panel_Bg_Out.active=!1,this.Panel_Bg_Rank.active=!1,this.Panel_Bg_Revive.active=!1,this.Text_giftCard.node.active=!1,this.m_countDown=null,this.initData()},updateCurMatchCount:function(){},showAllPlayerChouMa:function(){this._delegate.node.getChildByName("Match/MatchGameRankLayer")||this.addLayer(this._delegate.node,"Match/MatchGameRankLayer",function(e){e.zIndex=G_DISMISS_ROOM_LAYER_TAG})},initData:function(){this.Text_Tips_Rank.string="",this.Text_Tips_Share.string="\u5206\u4eab\u4e8c\u7ef4\u7801\u53ec\n\u5524\u7ea2\u5305\u96e8\u3002",this.Text_Tips_Share_Fail.string="\u5206\u4eab\u4e8c\u7ef4\u7801\u53ec\n\u5524\u7ea2\u5305\u96e8\u3002";var e=this._deskInfo;if(this.llPartOfMatchID=e.llPartOfMatchID,this.iCurMatchRound=e.iCurMatchRound,this.iMaxMatchRound=e.iMaxMatchRound,0==e.type&&e.rankMatch>20){this.Panel_Bg_Out.active=!0,this.Text_Rank_Out.string=tools.stringFormat("\u7b2c {0} \u540d",e.rankMatch),this.Text_Rank_Out_2.string=e.rankMatch+" / "+e.peopleCount,GameSocket.setIsSendLogoutRoom(!0);var t=function(e){e.agent_id&&""!=e.agent_id&&e.agent_id>0&&(this.Image_Bg_Code_Fail.active=!0,this.Text_Tips_Code_Fail.string=tools.stringFormat("\u9080\u8bf7\u7801\uff1a{0}",e.agent_id)),e.invite_url||ConfigManager.getConfigStringValue("share_domain",""),e.logo_url;var t=this.Image_Bg_EWM_Fail.getContentSize();(function(e){this.Node_EWM_Fail=e,this.Image_Bg_EWM_Fail.addChild(this.Node_EWM_Fail),this.Node_EWM_Fail.setPosition(cc.p(t.width/2,.5*t.height))}).bind(this)}.bind(this);MatchManager.requestMatchInfoByID(t,e.gameMatchID),this._delegate.removeMatchNotifyLayer()}else if(1==e.type);else if(3==e.type){var i="";1==e.costResType?i="\u91d1\u8c46":5==e.type&&(i="\u793c\u5238"),this.Panel_Bg_Revive.active=!0;var o="<size=38>\u7b2c</size>";o=(o=(o=o+"<size=58>"+String(e.rankMatch)+"</size>")+"<size=38>\u540d "+String(e.matchScore)+"\u5206 \u590d\u6d3b\u8d39\u7528")+String(e.giftCard)+i+"</size>",this.Text_revive_infor.string=o,this.Text_revive_Round.string=tools.stringFormat("\u7b2c{0}\u8f6e",e.iCurMatchRound),this.Text_revive_Time.node.active=!1;var n=this;if(e.reviveRemainTime>0){var a=e.reviveRemainTime;n.Text_revive_Time.string=a,n.Text_revive_Time.node.active=!0;var s=function e(){(a-=1)<=0&&(a=0,n.unschedule(e)),n.Text_revive_Time.string=a};n.schedule(s,1),this.m_countDown=s}else n.Text_revive_Time.node.active=!1}else{e.giftCard>0&&(this.Text_giftCard.node.active=!0,this.Text_giftCard.string=tools.stringFormat("\u83b7\u5f97 {0} \u793c\u5238",e.giftCard));var r=function(t){console.log(t,"data++++++"),t.agent_id&&""!=t.agent_id&&parseInt(t.agent_id)>0&&(this.Image_Bg_Code.active=!0,this.Text_Tips_Code.string=tools.stringFormat("\u9080\u8bf7\u7801\uff1a{0}",t.agent_id)),t.invite_url||ConfigManager.getConfigStringValue("share_domain",""),t.logo_url;var i=this.Image_Bg_EWM.getContentSize();(function(e){this.Node_EWM=e,this.Image_Bg_EWM.addChild(this.Node_EWM),this.Node_EWM.setPosition(cc.p(i.width/2,.5*i.height))}).bind(this),this.Panel_Bg_Rank.active=!0,e.rankMatch<=4?this.AtlasLabel_Rank.string=tools.stringFormat("{0}/{1}",e.rankMatch,t.people_number):this.AtlasLabel_Rank.node.active=!1;for(var o=0,n=0;n<t.rewardList.length;n++){var a=t.rewardList[n];if(a.ranking_start<=e.rankMatch&&e.rankMatch<=a.ranking_end){o=a.money;break}}this.Text_Reward.string=F_GetMoneyDisplay(o),this.Text_Desc_Rank.string=tools.stringFormat("\u606d\u559c\u60a8\u5728{0}{1}\u4eba\u4e2d\u83b7\u5f97\u7b2c{2}\u540d",t.name,t.people_number,e.rankMatch)}.bind(this);MatchManager.requestMatchInfoByID(r,e.gameMatchID),GameSocket.setIsSendLogoutRoom(!0),this._delegate.removeMatchNotifyLayer();var c=e.rankMatch+"",u="animation";e.rankMatch>3&&(e.rankMatch<20||20==e.rankMatch)&&(c="4",u+=e.rankMatch),this.setAnimationPlay(this.Panel_Anim,c,u)}},QR_Code:function(e,t){var i=new QRCode(-1,QRErrorCorrectLevel.H);i.addData(e),i.make();for(var o=t.getComponent(cc.Graphics),n=t.width/i.getModuleCount(),a=t.height/i.getModuleCount(),s=0;s<i.getModuleCount();s++)for(var r=0;r<i.getModuleCount();r++){i.isDark(s,r)?o.fillColor=cc.Color.BLACK:o.fillColor=cc.Color.WHITE;var c=Math.ceil((r+1)*n)-Math.floor(r*n),u=Math.ceil((s+1)*n)-Math.floor(s*n);o.rect(Math.round(r*n),Math.round(s*a),c,u),o.fill()}},setAnimationPlay:function(e,t,i){var o=i||"animation",n=e.getChildByName(t);n&&n.removeFromParent();var a=new cc.Node,s=a.addComponent(sp.Skeleton);this.Panel_Anim.addChild(a),a.name=t,s.skeletonData=this["Skeleton_"+t],s.animation=o,s.premultipliedAlpha=!1,s.setCompleteListener(function(){var e=o+"2";"animation4"==o&&(e=o+"1"),s.animation=e}.bind(this))},backToLobby:function(){console.log("\u8fd4\u56de\u5927\u5385"),this._delegate.tableLogic.backLobby()},onClickReviveUser:function(e,t){console.log("\u590d\u6d3b");var i=Number(t),o=this,n=function(){o.unschedule(this.m_countDown),o.Button_Revive_Success.active=!1,o.Button_notRevive_Fail.active=!1,o.Text_revive_Time.string="\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\uff0c\u8bf7\u7a0d\u540e..."}.bind(this);GameSocket.requestReviveUser(this.llPartOfMatchID,this.iCurMatchRound,this.iMaxMatchRound,i,n)},onClickShare:function(){this.simpleAddLayer("prefab/GameCreaterImage")},start:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchManager:[function(e,t){"use strict";cc._RF.push(t,"e04d3liQP9O2b63XEFc34le","MatchManager"),e("DataManager");var i=e("../../Conn/ReqHttp").default,o=new(e("LobbyLogic")),n=cc.Class({ctor:function(){this.matchGameInfo={},this.matchDeskInfo={},this.myMatchGameInfo={},this.MatchDeskRankInfo={},this.matchListInfo={},this.curMatchID=-1,this.curRoundIsEnd=!1,this.myMatchAndRoomInfo={},this.curMatchGameInfo={},this.checkPointInfo=null},getCurCheckPointInfo:function(){return this.checkPointInfo||null},getCurCheckPointMatchID:function(){return this.checkPointInfo.passID||0},setCurMatchGameInfo:function(e){this.curMatchGameInfo=e},getCurMatchGameInfo:function(){return this.curMatchGameInfo},setCurMatchID:function(e){this.curMatchID=e},getCurMatchID:function(){return this.curMatchID},setCurRoundIsEnd:function(e){this.curRoundIsEnd=e},getCurRoundIsEnd:function(){return this.curRoundIsEnd},setMyMatchAndRoomInfoInfo:function(e){this.myMatchAndRoomInfo=e},getMyMatchAndRoomInfoInfo:function(){return this.myMatchAndRoomInfo},setMatchDeskRankInfo:function(e){this.MatchDeskRankInfo=e},getMatchDeskRankInfo:function(){return this.MatchDeskRankInfo},setMatchGameInfo:function(e){this.matchGameInfo=e},getMatchGameInfo:function(){return this.matchGameInfo},setMyMatchGameInfo:function(e){this.myMatchGameInfo=e},getMyMatchGameInfo:function(){return this.myMatchGameInfo},setMatchGameID:function(e){this.matchGameID=e},getMatchGameID:function(){return this.matchGameID},setMatchDeskInfo:function(e){this.matchDeskInfo=e},getMatchDeskInfo:function(){return this.matchDeskInfo},setMatchListInfo:function(e){this.matchListInfo=e},getMatchListInfo:function(){return this.matchListInfo},onMatchgameNotifyMessage:function(e){MSG_NTF_LOGON_MATCH_NOTIFY_SIGNUP_CHANGE==e.bAssistantID?this.dealMatchSignUpChangeNotifyMessage(e):MSG_NTF_LOGON_MATCH_NOTIFY_START_MATCH==e.bAssistantID?(createTips("\u6536\u5230\u4e86\u6bd4\u8d5b\u573a\u5f00\u59cb\u7684\u4fe1\u606f"),this.dealMatchStartNotifyMessage(e)):MSG_NTF_LOGON_MATCH_NOTIFY_START_CHANGE_TIME==e.bAssistantID?(createTips("\u6536\u5230\u4e86\u5b9a\u65f6\u8d5b\u4eba\u6570\u53d8\u5316\u63a8\u9001"),this.dealMatchPeopleChangeNotifyMessage(e)):MSG_NTF_LOGON_MATCH_NOTIFY_START_CHANGE_FAIL==e.bAssistantID?(createTips("\u6536\u5230\u4e86\u6bd4\u8d5b\u672a\u80fd\u5f00\u59cb\u901a\u77e5\u4fe1\u606f"),this.dealMatchFailNotifyMessage(e)):MSG_NTF_LOGON_MATCH_NOTIFY_START_MATCH_RIGHTAWAY==e.bAssistantID&&this.dealMatchStartRightAwayNotifyMessage(e)},dealMatchSignUpChangeNotifyMessage:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.gameID=e.popINT(),t.matchID=e.popINT(),t.curSignUpCount=e.popINT(),t.peopleCount=e.popINT(),t.allSignUpCount=e.popINT(),t}(t);dump(t,"dealMatchSignUpChangeNotifyMessage"),console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u62a5\u540d\u4eba\u6570\u53d8\u5316\u901a\u77e5",t)}},dealMatchStartNotifyMessage:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.gameID=e.popINT(),t.matchType=e.popBYTE(),t.matchID=e.popINT(),t.roomID=e.popINT(),t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u5f00\u59cb\u901a\u77e5",t),setTimeout(function(){o.enterGame(t.roomID)},.01),this.setCurRoundIsEnd(!0)}},dealMatchPeopleChangeNotifyMessage:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.matchID=e.popINT(),t.curSignupCount=e.popINT(),t.robotCount=e.popINT(),t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u4eba\u6570\u53d8\u5316\u901a\u77e5",t),DataNotify.onCurMatchChange(t)}},dealMatchFailNotifyMessage:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.gameID=e.popINT(),t.matchType=e.popBYTE(),t.matchID=e.popINT(),t.reason=e.popBYTE(),t}(e);console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u672a\u80fd\u5f00\u59cb\u901a\u77e5",t),DataNotify.onCurMatchFail(t)}},dealMatchStartRightAwayNotifyMessage:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};return t.gameID=e.popINT(),t.matchID=e.popINT(),t.startTime=e.popLONGLONG(),t}(e);dump(t,"dealMatchStartRightAwayNotifyMessage+++++"),console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u5373\u5c06\u5f00\u59cb\u901a\u77e5",t),DataNotify.onCurMatchComeSoon(t)}},onMatchDeskInfo:function(e){if(G_HANDLE_CODE_OK==e.bHandleCode){var t=function(e){var t={};t.iCurPeopleCount=e.popINT(),t.iMaxPeopleCount=e.popINT(),t.iCurMatchRound=e.popINT(),t.iMaxMatchRound=e.popINT(),t.deskCount=e.popINT(),t.DeskInfo=[];for(var i=0;i<t.deskCount;i++)t.DeskInfo[i]={},t.DeskInfo[i].deskIdx=e.popINT(),t.DeskInfo[i].status=e.popBYTE(),t.DeskInfo[i].deskUserID=tools.popArray("INT",e,G_WAR_RECORD_PLAYER_NUM);return t}(e);dump(t,"info++++++++++++onMatchDeskInfo+++++"),console.log(tools.getCurTime()+" #### \u6bd4\u8d5b\u4e1a\u52a1 \u6536\u5230\u6bd4\u8d5b\u684c\u5b50\u4fe1\u606f\u901a\u77e5",t),this.setMatchDeskInfo(t),DataNotify.showMatchGameDeskInfo()}},onAllMatchInfo:function(e){G_HANDLE_CODE_OK==e.bHandleCode&&(function(e){tools.popArray("LONGLONG",e,10)}(e),DataNotify.showAllMatchList())},requestCheckPointMatchInfo:function(e,t){var o;void 0===t&&(t=null);var n=this,a=null!=(o=t)?o:UserInfoManager.getMyInfo().userID;i.getMatchInfo(a,function(t){0==t.status?e&&(n.checkPointInfo=t.data,e(t.data)):createTips(t.msg)})},clear:function(){this.matchGameInfo={},this.matchDeskInfo={},this.myMatchGameInfo={},this.MatchDeskRankInfo={},this.curMatchID=-1,this.myMatchAndRoomInfo={},this.curMatchGameInfo={}}});t.exports=n,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp",DataManager:"DataManager",LobbyLogic:"LobbyLogic"}],MatchNotify:[function(e,t){"use strict";cc._RF.push(t,"3f6034p0XJOAJDx/ZkwNPi6","MatchNotify"),cc.Class({extends:e("BaseLayer"),properties:{},doButton_Match_RankClick:function(){this._delegate&&(this._delegate.getChildByName("Match/MatchGameRankLayer")||this.addLayer(this._delegate,"Match/MatchGameRankLayer",function(e){e.zIndex=G_DISMISS_ROOM_LAYER_TAG}))},init:function(e){this._delegate=e},start:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchRankGame:[function(e,t){"use strict";cc._RF.push(t,"790931d8OxBvK+YjxsHbp2b","MatchRankGame");var i=[20170405,36610103,20161010,20161004,30100008,30000004,23510004,30000606,20173124,12101105];cc.Class({extends:e("BaseLayer"),properties:{matchRankImages:[cc.SpriteFrame],gameBg:cc.Sprite},setData:function(e,t){this.tableUIComponent=e,this.itemInfo=t;for(var o=0,n=0;n<i.length;n++)if(i[n]==t.gameID){o=n;break}this.gameBg.spriteFrame=this.matchRankImages[o]},onClickToMatchRank:function(){this.tableUIComponent&&this.tableUIComponent.onEnterRankMatch(this.itemInfo)},init:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchRankResult:[function(e,t){"use strict";cc._RF.push(t,"0c7ebYOBthMYKV9beb6g48Q","MatchRankResult"),cc.Class({extends:cc.Component,properties:{gameExp:cc.Label,userLevel:cc.Label,remark:cc.Label,Button_Back:cc.Button,animateNode:cc.Node,Skeleton:[sp.SkeletonData]},init:function(e,t){this._delegate=e,this._resultInfo=t||null,this.initUIData()},doButton_BackClick:function(){this.node.removeFromParent()},setShowMatchLevelUp:function(){this.isShowMatchLevelUp=!0},playSkelenAnimation:function(e,t,i,o,n){t=t||!1;var a=new cc.Node,s=a.addComponent(sp.Skeleton);s.skeletonData=this.Skeleton[0],s.premultipliedAlpha=!1,s.loop=t,s.animation="animation",s.timeScale=1,this.scheduleOnce(function(){s.setSkin(n)},.1),o?o.addChild(a):this.node.addChild(a),a.name=e,s.setCompleteListener(function(){i&&i()}.bind(this))},initUIData:function(){var e=parseInt(F_GetMoneyDisplay(this._resultInfo.gameExp));this.gameExp.string="\u7ecf\u9a8c\u503c\uff1a"+e;var t,i=getRankInfo(e);this.remark.string="\u661f\u7ea7\uff1a"+i.remark,this.animateNode.children.forEach(function(e){return e.destroy()}),t=["A","B","C","D","E","F","G"][parseInt(this._resultInfo.UserLevel/5)],this.playSkelenAnimation(t,!1,null,this.animateNode,t)}}),cc._RF.pop()},{}],MatchRank:[function(e,t){"use strict";cc._RF.push(t,"9d77aG/3P9N3oiDS+5Qx3yD","MatchRank"),cc.Class({extends:e("BaseLayer"),properties:{ListView_Rank:cc.ScrollView,Panel_Rank:cc.Node},start:function(){},init:function(){this.Panel_Rank.active=!1;var e=function(e){this.initRankListView(e)}.bind(this);MatchManager.requestMatchRank(e,this.node)},initRankListView:function(e){console.log(e);var t=function(e,t,i,o){var n=t.getChildByName("AtlasLabel_Rank").getComponent(cc.Label),a=t.getChildByName("Text_Name").getComponent(cc.Label),s=t.getChildByName("Image_Avata"),r=t.getChildByName("AtlasLabel_Reward").getComponent(cc.Label);a.string="",a.ignoreContentAdaptWithSize(!0),r.string=i.gold,Image_Rank.ignoreContentAdaptWithSize(!0),n.active=!1,n.active=!0,n.string=o,a.string=tools.getCutStringByCount(i.name,5);var c=function(e){F_SetClipAvataImage(s,e,!1,CLIP_RES_PATH,FRAME_RES_PATH,ccui.TextureResType.localType)}.bind(this);AvatarManager.requestHeadRes(i.headURL,i.userid,c,s)}.bind(this);F_InitListView(e,t,this.ListView_Rank,this.Panel_Rank,1)}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchResult:[function(e,t){"use strict";cc._RF.push(t,"80f0dluu0JAXKGbDABVV4lH","MatchResult"),cc.Class({extends:cc.Component,properties:{Image_Bg_User0:cc.Node,Image_Bg_User1:cc.Node,Image_Bg_User2:cc.Node,Image_Bg_User3:cc.Node,Text_Time:cc.Label,Button_Back:cc.Button},init:function(e,t,i,o){this._delegate=e,this._resultInfo=t||null,this.matchPlayerFans=i||null,this.matchPlayerInfos=o||null,this.isShowMatchLevelUp=!1,null!=this._resultInfo&&(this.initUIData(),this.showCountDown())},getUserCount:function(){var e=0;for(var t in this._resultInfo.userID){var i=this._resultInfo.userID[t];""!=i&&i.length>=6&&(e+=1)}return console.log("getUserCount = "+e),e},doButton_BackClick:function(){this.isShowMatchLevelUp?this._delegate.showMatchLevelUp():GameSocket.getIsSendLogoutRoom()?this._delegate.removeAllMatchLayer():this._delegate.showMatchWait(),this.node.removeFromParent()},setShowMatchLevelUp:function(){this.isShowMatchLevelUp=!0},showCountDown:function(){var e=5;this.Text_Time.node.active=!0,this.Text_Time.string=tools.stringFormat("{0}",e);var t=function(){if((e-=1)<=0){if(e=0,!this||!this)return;this.unschedule(t),this.doButton_BackClick()}this.Text_Time.string=tools.stringFormat("{0}",e)}.bind(this);this.schedule(t,1,!1)},initUIData:function(){var e=this;this.Button_Back.node.y=.5*C_WinSize.height;for(var t=this._resultInfo,i=function(){if(0!=t.userID[o]){e["Image_Bg_User"+o].active=!0;var i=e["Image_Bg_User"+o].getChildByName("Image_Avata").getComponent(cc.Sprite),n=e["Image_Bg_User"+o].getChildByName("Text_Name").getComponent(cc.Label),a=e["Image_Bg_User"+o].getChildByName("AtlasLabel_Win").getComponent(cc.Label),s=e["Image_Bg_User"+o].getChildByName("AtlasLabel_Lose").getComponent(cc.Label),r=e["Image_Bg_User"+o].getChildByName("AtlasLabel_Win_All").getComponent(cc.Label),c=e["Image_Bg_User"+o].getChildByName("AtlasLabel_Lose_All").getComponent(cc.Label),u=e["Image_Bg_User"+o].getChildByName("AtlasLabel_Fan").getComponent(cc.Label);a.node.active=!1,s.node.active=!1,r.node.active=!1,c.node.active=!1;var h=function(e){var n=function(e){i.spriteFrame=e}.bind(this);AvatarManager.requestHeadRes(e.headURL,t.userID[o],n,i,!1)}.bind(e);n.string=tools.getCutStringByCount(t.userName[o],5),UserInfoManager.requestUserInfoByUserID(t.userID[o],h),window.matchPlayerFans&&(u.string=window.matchPlayerFans[o]+"\u756a"),t.llAllPoint[o]>=0?(a.node.active=!0,a.string="+"+F_GetMoneyDisplay(t.llAllPoint[o])):(s.node.active=!0,s.string=F_GetMoneyDisplay(t.llAllPoint[o])),t.llAllPoint_ALL[o]>=0?(r.node.active=!0,r.string="+"+F_GetMoneyDisplay(t.llAllPoint_ALL[o])):(c.node.active=!0,c.string=F_GetMoneyDisplay(t.llAllPoint_ALL[o]))}},o=0;o<4;o++)i()},start:function(){}}),cc._RF.pop()},{}],MatchReward:[function(e,t){"use strict";cc._RF.push(t,"54cbbjMETNJtIaWWio9ZZYc","MatchReward"),cc.Class({extends:e("BaseLayer"),properties:{Button_Rule:cc.Button,Button_Detail:cc.Button,Image_Rule:cc.Node,Panel_Detail:cc.Node,ListView_Reward:cc.ScrollView,Panel_Reward:cc.Node},init:function(){this.selectedButtonType=1;for(var e=1;e<=7;e++)this[tools.stringFormat("Text_{0}",e)]=this.Panel_Detail.getChildByName(tools.stringFormat("Text_{0}",e)).getComponent(cc.Label),this[tools.stringFormat("Text_{0}",e)].node.active=!1;this.Panel_Reward.active=!1,this.Panel_Detail.active=!1,this.Image_Rule.active=!1,this.initSelectedButton(),this.requestRewardInfo()},initSelectedButton:function(){if(this.Button_Rule.interactable=!(2==this.selectedButtonType),this.Button_Detail.interactable=!(1==this.selectedButtonType),this.Image_Rule.active=2==this.selectedButtonType,this.Panel_Detail.active=1==this.selectedButtonType,1==this.selectedButtonType){var e=function(e){for(var t=1;t<=7;t++)this[tools.stringFormat("Text_{0}",t)].node.active=!0;this[tools.stringFormat("Text_{0}",1)].string=tools.stringFormat("\u6bd4\u8d5b\u540d\u79f0\uff1a{0}",e.match_name),this[tools.stringFormat("Text_{0}",2)].string=tools.stringFormat("\u6bd4\u8d5b\u7c7b\u578b\uff1a{0}","\u8840\u6218\u9ebb\u5c06"),this[tools.stringFormat("Text_{0}",3)].string=tools.stringFormat("\u6bd4\u8d5b\u65f6\u95f4\uff1a{0}-{1}",e.match_start,e.match_end),this[tools.stringFormat("Text_{0}",4)].string=tools.stringFormat("\u5f00\u8d5b\u95f4\u9694\uff1a{0}\u5206\u949f",e.match_interval),this[tools.stringFormat("Text_{0}",5)].string=tools.stringFormat("\u62a5\u540d\u4eba\u6570\uff1a{0}\u4eba",e.people_count),this[tools.stringFormat("Text_{0}",6)].string=tools.stringFormat("\u62a5\u540d\u8d39\u7528\uff1a{0}",e.fee),this[tools.stringFormat("Text_{0}",7)].string=tools.stringFormat("\u6bd4\u8d5b\u7b79\u7801\uff1a{0}",e.game_money)}.bind(this);MatchManager.requestMatchConfig(tools.nodeCallback(e,this.Layer))}},initRewardListView:function(e){var t=function(e,t,i){var o=t.getChildByName("Image_Rank"),n=t.getChildByName("Text_Rank").getComponent(cc.Label),a=t.getChildByName("AtlasLabel_Gold").getComponent(cc.Label);o.active=!1,n.node.active=!1,i.rank_end<=3?(o.active=!0,o.loadTexture(tools.stringFormat("Match/MatchReward/{0}",i.rank_end))):(n.node.active=!0,i.rank_end==i.rank_start?n.string=tools.stringFormat("\u7b2c{0}\u540d",i.rank_end):n.string=tools.stringFormat("\u7b2c{0}-{1}\u540d",i.rank_start,i.rank_end)),a.string=F_GetMoneyDisplay(i.gold)}.bind(this);F_InitListView(e,t,this.ListView_Reward,this.Panel_Reward,1)},requestRewardInfo:function(){var e=function(e){this.initRewardListView(e)}.bind(this);MatchManager.requestMatchRewardConfig(e)},doButton_DetailClick:function(){1!=this.selectedButtonType&&(this.selectedButtonType=1,this.initSelectedButton())},doButton_RuleClick:function(){2!=this.selectedButtonType&&(this.selectedButtonType=2,this.initSelectedButton())}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MatchWait:[function(e,t){"use strict";cc._RF.push(t,"5d03avyFQdEJbh0eUKiLo0S","MatchWait"),cc.Class({extends:e("LobbyBaseLayer"),properties:{logon_draw:cc.Node,logon_win:cc.Node,logon_lose:cc.Node},init:function(e,t){this._delegate=e.node,this.logon_draw.active=0==t,this.logon_win.active=1==t,this.logon_lose.active=2==t;var i=cc.view.getFrameSize();i.width/i.height>2&&(this.logon_draw.x-=100,this.logon_win.x-=100,this.logon_lose.x-=100)},doButton_LookClick:function(){var e=MatchManager.getMyMatchGameInfo();GameSocket.requireAllDeskData(e.llPartOfMatchID),this.doButton_RankClick()},doButton_RankClick:function(){},showMatchGameDeskInfo:function(){if(console.log(this._delegate),!this._delegate.getChildByName("MatchDeskInfoLayer")&&(console.log("addLayershowMatchGameDeskInfo"),!this.curShowMatchGameDeskInfoTime||(new Date).getTime()-this.curShowMatchGameDeskInfoTime>1e3)){var e=MatchManager.getMatchDeskInfo();this.addLayer(this._delegate,"Match/MatchDeskInfoLayer",function(e){e.zIndex=G_MATCH_LAYER_TAG,e.name="MatchDeskInfoLayer"},e),this.curShowMatchGameDeskInfoTime=(new Date).getTime()}},start:function(){}}),cc._RF.pop()},{LobbyBaseLayer:"LobbyBaseLayer"}],MsgBoxLayer:[function(e,t){"use strict";cc._RF.push(t,"7312eyFMcRDnqSJVKkaR/im","MsgBoxLayer"),cc.Class({extends:e("BaseLayer"),properties:{btnSure:cc.Button,sureLabel:cc.Label,btnCancel:cc.Button,cancelLabel:cc.Label,btnClose:cc.Button,msgLabel:cc.Label},onLoad:function(){this._super(),this.node.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2))},init:function(e){this.msgObj=e;var t=this.btnSure.getComponent(cc.Button),i=(this.sureLabel.getComponent(cc.Label),this.btnCancel.getComponent(cc.Button)),o=(this.cancelLabel.getComponent(cc.Label),this.msgLabel.getComponent(cc.Label));if(this.node.name=e.msg,this.callbackFun=e.callbackFun,o.string=e.msg,console.log(e),e.btn2);else{var n=cc.v2(.5*(t.node.getPosition().x+i.node.getPosition().x),t.node.getPosition().y);t.node.setPosition(n),i.node.parent=null}},removeLayer:function(){},onButtonClick:function(e,t){switch(t){case"cancel":this.callbackFun(this.msgObj.btn2);break;case"sure":this.callbackFun(this.msgObj.btn1)}this.node.parent=null}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],MsgBox:[function(e,t){"use strict";cc._RF.push(t,"da92dmCqiFKSYeJQ9VUHGt3","MsgBox"),window.createTips=function(e,t){var i,o=cc.view.getFrameSize();i=o.height>o.width?"prefab/TipLayerPrefabhe":"prefab/TipLayerPrefab";var n=window.prefabMap.get(i),a=cc.director.getScene().getChildByName(e);null!==a&&(a.stopAllActions(),a.destroy());var s=cc.instantiate(n),r=s.getComponent("TipLayer");e&&e.length>0&&e.indexOf("\u8d44\u6e90")>=0&&(e.indexOf("\u4e0d\u8db3")>=0||e.indexOf("\u4e0d\u591f")>=0)&&(e=e.replace("\u8d44\u6e90","\u91d1\u5e01")),r.initTip(e,t),cc.director.getScene().addChild(s,8887)},window.addEventListener("orientationchange",function(){var e=window.orientation;switch(e){case 90:case-90:e="landscape",setTimeout(function(){},500)}document.body.parentNode.setAttribute("class",e)},!1),window.createClickTips=function(e,t){var i,o=cc.view.getFrameSize();i=o.height>o.width?"prefab/TipLayerPrefabhe":"prefab/TipLayerPrefab";var n=window.prefabMap.get(i),a=cc.director.getScene().getChildByName(e);null!==a&&(a.stopAllActions(),a.destroy());var s=cc.instantiate(n);s.getComponent("TipLayer").initClickTip(e,t),cc.director.getScene().addChild(s,888887)},window.createMsgBox=function(e,t){var i=function(i){var o=cc.director.getScene().getChildByName(e.msg);null!==o&&(o.stopAllActions(),o.destroy()),t||(t=cc.director.getScene());var n=cc.instantiate(i);n.getComponent("MsgBoxLayer").init(e),t.addChild(n,8887)},o=window.prefabMap.get("prefab/MsgBoxPrefab");i(o||window.prefabMap.get("prefab/MsgBoxPrefab"))},window.createNewhandReward=function(e,t,i){var o=window.prefabMap.get("prefab/NewhandrewardPrefab"),n=cc.director.getScene().getChildByName("NewhandrewardPrefab");null!==n&&(n.stopAllActions(),n.destroy()),i||(i=cc.director.getScene());var a=cc.instantiate(o);a.getComponent("NewhandReward").init(e,t),i.addChild(a,8e3)},window.createRepeatConnectLayer=function(e){if(console.log(">>>>>>>createRepeatConnectLayer \u51c6\u5907..."),!GameSocket.getIsSendLogoutRoom()&&!window.repeatConnectLayer){console.log(">>>>>>>createRepeatConnectLayer \u8fdb\u6765\u4e86...");var t=window.prefabMap.get("prefab/RepeatConnectLayer");console.log(">>>>>>>RepeatConnectLayer \u521d\u59cb\u5316\u9884\u5236\u4f53\u5b8c\u6bd5...");var i=cc.instantiate(t);i.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2)),i.name="RepeatConnectLayer",e?e.addChild(i):console.log(">>>\u6ca1\u6709node>>>\u6ca1\u6709node>>>\u6ca1\u6709node>>>\u6ca1\u6709node>>>\u6ca1\u6709node>>>\u6ca1\u6709node"),window.repeatConnectLayer=i}},cc._RF.pop()},{}],NetConfig:[function(e,t){"use strict";cc._RF.push(t,"8c8d2DqCf5C5K2u82LvnwkJ","NetConfig"),t.exports={getServerAddress:function(){return G_HTTP_DOMAIN},getAgentServer:function(){return G_AGENT_SERVER},getServerPort:function(){return G_SERVER_PORT},setServerAddress:function(e){G_HTTP_DOMAIN=e},setServerPort:function(e){G_SEND_PORT=e},getSendPort:function(){return G_SEND_PORT},getHttpDomain:function(){return G_HTTP_DOMAIN},isLocalServerAddress:function(){var e=this.getServerAddress().split(".");return"192"==e[1]&&"168"==e[2]}},cc._RF.pop()},{}],NetResManager:[function(e,t){"use strict";cc._RF.push(t,"0a34dX5BvBD/5T3N7jB1pmB","NetResManager"),t.exports=cc.Class({ctor:function(){},requestNetRes:function(e,t){cc.loader.load({url:e,type:"png"},function(i,o){if(i)console.error("requestNetRes failed url:"+e,i.message||i);else{var n=new cc.SpriteFrame(o);t&&cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=n)}})}}),cc._RF.pop()},{}],NewMobileLoginScene:[function(e,t,i){"use strict";cc._RF.push(t,"b6d8fTTZmFJaKWwWPIBAwgT","NewMobileLoginScene");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../framework/EventEmiter");window.WechatAppID="wx85e582fb8e80518f",window.redirect_uri="https://h5.ouwan.hmzb.top";var r="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+window.WechatAppID+"&redirect_uri="+encodeURIComponent(window.redirect_uri)+"&response_type=code&scope=snsapi_userinfo&state=1&forcePopup=true#wechat_redirect",c=e("BaseLayer");function u(e){var t=function(t){var i=i||function(e){var t={},i=t.lib={},o=function(){},n=i.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var n=0;n<e;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(o+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;o<t;o+=4)i.push(4294967296*e.random()|0);return new a.init(i,t)}}),s=t.enc={},r=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],o=0;o<e;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s);if(t=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,n=e.min(4*t,n),t){for(var c=0;c<t;c+=s)this._doProcessBlock(o,c);c=o.splice(0,t),i.sigBytes-=n}return new a.init(c,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new l.HMAC.init(e,i).finalize(t)}}});var l=t.algo={};return t}(Math);(function(){var e=i,t=(a=e.lib).WordArray,o=a.Hasher,n=[],a=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,o=i[0],a=i[1],s=i[2],r=i[3],c=i[4],u=0;80>u;u++){if(16>u)n[u]=0|e[t+u];else{var h=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=h<<1|h>>>31}h=(o<<5|o>>>27)+c+n[u],h=20>u?h+(1518500249+(a&s|~a&r)):40>u?h+(1859775393+(a^s^r)):60>u?h+((a&s|a&r|s&r)-1894007588):h+((a^s^r)-899497514),c=r,r=s,s=a<<30|a>>>2,a=o,o=h}i[0]=i[0]+o|0,i[1]=i[1]+a|0,i[2]=i[2]+s|0,i[3]=i[3]+r|0,i[4]=i[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(o+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)})();var o=window.WechatAppID,n=(new Date).getTime().toString(),a=(1e3*Math.random()).toString(),s="jsapi_ticket="+t.jsapi_ticket+"&noncestr="+a+"&timestamp="+n+"&url="+location.href.split("#")[0],r=i.SHA1(s,{string:!0}).toString();window.jWeixin.config({debug:!1,appId:o,timestamp:n,nonceStr:a,signature:r,jsApiList:["updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage"]}),window.jWeixin.ready(function(){var t=window.sharedWords.length,i="";t>0&&(i=window.sharedWords[Math.floor(Math.random()*(t-1))]),window.jWeixin.onMenuShareAppMessage({title:"\u5076ONE\u9189\u7f8e\u57ce",desc:i,link:window.wxShareURL+"?state="+e,imgUrl:window.wxShareAdvIMG,success:function(){console.log("\u5206\u4eab\u6210\u529f")},cancel:function(){console.log("\u53d6\u6d88\u5206\u4eab")}}),window.jWeixin.updateTimelineShareData({title:"\u52a9\u529b\u4e61\u6751\u632f\u5174\uff0c\u7ed9\u5bb6\u4e61\u63d0\u4f9b\u4f18\u8d28\u76f4\u9500\u6e20\u9053\uff0c\u6253\u9020\u76f4\u64ad\u5356\u8d27\u5e73\u53f0\u3002\u65e0\u9700\u4e0b\u8f7d\uff0c\u968f\u65f6\u968f\u5730\u4e3a\u5bb6\u4e61\u4ee3\u8a00\uff01\uff01",desc:"",link:window.wxShareURL+"?state="+e,imgUrl:window.wxShareAdvIMG,success:function(){},cancel:function(){},fail:function(){}})})}.bind(this);window.ConfigDataManager.getWXjsapi_ticket(e,t)}window.isWeiXin=function(){return window.ua=window.navigator.userAgent.toLowerCase(),console.log(window.ua),"micromessenger"==window.ua.match(/MicroMessenger/i)},window.ua=navigator.userAgent,window.isTablet=function(){return/(?:iPad|PlayBook)/.test(window.ua)||/(?:Android)/.test(window.ua)&&!/(?:Mobile)/.test(window.ua)||/(?:Firefox)/.test(window.ua)&&/(?:Tablet)/.test(window.ua)},window.isIphone=function(){return!!/(iPhone|iPad|iPod|iOS)/i.test(window.ua)},window.isAndroid=function(){return!!/(Android)/i.test(window.ua)},window.isPC=function(){return!(/(iPhone|iPad|iPod|iOS)/i.test(window.ua)||/(Android)/i.test(window.ua)||window.isTablet())};var h=cc._decorator,l=h.ccclass,d=h.property,f=function(t){function i(){var i=t.call(this)||this;return i.node_login=null,i.PCNode=null,i.btnLogin=null,i.btnPhone=null,i.loadingNode=null,i.loadProgressText=null,i.loadProgress=null,i.loadName=null,i.tip_Label=null,i.latitude1=null,i.latitude2=null,i.checkmark=null,i.toggle=null,i.prefabs=[],i.isDebug=!1,i.editboxAccount=null,i.editboxPassword=null,i.loadFinish=null,i.progressValueSpeed=.05,i.loadingCount=0,i.LoginLogic=new(e("LoginLogic")),i}return n(i,t),i.prototype.GetRequest=function(e){var t=e,i={};if(-1!=t.indexOf("?"))for(var o=t.substr(1).split("&"),n=0;n<o.length;n++)i[o[n].split("=")[0]]=unescape(o[n].split("=")[1]);return i},i.prototype.onLoad=function(){u("1111"),window.livebroadcastInit=!1,s.GlobalEvent.instance.on("InLobby",function(){window.InLobby=!0,s.GlobalEvent.instance.remove("InLobby")},this),this.node_login.active=!1;var e=window.location.host;window.isRelease=e.indexOf("localhost")<0&&e.indexOf("192.168.")<0,this.theRequest=this.GetRequest(window.location.search),window.vedioFileId=window.tools.getQueryString("fileID"),this.getRequest(),window.isiOS=null!=navigator.userAgent.match(/(iPhone|iPod|iPad);?/i),0==cc.sys.isMobile&&(this.isDebug=!0),cc.sys.isMobile&&null==window.code?this.replaceWxURL():(window.HZMJIsInited=!1,cc.sys.isMobile&&window.code?this.toLoginData():this.loading())},i.prototype.start=function(){window.prefabMap=new Map},i.prototype.update=function(){var t=this;if(window.isPlayLoading){if(this.isComplite&&window.isLogin){window.isLogin=void 0;var i=new(e("LobbyLogic"));i.requestLoaderCheckLogon(function(){var e=[{people:2,roomids:[7,8,9,10,11]},{people:3,roomids:[12,13,14,15,16]},{people:4,roomids:[2,3,4,5,6]}],o=Number(0),n=e[0].roomids[o];0==n&&(n=Math.floor(5*Math.random()+2)),console.log("\u91d1\u5e01\u573a \u8bf7\u6c42\u52a0\u5165\u623f\u95f4 pepole:"+e[0].people+" roomID:"+n),i.enterGame(n),t.programNum=1})}if(this.loadProgress.progress>=1&&!this.isComplite&&(this.isComplite=!0,this.compliteLogin()),!this.isComplite&&this.loadProgress.progress<this.programNum){var o=this.progressValueSpeed;this.loadProgress.progress+=o}}},i.prototype.loading=function(){window.timer=Date.now(),this.loadProgress.progress=0,this.programNum=0,this.isComplite=!1,cc.loadData={},cc.loadData.loadLobbyPreData=[],cc.loadData.loadLobbyPreDataIndex=0,cc.loadData.loadGamePreData=[],cc.loadData.loadGamePreDataIndex=0,window.lobbyNodeMap={},this.prefabs.length,this.programNum=1;var e=window.BundleName;cc.assetManager.loadBundle(e,function(e,t){t.preloadScene("HZMJ",null,function(){window.HZMJIsInited=!0})});var t=cc.view.getFrameSize();cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),t.width>t.height&&cc.view.setFrameSize(t.height,t.width),cc.game.setFrameRate(45),window.GameEvent=new cc.EventTarget,window.ConfigDataManager.getConfigData(),document.title=window.G_APP_NAME_CH,cc.sys.localStorage.setItem(window.G_LIVE_BROADCAST,1),this.loadingNode.active=!0,cc.checkIsFrontBack||(cc.checkIsFrontBack=!0,this.checkIsFrontStage()),this.getGameList()},i.prototype.getGameList=function(){var e=function(e){if(0!==e.length){var t=function(){}.bind(this);window.RoomListManager.requestAllRoomList(t)}}.bind(this);window.GameListManager.requestGameList(e)},i.prototype.onBtnLogin=function(){var e=this;this.isClick||(this.isClick=!0,this.scheduleOnce(function(){e.isClick=!1},.8),this.isComplite?this.replaceWxURL():this.loadingNode.active=!0)},i.prototype.onBtnPhone=function(){this.PCNode.active=!0,this.node_login.active=!1},i.prototype.toLoginData=function(){var e=this,t=function(){e.wechatLogin(this.theRequest)}.bind(this),i=function(t){var i=function(){e.replaceWxURL()}.bind(this),o={};o.msg=t,o.btn1="\u786e\u5b9a",o.callbackFun=i,window.createMsgBox(o)}.bind(this);window.ConfigDataManager.getServerStatus(t,i)},i.prototype.compliteLogin=function(){1==window.G_GAMESEVER_KEY&&(cc.sys.isMobile||window.isRelease)||(this.node_login.active=!0,this.loadingNode.active=!1,this.setZhangHaoLogin())},i.prototype.loadResult=function(e,t,i){e||!t?cc.error("\u672a\u5b9a\u4e49\u7684\u9884\u5236\u4f53\u6216\u8005\u5176\u4ed6\u7c7b\u578b\u8d44\u6e90"+i):("object"==typeof t&&window.prefabMap.set(i+"",t),this.loadFinish(),cc.sys.isNative&&cc.loadData.loadLobbyPreDataIndex>=cc.loadData.loadLobbyPreData.length&&this.checkPreLoadScence())},i.prototype.loadPre=function(){var e=this;if(!this.loadingFlag){this.loadingFlag=!0;var t=this.loadPreData[this.loadIndex];if(t){""!=t.showName&&(this.loadName.string=t.showName);var i=window.Bundle;"Texture"==t.preName?i.loadResDir(t.url,cc.SpriteFrame,function(){},function(){e.loadResult(null,"Texture",t.url)}):"TextureAtlas"==t.preName?i.loadResDir(t.url,cc.SpriteAtlas,function(){},function(){e.loadResult(null,"TextureAtlas",t.url)}):"bitmapFont"==t.preName?i.loadRes(t.url,cc.BitmapFont,function(i,o){e.loadResult(null,o,"bitmapFont"+t.url)}):"json"==t.preName?i.loadRes(t.url,cc.JsonAsset,function(i,o){e.loadResult(null,o,"json"+t.url)}):i.loadRes(t.url+t.preName,function(i,o){e.loadResult(i,o,t.url+t.preName)})}}},i.prototype.getRequest=function(){var e;window.code=null!==(e=this.theRequest.code)&&void 0!==e?e:cc.sys.localStorage.getItem("code"),window.code&&cc.sys.localStorage.setItem("code",window.code),window.ShartuserID=this.theRequest.state,this.theRequest.state&&Number(this.theRequest.state)>100&&(window.share_userId=this.theRequest.state),window.username=this.theRequest.username,window.password=this.theRequest.password},i.prototype.replaceWxURL=function(){try{window.location.replace(r)}catch(e){console.log(e)}},i.prototype.setZhangHaoLogin=function(){this.layoutType=1,this.initUI(),this.initUIData()},i.prototype.setLayout=function(){if(1===this.layoutType){if(!this.login_acc){var e=cc.sys.localStorage.getItem(window.G_ACCOUNT_KEY);this.login_acc=e||""}if(!this.login_pwd){var t=cc.sys.localStorage.getItem(window.G_PASSWARD_KEY);this.login_pwd=t||""}this.editboxAccount.string=this.login_acc,this.editboxPassword.string=this.login_pwd}else 2===this.layoutType&&(this.regist_acc=this.regist_acc?this.regist_acc:"",this.regist_pwd=this.regist_pwd?this.regist_pwd:"",this.editboxAccount.string=this.regist_acc,this.editboxPassword.string=this.regist_pwd)},i.prototype.initUI=function(){this.editboxAccount=cc.find("Canvas/Window_Layout/Editbox_Acc").getComponent(cc.EditBox),this.editboxPassword=cc.find("Canvas/Window_Layout/Editbox_Pwd").getComponent(cc.EditBox)},i.prototype.initUIData=function(){this.setLayout()},i.prototype.wechatLogin=function(e){var t=cc.sys.localStorage.getItem("userData");if(t)return this.doLoginWechat(JSON.parse(t)),void this.loading();var i=this,o=function(e){console.log("wechatLogin"),console.log(e);var t=e,o={};o.unionid=t.openid,o.regType=window.E_RegType.MOB,o.regWay=window.E_RegWay.WECHAT;var n,a=t.nickname;a=(n=a).indexOf("%")>-1?n.replace(/%/g,"%25"):n;var s=encodeURI(a);o.acc=s,o.psw=window.hex_md5(t.openid),o.regStatus=window.E_RegStatus.REG,o.sex=1==t.sex?1:0,o.headURL=t.headimgurl,cc.sys.localStorage.setItem("userData",JSON.stringify(o)),i.doLoginWechat(o),i.loading()}.bind(this);window.ConfigDataManager.getWxUserInfo(e.code,o,function(){i.replaceWxURL()})},i.prototype.doLoginLobby=function(e,t,i,o){var n=function(e,t,o){var n=this;e&&function(){if(window.LobbySocket.setLoginDelegate(n),i===window.E_RegStatus.LOGIN)n.LoginLogic.loginLobby(t,o);else{var e=function(e){"\u786e \u5b9a"===e&&this.LoginLogic.loginLobby(t,o)}.bind(n),a={msg:"\u6ce8\u518c\u6210\u529f, \u76f4\u63a5\u767b\u5f55\u5427",btn1:"\u786e \u5b9a",btn2:"\u53d6 \u6d88"};a.callbackFun=e,window.createMsgBox(a)}}()}.bind(this),a={unionid:""};a.regType=window.E_RegType.PC,a.regWay=window.E_RegWay.COMMON,a.acc=e,a.psw=t,a.regStatus=i,a.sex=window.E_UserSex.MALE,a.headURL="",cc.sys.localStorage.setItem("userData",JSON.stringify(a)),this.LoginLogic.accountRegist(a,n,o)},i.prototype.vertifyAccountPwdText=function(e,t){return!(!t||32!==e.length)||!(""===e||e.length<6||e.length>16)},i.prototype.doButtonLoginClick=function(){var e=this.editboxAccount.string,t=this.editboxPassword.string;if(1===this.layoutType){if(!this.vertifyAccountPwdText(e,!1))return void window.createTips("\u8bf7\u8f93\u51656-16\u4f4d\u8d26\u53f7");32===t.length?this.doLoginLobby(e,t,window.E_RegStatus.LOGIN,t):this.doLoginLobby(e,window.hex_md5(t),window.E_RegStatus.LOGIN,t)}else 2===this.layoutType&&(this.regist_acc=e||"",this.regist_pwd=t||"",this.layoutType=1,this.setLayout())},i.prototype.doButtonRegistClick=function(){var e=this.editboxAccount.string,t=this.editboxPassword.string;if(2===this.layoutType){if(!this.vertifyAccountPwdText(e,!1))return void window.createTips("\u8bf7\u8f93\u51656-16\u4f4d\u8d26\u53f7");if(!this.vertifyAccountPwdText(t,!0))return void window.createTips("\u8bf7\u8f93\u51656-16\u4f4d\u5bc6\u7801");this.doLoginLobby(e,window.hex_md5(t),window.E_RegStatus.REG,t)}else 1===this.layoutType&&(this.login_acc=e||"",this.login_pwd=t||"",this.layoutType=2,this.setLayout())},i.prototype.onDestroy=function(){window.LobbySocket.setLoginDelegate(null)},i.prototype.doLoginWechat=function(e){var t=function(e,t,i){e&&(window.LobbySocket.setLoginDelegate(this),this.LoginLogic.loginLobby(t,i))}.bind(this);this.LoginLogic.accountRegist(e,t)},i.prototype.isToggle=function(){this.btnLogin.getComponent(cc.Button).interactable=this.checkmark.active,this.btnPhone.getComponent(cc.Button).interactable=this.checkmark.active},a([d(cc.Node)],i.prototype,"node_login",void 0),a([d(cc.Node)],i.prototype,"PCNode",void 0),a([d(cc.Node)],i.prototype,"btnLogin",void 0),a([d(cc.Node)],i.prototype,"btnPhone",void 0),a([d(cc.Node)],i.prototype,"loadingNode",void 0),a([d(cc.Label)],i.prototype,"loadProgressText",void 0),a([d(cc.ProgressBar)],i.prototype,"loadProgress",void 0),a([d(cc.Label)],i.prototype,"loadName",void 0),a([d(cc.Node)],i.prototype,"tip_Label",void 0),a([d(cc.Label)],i.prototype,"latitude1",void 0),a([d(cc.Label)],i.prototype,"latitude2",void 0),a([d(cc.Node)],i.prototype,"checkmark",void 0),a([d(cc.Node)],i.prototype,"toggle",void 0),a([d(cc.Prefab)],i.prototype,"prefabs",void 0),a([l],i)}(c);i.default=f,cc._RF.pop()},{"../../framework/EventEmiter":"EventEmiter",BaseLayer:"BaseLayer",LobbyLogic:"LobbyLogic",LoginLogic:"LoginLogic"}],NewhandReward:[function(e,t){"use strict";cc._RF.push(t,"38830dKCnpChbk4zqCcOnh9","NewhandReward");var i,o=(i=e("../../Conn/ReqHttp"))&&i.__esModule?i:{default:i},n={toggle1:0,toggle2:1};cc.Class({extends:e("BaseLayer"),properties:{SexNode:cc.Node,PlayinforNode:cc.Node,rewardNode:cc.Node,toggleboy:cc.Toggle,togglegirt:cc.Toggle,IphoneEdit:cc.EditBox,CodeEdit:cc.EditBox,adressEdit:cc.EditBox,labjuan:cc.Label,labgold:cc.Label},onLoad:function(){this._super(),this.SexNode.active=!0,this.rewardNode.active=!1,this.PlayinforNode.active=!1,this.node.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var t=(new(e("LobbyLogic"))).getMyInfo();this.myInfo=t,1==t.sex?this.toggleboy.getComponent(cc.Toggle).check():this.togglegirt.getComponent(cc.Toggle).check()},init:function(t,i){this.LobbyLogic=new(e("LobbyLogic")),this.labjuan.string="x"+String(t),this.labgold.string="x"+String(i/100);var o=this.LobbyLogic.getPhone(),n=this.LobbyLogic.getGoodsAddress();0==o&&(o=""),0==n&&(n=""),this.IphoneEdit.string=o,this.adressEdit.string=n},onSexXiuGai:function(e){var t=n[e.node.name];if(console.log(t),t!=this.myInfo.sex){var i=this;UserInfoManager.requestChangeUserSex(t,function(){i.myInfo.sex=t,UserInfoManager.setMyInfo(i.myInfo)})}},onButtonClick:function(e,t){var i=this;switch(t){case"btn_next":this.SexNode.active=!1,this.rewardNode.active=!1,this.PlayinforNode.active=!0;break;case"btn_lq":this.LobbyLogic.requestLogonUserinfoFlush(1,function(){createTips("\u606d\u559c\u60a8\u83b7\u5f97\u65b0\u624b\u793c\u5305\uff0c\u5956\u52b1\u7a0d\u540e\u5230\u8d26\u8bf7\u6ce8\u610f\u67e5\u6536\uff01"),i.onCloseBtn()});break;case"btn_tg1":case"btn_tg2":var o=this;createMsgBox({msg:"\n\u5b8c\u6210\u540e\u5373\u53ef\u83b7\u5f97\u65b0\u4eba\u5927\u793c\u5305\uff0c\u662f\u5426\u786e\u8ba4\u8df3\u8fc7",btn1:"\u786e\u5b9a",btn2:"\u53d6\u6d88",callbackFun:function(e){"\u786e\u5b9a"==e&&o.LobbyLogic.requestLogonUserinfoFlush(0,function(){o.onCloseBtn()})}})}},doButton_Code:function(){this.requestbCode(this.IphoneEdit)},requestbCode:function(e){console.log(e.string);var t=e.string;if(11==t.length&&""!=t){var i=function(e){0==e.status?createTips("\u53d1\u9001\u6210\u529f"):createTips(e.msg)}.bind(this);o.default.sendCode(t,i)}else createTips("\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7")},doButton_PRIVE:function(){createTips("\u656c\u8bf7\u671f\u5f85")},doButton_OK:function(){var e=this,t=this.IphoneEdit.string,i=this.adressEdit.string,o=this.CodeEdit.string;""!=t?""!=o?6==o.length?""!=i?UserInfoManager.requestChangeUserInfor(t,o,i,function(){LobbySocket.getMyInfo().goodsPhone=t,LobbySocket.getMyInfo().goodsAddress=i,e.SexNode.active=!1,e.rewardNode.active=!0,e.PlayinforNode.active=!1}):createTips("\u8bf7\u8f93\u5165\u8be6\u7ec6\u6536\u8d27\u5730\u5740"):createTips("\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801"):createTips("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"):createTips("\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7\u7801")}}),cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp",BaseLayer:"BaseLayer",LobbyLogic:"LobbyLogic"}],NoticeLayer:[function(e,t){"use strict";cc._RF.push(t,"80bf0UsxUVGXplOfkPeoeK6","NoticeLayer"),cc.Class({extends:cc.Component,properties:{layoutNode:cc.Node,label:cc.Label},init:function(e){this.label.string=e,this.runAc()},runAc:function(){var e=this;this.contentSize=this.label.node.getContentSize(),this.layoutNode.active=!1,this.layoutNode.width=this.contentSize.width,this.label.node.x=0,this.layoutNode.x=cc.winSize.width/2,this.layoutNode.y=cc.winSize.height/2-this.layoutNode.height/2;var t=this.layoutNode.width+cc.winSize.width+10,i=t/128;this.layoutNode.active=!0,this.layoutNode.stopAllActions(),this.layoutNode.runAction(cc.sequence(cc.moveBy(i,-t,0),cc.delayTime(1),cc.callFunc(function(){e.node.destroy()})))},update:function(){this.contentSize.width!=this.label.node.getContentSize().width&&this.runAc()}}),cc._RF.pop()},{}],NoticeManager:[function(e,t){"use strict";cc._RF.push(t,"a6c47Dv6J5FS7LsQ+ZRpgSo","NoticeManager");var i=e("../../Conn/ReqHttp").default,o=cc.Class({ctor:function(){this.normalNoticeList=[],this.shopMommodityList=[],this.GongGaoMommodityList=[],this.chatMessageList=[],this.specialNoticeList=[],this.NoticeList=[]},requestSystemNotice:function(e){var t=this,o=UserInfoManager.getMyInfo().userID;i.requestSystemNotice(o,10,function(i){if(0==i.status){for(var o=0;o<i.data.length;o++)t.pushNormalNotice(i.data[o]);e&&e(i.data)}else createTips(i.msg)})},delNotice:function(e){this.NoticeList[e]=null},push:function(e){e&&this.chatMessageList.push(e),this.chatMessageList.length>=G_CHAT_MAX_NUM&&this.chatMessageList.splice(0,1)},pushSpecialNotice:function(e){e&&this.specialNoticeList.push(e)},pushNormalNotice:function(e){e&&this.normalNoticeList.push(e),this.normalNoticeList.length>=G_CHAT_COMMON_MAX_NUM&&this.normalNoticeList.splice(0,1)},pushShopMommodity:function(e){e&&this.shopMommodityList.push(e),this.shopMommodityList.length>=G_CHAT_COMMON_MAX_NUM&&this.shopMommodityList.splice(0,1)},pushGongGaoMommodity:function(e){e&&this.GongGaoMommodityList.push(e),this.GongGaoMommodityList.length>=G_CHAT_COMMON_MAX_NUM&&this.GongGaoMommodityList.splice(0,1)},getAllChatMessage:function(){return this.chatMessageList},getNormalNoticeList:function(){return this.normalNoticeList},getShopMommodityList:function(){return this.shopMommodityList},getGongGaoMommodityList:function(){return this.GongGaoMommodityList},getSpecialMessage:function(){return this.specialNoticeList[this.specialNoticeList.length-1]},getSpecialNoticeList:function(){return this.specialNoticeList}});t.exports=o,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp"}],Package:[function(e,t){"use strict";cc._RF.push(t,"7a2929Q9mtOZZu7e6oHKgH9","Package");var i=e("bytebuffer"),o={PACKAGE_HEADLENGTH:20,bMainID:0,bAssistantID:0,bHandleCode:0,reserve:0,_writeBuffer:null,_readBuffer:null,buildWritePack:function(e){return this._writeBuffer?this._writeBuffer.clear():this._writeBuffer=new i,this._writeBuffer.writeUint32(e+this.PACKAGE_HEADLENGTH),this},writeBegin:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.bMainID=e,this.bAssistantID=t,this.roomID=i,this._writeBuffer.writeUint32(e),this._writeBuffer.writeUint32(t),this._writeBuffer.writeUint32(0),this._writeBuffer.writeUint32(i)},writeBoolean:function(e){e?this._writeBuffer.writeByte(1):this._writeBuffer.writeByte(0)},pushBOOL:function(e){e?this._writeBuffer.writeByte(1):this._writeBuffer.writeByte(0)},writeByte:function(e){this._writeBuffer.writeByte(e),this.leng+=1},pushBYTE:function(e){this._writeBuffer.writeByte(e)},writeShort:function(e){this._writeBuffer.writeShort(e)},writeUnsignedInt:function(e){this._writeBuffer.writeUint32(e)},pushUINT:function(e){this._writeBuffer.writeUint32(e)},writeInt:function(e){this._writeBuffer.writeInt32(e)},pushINT:function(e){this._writeBuffer.writeInt32(e)},writeInt64:function(e){this._writeBuffer.writeInt64(e)},pushLONGLONG:function(e){this._writeBuffer.writeInt64(e)},writeString:function(e,t){t||(t=e.length);var i=this._writeBuffer.offset;for(this._writeBuffer.writeString(e),(i=t-(this._writeBuffer.offset-i))<0&&(this._writeBuffer.offset+=i);i-- >0;)this._writeBuffer.writeByte(0)},pushNCHAR:function(e,t){t||(t=e.length);var i=this._writeBuffer.offset;for(this._writeBuffer.writeString(e),(i=t-(this._writeBuffer.offset-i))<0&&(this._writeBuffer.offset+=i);i-- >0;)this._writeBuffer.writeByte(0)},getCmd:function(){return this.bMainID+"-"+this.bAssistantID},getData:function(){return this._writeBuffer.flip(),this._writeBuffer.toArrayBuffer()},buildReadPack:function(e,t){return this.bMainID=e,this._readBuffer=t,this.bAssistantID=this.readUnsignedInt(),this.bHandleCode=this.readUnsignedInt(),this.reserve=this.readUnsignedInt(),this},bytesAvailable:function(){return this._readBuffer.offset-this._readBuffer.limit},readBoolean:function(){return 1==this._readBuffer.readInt8()},popBOOL:function(){return 1==this._readBuffer.readInt8()},readByte:function(){return this._readBuffer.readInt8()},popBYTE:function(){var e=this._readBuffer.readInt8();return-1==e&&(e=255),e},readUnsignedByte:function(){return this._readBuffer.readUint8()},readShort:function(){return this._readBuffer.readInt16()},readUnsignedShort:function(){return this._readBuffer.readUint16()},readUnsignedInt:function(){return this._readBuffer.readUint32()},popUINT:function(){return this._readBuffer.readUint32()},readUnsignedInt64:function(){return this._readBuffer.readUint64().toNumber()},readInt:function(){return this._readBuffer.readInt32()},popINT:function(){return this._readBuffer.readInt32()},readInt64:function(){return this._readBuffer.readInt64().toNumber()},popLONGLONG:function(){return this._readBuffer.readInt64().toNumber()},readFloat:function(){return this._readBuffer.readFloat32()},popFLOAT:function(){return this._readBuffer.readFloat32()},pushFloat:function(e){this._writeBuffer.writeFloat(e)},readFloat64:function(){return this._readBuffer.readFloat64()},readString:function(e){var t=this._rGBK(this._readBuffer.view,this._readBuffer.offset,e);if(t){this._readBuffer.offset+=e,e=t.length;for(var i=0;i<e;i++)if(0==t.charCodeAt(i))return t.substr(0,i);return t}},popNCHAR:function(e){var t=this._rGBK(this._readBuffer.view,this._readBuffer.offset,e);if(t){this._readBuffer.offset+=e,e=t.length;for(var i=0;i<e;i++)if(0==t.charCodeAt(i))return t.substr(0,i);return t}},_rUTF:function(e,t,i){for(var o,n=t,a=n+i,s="",r=String.fromCharCode;n<a;)(o=e[n++])<128?0!=o&&(s+=r(o)):s+=r(o<224?(63&o)<<6|127&e[n++]:o<240?(31&o)<<12|(127&e[n++])<<6|127&e[n++]:(15&o)<<18|(127&e[n++])<<12|e[n++]<<6&127|127&e[n++]);return s},_rGBK:function(e,t,i){try{var o=new Uint8Array(this._readBuffer.buffer,t,i);return new TextDecoder("gbk").decode(o)}catch(n){}},crossedARM:function(e){for(var t=0;t<e;t++)this.popBOOL()},crossedARMPush:function(e){for(var t=0;t<e;t++)this.pushBOOL(!0)}};t.exports=o,cc._RF.pop()},{bytebuffer:"bytebuffer"}],Panel_Notice:[function(e,t){"use strict";cc._RF.push(t,"742d5cvaf5Llrx3qXexE1NS","Panel_Notice"),cc.Class({extends:cc.Component,properties:{noticLab:cc.Label,mask:cc.Node},onLoad:function(){this.noticLab.node.x=this.mask.width/2+this.noticLab.node.width,this.noticLab.node.runAction(cc.moveTo(5,-(this.mask.width/2+this.noticLab.node.width),0))},update:function(){this.noticLab.node.x<=-(this.mask.width/2+this.noticLab.node.width)&&(this.noticLab.node.stopAllActions(),this.noticLab.node.x=this.mask.width/2+this.noticLab.node.width,this.noticLab.node.runAction(cc.moveTo(5,-(this.mask.width/2+this.noticLab.node.width),0)))}}),cc._RF.pop()},{}],PlayerUI:[function(e,t){"use strict";cc._RF.push(t,"ff456hEM/JD84Jn5MuxR6Mh","PlayerUI"),cc.Class({extends:e("BaseLayer"),properties:{Image_RoomMaster:cc.Node,Image_AutoPic:cc.Node,Image_ReadyPic:cc.Node,Image_Avatar:cc.Sprite,Text_Name:cc.Label,Text_Money:cc.Label,text_id:cc.Label,Image_BetBg:cc.Node,Text_BetNum:cc.Label,timerProg:cc.ProgressBar,text_dun:cc.Label,img_backCard:cc.Node,text_leftCard:cc.Label,img_rank:cc.Sprite,img_rank1:cc.SpriteFrame,img_rank2:cc.SpriteFrame,img_rank3:cc.SpriteFrame,img_rank4:cc.SpriteFrame,img_daDu:cc.Node},setData:function(e,t){this.user=e,this.target=t,this.initData(e)},initData:function(t){var i=this;if(t&&this.Text_Name){if(AvatarManager.requestHeadRes(t.headURL,t.userID,function(e){if(i.Image_Avatar&&cc.isValid(i.Image_Avatar)){var t=i.Image_Avatar.node.getChildByName("layerMask");t&&t.removeFromParent(),i.Image_Avatar.spriteFrame=e}},this.Image_Avatar),t.name=decodeURI(t.name),t.name.length>8?this.Text_Name.string=t.name.substring(0,8)+"...":this.Text_Name.string=t.name,RoomListManager.getRoomInfo()){var o=t.score;o=RoomListManager.getRoomInfo().type==E_ROOM_TYPE.CARD?t.score:RoomListManager.getRoomInfo().type==E_ROOM_TYPE.GOLD?F_GetMoneyDisplay(Number(t.money)):RoomListManager.getRoomInfo().type==E_ROOM_TYPE.PRIVATE?t.money:RoomListManager.getRoomInfo().type==E_ROOM_TYPE.MATCH||RoomListManager.getRoomInfo().type==E_ROOM_TYPE.REALMATCH||RoomListManager.getRoomInfo().type==E_ROOM_TYPE.BARRIERMATCH?t.score:t.money,new(e("GameLogicBase")),this.Text_Money.string=tools.formatNumberEx(o)}else this.Text_Money.string=tools.toAtlasValue(t.score);this.text_id&&(this.text_id.string="ID:"+t.userID)}},onLoad:function(){this.curTime=0},getImageAvatar:function(){return this.Image_Avatar.node},showBanker:function(){},showCut:function(){if(this.Image_Avatar){var e=new cc.Node,t=e.addComponent("LayerMask");t.maskWidth=this.Image_Avatar.node.width,t.maskHeight=this.Image_Avatar.node.height,e.opacity=220,t.clickToClose=!1,t.maskOpacity=230,e.name="layerMask",this.Image_Avatar.node.addChild(e),t.setLayerMaskButton(!0),this.showWords("\u4e0d\u597d\u610f\u601d,\u79bb\u5f00\u4e00\u4e0b\u4e0b")}},showPlayRoomMaster:function(e){this.Image_RoomMaster&&(this.Image_RoomMaster.active=!1,this.user.userID==e&&(this.Image_RoomMaster.active=!1))},showAuto:function(){this.Image_AutoPic&&(this.Image_AutoPic.active=!1)},showReady:function(e){this.Image_ReadyPic&&(this.Image_ReadyPic.active=e)},showWords:function(e,t,i){console.log("PlayerUI showWords",e),this.node.getComponent("UiShowWords")&&(this.node.getComponent("UiShowWords").showWords(e,t,i),this.node.getComponent("UiShowWords").delayClearWords(3))},showBet:function(e,t){if(this.Image_BetBg){if(!e)return void(this.Image_BetBg.active=!1);this.Image_BetBg.active=!0,this.Text_BetNum.getComponent(cc.Label).string=String(t)}},updateJewels:function(e){this.user.jewels=e},updateMoney:function(t,i,o,n){var a=this,s=function(){n?E_ResourceType.GOLD==o?a.Text_Money.string=tools.formatNumberEx(F_GetMoneyDisplay(Number(n)),2):a.Text_Money.string=tools.formatNumberEx(Number(n),2):E_ResourceType.GOLD==o?a.Text_Money.string=tools.formatNumberEx(F_GetMoneyDisplay(Number(t)),2):a.Text_Money.string=tools.formatNumberEx(Number(t),2)},r=t-i;if(0!=r){var c=cc.moveBy(1,cc.v2(0,20)),u=cc.moveBy(1,cc.v2(0,-20)),h=cc.callFunc(s,{}),l=cc.delayTime(1),d=cc.removeSelf(),f=null,_=RoomListManager.getRoomInfo().type;_!=E_ROOM_TYPE.PRIVATE&&_!=E_ROOM_TYPE.TABLE&&_!=E_ROOM_TYPE.GOLD||(r=F_GetMoneyDisplay(r)),(new(e("GameLogicBase"))).isGoldRoom(),r>0?(f=createBitmapFontLabel("+"+Math.abs(r),"font/result_font_num_win_yellow")).runAction(cc.sequence(c,h,l,d)):(f=createBitmapFontLabel("-"+Math.abs(r),"font/result_font_num_lose_blue")).runAction(cc.sequence(u,h,l,d)),f.setAnchorPoint(a.Text_Money.node.getAnchorPoint()),f.setPosition(a.Text_Money.node.getPosition()),a.Text_Money.node.parent.addChild(f)}else s()},playSuanPai:function(){var e=this.Image_Avatar.node,t=function(){var t=tools.stringFormat("NJJ/effect/suanpai/skeleton"),i=skeletonAnimationCreate(t,"animation");this._isNine&&0!=viewSeatNo&&i.setScale(.75),i.name="suanpai",i.setAnchorPoint(cc.v2(.5,.5)),i.setPosition(cc.v2(-3,0)),i.loop=!0,e.addChild(i)}.bind(this);this.scheduleOnce(t,0)},update:function(e){this.totalTime=30,this.isRunTime&&(this.curTime+=e,this.curTime>=30&&this.stopRunTime(),this.runTime())},beginRunTime:function(){this.isRunTime=!0,this.curTime=0},stopRunTime:function(){var e=this;this.isRunTime=!1,this.schedule(function(){e.timerProg.node.active=!e.timerProg.node.active},.2)},recoverTimerProg:function(){this.timerProg.node.active=!0,this.timerProg.progress=0},hideRunTime:function(){this.unscheduleAllCallbacks(),this.recoverTimerProg(),this.isRunTime=!1,this.curTime=0},runTime:function(){var e=this.curTime/this.totalTime;this.timerProg.progress=e},setDun:function(e){this.text_dun.string=e},setBackVisible:function(e){this.img_backCard&&(this.img_backCard.active=e)},setLeftCardNum:function(e){this.text_leftCard&&(this.text_leftCard.node.active=0!=e,this.text_leftCard.string=e)},showRank:function(e){this.img_rank.node.active=!0,this.img_rank.spriteFrame=this["img_rank"+e]},hideRank:function(){this.img_rank.node.active=!1},getImageDaDuNode:function(){return this.img_daDu},showDadu:function(){this.img_daDu.active=!0},hideDadu:function(){this.img_daDu.active=!1},clearDun:function(){this.text_dun.string="0"},clearSuanPai:function(){var e=this.Image_Avatar.node.getChildByName("suanpai");e&&(e.parent=null)},clear:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer",GameLogicBase:"GameLogicBase"}],PoolMgr:[function(e,t,i){"use strict";cc._RF.push(t,"c07c0ksCvxEA6YriH9DnTo7","PoolMgr"),Object.defineProperty(i,"__esModule",{value:!0}),i.PoolMgr=void 0;var o=cc._decorator,n=(o.ccclass,o.property,function(){function e(){this._dictPool={},this._dictPrefab={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!1,configurable:!0}),e.prototype.getNode=function(e,t){var i=e.name;e.position||(i=e.data.name),this._dictPrefab[i]=e;var o=null;if(this._dictPool.hasOwnProperty(i))o=(n=this._dictPool[i]).size()>0?n.get():cc.instantiate(e);else{var n=new cc.NodePool;this._dictPool[i]=n,o=cc.instantiate(e)}return o.parent=t,o.active=!0,o},e.prototype.putNode=function(e){if(e){var t=e.name,i=null;this._dictPool.hasOwnProperty(t)?i=this._dictPool[t]:(i=new cc.NodePool,this._dictPool[t]=i),i.put(e)}},e.prototype.prePool=function(e,t){var i=e.name,o=null;this._dictPool.hasOwnProperty(i)?o=this._dictPool[i]:(o=new cc.NodePool,this._dictPool[i]=o),this._dictPrefab[i]=e;for(var n=0;n<t;n++){var a=cc.instantiate(e);o.put(a)}},e.prototype.clearPool=function(e){this._dictPool.hasOwnProperty(e)&&this._dictPool[e].clear()},e._instance=null,e}());i.PoolMgr=n,cc._RF.pop()},{}],PublicProtocolId:[function(e,t){"use strict";cc._RF.push(t,"ac52furCihCmKDmqiQ5/60d","PublicProtocolId"),window.E_NET_CONNECT_MAINID={mainid_net_connect:1,mainid_net_hello:2},window.E_NET_CONNECT_ASSID={assid_net_connect:3,assid_net_test:1,assid_net_hello:2},window.E_ClientNetStatusProtocolDef={NetStatusProtocol_ConnectSuccess:8888880,NetStatusProtocol_ConnectFailed:8888881,NetStatusProtocol_DisConnect:8888882},cc._RF.pop()},{}],RepeatConnectLayer:[function(e,t){"use strict";cc._RF.push(t,"ca9fdynjSpLMa1vGTkKeig0","RepeatConnectLayer"),cc.Class({extends:e("BaseLayer"),properties:{rotateImg:cc.Node},onLoad:function(){this._super()},start:function(){var e=this;console.log(">>>>>>>RepeatConnectLayer start"),cc.sys.isNative||!LobbySocket.isReconnected?(0==Number(cc.sys.localStorage.getItem(G_LIVE_BROADCAST))&&this.rotateImg&&(this.rotateImg.stopAllActions(),this.rotateImg.active=!1),console.log(">>>>>>>\u54ce\u5440\u7f51\u7edc\u8d70\u4e22\u5566\uff0c\u5c1d\u8bd5\u627e\u56de\u4e2d..."),LobbySocket.clear(),this.schedule(function(){console.log("repeat connect schedule"),LobbySocket.setLoginDelegate(e),LobbySocket.reconnecService(),e.scheduleOnce(function(){LobbySocket.onLoginFailed(),e.unscheduleAllCallbacks(),window.repeatConnectLayer=null},G_COMMON_TIMEOUT_TIME)},2),removeLoading()):console.log(">>>\u5f53\u524d\u6b63\u5728isReconnected")},onLoginSuccess:function(){this.unscheduleAllCallbacks(),this.node&&(this.node.parent=null),window.repeatConnectLayer=null},onLoginFailed:function(){this.unscheduleAllCallbacks(),this.node&&(this.node.parent=null),window.repeatConnectLayer=null}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],ReqHttp:[function(e,t,i){"use strict";cc._RF.push(t,"15246KTAqpLj6cg6KiHAcX5","ReqHttp"),Object.defineProperty(i,"__esModule",{value:!0}),i.PHP_IP=void 0;var o="https://ouwan.hmzb.top/";i.PHP_IP="https://ouwan.hmzb.top/hm_ucenter/web/index.php";var n,a=function(){function e(){}return e.post=function(e,t,i,o,a){void 0===o&&(o=null),void 0===a&&(a=n.FORM);var s=cc.loader.getXMLHttpRequest();s.open("POST",e),s.setRequestHeader("Content-Type",a);var r="";switch(a){case n.FORM:Object.keys(t).forEach(function(e){r+=e+"="+encodeURIComponent(t[e])+"&"}),""!==r&&(r=r.substring(0,r.lastIndexOf("&")));break;case n.JSON:r=JSON.stringify(t)}s.onreadystatechange=function(){if(4==s.readyState&&s.status>=200&&s.status<=207){var e=s.responseText;i&&i(JSON.parse(e))}},s.onerror=function(e){o&&o(),console.error("POST ERROR"),console.error(e)},s.ontimeout=function(e){console.warn("POST TIMEOUT"),console.warn(e)},console.log(r),s.send(r)},e.get=function(e,t,i,o){void 0===o&&(o=null);var n=cc.loader.getXMLHttpRequest();n.open("GET",e+this.analyzeParams(t)),n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<=207){var e=n.responseText;i&&i(JSON.parse(e))}},n.onerror=function(e){o&&o(),console.error("GET ERROR"),console.error(e)},n.ontimeout=function(e){console.warn("GET TIMEOUT"),console.warn(e)},n.send()},e.analyzeParams=function(e){if(0==Object.keys(e).length)return"";var t="?";return Object.keys(e).forEach(function(i,o){o>0&&(t+="&"),t=t+i+"="+e[i]}),t},e.getJsapiTicket=function(e,t){var i={userID:e};this.post(o+"api/v1/user/getJsapiTicket",i,t)},e.getConfigData=function(e){this.post(i.PHP_IP,{api:"config",action:"config"},e)},e.getGameList=function(e){this.post(i.PHP_IP,{api:"lobby",action:"gameList"},e)},e.getRoomList=function(e){this.post(i.PHP_IP,{api:"lobby",action:"roomList"},e)},e.requestLoaderCheckLogon=function(e,t){var o={api:"match",action:"isAccessGame",userID:e};this.post(i.PHP_IP,o,t)},e.getLogonServer=function(e,t){this.post(o+"api/v1/server/getLogonServer",{},e,t)},e.requestSystemNotice=function(e,t,o){var n={api:"notice",action:"normalNoticeList",userID:e,num:t};this.post(i.PHP_IP,n,o)},e.getWxUserInfo=function(e,t){var i={code:e};this.post(o+"api/v1/user/getWxUserInfo",i,t)},e.getServerStatus=function(e,t){this.post(i.PHP_IP,{api:"Server",action:"newGetServerStatus"},e,t)},e.saveUserAddress=function(e,t,i,n,a){var s={userID:e,longitude:t,latitude:i,address:n};this.post(o+"api/v1/user/saveUserAddress",s,a)},e.getUserInfo=function(e,t){var o={api:"user",action:"getUserInfo",userID:e};this.post(i.PHP_IP,o,t)},e.sendCode=function(e,t){var o={phone:e,type:0};this.post(i.PHP_IP+"/api/v1/Phone/sendCode",o,t)},e.getMatchInfo=function(e,t){var o={api:"Checkpoint",action:"getMakeCertificate",userID:e};this.post(i.PHP_IP,o,t)},e.getSystemNotice=function(e,t){var i={action:"GetNotice",num:window.G_CHAT_COMMON_MAX_NUM},o="http://"+window.NetConfig.getHttpDomain()+"/API/index.php";this.post(o,i,e,t)},e.requestUserBuyRoomList=function(e,t){var o={api:"lobby",action:"userBuyRoomList",userID:e};this.post(i.PHP_IP,o,t)},e.requestDissmissRoom=function(e,t,o){var n={api:"lobby",action:"dismissRoom",userID:e,passwd:t};this.post(i.PHP_IP,n,o)},e.giftBuyFortunella=function(e,t,o){var n={api:"Resource",action:"giftBuyFortunella",userID:e,giftCard:t};this.post(i.PHP_IP,n,o)},e.buyDeskList=function(e,t,o){var n={api:"lobby",action:"buyDeskList",gameID:null,userID:e,gameIDInfo:t};this.post(i.PHP_IP,n,o)},e.requestQualifyingCount=function(e){this.post(i.PHP_IP,{api:"lobby",action:"qualifyingCount"},e)},e.getCheckpointConfig=function(e){this.post(i.PHP_IP,{api:"Checkpoint",action:"getCheckpointConfig"},e)},e}();i.default=a,function(e){e.JSON="application/json",e.FORM="application/x-www-form-urlencoded"}(n||(n={})),cc._RF.pop()},{}],RoomListManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"8643bm8V1pO94/IWNvYVnxW","RoomListManager");var a=e("../../Conn/ReqHttp").default,s=cc.Class({ctor:function(){this.roomList={},this.roomListData=null},requestAllRoomList:function(e){var t=this;if(this.roomListData&&e)return e(this.roomListData);a.getRoomList(function(o){if(0==o.status){for(var n,a=i(o.data);!(n=a()).done;){var s=n.value;t.addRoomByGameID(s.gameID,s)}e&&(t.roomListData=o.data,e(o.data))}else createTips(o.msg)})},addRoomByGameID:function(e,t){this.roomList[e]||(this.roomList[e]=[]);for(var i=!0,o=0;o<this.roomList[e].length;++o)this.roomList[e][o].roomID==t.roomID&&(i=!1);i&&this.roomList[e].push(t)},getCardRoomListByGameID:function(e){var t=[];if(this.roomList[e])for(var o,n=i(this.roomList[e]);!(o=n()).done;){var a=o.value;a.type===E_ROOM_TYPE.CARD&&t.push(a)}return t},getCardRoomByGameID:function(e){var t=this.getCardRoomListByGameID(e);return 0===t.length?createTips(tools.stringFormat("id\u4e3a{0}\u7684\u6e38\u620f\u6ca1\u6709\u79ef\u5206\u623f",e)):1===t.length?t[0]:(t=t.sort(function(e,t){return e.roomID>t.roomID?1:e.roomID<t.roomID?-1:0}))[0]},getMatchRoomByGameID:function(e){var t,i=this.getMatchRoomListByGameID(e);return 0==i.length?createTips("id\u4e3a"+e+"\u7684\u6e38\u620f\u8fd8\u6ca1\u6709\u6bd4\u8d5b\u623f"):(1==i.length?t=i[0]:(i.sort(function(e,t){return e.roomID<t.roomID?-1:1}),t=i[0]),t)},getMatchRoomListByGameID:function(e){var t=[];if(this.roomList[e])for(var o,n=i(this.roomList[e]);!(o=n()).done;){var a=o.value;a.type==E_ROOM_TYPE.MATCH&&t.push(a)}return t},getPrivateRoomByGameID:function(e){var t,i=this.getPrivateRoomListByGameID(e);return 0==i.length?createTips("id\u4e3a"+e+"\u7684\u6e38\u620f\u6ca1\u6709\u91d1\u5e01\u623f"):(1==i.length?t=i[0]:(i.sort(function(e,t){return e.roomID<t.roomID?-1:1}),t=i[0]),t)},getPrivateRoomListByGameID:function(e){var t=[];if(this.roomList[e])for(var o,n=i(this.roomList[e]);!(o=n()).done;){var a=o.value;a.type==E_ROOM_TYPE.PRIVATE&&t.push(a)}return t},getGameListHaveCardRoom:function(){var e=cc.sys.localStorage.getItem(G_CHOOSE_CITY);e||(e=0);for(var t,o=[],n=i(CityListManager.getGameListByCityID(e));!(t=n()).done;){var a=t.value;this.isGameHaveCardRoom(a)&&o.push(a)}return o},getGameListHaveGoldRoom:function(){var e=cc.sys.localStorage.getItem(G_CHOOSE_CITY);e||(e=0);for(var t,o=[],n=i(CityListManager.getGameListByCityID(e));!(t=n()).done;){var a=t.value;this.isGameHaveGoldRoom(a)&&o.push(a)}return o},getGameListHaveMatchRoom:function(){var e=cc.sys.localStorage.getItem(G_CHOOSE_CITY);e||(e=0);for(var t,o=[],n=i(CityListManager.getGameListByCityID(e));!(t=n()).done;){var a=t.value;this.isGameHaveMatchRoom(a)&&o.push(a)}return o},getGameListHavePrivateRoom:function(){var e=cc.sys.localStorage.getItem(G_CHOOSE_CITY);e||(e=0);for(var t,o=[],n=i(CityListManager.getGameListByCityID(e));!(t=n()).done;){var a=t.value;this.isGameHavePrivateRoom(a)&&o.push(a)}return o},isGameHavePrivateRoom:function(e){if(this.roomList[e])for(var t,o=i(this.roomList[e]);!(t=o()).done;)if(t.value.type===E_ROOM_TYPE.CARD)return!0;return!1},isGameHaveCardRoom:function(e){if(this.roomList[e])for(var t,o=i(this.roomList[e]);!(t=o()).done;)if(t.value.type===E_ROOM_TYPE.CARD)return!0;return!1},isGameHaveGoldRoom:function(e){if(this.roomList[e])for(var t,o=i(this.roomList[e]);!(t=o()).done;)if(t.value.type===E_ROOM_TYPE.GOLD)return!0;return!1},isGameHaveMatchRoom:function(e){if(this.roomList[e])for(var t,o=i(this.roomList[e]);!(t=o()).done;)if(t.value.type===E_ROOM_TYPE.MATCH)return!0;return!1},getRoomByRoomID:function(e){for(var t in this.roomList)for(var o,n=i(this.roomList[t]);!(o=n()).done;){var a=o.value;if(a.roomID===e)return a}return createTips(tools.stringFormat("\u623f\u95f4id\u4e3a:{0}\u7684\u623f\u95f4\u4fe1\u606f\u4e0d\u5b58\u5728",e)),null},setRoomInfo:function(e){this.roomInfo=e},getRoomInfo:function(){return this.roomInfo?this.roomInfo:null},setCurRuleInfo:function(e){this._ruleinfo=e},getCurRuleInfo:function(){return this._ruleinfo},getRoomNameByRoomID:function(e){for(var t in this.roomList){var i=this.roomList[t];for(var o in i){var n=i[o];if(n.roomID==e)return n.name.indexOf("\u70b8\u91d1\u5316")>=0&&(n.name=n.name.replace("\u70b8\u91d1\u5316","\u70b8\u91d1\u82b1")),n.name}}},getLuziInfo:function(){return this.luziInfo},setLuziInfo:function(e){this.luziInfo=this.luziInfo||[],this.luziInfo[e.roomID]=e},getGoldRoomListByGameID:function(e){var t=[];if(this.roomList[e])for(var i in this.roomList[e]){var o=this.roomList[e][i];o.type===E_ROOM_TYPE.GOLD&&t.push(o)}return console.log(t,this.roomList,this.roomList[e]),t}});t.exports=s,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp"}],RoomRecordManager:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=o(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}cc._RF.push(t,"d966am+Mz5Eopz4FI5Go7sG","RoomRecordManager"),t.exports=cc.Class({ctor:function(){this.roomRecordList={}},setRoomRecordList:function(e){this.roomRecordList={};for(var t,o=i(e);!(t=o()).done;){var n=t.value;this.addRoomRecord(n)}},addRoomRecord:function(e){this.roomRecordList[e.passwd]=e},getRoomRecordList:function(){var e=[];for(var t in this.roomRecordList){var i=this.roomRecordList[t];i&&e.push(i)}return e.sort(function(e,t){return e.buyDeskTime==t.buyDeskTime?e.roomID<t.roomID?-1:1:e.buyDeskTime>t.buyDeskTime?-1:1}),e},getRoomRecord:function(e){return this.roomRecordList[e]},updateRoomRecord:function(e){var t=this.getRoomRecord(e.passwd);t&&(t.userCount=e.userCount)},delRoomRecord:function(e){this.roomRecordList[e]=null},clearRoomRecordList:function(){this.roomRecordList={}},dealNotifyUserCountChange:function(e){var t,i,o=((i={}).changeType=(t=e).popINT(),i.passwd=t.readString(20),i.userCount=t.popINT(),i);e.bHandleCode==G_HANDLE_CODE_OK&&(1==o.changeType?(this.updateRoomRecord(o),DataNotify.onBuyDeskInfoUpdate(o)):2==o.changeType&&(this.delRoomRecord(o.passwd),DataNotify.onBuyDeskInfoDel(o.passwd)))}}),cc._RF.pop()},{}],RoundRectMask:[function(e,t,i){"use strict";cc._RF.push(t,"06f2fTo2MlH8I6f1sHNt/LG","RoundRectMask");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=cc._decorator.executeInEditMode,h=cc._decorator.disallowMultiple,l=cc._decorator.requireComponent,d=cc._decorator.menu;cc.macro.ENABLE_WEBGL_ANTIALIAS=!0;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radius=50,t.mask=null,t}return n(t,e),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this.updateMask(e)},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.mask=this.getComponent(cc.Mask),this.updateMask(this.radius)},t.prototype.updateMask=function(e){var t=e>=0?e:0;t<1&&(t=Math.min(this.node.width,this.node.height)*t),this.mask.radius=t,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=cc.Mask.Type.RECT},t.prototype._updateGraphics=function(){var e=this._graphics;e&&this.onDraw(e)},t.prototype.onDraw=function(e){e.clear(!1);var t=this.node,i=t.width,o=t.height,n=-i*t.anchorX,a=-o*t.anchorY;e.roundRect(n,a,i,o,this.radius||0),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?e.stroke():e.fill()},a([c()],t.prototype,"_radius",void 0),a([c({tooltip:"\u5706\u89d2\u534a\u5f84:\n0-1\u4e4b\u95f4\u4e3a\u6700\u5c0f\u8fb9\u957f\u6bd4\u4f8b\u503c, \n>1\u4e3a\u5177\u4f53\u50cf\u7d20\u503c"})],t.prototype,"radius",null),a([r,u(!0),h(!0),l(cc.Mask),d("\u6269\u5c55/\u5706\u89d2\u77e9\u5f62\u906e\u7f69")],t)}(cc.Component);i.default=f,cc._RF.pop()},{}],SpriteArray:[function(e,t,i){"use strict";cc._RF.push(t,"46dfbRjUQpH/q5UbWNSZSNC","SpriteArray");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,u=s.requireComponent,h=s.menu,l=s.executeInEditMode,d=s.disallowMultiple,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t.sfArray=new Array,t}return n(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){if(e>=0&&e<this.sfArray.length){this._index=e;var t=this.sfArray[e];this.node.getComponent(cc.Sprite).spriteFrame=t}},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.index=0},a([c],t.prototype,"_index",void 0),a([c({displayName:"Sprite\u7d22\u5f15"})],t.prototype,"index",null),a([c({type:[cc.SpriteFrame],displayName:"Sprite\u6570\u7ec4"})],t.prototype,"sfArray",void 0),a([r,l(!0),d(!0),u(cc.Sprite),h("\u6269\u5c55/SpriteArray")],t)}(cc.Component);i.default=f,cc._RF.pop()},{}],StringTable:[function(e,t){"use strict";cc._RF.push(t,"fc472DKZyJFwqa6dF/nrUB3","StringTable"),t.exports={NUM_MEASUREMENT:{1:"\u4e07",2:"\u4ebf"},LOADSCENE:{1:"\u6b63\u5728\u52a0\u8f7d\u767b\u5f55\u754c\u9762\u8d44\u6e90...",2:"\u6b63\u5728\u52a0\u8f7d\u5927\u5385\u8d44\u6e90...",3:"\u6b63\u5728\u52a0\u8f7d\u725b\u725b\u623f\u95f4\u8d44\u6e90...",4:"\u6b63\u5728\u52a0\u8f7d\u70b8\u91d1\u82b1\u623f\u95f4\u8d44\u6e90...",5:"\u6b63\u5728\u52a0\u8f7d\u9ebb\u5c06\u623f\u95f4\u8d44\u6e90..."},LOBBY_RANK:{1:"\u672c\u5468\u80dc\u5c40 ",2:"\u91d1\u5e01\u603b\u6570 "},COMMON:{1:"\u656c\u8bf7\u671f\u5f85",2:"\u6e38\u620f\u6682\u672a\u5f00\u653e",3:"\u91d1\u5e01\u4e0d\u8db3%1,\u65e0\u6cd5\u8fdb\u5165\u8be5\u623f\u95f4"},SOCKET_CLOSE:{1:"\u5927\u5385\u670d\u52a1\u5668\u65ad\u5f00\u8fde\u63a5...",2:"\u5927\u5385\u670d\u52a1\u5668\u6682\u672a\u5f00\u542f...",3:"\u6b63\u5728\u94fe\u63a5\u5927\u5385\u670d\u52a1\u5668...",4:"\u6e38\u620f\u670d\u52a1\u5668\u65ad\u5f00\u8fde\u63a5...",5:"\u6e38\u620f\u670d\u52a1\u5668\u6682\u672a\u5f00\u542f..."},ERROR_CODE:{0:"\u9519\u8bef\u7801:",1:"\u8d26\u53f7\u5df2\u5b58\u5728",2:"\u8d26\u53f7\u4e0d\u5b58\u5728",16:"\u91d1\u5e01\u672a\u8fbe\u5230\u5f53\u524d\u623f\u95f4\u6700\u4f4e\u8981\u6c42"},MESSAGE_BOX:{1:"\u8d26\u53f7\u6216\u8005\u5bc6\u7801\u8f93\u5165\u9519\u8bef..."},NIUNIU:{0:"\u5e95\u6ce8:",1:"\u8bf7\u51c6\u5907\u5f00\u59cb\u4e0b\u5c40\u6e38\u620f:",2:"\u5f00\u59cb\u53eb\u5e84:",3:"\u5f00\u59cb\u4e0b\u6ce8:",4:"\u67e5\u770b\u624b\u724c:",5:"\u5f00\u59cb\u6bd4\u724c:"},NIUNIU_PLAY_TYPE:{1:"\u725b\u725b\u4e0a\u5e84",2:"\u56fa\u5b9a\u5e84\u5bb6",3:"\u81ea\u7531\u62a2\u5e84",4:"\u660e\u724c\u62a2\u5e84",5:"\u901a\u6bd4\u725b\u725b"}},cc._RF.pop()},{}],SystemNoticeLogic:[function(e,t){"use strict";cc._RF.push(t,"dbb15q7ZOFFo48aSZc0Q/OS","SystemNoticeLogic"),t.exports=cc.Class({extends:e("LogicBasis"),ctor:function(){},requestSystemNotice:function(e){NoticeManager.requestSystemNotice(e)},requestPayPrepayID:function(e,t,i,o){NoticeManager.requestPayPrepayID(e,t,i,o)},requestShopMommodity:function(e){NoticeManager.requestShopMommodity(e)},requestPaijuList:function(e){NoticeManager.requestPaijuList(e)},requestZhanjiList:function(e,t){NoticeManager.requestZhanjiList(e,t)},requestZhanjiDetailsList:function(e,t){NoticeManager.requestZhanjiDetailsList(e,t)},requesSmalltZhanjiDetailsList:function(e,t){NoticeManager.requesSmalltZhanjiDetailsList(e,t)},requestGongGaoMommodity:function(e){NoticeManager.requestGongGaoMommodity(e)},requestShartReward:function(e){NoticeManager.requestShartReward(e)},requestSpecialNotice:function(e){NoticeManager.requestSpecialNotice(e)},requestdelNotice:function(e,t){NoticeManager.requestdelNotice(e,t)}}),cc._RF.pop()},{LogicBasis:"LogicBasis"}],TcpClient:[function(e,t){"use strict";cc._RF.push(t,"a8ee4Jmr19Ovp02MEhocdUw","TcpClient");var i=e("bytebuffer"),o=e("Package"),n=cc.Class({extends:cc.Component,properties:{outtime:10,hearttime:5,readhead:!1,_buffer:null,manager:null,isServerRoom:!1,needReConnect:!1},ctor:function(){this.ip=0,this.port=0,this.ws=null,this.queue=[],this.queueProcessing=!1,this.readhead=!1,this.bodylen=0,this.headlen=8,this.cmd=0,this.isConnect=!1,this._buffer=new i,this.netCallbackMap=new Map,this.helloScheduleId=null,this.helloCheckInterval=4,this.heartCheckCount=2,this.heartCheckInterval=15,this.packageQueue=this.initQueue(),this.receiveDataArr=[]},setHeartCheckInterval:function(e){this.heartCheckInterval=e,this.heartCheck()},connect:function(e,t,i){if(!(this.ws&&this.ws.readyState===WebSocket.OPEN||this.isConnect)){this.ip=e,this.port=t,this.sendport=i;var o;o=1==window.G_GAMESEVER_KEY?"wss://cpp.ouwan.hmzb.top/ws":"wss://cpp.ouone.hmzb.top/ws",this.ws=new WebSocket(o),console.log("\u5c1d\u8bd5\u8fde\u63a5\u670d\u52a1\u5668 url:",o),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this);var n=this.onDataReceivedQueue.bind(this);this.ws.onmessage=function(e){n(e.data)},this.ws.onerror=this.onError.bind(this),this.ws.onclose=this.onClose.bind(this)}},close:function(e){console.log("\u5f53\u65ad\u7f51\u91cd\u65b0\u8fdb\u5165\u5230\u524d\u53f0  this.isConnect=false \u6b63\u5e38\u4e3a true"),cc.sys.isNative&&!this.isConnect||(this.receiveDataArr=[],clearInterval(this.receivePackageInterval),this.receivePackageInterval=null,this.bythis=!0,this.ws&&this.ws.close(),cc.sys.isNative&&(this.onDisconnect(),this.isConnect=!1),this.closeCallback=e)},onOpen:function(){this.isConnect=!0,console.log("\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f ip:"+this.ip+",port:"+this.sendport),this.clearPackageQueue(),this.sendPort()},sendPort:function(){console.log(typeof this.sendport+"\u8fde\u63a5\u670d\u52a1\u5668\u4e4b\u540e \u53d1\u9001\u7aef\u53e3 port="+this.sendport);var e=o.buildWritePack(28);e.writeBegin(1,8),e.writeInt(this.sendport);var t=NetConfig.getServerAddress();e.writeString(t,24),console.log("ip="+t),this.send(e)},onClose:function(e){var t=this;console.log("\u8fde\u63a5\u5173\u95ed"+this.isConnect),console.log(e),this.isConnect&&((new Date).getTime().toString(),this.receiveDataArr=[],clearInterval(this.receivePackageInterval),this.receivePackageInterval=null,this.heartReset(),console.log("websocket \u65ad\u5f00: code = "+e.code+" reason =  "+e.reason+" wasClean = "+e.wasClean),1006==e.code&&(0==Number(cc.sys.localStorage.getItem(G_LIVE_BROADCAST))?this.onDisconnect():(this.livcheduleId=function(){1==Number(cc.sys.localStorage.getItem(G_LIVE_BROADCAST))&&(t.onDisconnect(),t.unschedule(t.livcheduleId))},this.schedule(this.livcheduleId,3))),this.isConnect=!1)},onError:function(){trace("\u8fde\u63a5\u5931\u8d25"),console.log("\u8fde\u63a5\u5931\u8d25"),this.isServerRoom?(ServerRoom=null,this.bythis):this.bythis},initQueue:function(){var e=[];return{push:function(t){return null!=t&&(e.unshift(t),!0)},pop:function(){return e.pop()},getSize:function(){return e instanceof Array?e.length:0},queue:function(){return e},clear:function(){e.length=0,this.receiveDataArr=[],clearInterval(this.receivePackageInterval),this.receivePackageInterval=null,this.curLeftReceiveArrayBuffer=null,this.isRunReceivePackage=!1,this.isBufferedAmount=!1,this.isClearIngPackage=!0,clearInterval(this.packageQueueInterval),this.packageQueueInterval=null,cc.isRunPackageQueue=!1}}},startPackageQueueInterval:function(){var e=this;cc.isRunPackageQueue=!1,this.packageQueueInterval=setInterval(function(){if(e.packageQueue.getSize()>0&&!cc.isRunPackageQueue){cc.isRunPackageQueue=!0;var t=e.packageQueue.pop();e.onDataReceived(t)}},1)},_appendArrayBuffer:function(e,t){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i.buffer},onDataReceivedQueue:function(e){var t=this;cc.sys.isNative&&!this.isConnect||(this.isClearIngPackage=!1,this.receiveDataArr.unshift(e),this.receivePackageInterval||(this.receivePackageInterval=setInterval(function(){if(!t.isBufferedAmount&&!t.isRunReceivePackage)if(t.receiveDataArr&&t.receiveDataArr.length>0){t.isRunReceivePackage=!0;var e=t.receiveDataArr.pop();t.curLeftReceiveArrayBuffer&&(e=t._appendArrayBuffer(t.curLeftReceiveArrayBuffer,e),t.curLeftReceiveArrayBuffer=null);var o=new i,n=o.append(e).flip().buffer.byteLength;if(console.log("arrayBufferLength",n),e.byteLength>=1200||10240==e.byteLength||e.byteLength>=32&&n!=e.byteLength){t.isBufferedAmount=!0;var a=null;a=o.readBytes(t.headlen).readUint32();var s=e.slice(0,a);for(t.packageQueue.push(s),console.log(a+">>>\u589e\u52a01\u4e2a\u6536\u5305\u961f\u5217 \u603b\u6570\u4e3a"+t.packageQueue.getSize());e.byteLength>=a&&(e=e.slice(a),n=(o=new i).append(e).flip().buffer.byteLength,console.log("arrayBufferLength",n),!(0==(a=o.readBytes(t.headlen).readUint32())||e.byteLength<a||t.isClearIngPackage));)s=e.slice(0,a),t.packageQueue.push(s),console.log(a+">>>\u518d\u589e\u52a01\u4e2a\u6536\u5305\u961f\u5217 \u603b\u6570\u4e3a"+t.packageQueue.getSize());t.isClearIngPackage?(t.curLeftReceiveArrayBuffer=null,t.isBufferedAmount=!1):e.byteLength<a?(t.curLeftReceiveArrayBuffer=e,t.isBufferedAmount=!1):(s=e.slice(0,a),t.packageQueue.push(s),t.curLeftReceiveArrayBuffer=null,t.isBufferedAmount=!1),t.isRunReceivePackage=!1}else{var r=o.readBytes(t.headlen),c=(r.readUint32(),r.readUint32()),u=r.readUint32();1==c&&3==u&&t.clearPackageQueue(),t.isBufferedAmount=!1,t.isRunReceivePackage=!1,t.packageQueue.push(e),console.log(">>>\u589e\u52a01\u4e2a\u6536\u5305\u961f\u5217 \u603b\u6570\u4e3a"+t.packageQueue.getSize())}}else t.isRunReceivePackage=!1,t.isBufferedAmount=!1,clearInterval(t.receivePackageInterval),t.receivePackageInterval=null},.1)),this.packageQueueInterval||this.startPackageQueueInterval())},mRecData:function(e){if(this._buffer.append(e),this._buffer.flip(),this._buffer.limit-this._buffer.offset<this.headlen)cc.error("\u8fd9\u5305\u8fde\u5934\u90fd\u4e0d\u5b8c\u6574");else{var t=this._buffer.readBytes(this.headlen);this.bodylen=t.readUint32(),this.cmd=t.readUint32();for(var i=this.bodylen-this.headlen;this._buffer.limit>=i&&(1==this.cmd?this.onTick(this.cmd,this._buffer.readBytes(i)):this.receive(this.cmd,this._buffer.readBytes(i)),this._buffer.offset!=this._buffer.limit)&&!(this._buffer.limit-this._buffer.offset<this.headlen););this._buffer.offset==this._buffer.limit?this._buffer.clear():this._buffer=this._buffer.copy(this._buffer.offset,this._buffer.limit)}},onDataReceived:function(e){this._buffer.reset(),this._buffer.clear(),this._buffer.append(e),this._buffer.flip();for(var t,i=1e4;i>0;){if(this.paused=!0,!1===this.readhead){var o=this._buffer.readBytes(this.headlen);if(this.bodylen=o.readUint32(),this.cmd=o.readUint32(),console.log("this.bodylen = ",this.bodylen),console.log("cmd = ",this.cmd),0==this.bodylen||0==this.cmd||this.cmd>1e3)return this._buffer.reset(),this._buffer.clear(),void(cc.isRunPackageQueue=!1);0==this._buffer.limit&&(this._buffer.limit=this.bodylen),this.readhead=!0}else{if(t=this.bodylen-this.headlen,!(this._buffer.limit>=t)){this._buffer.reset(),this._buffer.clear(),this.readhead=!1,this.cmd=0,this.bodylen=0,cc.isRunPackageQueue=!1;break}if(1==this.cmd?this.onTick(this.cmd,this._buffer.readBytes(t)):this.receive(this.cmd,this._buffer.readBytes(t)),this.readhead=!1,this.cmd=0,this.bodylen=0,this._buffer.offset==this._buffer.limit){this._buffer.reset(),this._buffer.clear(),cc.isRunPackageQueue=!1,this.paused=!1;break}this._buffer=this._buffer.copy(this._buffer.offset,this._buffer.limit)}i--}},process:function(){this.queueProcessing=!0;for(var e,t=this.queue.length,i=0;i<t;i++){if(this._paused)return void(this.queueProcessing=!1);(e=this.queue[i]).hasRead||(e.hasRead=!0,this.onDataReceived(e.buffer))}this.queue.length=0,this.queueProcessing=!1},onTick:function(e,t){var i=o.buildReadPack(e,t);1==i.bAssistantID?this.onHeartBeatMessage(i):i.bAssistantID==E_NET_CONNECT_ASSID.assid_net_connect&&this.onConnectMessage(i)},receive:function(e,t){this.sendHeartBeatMessage(),this.heartCheck();var i=o.buildReadPack(e,t);206==i.bAssistantID&&(console.log(i,"pppppppppppppppppppppppppp"),console.log(t,"tmsgtmsgtmsgtmsgtmsgtmsg"),console.log(this._buffer,"this._bufferthis._bufferthis._bufferthis._buffer")),this.cmd==MSG_MAIN_LOADER_GAME&&1==this.throwGameMsg?cc.error("(\u5c4f\u853d \u6536\u5305<<<<<<"+e+"-"+i.bAssistantID+"-"+i.bHandleCode+") "):this.netCallback&&this.netCallback(i)},sendData:function(e,t,i){this.send(e,t,i)},send:function(e,t,i){e.bMainID,e.getCmd()&&t&&this.bindingNetCallback(e.getCmd(),t),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(e.getData()),i&&(console.log("sendDesc = {0}",i),createLoading(i,G_COMMON_LOADING_TIME))},listenerPackageData:function(){},bindingNetCallback:function(e,t){var i=this.netCallbackMap.get(e);i||(i=new Array,this.netCallbackMap.set(e,i)),i.push(t)},getCallbackFun:function(e){var t=this.netCallbackMap.get(e);if(t)return t[0]},removeNetCallback:function(e){var t=this.netCallbackMap.get(e);t&&(t.splice(0,1),0==t.length&&(t=null,this.netCallbackMap.delete(e)))},removeAllNetCallback:function(){this.netCallbackMap.clear()},onConnectMessage:function(){this.heartCheck()},heartCheck:function(){cc.sys.isNative&&!this.isConnect||(this.heartReset(),this.heartStart())},heartStart:function(){var e=this;this.pingTimeoutId=setTimeout(function(){e.sendGameHeartBeatMessage(),e.pongTimeoutId=setTimeout(function(){0==Number(cc.sys.localStorage.getItem(G_LIVE_BROADCAST))&&e.onDisconnect()},100)},1e3*this.heartCheckInterval)},heartReset:function(){this.pingTimeoutId&&clearTimeout(this.pingTimeoutId),this.pongTimeoutId&&clearTimeout(this.pongTimeoutId),this.pingTimeoutId=null,this.pongTimeoutId=null},sendHeartBeatMessage:function(){!cc.sys.isNative||this.isConnect},sendGameHeartBeatMessage:function(){if(!cc.sys.isNative||this.isConnect){var e=o.buildWritePack(0);e.writeBegin(2,2),console.error("\u53d1\u9001\u5fc3\u8df3\u5305"+(new Date).getSeconds()),this.send(e,!1)}},onHeartBeatMessage:function(){var e=o.buildWritePack(0);e.writeBegin(2,2),this.send(e),this.heartCheck()},sendHelloMessage:function(){var e=this,t=this.createNetMsg(0,E_NET_CONNECT_MAINID.mainid_net_hello,E_NET_CONNECT_ASSID.assid_net_hello);this.sendData(t),this.closeHelloSchedule(),this.helloCheckCount=0,this.helloScheduleId=function(){e.helloCheckCount++,e.helloCheckCount>3&&(e.closeHelloSchedule(),e.onDisconnect())},this.schedule(this.helloScheduleId,this.helloCheckInterval)},closeHelloSchedule:function(){console.log("closeHelloSchedule"),this.helloScheduleId&&(this.unschedule(this.helloScheduleId),this.helloScheduleId=null)},connectService:function(e,t,i,o){this.isConnect||(this.netCallback=o,this.connect(e,t,i))},isConnected:function(){return this.isConnect},resolveNetMsgHead:function(e){console.log("resolveNetMsgHead resolve net msg head "+e.bMainID+">>"+e.bAssistantID),e.bMainID===E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectSuccess?(console.log("on connect success"),this.onConnectSuccess()):e.bMainID==E_ClientNetStatusProtocolDef.NetStatusProtocol_ConnectFailed?this.onConnectFailed():e.bMainID==E_ClientNetStatusProtocolDef.NetStatusProtocol_DisConnect?this.onDisconnect():E_NET_CONNECT_MAINID.mainid_net_connect==e.bMainID&&E_NET_CONNECT_ASSID.assid_net_connect==e.bAssistantID?this.onConnectMessage(e):E_NET_CONNECT_MAINID.mainid_net_connect==e.bMainID&&E_NET_CONNECT_ASSID.assid_net_test==e.bAssistantID?this.onHeartBeatMessage(e):E_NET_CONNECT_MAINID.mainid_net_hello==e.bMainID&&E_NET_CONNECT_ASSID.assid_net_hello==e.bAssistantID&&this.closeHelloSchedule()},onConnectSuccess:function(){},onConnectFailed:function(){},onDisconnect:function(){},createNetMsg:function(e,t,i,n,a){a=a||0;var s=o.buildWritePack(e);return s.writeBegin(t,i,a),s},makeCheckCode:function(e,t,i,o){var n=F_RandomNum(1,5e3)+5e3;return(e+t+i+o)%n+(n<<16)},clearPackageQueue:function(){this.packageQueue.clear()},clear:function(){this.netCallbackMap.clear(),this.clearPackageQueue(),this.closeHelloSchedule()},setThrowGameMsg:function(e){"boolean"==typeof e?this.throwGameMsg=e:cc.error("set Throw game msg type wrong")}});t.exports=n,cc._RF.pop()},{Package:"Package",bytebuffer:"bytebuffer"}],TipLayer:[function(e,t){"use strict";cc._RF.push(t,"e1ab0u+WGRLprC4uCEETJoh","TipLayer"),cc.Class({extends:e("BaseLayer"),properties:{text:cc.Node,bgHeight:30,delayTime:2},onLoad:function(){this._super(),this.node&&this.node.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2))},initTip:function(e,t){t&&(this.delayTime=t),this.node&&(this.node.name=e),this.setMsg(e);var i=cc.view.getFrameSize();i.height>i.width||this.beginAction()},initClickTip:function(e,t){this.node&&(this.node.name=e),this.delayTime=0,this.setMsg(e);var i=cc.view.getFrameSize();i.height>i.width||this.popAction(),this.fitBgSize(),this.node.getComponent("LayerMask").setLayerClickCallback(t)},setMsg:function(e){if(this.text&&this.text&&cc.isValid(this.text)){var t=this.text.getComponent(cc.Label);t&&e&&(t.string=e,e.length>15&&(t.fontSize=30))}},beginAction:function(){this.delayTime=5;var e,t=cc.moveBy(.3,cc.v2(0,this.bgHeight)),i=cc.delayTime(this.delayTime),o=cc.fadeOut(.3),n=cc.removeSelf(),a=cc.delayTime(2),s=cc.view.getFrameSize();e=s.height>s.width?cc.sequence(i,o,n):cc.sequence(t,a,o,n),this.node&&this.node.runAction(e)},popAction:function(){this.node&&this.node.runAction(cc.moveBy(.3,cc.v2(0,this.bgHeight)))},removeAction:function(){this.node&&this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.removeSelf()))},touchEventCallback:function(){this.removeAction()},fitBgSize:function(){}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],Tools:[function(e,t){"use strict";cc._RF.push(t,"bc1ccY1pChLC5YrBgQjPE+Y","Tools");var i={getCurTime:function(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?"0"+e.getDate():e.getDate(),o=e.getHours()<10?"0"+e.getHours():e.getHours(),n=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return e.getFullYear()+"-"+t+"-"+i+" "+o+":"+n+":"+a},setCurScreen:function(){cc.view.getFrameSize(),cc.Canvas.instance.designResolution,cc.winSize;var e=cc.view.getVisibleSize();cc.view.getVisibleSizeInPixel(),cc.view.getDesignResolutionSize(),e.height>1400?CUR_SCREEN=!0:CUR_SCREEN=!1},getCurScreen:function(){return CUR_SCREEN},convertGetParams:function(e){var t="";if(null===e)return t;for(var i in t="?",e)"?"!==t&&(t+="&"),t=t+i+"="+e[i];return t},convertPostParams:function(e){if(null===e)return null;var t="";for(var i in e)""!==t&&(t+="&"),t=t+i+"="+e[i];return t},decimalToHex:function(e,t){var i=Number(e).toString(16);for(t=null==t?t=2:t;i.length<t;)i="0"+i;return i},fillZero2:function(e,t){var i=e+"";if(i.length>=2)return i;t||(t=0);for(var o=0;o<t;o++)i="0"+i;return i},fillZero:function(e,t){return e.length>2||t<2?e:(Array(t-1).join("0")+e).slice(-t)},stringFormat:function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);return e.format.apply(e,t)},stringTrim:function(e){return e.replace(/^\s+|\s+$/g,"")},getLength:function(e){var t=0;for(var i in e)t++;return t},getMachineID:function(){return this.machineID?this.machineID:(new Date).toLocaleTimeString()},getWindowsMac:function(){},struct_extends:function(e,t){var i=[],o=function(e){for(var t in i)if(i[t].k==e)return t};for(var n in e.push(t),e){var a=e[n];for(var s in a){var r=a[s],c=o(r.k)||i.length;i[c]=r}}return i},popArray:function(e,t,i,o,n){var a=[];if(o)for(var s=0;s<i;s++){for(var r=[],c=0;c<o;c++)"BOOL"==e?r[c]=t.popBOOL():"INT"==e?r[c]=t.popINT():"UINT"==e?r[c]=t.popUINT():"CHAR"==e?r[c]=t.readString(n):"BYTE"==e?r[c]=t.popBYTE():"LONGLONG"==e&&(r[c]=t.popLONGLONG());a[s]=r}else for(var u=0;u<i;u++)if("BOOL"==e)a[u]=t.popBOOL();else if("INT"==e)a[u]=t.popINT();else if("UINT"==e)a[u]=t.popUINT();else if("CHAR"==e)a[u]=t.readString(n);else if("BYTE"==e){var h=t.popBYTE();a[u]=h}else"LONGLONG"==e&&(a[u]=t.popLONGLONG());return a},TableLen:function(e){var t=0;for(var i in e)t++;return t},TableLen2:function(e){var t=0;if(Array.isArray(e)||"object"==typeof e){for(var i in e)e[i],t+=1;return t}return 0},isNumInTable:function(e,t){for(var i=1;i<=this.TableLen(t);i++)if(e==t[i])return i;return null},objectGetKeyByValue:function(e,t){for(var i in e)if(t==e[i])return i},getSplitData:function(e,t,i,o){t=t||[],i=i||"|",o=o||",";var n=e.split(i),a=[];return n.forEach(function(e){if(""!=e){var i={};e.split(o).forEach(function(e,o){var n=t[o]||o;i[n]=e}),a.push(i)}}),a},getCutStringByCount:function(e,t,i){void 0===t&&(t=7);var o=e.replace(/[^\x00-\xff]/g,"AA"),n=e;return o.length>2*t&&(n=void 0!==i?e.substring(0,t)+i:e.substring(0,t)+"..."),n},getArrEqual:function(e,t){for(var i=[],o=0;o<t.length;o++)for(var n=0;n<e.length;n++)e[n]===t[o]&&i.push(e[n]);return i},duplicates:function(e){var t=[];return e.forEach(function(i){e.indexOf(i)!==e.lastIndexOf(i)&&-1==t.indexOf(i)&&t.push(i)}),t},diffArr:function(e,t){for(var i=[],o=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&o.push(e[n]);for(var a=[],s=0;s<t.length;s++)-1===e.indexOf(t[s])&&a.push(t[s]);i=o.concat(a);var r=this.getArrEqual(e,t),c=this.duplicates(r),u=[],h=[],l=[];e.length>t.length?(h=t,l=e):(h=e,l=t);for(var d=[],f=0;f<h.length;f++){var _=h[f];if(!(d.indexOf(_)>=0)&&c.indexOf(_)>=0){d.push(_);for(var g=0,p=0,m=0;m<h.length;m++)h[m]==_&&p++;for(var y=0;y<l.length;y++)l[y]==_&&g++;for(var C=0;C<Math.abs(g-p);C++)u.push(_)}}return i.concat(u)},copyTextFun:function(e){var t=e+"",i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var o=getSelection(),n=!1;o.rangeCount>0&&(n=o.getRangeAt(0)),document.body.appendChild(i),i.select(),i.selectionStart=0,i.selectionEnd=t.length;var a=!1;try{a=document.execCommand("copy")}catch(s){}return document.body.removeChild(i),n&&(o.removeAllRanges(),o.addRange(n)),a},isInArray:function(e,t){for(var i=!1,o=0;o<t.length;o++)if(t[o]==e){i=!0;break}return i},getJiuGongGeItemPosSize:function(e,t){var i=[];switch(e){case 1:i=[0,-40,80,80];break;case 2:i=[40*t-20,-40,40,40];break;case 3:i=t<2?[40*t-20,-20,40,40]:[0,-60,40,40];break;case 4:i=t<2?[40*t-20,-20,40,40]:[40*t-100,-60,40,40];break;case 5:i=t<3?[25.2*t-25.2,-25.2,25.2,25.2]:[25.2*t-88.2,-51.4,25.2,25.2];break;case 6:i=t<3?[25.2*t-25.2,-25.2,25.2,25.2]:[25.2*t-100.8,-51.4,25.2,25.2];break;case 7:i=t<3?[25.2*t-25.2,-12.6,25.2,25.2]:t>2&&t<6?[25.2*t-100.8,-38.8,25.2,25.2]:[0,-65,25.2,25.2];break;case 8:i=t<3?[25.2*t-25.2,-12.6,25.2,25.2]:t>2&&t<6?[25.2*t-100.8,-38.8,25.2,25.2]:[25.2*t-163.8,-65,25.2,25.2];break;case 9:i=t<3?[25.2*t-25.2,-12.6,25.2,25.2]:t>2&&t<6?[25.2*t-100.8,-38.8,25.2,25.2]:[25.2*t-176.4,-65,25.2,25.2]}return i},formatNumberEx:function(e,t){var i="";if(e<0&&(i="-",e=-e),void 0===t&&(t=2),e>=1e12)return""+i+Math.floor(e/1e12)+"\u4e07\u4ebf";if(e>=1e8){var o=(e/1e8).toString(),n=o.indexOf(".");return-1!==n&&(o=o.substring(0,t+n+1)),""+i+o+"\u4ebf"}if(e>=1e4){var a=(e/1e4).toString(),s=a.indexOf(".");return-1!==s&&(a=a.substring(0,t+s+1)),""+i+a+"\u4e07"}return""+i+e},toThousands:function(e){e=(e||0).toString();for(var t="";e.length>3;)t=","+e.slice(-3)+t,e=e.slice(0,e.length-3);return e&&(t=e+t),t},toAtlasValue:function(e){var t=(e/=G_MULTI_NUM).toFixed(2);return t=(t+"").substring(t.indexOf(".")),this.toThousands(parseInt(e))+t},getRandomStr:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i="",o=String((new Date).valueOf()),n=o.length,a=n-=1;a>=0;a--)o.charAt(a);var s=o.slice(-7);s=Number(s.split("").reverse().join("")),this.rand(s);for(var r=0;r<e;r++)i+=t[parseInt(Math.random()*t.length)];return i},rnd:function(e){return(9301*e+49297)%233280/233280},rand:function(e){var t=(new Date).getTime();return Math.ceil(this.rnd(t)*e)},recoverNetmsg:function(e,t,i){var o=this;i=i||0;var n={},a=function(t,i){return"LONGLONG"==t.t?e.popLONGLONG():"BYTE"==t.t?e.popBYTE():"INT"==t.t?e.popINT():"FLOAT"==t.t?e.popFLOAT():"BOOL"==t.t?e.popBOOL():"CHAR"==t.t?e.readString(t.charLen):o.recoverNetmsg(e,t.t,i)},s=function(e,t,i){for(var o={},n=0+i;n<=t-(1-i);n++)o[n]=a(e);return o};for(var r in t){var c=t[r],u=c.row||0,h=c.col||0,l=c.thr||0;if(c.row&&"string"==typeof c.row&&(u=0!=(u=Number(n[c.row]||-1))&&u||-1),u>0)if(h>0){n[c.k]={};for(var d=0+i;d<=u-(1-i);d++)if(l>0){n[c.k][d]={};for(var f=0+i;f<=h-(1-i);f++)n[c.k][d][f]=s(c,l,c.ti||i)}else n[c.k][d]=s(c,h,c.ci||i)}else n[c.k]=s(c,u,c.ri||i);else 0==u&&(n[c.k]=a(c,i))}return n},nodeCallback:function(e,t){return t?function(){t||e&&e()}:e},sizeofStruct:function(e,t){var i=this;t=t||0;var o=0,n=function(e){var t;return"BOOL"==e.t?t=1:"SHORT"==e.t?t=2:"USHORT"==e.t?t=2:"INT"==e.t?t=4:"UINT"==e.t?t=4:"CHAR"==e.t?t=1*(e.charLen||1):"BYTE"==e.t?t=1:"LONG"==e.t?t=4:"LONGLONG"==e.t?t=8:"FLOAT"==e.t?t=4:"DOUBLE"==e.t?t=8:i.sizeofStruct(e.t),t},a=function(e,i){for(var o=0,a=0+t;a<=i-(1-t);a++)o+=n(e);return o};for(var s in e){var r=e[s],c=r.row||0,u=r.col||0;if(c>0)if(u>0)for(var h=0+t;h<=c-(1-t);h++)o+=a(r,u);else o+=a(r,c);else o+=n(r)}return o},packNetmsg:function(e,t,i,o){var n=this;o=o||0;var a=function(t){"BOOL"==t.t?e.pushBOOL(i[t.k]):"INT"==t.t?e.pushINT(i[t.k]):"CHAR"==t.t?e.writeString(i[t.k],t.charLen):"BYTE"==t.t?e.pushBYTE(i[t.k]):"LONGLONG"==t.t?e.pushLONGLONG(i[t.k]):"FLOAT"==t.t?e.writeInt64(i[t.k]):n.packNetmsg(e,t.t,i[t.k],o)},s=function(e,t){for(var i=0+o;i<=t-(1-o);i++)a(e)};for(var r in t){var c=t[r],u=c.row||0,h=c.col||0;if(u>0)if(h>0)for(var l=0+o;l<=u-(1-o);l++)s(c,h);else s(c,u);else a(c)}},JSONObjectsToArr:function(e){var t=[];for(var i in e)t.push(e[i]);return t},tableContainValue:function(e,t){if(Array.isArray(t)||"object"==typeof t)for(var i in e){var o=e[i];if(Array.isArray(o)||"object"==typeof e){var n=!0;for(var a in o)o[a]!=t[a]&&(n=!1);if(n)return n}}else for(var s in e)if(t==e[s])return!0;return!1},tableGetKeyByValue:function(e,t){for(var i in e)if(t==e[i])return i},MathMin:function(e){for(var t=e[0],i=e.length,o=1;o<i;o++)t>e[o]&&(t=e[o]);return t},getDistance:function(e,t,i,o){e=Number(e),t=Number(t),i=Number(i),o=Number(o);var n=Math.PI/180*e,a=Math.PI/180*i,s=Math.PI/180*t,r=Math.PI/180*o,c=6370.856*Math.acos(Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos(r-s));return console.log("_lat1="+e+",_lon1="+t+",_lat2="+i+",_lon2="+o+",d="+c),this.getPreciseDecimal(c,2)},getPreciseDecimal:function(e,t){return"number"!=typeof e?e:(t=t||0,t=Math.floor(t),Number(e.toFixed(t)))},checkLongitudeOrLatitude:function(e){return!!e&&""!=e&&e!=G_longitude&&e!=G_latitude},getQueryString:function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0]==e)return o[1]}return!1}};t.exports=i,cc._RF.pop()},{}],TuoGuanLayer:[function(e,t){"use strict";cc._RF.push(t,"51b2alZFq1EVrgk2EtgJmlO","TuoGuanLayer");var i=["Button_Cancel"],o={};for(var n in i)o[i[n]]=n+100;cc.Class({extends:e("BaseLayer"),init:function(e){this.cancelCallback=e,this.studio={Layer:null,Image_Bg_Main:null,Button_Cancel:null},this.initUI()},initUI:function(){this.initStudioUI(),this.initUIVisible(),this.initUIData(),this.initUIEventListener()},initStudioUI:function(){this.studio.Image_Bg_Main=this.node.getChildByName("Image_Bg_Main"),this.studio.Button_Cancel=this.studio.Image_Bg_Main.getChildByName("Button_Cancel")},initUIVisible:function(){},initUIData:function(){},initUIEventListener:function(){this.studio.Button_Cancel.on(cc.Node.EventType.TOUCH_END,this.doButtonCancelClick.bind(this))},doButtonCancelClick:function(){this.cancelCallback?this.cancelCallback():this.removeLayer()},removeLayer:function(){this.node.removeFromParent()}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],UiShowWords:[function(e,t){"use strict";cc._RF.push(t,"60f1ayo4k9C0pW87ZiFQfrI","UiShowWords");var i=cc.Enum({UP:1,DOWN:-1}),o=cc.Enum({RIGHT_TOP:1,LEFT_TOP:2,LEFT_BOTTOM:3,RIGHT_BOTTOM:4});cc.Class({extends:cc.Component,properties:{imgChatBackRight:cc.SpriteFrame,imgChatBackLeft:cc.SpriteFrame,font:cc.Font},start:function(){var e=new cc.Node;this.chatWordsNode=e;var t=new cc.Node;this.emotionNode=t,t.addComponent(cc.Sprite),e.scale=.9,e.addComponent(cc.Sprite).setName="chatWordsNodeSprite",this.emotionNode.position=this.chatWordsNode.position,this.node.addChild(this.chatWordsNode),this.chatWordsNode.active=!1,this.node.addChild(this.emotionNode),this.emotionNode.active=!1},setWordsPos:function(){if(this.chatWordsNode){this.chatWordsNode.scale=.9;var e=this.chatWordsNode,t=this.chatWordsNode.addComponent(cc.Sprite);t.setName="chatWordsNodeSprite";var n=cc.view.getVisibleSize(),a=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),s=this.node.getChildByName("Image_LayerBg"),r=0;a.x<=n.width/2&&a.y<=n.height/2?r=o.RIGHT_TOP:a.x>n.width/2&&a.y<=n.height/2?r=o.LEFT_TOP:a.x>n.width/2&&a.y>n.height/2?r=o.LEFT_BOTTOM:a.x<=n.width/2&&a.y>n.height/2&&(r=o.RIGHT_BOTTOM),this.direction=r,console.log("this.direction = ",this.direction),r==o.LEFT_TOP||r==o.LEFT_BOTTOM?(t.spriteFrame=this.imgChatBackRight,this.chatWordsNode.x=-(s.width/2-30),this.chatWordsNode.anchorX=1,this.chatWordsNode.anchorY=0,this.chatHorizontalDir=1):(t.spriteFrame=this.imgChatBackLeft,this.chatWordsNode.x=s.width/2-30,this.chatWordsNode.anchorX=0,this.chatWordsNode.anchorY=0,this.chatHorizontalDir=-1);var c=s.height/2-10;r==o.LEFT_BOTTOM||r==o.RIGHT_BOTTOM?(e.y=-c,this.chatVerticalDir=i.DOWN,e.is3DNode=!0,e.eulerAngles=new cc.Quat(0,180,180,0)):(e.y=c,this.chatVerticalDir=i.UP)}},showWords:function(e,t){var o=this;if(console.log("UiShowWords showWords",e),this.clearWords(),this.setWordsPos(),"im"==e.substring(0,2)){if(!this.emotionNode)return;this.emotionNode.active=!0;var n=window.BundleName;cc.assetManager.loadBundle(n,function(t,i){i.load("Emoticons/"+e,cc.SpriteFrame,function(e,t){e?cc.error(e.message||e):this.emotionNode&&cc.isValid(this.emotionNode)&&(this.emotionNode.getComponent(cc.Sprite).spriteFrame=t)}.bind(o))})}else{if(!this.chatWordsNode)return;this.chatWordsNode.active=!0;var a=new cc.Node;a.anchorX=.5,a.anchorY=.5,this.chatVerticalDir==i.DOWN?(a.is3DNode=!0,a.eulerAngles=new cc.Quat(0,180,180,0),a.y=.8*this.chatWordsNode.height):a.y=.6*this.chatWordsNode.height;var s=a.addComponent(cc.Label);s.string=e;for(var r=0;r<G_CHAT_COMMON_TEXT_TAB.length;r++)e==G_CHAT_COMMON_TEXT_TAB[r]&&(t?MYAudioEngine.playEffect(tools.stringFormat("sound/common/{0}/boy/{1}",1,r)):MYAudioEngine.playEffect(tools.stringFormat("sound/common/{0}/girl/{1}",1,r)));setTimeout(function(){o.chatWordsNode.width=a.width+60,o.chatWordsNode.width<=200&&(o.chatWordsNode.width=300),-1==o.chatHorizontalDir?a.x=o.chatWordsNode.width/2:a.x=-o.chatWordsNode.width/2},16),s.fontSize=28,a.color=new cc.Color(32,27,23),this.chatWordsNode.addChild(a)}},clearWords:function(){this.chatWordsNode&&(this.chatWordsNode.removeAllChildren(),this.chatWordsNode.active=!1,this.emotionNode.active=!1)},delayClearWords:function(e){this.clearTime=e},update:function(e){var t=this.clearTime;t&&8888!=t&&(t<=0&&(this.clearWords(),this.clearTime=8888),this.clearTime-=e)}}),cc._RF.pop()},{}],UserInfoManager:[function(e,t){"use strict";cc._RF.push(t,"b6b3bsDA0JDLJbdlJUA4bQA","UserInfoManager");var i,o=(i=e("../../Conn/ReqHttp"))&&i.__esModule?i:{default:i},n=cc.Class({ctor:function(){this._avataLocalAdrss=[],this._userAvataList=[],this.userInfoList=new Map,this.myInfo=null},push:function(e,t){this.userInfoList.set(e,t)},setMyInfo:function(e){this.myInfo=e},setRealNameInfo:function(e,t){this.myInfo.realName=e,this.myInfo.idCard=t},getMyInfo:function(){return this.myInfo||console.log("\u6211\u7684\u4fe1\u606f\u4e3a\u7a7a!"),this.myInfo},setMyZhanJi:function(e){this.myInfo.totalGameDeskCount=e.totalGameDeskCount,this.myInfo.totalGameDeskWinCount=e.totalGameDeskWinCount,this.myInfo.point=e.point,this.myInfo.winrate=e.winrate},requestUserInfoByUserID:function(e,t){this.requestUserInfo(e,t)},requestUserInfo:function(e,t){var i=this;if(!e||e<=0)t&&t({});else{var n=this.getUserInfoByUserID(e);n?t&&t(n):o.default.getUserInfo(e,function(o){0==o.status?t&&(o.data.userID=e,i.push(o.data.userID,o.data),t(o.data)):createTips(o.msg)})}},requestSaveSignature:function(e,t){LobbySocket.requestSaveSignature(e,t)},setAvataList:function(e){this._userAvataList=e},getAvataList:function(){return this._userAvataList},setAvataLocalAdrss:function(e,t){this._avataLocalAdrss[e]=t},getAvataLocalAdrss:function(){return this._avataLocalAdrss},fixUserinfoByUserID:function(e,t,i){this.userInfoList&&this.userInfoList[e]&&(this.userInfoList[e][t]=i,"money"!=t&&"bankMoney"!=t||(this.userInfoList[e][t]=i/G_MULTI_NUM))},getUserInfoByUserID:function(e){return this.userInfoList[e]},setMyInfoAttr:function(e,t){this.myInfo&&(this.myInfo[e]=t,"money"!=e&&"bankMoney"!=e||(this.myInfo[e]=t/G_MULTI_NUM))}});t.exports=n,cc._RF.pop()},{"../../Conn/ReqHttp":"ReqHttp"}],VoiceLayer:[function(e,t){"use strict";cc._RF.push(t,"fdef0rd4FJHra09f2KQksJE","VoiceLayer"),cc.Class({extends:e("BaseLayer"),properties:{Text_Tips:cc.Label},onLoad:function(){console.log("*********************\u5f55\u97f3*********************"),this.private_recordCallback=null,this.private_recordTime=10,this.startvoice(),this.startScheduleRecordTime()},startScheduleRecordTime:function(){this.stopScheduleRecordTime();var e=function(){this.private_recordTime=this.private_recordTime-1,this.private_recordTime<=0&&(this.stopvoice(),this.stopScheduleRecordTime(),this.doButton_Close()),this.Text_Tips.getComponent(cc.Label).string="\u5f55\u97f3\u4e2d "+this.private_recordTime};this.schedule(e,1),this.private_recordCallback=e},stopScheduleRecordTime:function(){this.private_recordCallback&&(this.unschedule(this.private_recordCallback),this.private_recordCallback=null)},startvoice:function(){wx.ready(function(){wx.startRecord({success:function(){},cancel:function(){alert("\u7528\u6237\u62d2\u7edd\u5f55\u97f3\u6388\u6743")}})})},stopvoice:function(){console.log("stopvoice 1");var e=function(e){console.log("stopvoice 11"),this.uploadVoice(e)}.bind(this);wx.stopRecord({success:function(t){console.log("stopvoice 2");var i=t.localId;e&&(console.log("stopvoice 22"),e(i))}})},doButton_Send:function(){this.stopvoice(),this.stopScheduleRecordTime(),this.doButton_Close()},uploadVoice:function(e){console.log("uploadVoice1"),G_SHOW_GAME_VOICE=!0,wx.uploadVoice({localId:e,isShowProgressTips:0,success:function(e){var t=e.serverId;console.log("uploadVoice2 serverId=",t),GameSocket.requestVoive(t)}})},doButton_Close:function(){var e=this;G_SHOW_GAME_VOICE=!1,this.stopScheduleRecordTime(),this.node&&(this.node.active=!1,this.scheduleOnce(function(){e.node.destroy()},.85))}}),cc._RF.pop()},{BaseLayer:"BaseLayer"}],base64:[function(require,module,exports){(function(global){"use strict";cc._RF.push(module,"c4ef0tHAlpNtb4mSS57xZJ7","base64"),function(e,t){"object"==typeof exports&&void 0!==module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:void 0,function(global){global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},i=0,o=e.length;i<o;i++)t[e.charAt(i)]=i;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],i=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(i>>>18),b64chars.charAt(i>>>12&63),t>=2?"=":b64chars.charAt(i>>>6&63),t>=1?"=":b64chars.charAt(63&i)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,i=t%4,o=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),n=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return n.length-=[0,0,2,1][i],n.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],bytebuffer:[function(e,t){"use strict";var o;cc._RF.push(t,"eee97e9QpBJl5sl66XdbmS6","bytebuffer"),o=function(e){var t=function e(t,i,o){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===i&&(i=e.DEFAULT_ENDIAN),void 0===o&&(o=e.DEFAULT_NOASSERT),!o){if((t|=0)<0)throw RangeError("Illegal capacity");i=!!i,o=!!o}this.buffer=0===t?n:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=i,this.noAssert=o};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.LITTLE_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var o=t.prototype;o.__isByteBuffer__,Object.defineProperty(o,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),a=String.fromCharCode;function s(e){var t=0;return function(){return e&&t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+a.apply(String,e);e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function c(e,t,i,o,n){var a,s,r=8*n-o-1,c=(1<<r)-1,u=c>>1,h=-7,l=i?n-1:0,d=i?-1:1,f=e[t+l];for(l+=d,a=f&(1<<-h)-1,f>>=-h,h+=r;h>0;a=256*a+e[t+l],l+=d,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=o;h>0;s=256*s+e[t+l],l+=d,h-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,o),a-=u}return(f?-1:1)*s*Math.pow(2,a-o)}function u(e,t,i,o,n,a){var s,r,c,u=8*a-n-1,h=(1<<u)-1,l=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:a-1,_=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=h?(r=0,s=h):s+l>=1?(r=(t*c-1)*Math.pow(2,n),s+=l):(r=t*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;e[i+f]=255&r,f+=_,r/=256,n-=8);for(s=s<<n|r,u+=n;u>0;e[i+f]=255&s,f+=_,s/=256,u-=8);e[i+f-_]|=128*g}t.accessor=function(){return Uint8Array},t.allocate=function(e,i,o){return new t(e,i,o)},t.concat=function(e,o,n,a){"boolean"!=typeof o&&"string"==typeof o||(a=n,n=o,o=void 0);for(var s,r=0,c=0,u=e.length;c<u;++c)t.isByteBuffer(e[c])||(e[c]=t.wrap(e[c],o)),(s=e[c].limit-e[c].offset)>0&&(r+=s);if(0===r)return new t(0,n,a);var h,l=new t(r,n,a);for(i=0;i<k;)h=e[i++],length=h.limit-h.offset,length<=0||(l.view.set(h.view.subarray(h.offset,h.limit),l.offset),l.offset+=length);return l.limit=l.offset,l.offset=0,l},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,i,n,a){if("string"!=typeof i&&(a=n,n=i,i=void 0),"string"==typeof e)switch(void 0===i&&(i="utf8"),i){case"base64":return t.fromBase64(e,n);case"hex":return t.fromHex(e,n);case"binary":return t.fromBinary(e,n);case"utf8":return t.fromUTF8(e,n);case"debug":return t.fromDebug(e,n);default:throw Error("Unsupported encoding: "+i)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=o.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,n,a),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new t(0,n,a),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new t(e.length,n,a)).limit=e.length;for(var r=0;r<e.length;++r)s.view[r]=e[r]}return s},o.writeBitSet=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,n=t,a=e.length,s=a>>3,r=0;for(t+=this.writeVarint32(a,t);s--;)o=1&!!e[r++]|(1&!!e[r++])<<1|(1&!!e[r++])<<2|(1&!!e[r++])<<3|(1&!!e[r++])<<4|(1&!!e[r++])<<5|(1&!!e[r++])<<6|(1&!!e[r++])<<7,this.writeByte(o,t++);if(r<a){var c=0;for(o=0;r<a;)o|=(1&!!e[r++])<<c++;this.writeByte(o,t++)}return i?(this.offset=t,this):t-n},o.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var i,o=this.readVarint32(e),n=o.value,a=n>>3,s=0,r=[];for(e+=o.length;a--;)i=this.readByte(e++),r[s++]=!!(1&i),r[s++]=!!(2&i),r[s++]=!!(4&i),r[s++]=!!(8&i),r[s++]=!!(16&i),r[s++]=!!(32&i),r[s++]=!!(64&i),r[s++]=!!(128&i);if(s<n){var c=0;for(i=this.readByte(e++);s<n;)r[s++]=!!(i>>c++&1)}return t&&(this.offset=e),r},o.readBytes=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw console.log(t,"offsetoffsetoffset"),console.log(e,"lengthlengthlengthlengthlength"),console.log(this.buffer.byteLength,"this.buffer.byteLengththis.buffer.byteLength"),RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var o=this.slice(t,t+e);return i&&(this.offset+=e),o},o.writeBytes=o.append,o.writeInt8=function(e,t){e||(e=0);var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeByte=o.writeInt8,o.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=this.view[e];return 128==(128&i)&&(i=-(255-i+1)),t&&(this.offset+=1),i},o.readByte=o.readInt8,o.writeUint8=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeUInt8=o.writeUint8,o.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=this.view[e];return t&&(this.offset+=1),i},o.readUInt8=o.readUint8,o.writeInt16=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeShort=o.writeInt16,o.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e],i|=this.view[e+1]<<8):(i=this.view[e]<<8,i|=this.view[e+1]),32768==(32768&i)&&(i=-(65535-i+1)),t&&(this.offset+=2),i},o.readShort=o.readInt16,o.writeUint16=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeUInt16=o.writeUint16,o.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e],i|=this.view[e+1]<<8):(i=this.view[e]<<8,i|=this.view[e+1]),t&&(this.offset+=2),i},o.readUInt16=o.readUint16,o.writeInt32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeInt=o.writeInt32,o.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0),i|=0,t&&(this.offset+=4),i},o.readInt=o.readInt32,o.writeUint32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeUInt32=o.writeUint32,o.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0),t&&(this.offset+=4),i},o.readUInt32=o.readUint32,e&&(o.writeInt64=function(t,i){var o=void 0===i;if(o&&(i=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),i+=8;var n=this.buffer.byteLength;i>n&&this.resize((n*=2)>i?n:i),i-=8;var a=t.low,s=t.high;return this.littleEndian?(this.view[i+3]=a>>>24&255,this.view[i+2]=a>>>16&255,this.view[i+1]=a>>>8&255,this.view[i]=255&a,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=a>>>24&255,this.view[i+1]=a>>>16&255,this.view[i+2]=a>>>8&255,this.view[i+3]=255&a),o&&(this.offset+=8),this},o.writeLong=o.writeInt64,o.readInt64=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,n=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var a=new e(o,n,!1);return i&&(this.offset+=8),a},o.readLong=o.readInt64,o.writeUint64=function(t,i){var o=void 0===i;if(o&&(i=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),i+=8;var n=this.buffer.byteLength;i>n&&this.resize((n*=2)>i?n:i),i-=8;var a=t.low,s=t.high;return this.littleEndian?(this.view[i+3]=a>>>24&255,this.view[i+2]=a>>>16&255,this.view[i+1]=a>>>8&255,this.view[i]=255&a,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=a>>>24&255,this.view[i+1]=a>>>16&255,this.view[i+2]=a>>>8&255,this.view[i+3]=255&a),o&&(this.offset+=8),this},o.writeUInt64=o.writeUint64,o.readUint64=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,n=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var a=new e(o,n,!0);return i&&(this.offset+=8),a},o.readUInt64=o.readUint64),o.writeFloat32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,u(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},o.writeFloat=o.writeFloat32,o.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=c(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),i},o.readFloat=o.readFloat32,o.writeFloat64=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=8,u(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},o.writeDouble=o.writeFloat64,o.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=c(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),i},o.readDouble=o.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},o.writeVarint32=function(e,i){var o=void 0===i;if(o&&(i=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var n,a=t.calculateVarint32(e);i+=a;var s=this.buffer.byteLength;for(i>s&&this.resize((s*=2)>i?s:i),i-=a,e>>>=0;e>=128;)n=127&e|128,this.view[i++]=n,e>>>=7;return this.view[i++]=e,o?(this.offset=i,this):a},o.writeVarint32ZigZag=function(e,i){return this.writeVarint32(t.zigZagEncode32(e),i)},o.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,o=0,n=0;do{if(!this.noAssert&&e>this.limit){var a=Error("Truncated");throw a.truncated=!0,a}i=this.view[e++],o<5&&(n|=(127&i)<<7*o),++o}while(0!=(128&i));return n|=0,t?(this.offset=e,n):{value:n,length:o}},o.readVarint32ZigZag=function(e){var i=this.readVarint32(e);return"object"==typeof i?i.value=t.zigZagDecode32(i.value):i=t.zigZagDecode32(i),i},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var i=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,n=t.shiftRightUnsigned(56).toInt()>>>0;return 0==n?0==o?i<16384?i<128?1:2:i<1<<21?3:4:o<16384?o<128?5:6:o<1<<21?7:8:n<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},o.writeVarint64=function(i,o){var n=void 0===o;if(n&&(o=this.offset),!this.noAssert){if("number"==typeof i)i=e.fromNumber(i);else if("string"==typeof i)i=e.fromString(i);else if(!(i&&i instanceof e))throw TypeError("Illegal value: "+i+" (not an integer or Long)");if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}"number"==typeof i?i=e.fromNumber(i,!1):"string"==typeof i?i=e.fromString(i,!1):!1!==i.unsigned&&(i=i.toSigned());var a=t.calculateVarint64(i),s=i.toInt()>>>0,r=i.shiftRightUnsigned(28).toInt()>>>0,c=i.shiftRightUnsigned(56).toInt()>>>0;o+=a;var u=this.buffer.byteLength;switch(o>u&&this.resize((u*=2)>o?u:o),o-=a,a){case 10:this.view[o+9]=c>>>7&1;case 9:this.view[o+8]=9!==a?128|c:127&c;case 8:this.view[o+7]=8!==a?r>>>21|128:r>>>21&127;case 7:this.view[o+6]=7!==a?r>>>14|128:r>>>14&127;case 6:this.view[o+5]=6!==a?r>>>7|128:r>>>7&127;case 5:this.view[o+4]=5!==a?128|r:127&r;case 4:this.view[o+3]=4!==a?s>>>21|128:s>>>21&127;case 3:this.view[o+2]=3!==a?s>>>14|128:s>>>14&127;case 2:this.view[o+1]=2!==a?s>>>7|128:s>>>7&127;case 1:this.view[o]=1!==a?128|s:127&s}return n?(this.offset+=a,this):a},o.writeVarint64ZigZag=function(e,i){return this.writeVarint64(t.zigZagEncode64(e),i)},o.readVarint64=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var o=t,n=0,a=0,s=0,r=0;if(n=127&(r=this.view[t++]),128&r&&(n|=(127&(r=this.view[t++]))<<7,(128&r||this.noAssert&&void 0===r)&&(n|=(127&(r=this.view[t++]))<<14,(128&r||this.noAssert&&void 0===r)&&(n|=(127&(r=this.view[t++]))<<21,(128&r||this.noAssert&&void 0===r)&&(a=127&(r=this.view[t++]),(128&r||this.noAssert&&void 0===r)&&(a|=(127&(r=this.view[t++]))<<7,(128&r||this.noAssert&&void 0===r)&&(a|=(127&(r=this.view[t++]))<<14,(128&r||this.noAssert&&void 0===r)&&(a|=(127&(r=this.view[t++]))<<21,(128&r||this.noAssert&&void 0===r)&&(s=127&(r=this.view[t++]),(128&r||this.noAssert&&void 0===r)&&(s|=(127&(r=this.view[t++]))<<7,128&r||this.noAssert&&void 0===r))))))))))throw Error("Buffer overrun");var c=e.fromBits(n|a<<28,a>>>4|s<<24,!1);return i?(this.offset=t,c):{value:c,length:t-o}},o.readVarint64ZigZag=function(i){var o=this.readVarint64(i);return o&&o.value instanceof e?o.value=t.zigZagDecode64(o.value):o=t.zigZagDecode64(o),o}),o.writeCString=function(e,t){var i=void 0===t;i&&(t=this.offset);var o,n=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(o=0;o<n;++o)if(0===e.charCodeAt(o))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}n=l.calculateUTF16asUTF8(s(e))[1],t+=n+1;var a=this.buffer.byteLength;return t>a&&this.resize((a*=2)>t?a:t),t-=n+1,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,i?(this.offset=t,this):n},o.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,o=e,n=-1;return l.decodeUTF8toUTF16(function(){if(0===n)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(n=this.view[e++])?null:n}.bind(this),i=r(),!0),t?(this.offset=e,i()):{string:i(),length:e-o}},o.writeIString=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,n=t;o=l.calculateUTF16asUTF8(s(e),this.noAssert)[1],t+=4+o;var a=this.buffer.byteLength;if(t>a&&this.resize((a*=2)>t?a:t),t-=4+o,this.littleEndian?(this.view[t+3]=o>>>24&255,this.view[t+2]=o>>>16&255,this.view[t+1]=o>>>8&255,this.view[t]=255&o):(this.view[t]=o>>>24&255,this.view[t+1]=o>>>16&255,this.view[t+2]=o>>>8&255,this.view[t+3]=255&o),t+=4,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this)),t!==n+4+o)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+o));return i?(this.offset=t,this):t-n},o.readIString=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var o=e,n=this.readUint32(e),a=this.readUTF8String(n,t.METRICS_BYTES,e+=4);return e+=a.length,i?(this.offset=e,a.string):{string:a.string,length:e-o}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",o.writeUTF8String=function(e,t){var i,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n=t;i=l.calculateUTF16asUTF8(s(e))[1],t+=i;var a=this.buffer.byteLength;t>a&&this.resize((a*=2)>t?a:t),t-=i,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this));var r=new TextEncoder("gbk",{NONSTANDARD_allowLegacyEncoding:!1}).encode(e);return new Blob([r],{type:"text/plain"}),o?(this.offset=t,this):t-n},o.writeGBKString=function(e,t){var i,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n=t;t+=i=l.calculateUTF16asUTF8(s(e))[1];var a=this.buffer.byteLength;t>a&&this.resize((a*=2)>t?a:t),t-=i;var r=new TextEncoder("gbk",{NONSTANDARD_allowLegacyEncoding:!0}).encode(e);return this.view.set(r,t),t+=r.byteLength,o?(this.offset=t,this):t-n},o.writeString=o.writeGBKString,t.calculateUTF8Chars=function(e){return l.calculateUTF16asUTF8(s(e))[0]},t.calculateString=t.calculateUTF8Bytes=function(e){return l.calculateUTF16asUTF8(s(e))[1]},o.readUTF8String=function(e,i,o){"number"==typeof i&&(o=i,i=void 0);var n=void 0===o;if(n&&(o=this.offset),void 0===i&&(i=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}var a,s=0,c=o;if(i===t.METRICS_CHARS){if(a=r(),l.decodeUTF8(function(){return s<e&&o<this.limit?this.view[o++]:null}.bind(this),function(e){++s,l.UTF8toUTF16(e,a)}),s!==e)throw RangeError("Illegal range: Truncated data, "+s+" == "+e);return n?(this.offset=o,a()):{string:a(),length:o-c}}if(i===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+"+e+") <= "+this.buffer.byteLength)}var u=o+e;if(l.decodeUTF8toUTF16(function(){return o<u?this.view[o++]:null}.bind(this),a=r(),this.noAssert),o!==u)throw RangeError("Illegal range: Truncated data, "+o+" == "+u);return n?(this.offset=o,a()):{string:a(),length:o-c}}throw TypeError("Unsupported metrics: "+i)},o.readString=o.readUTF8String,o.writeVString=function(e,i){var o=void 0===i;if(o&&(i=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var n,a,r=i;n=l.calculateUTF16asUTF8(s(e),this.noAssert)[1],a=t.calculateVarint32(n),i+=a+n;var c=this.buffer.byteLength;if(i>c&&this.resize((c*=2)>i?c:i),i-=a+n,i+=this.writeVarint32(n,i),l.encodeUTF16toUTF8(s(e),function(e){this.view[i++]=e}.bind(this)),i!==r+n+a)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+n+a));return o?(this.offset=i,this):i-r},o.readVString=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var o=e,n=this.readVarint32(e),a=this.readUTF8String(n.value,t.METRICS_BYTES,e+=n.length);return e+=a.length,i?(this.offset=e,a.string):{string:a.string,length:e-o}},o.append=function(e,i,o){"number"!=typeof i&&"string"==typeof i||(o=i,i=void 0);var n=void 0===o;if(n&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,i));var a=e.limit-e.offset;if(a<=0)return this;o+=a;var s=this.buffer.byteLength;return o>s&&this.resize((s*=2)>o?s:o),o-=a,this.view.set(e.view.subarray(e.offset,e.limit),o),e.offset+=a,n&&(this.offset+=a),this},o.appendTo=function(e,t){return e.append(this,t),this},o.assert=function(e){return this.noAssert=!e,this},o.capacity=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},o.clone=function(e){var i=new t(0,this.littleEndian,this.noAssert);return e?(i.buffer=new ArrayBuffer(this.buffer.byteLength),i.view=new Uint8Array(i.buffer)):(i.buffer=this.buffer,i.view=this.view),i.offset=this.offset,i.markedOffset=this.markedOffset,i.limit=this.limit,i},o.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var i=t-e;if(0===i)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var o=new ArrayBuffer(i),a=new Uint8Array(o);return a.set(this.view.subarray(e,t)),this.buffer=o,this.view=a,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=i,this},o.copy=function(e,i){if(void 0===e&&(e=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e===i)return new t(0,this.littleEndian,this.noAssert);var o=i-e,n=new t(o,this.littleEndian,this.noAssert);return n.offset=0,n.limit=o,n.markedOffset>=0&&(n.markedOffset-=e),this.copyTo(n,0,e,i),n},o.copyTo=function(e,i,o,n){var a,s;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(i=(s=void 0===i)?e.offset:0|i,o=(a=void 0===o)?this.offset:0|o,n=void 0===n?this.limit:0|n,i<0||i>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+i+" <= "+e.buffer.byteLength);if(o<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+o+" <= "+this.buffer.byteLength);var r=n-o;return 0===r?e:(e.ensureCapacity(i+r),e.view.set(this.view.subarray(o,n),i),a&&(this.offset+=r),s&&(e.offset+=r),this)},o.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},o.fill=function(e,t,i){var o=void 0===t;if(o&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,t<0||t>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(t>=i)return this;for(;t<i;)this.view[t++]=e;return o&&(this.offset=t),this},o.flip=function(){return this.limit=this.offset,this.offset=0,this},o.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},o.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},o.LE=function(e){return this.littleEndian=void 0===e||!!e,this},o.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},o.prepend=function(e,i,o){"number"!=typeof i&&"string"==typeof i||(o=i,i=void 0);var n=void 0===o;if(n&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,i));var a=e.limit-e.offset;if(a<=0)return this;var s=a-o;if(s>0){var r=new ArrayBuffer(this.buffer.byteLength+s),c=new Uint8Array(r);c.set(this.view.subarray(o,this.buffer.byteLength),a),this.buffer=r,this.view=c,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,o+=s}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),o-a),e.offset=e.limit,n&&(this.offset-=a),this},o.prependTo=function(e,t){return e.prepend(this,t),this},o.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},o.remaining=function(){return this.limit-this.offset},o.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},o.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),i=new Uint8Array(t);i.set(this.view),this.buffer=t,this.view=i}return this},o.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},o.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},o.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=e,i.limit=t,i},o.toBuffer=function(e){var t=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,t<0||t>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(!e&&0===t&&i===this.buffer.byteLength)return this.buffer;if(t===i)return n;var o=new ArrayBuffer(i-t);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(t,i),0),o},o.toArrayBuffer=o.toBuffer,o.toString=function(e,t,i){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(i=t=e="utf8"),e){case"utf8":return this.toUTF8(t,i);case"base64":return this.toBase64(t,i);case"hex":return this.toHex(t,i);case"binary":return this.toBinary(t,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],o=0,n=t.length;o<n;++o)i[t[o]]=o;return e.encode=function(e,i){for(var o,n;null!==(o=e());)i(t[o>>2&63]),n=(3&o)<<4,null!==(o=e())?(i(t[63&((n|=o>>4&15)|o>>4&15)]),n=(15&o)<<2,null!==(o=e())?(i(t[63&(n|o>>6&3)]),i(t[63&o])):(i(t[63&n]),i(61))):(i(t[63&n]),i(61),i(61))},e.decode=function(e,t){var o,n,a;function s(e){throw Error("Illegal character code: "+e)}for(;null!==(o=e());)if(void 0===(n=i[o])&&s(o),null!==(o=e())&&(void 0===(a=i[o])&&s(o),t(n<<2>>>0|(48&a)>>4),null!==(o=e()))){if(void 0===(n=i[o])){if(61===o)break;s(o)}if(t((15&a)<<4>>>0|(60&n)>>2),null!==(o=e())){if(void 0===(a=i[o])){if(61===o)break;s(o)}t((3&n)<<6>>>0|a)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();o.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var i;return h.encode(function(){return e<t?this.view[e++]:null}.bind(this),i=r()),i()},t.fromBase64=function(e,i){if("string"!=typeof e)throw TypeError("str");var o=new t(e.length/4*3,i),n=0;return h.decode(s(e),function(e){o.view[n++]=e}),o.limit=n,o},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},o.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var i=[],o=[];e<t;)i.push(this.view[e++]),i.length>=1024&&(o.push(String.fromCharCode.apply(String,i)),i=[]);return o.join("")+String.fromCharCode.apply(String,i)},t.fromBinary=function(e,i){if("string"!=typeof e)throw TypeError("str");for(var o,n=0,a=e.length,s=new t(a,i);n<a;){if((o=e.charCodeAt(n))>255)throw RangeError("illegal char code: "+o);s.view[n++]=o}return s.limit=a,s},o.toDebug=function(e){for(var t,i=-1,o=this.buffer.byteLength,n="",a="",s="";i<o;){if(-1!==i&&(n+=(t=this.view[i])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(a+=t>32&&t<127?String.fromCharCode(t):".")),++i,e&&i>0&&i%16==0&&i!==o){for(;n.length<51;)n+=" ";s+=n+a+"\n",n=a=""}i===this.offset&&i===this.limit?n+=i===this.markedOffset?"!":"|":i===this.offset?n+=i===this.markedOffset?"[":"<":i===this.limit?n+=i===this.markedOffset?"]":">":n+=i===this.markedOffset?"'":e||0!==i&&i!==o?" ":""}if(e&&" "!==n){for(;n.length<51;)n+=" ";s+=n+a+"\n"}return e?s:n},t.fromDebug=function(e,i,o){for(var n,a,s=e.length,r=new t((s+1)/3|0,i,o),c=0,u=0,h=!1,l=!1,d=!1,f=!1,_=!1;c<s;){switch(n=e.charAt(c++)){case"!":if(!o){if(l||d||f){_=!0;break}l=d=f=!0}r.offset=r.markedOffset=r.limit=u,h=!1;break;case"|":if(!o){if(l||f){_=!0;break}l=f=!0}r.offset=r.limit=u,h=!1;break;case"[":if(!o){if(l||d){_=!0;break}l=d=!0}r.offset=r.markedOffset=u,h=!1;break;case"<":if(!o){if(l){_=!0;break}l=!0}r.offset=u,h=!1;break;case"]":if(!o){if(f||d){_=!0;break}f=d=!0}r.limit=r.markedOffset=u,h=!1;break;case">":if(!o){if(f){_=!0;break}f=!0}r.limit=u,h=!1;break;case"'":if(!o){if(d){_=!0;break}d=!0}r.markedOffset=u,h=!1;break;case" ":h=!1;break;default:if(!o&&h){_=!0;break}if(a=parseInt(n+e.charAt(c++),16),!o&&(isNaN(a)||a<0||a>255))throw TypeError("Illegal str: Not a debug encoded string");r.view[u++]=a,h=!0}if(_)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!o){if(!l||!f)throw TypeError("Illegal str: Missing offset or limit");if(u<r.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+s)}return r},o.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var i,o=new Array(t-e);e<t;)(i=this.view[e++])<16?o.push("0",i.toString(16)):o.push(i.toString(16));return o.join("")},t.fromHex=function(e,i,o){if(!o){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,a=e.length,s=new t(a/2|0,i),r=0,c=0;r<a;r+=2){if(n=parseInt(e.substring(r,r+2),16),!o&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[c++]=n}return s.limit=j,s};var l=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<128?t(127&i):i<2048?(t(i>>6&31|192),t(63&i|128)):i<65536?(t(i>>12&15|224),t(i>>6&63|128),t(63&i|128)):(t(i>>18&7|240),t(i>>12&63|128),t(i>>6&63|128),t(63&i|128)),i=null},decodeUTF8:function(e,t){for(var i,o,n,a,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(i=e());)if(0==(128&i))t(i);else if(192==(224&i))null===(o=e())&&s([i,o]),t((31&i)<<6|63&o);else if(224==(240&i))(null===(o=e())||null===(n=e()))&&s([i,o,n]),t((15&i)<<12|(63&o)<<6|63&n);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(o=e())||null===(n=e())||null===(a=e()))&&s([i,o,n,a]),t((7&i)<<18|(63&o)<<12|(63&n)<<6|63&a)}},UTF16toUTF8:function(e,t){for(var i,o=null;null!==(i=null!==o?o:e());)i>=55296&&i<=57343&&null!==(o=e())&&o>=56320&&o<=57343?(t(1024*(i-55296)+o-56320+65536),o=null):t(i);null!==o&&t(o)},UTF8toUTF16:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<=65535?t(i):(t(55296+((i-=65536)>>10)),t(i%1024+56320)),i=null},encodeUTF16toUTF8:function(t,i){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,i)})},decodeUTF8toUTF16:function(t,i){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,i)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,i=0;null!==(t=e());)i+=t<128?1:t<2048?2:t<65536?3:4;return i},calculateUTF16asUTF8:function(t){var i=0,o=0;return e.UTF16toUTF8(t,function(e){++i,o+=e<128?1:e<2048?2:e<65536?3:4}),[i,o]}};return e}();return o.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{l.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),i=r())}catch(o){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},t.fromUTF8=function(e,i,o){if(!o&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var n=new t(l.calculateUTF16asUTF8(s(e),!0)[1],i,o),a=0;return l.encodeUTF16toUTF8(s(e),function(e){n.view[a++]=e}),n.limit=a,n},t},"function"==typeof define&&define.amd?define(["long"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports?t.exports=function(){var t;try{t=e("long")}catch(i){}return o(t)}():((void 0).dcodeIO=(void 0).dcodeIO||{}).ByteBuffer=o((void 0).dcodeIO.Long),cc._RF.pop()},{long:"long"}],"jweixin-1.4.0":[function(e,t){"use strict";cc._RF.push(t,"b10f2mMMPNHbLL11DUOeSab","jweixin-1.4.0"),function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(e)}):t(e,!0)}(window,function(e,t){function i(t,i,o){e.WeixinJSBridge?WeixinJSBridge.invoke(t,n(i),function(e){r(t,e,o)}):h(t,o)}function o(t,i,o){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){o&&o.trigger&&o.trigger(e),r(t,e,i)}):h(t,o||i)}function n(e){return(e=e||{}).appId=A.appId,e.verifyAppId=A.appId,e.verifySignType="sha1",e.verifyTimestamp=A.timestamp+"",e.verifyNonceStr=A.nonceStr,e.verifySignature=A.signature,e}function a(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function s(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function r(e,t,i){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var o=t.errMsg;o||(o=t.err_msg,delete t.err_msg,o=c(e,o),t.errMsg=o),(i=i||{})._complete&&(i._complete(t),delete i._complete),o=t.errMsg||"",A.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t));var n=o.indexOf(":");switch(o.substring(n+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function c(e,t){var i=e,o=y[i];o&&(i=o);var n="ok";if(t){var a=t.indexOf(":");"confirm"==(n=t.substring(a+1))&&(n="ok"),"failed"==n&&(n="fail"),-1!=n.indexOf("failed_")&&(n=n.substring(7)),-1!=n.indexOf("fail_")&&(n=n.substring(5)),"access denied"!=(n=(n=n.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=n||(n="permission denied"),"config"==i&&"function not exist"==n&&(n="ok"),""==n&&(n="fail")}return i+":"+n}function u(e){if(e){for(var t=0,i=e.length;t<i;++t){var o=e[t],n=m[o];n&&(e[t]=n)}return e}}function h(e,t){if(!(!A.debug||t&&t.isInnerInvoke)){var i=y[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(){if(!(S||N||A.debug||L<"6.0.2"||G.systemType<0)){var e=new Image;G.appId=A.appId,G.initTime=M.initEndTime-M.initStartTime,G.preVerifyTime=M.preVerifyEndTime-M.preVerifyStartTime,k.getNetworkType({isInnerInvoke:!0,success:function(t){G.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+G.version+"&o="+G.isPreVerifyOk+"&s="+G.systemType+"&c="+G.clientVersion+"&a="+G.appId+"&n="+G.networkType+"&i="+G.initTime+"&p="+G.preVerifyTime+"&u="+G.url;e.src=i}})}}function d(){return(new Date).getTime()}function f(t){R&&(e.WeixinJSBridge?t():C.addEventListener&&C.addEventListener("WeixinJSBridgeReady",t,!1))}function _(){k.invoke||(k.invoke=function(t,i,o){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,n(i),o)},k.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}function g(e){if("string"==typeof e&&e.length>0){var t=e.split("?")[0],i=e.split("?")[1];return t+=".html",void 0!==i?t+"?"+i:t}}if(!e.jWeixin){var p,m={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},y=function(){var e={};for(var t in m)e[m[t]]=t;return e}(),C=e.document,I=C.title,v=navigator.userAgent.toLowerCase(),E=navigator.platform.toLowerCase(),S=!(!E.match("mac")&&!E.match("win")),N=-1!=v.indexOf("wxdebugger"),R=-1!=v.indexOf("micromessenger"),b=-1!=v.indexOf("android"),T=-1!=v.indexOf("iphone")||-1!=v.indexOf("ipad"),L=function(){var e=v.match(/micromessenger\/(\d+\.\d+\.\d+)/)||v.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),M={initStartTime:d(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},G={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:T?1:b?2:-1,clientVersion:L,url:encodeURIComponent(location.href)},A={},O={_completes:[]},D={state:0,data:{}};f(function(){M.initEndTime=d()});var w=!1,B=[],k=((p={config:function(e){A=e,h("config",e);var t=!1!==A.check;f(function(){if(t)i(m.config,{verifyJsApiList:u(A.jsApiList)},function(){O._complete=function(e){M.preVerifyEndTime=d(),D.state=1,D.data=e},O.success=function(){G.isPreVerifyOk=0},O.fail=function(e){O._fail?O._fail(e):D.state=-1};var e=O._completes;return e.push(function(){l()}),O.complete=function(){for(var t=0,i=e.length;t<i;++t)e[t]();O._completes=[]},O}()),M.preVerifyStartTime=d();else{D.state=1;for(var e=O._completes,o=0,n=e.length;o<n;++o)e[o]();O._completes=[]}}),_()},ready:function(e){0!=D.state?e():(O._completes.push(e),!R&&A.debug&&e())},error:function(e){L<"6.0.2"||(-1==D.state?e(D.data):O._fail=e)},checkJsApi:function(e){var t=function(e){var t=e.checkResult;for(var i in t){var o=y[i];o&&(t[o]=t[i],delete t[i])}return e};i("checkJsApi",{jsApiList:u(e.jsApiList)},(e._complete=function(e){if(b){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=t(e)},e))},onMenuShareTimeline:function(e){o(m.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||I,desc:e.title||I,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){o(m.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?i("sendAppMessage",{title:e.title||I,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):i("sendAppMessage",{title:e.title||I,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){o(m.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||I,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){o(m.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||I,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){o(m.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||I,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){i("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){i("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){o("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){o("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(b){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(){},previewImage:function(e){i(m.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===w?(w=!0,i("getLocalImgData",{localId:e.localId},(e._complete=function(){if(w=!1,B.length>0){var e=B.shift();wx.getLocalImgData(e)}},e))):B.push(e)},getNetworkType:function(e){var t=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var o=t.indexOf(":"),n=t.substring(o+1);switch(n){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}}return e};i("getNetworkType",{},(e._complete=function(e){e=t(e)},e))},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}}).getLocation=function(e){e=e||{},i(m.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},p.hideOptionMenu=function(e){i("hideOptionMenu",{},e)},p.showOptionMenu=function(e){i("showOptionMenu",{},e)},p.closeWindow=function(e){i("closeWindow",{},e=e||{})},p.hideMenuItems=function(e){i("hideMenuItems",{menuList:e.menuList},e)},p.showMenuItems=function(e){i("showMenuItems",{menuList:e.menuList},e)},p.hideAllNonBaseMenuItem=function(e){i("hideAllNonBaseMenuItem",{},e)},p.showAllNonBaseMenuItem=function(e){i("showAllNonBaseMenuItem",{},e)},p.scanQRCode=function(e){i("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(T){var t=e.resultStr;if(t){var i=JSON.parse(t);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e))},p.openAddress=function(e){i(m.openAddress,{},(e._complete=function(e){e=s(e)},e))},p.openProductSpecificView=function(e){i(m.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},p.addCard=function(e){for(var t=e.cardList,o=[],n=0,a=t.length;n<a;++n){var s=t[n],r={card_id:s.cardId,card_ext:s.cardExt};o.push(r)}i(m.addCard,{card_list:o},(e._complete=function(e){var t=e.card_list;if(t){for(var i=0,o=(t=JSON.parse(t)).length;i<o;++i){var n=t[i];n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=!!n.is_succ,delete n.card_id,delete n.card_ext,delete n.is_succ}e.cardList=t,delete e.card_list}},e))},p.chooseCard=function(e){i("chooseCard",{app_id:A.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},p.openCard=function(e){for(var t=e.cardList,o=[],n=0,a=t.length;n<a;++n){var s=t[n],r={card_id:s.cardId,code:s.code};o.push(r)}i(m.openCard,{card_list:o},e)},p.consumeAndShareCard=function(e){i(m.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},p.chooseWXPay=function(e){i(m.chooseWXPay,a(e),e)},p.openEnterpriseRedPacket=function(e){i(m.openEnterpriseRedPacket,a(e),e)},p.startSearchBeacons=function(e){i(m.startSearchBeacons,{ticket:e.ticket},e)},p.stopSearchBeacons=function(e){i(m.stopSearchBeacons,{},e)},p.onSearchBeacons=function(e){o(m.onSearchBeacons,e)},p.openEnterpriseChat=function(e){i("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},p.launchMiniProgram=function(e){i("launchMiniProgram",{targetAppId:e.targetAppId,path:g(e.path),envVersion:e.envVersion},e)},p.miniProgram={navigateBack:function(e){e=e||{},f(function(){i("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)})},navigateTo:function(e){f(function(){i("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)})},redirectTo:function(e){f(function(){i("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)})},switchTab:function(e){f(function(){i("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)})},reLaunch:function(e){f(function(){i("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)})},postMessage:function(e){f(function(){i("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)})},getEnv:function(t){f(function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})})}},p),U=1,P={};return C.addEventListener("error",function(e){if(!b){var t=e.target,i=t.tagName,o=t.src;if(("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i)&&-1!=o.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var n=t["wx-id"];if(n||(n=U++,t["wx-id"]=n),P[n])return;P[n]=!0,wx.ready(function(){wx.getLocalImgData({localId:o,success:function(e){t.src=e.localData}})})}}},!0),C.addEventListener("load",function(e){if(!b){var t=e.target,i=t.tagName;if(t.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var o=t["wx-id"];o&&(P[o]=!1)}}},!0),t&&(e.wx=e.jWeixin=k),k}}),cc._RF.pop()},{}],loadmyfile:[function(e,t){"use strict";cc._RF.push(t,"a0f96XImUVMyY5LWEGvhl7D","loadmyfile"),e("GlobalConfig"),window.GameSocket=new(e("GameSocket")),window.CityListManager=new(e("CityListManager")),window.GameManager=new(e("GameManager")),window.GameBuyConfigManager=new(e("GameBuyConfigManager")),window.NoticeManager=new(e("NoticeManager")),window.AvatarManager=new(e("AvatarManager")),window.ConfigDataManager=new(e("ConfigDataManager")),window.FriendsGroupManager=new(e("FriendsGroupManager")),window.RoomRecordManager=new(e("RoomRecordManager")),window.ChatMessageManager=new(e("ChatMessageManager")),window.NetConfig=e("NetConfig"),window.LobbySocket=new(e("LobbySocket")),window.DataNotify=new(e("DataNotify")),window.MYAudioEngine=new(e("MYAudioEngine")),window.MatchManager=new(e("MatchManager")),cc._RF.pop()},{AvatarManager:"AvatarManager",ChatMessageManager:"ChatMessageManager",CityListManager:"CityListManager",ConfigDataManager:"ConfigDataManager",DataNotify:"DataNotify",FriendsGroupManager:"FriendsGroupManager",GameBuyConfigManager:"GameBuyConfigManager",GameManager:"GameManager",GameSocket:"GameSocket",GlobalConfig:"GlobalConfig",LobbySocket:"LobbySocket",MYAudioEngine:"MYAudioEngine",MatchManager:"MatchManager",NetConfig:"NetConfig",NoticeManager:"NoticeManager",RoomRecordManager:"RoomRecordManager"}],long:[function(e,t){"use strict";var i;cc._RF.push(t,"1e43bIyfSdNk5198LLpp8IS","long"),i=function(){function e(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var i={},o={};function n(e,t){var n,a,r;return t?(r=0<=(e>>>=0)&&e<256)&&(a=o[e])?a:(n=s(e,(0|e)<0?-1:0,!0),r&&(o[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(a=i[e])?a:(n=s(e,e<0?-1:0,!1),r&&(i[e]=n),n)}function a(e,t){if(isNaN(e)||!isFinite(e))return t?g:_;if(t){if(e<0)return g;if(e>=l)return I}else{if(e<=-d)return v;if(e+1>=d)return C}return e<0?a(-e,t).neg():s(e%h|0,e/h|0,t)}function s(t,i,o){return new e(t,i,o)}e.fromInt=n,e.fromNumber=a,e.fromBits=s;var r=Math.pow;function c(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return c(e.substring(1),t,i).neg();for(var n=a(r(i,8)),s=_,u=0;u<e.length;u+=8){var h=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+h),i);if(h<8){var d=a(r(i,h));s=s.mul(d).add(a(l))}else s=(s=s.mul(n)).add(a(l))}return s.unsigned=t,s}function u(t){return t instanceof e?t:"number"==typeof t?a(t):"string"==typeof t?c(t):s(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=u;var h=4294967296,l=h*h,d=l/2,f=n(1<<24),_=n(0);e.ZERO=_;var g=n(0,!0);e.UZERO=g;var p=n(1);e.ONE=p;var m=n(1,!0);e.UONE=m;var y=n(-1);e.NEG_ONE=y;var C=s(-1,2147483647,!1);e.MAX_VALUE=C;var I=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var v=s(0,-2147483648,!1);e.MIN_VALUE=v;var E=e.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(v)){var t=a(e),i=this.div(t),o=i.mul(t).sub(this);return i.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=a(r(e,6),this.unsigned),s=this,c="";;){var u=s.div(n),h=(s.sub(u.mul(n)).toInt()>>>0).toString(e);if((s=u).isZero())return h+c;for(;h.length<6;)h="0"+h;c=""+h+c}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(v)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?bit+33:bit+1},E.isZero=function(){return 0===this.high&&0===this.low},E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var i=this.isNegative(),o=e.isNegative();return i&&!o?-1:!i&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(v)?v:this.not().add(p)},E.neg=E.negate,E.add=function(e){t(e)||(e=u(e));var i=this.high>>>16,o=65535&this.high,n=this.low>>>16,a=65535&this.low,r=e.high>>>16,c=65535&e.high,h=e.low>>>16,l=0,d=0,f=0,_=0;return f+=(_+=a+(65535&e.low))>>>16,d+=(f+=n+h)>>>16,l+=(d+=o+c)>>>16,l+=i+r,s((f&=65535)<<16|(_&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},E.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return _;if(t(e)||(e=u(e)),e.isZero())return _;if(this.eq(v))return e.isOdd()?v:_;if(e.eq(v))return this.isOdd()?v:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return a(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,o=65535&this.high,n=this.low>>>16,r=65535&this.low,c=e.high>>>16,h=65535&e.high,l=e.low>>>16,d=65535&e.low,g=0,p=0,m=0,y=0;return m+=(y+=r*d)>>>16,p+=(m+=n*d)>>>16,m&=65535,p+=(m+=r*l)>>>16,g+=(p+=o*d)>>>16,p&=65535,g+=(p+=n*l)>>>16,p&=65535,g+=(p+=r*h)>>>16,g+=i*d+o*l+n*h+r*c,s((m&=65535)<<16|(y&=65535),(g&=65535)<<16|(p&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:_;var i,o,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return m;n=g}else{if(this.eq(v))return e.eq(p)||e.eq(y)?v:e.eq(v)?p:(i=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?p:y:(o=this.sub(e.mul(i)),n=i.add(o.div(e)));if(e.eq(v))return this.unsigned?g:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=_}for(o=this;o.gte(e);){i=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),c=s<=48?1:r(2,s-48),h=a(i),l=h.mul(e);l.isNegative()||l.gt(o);)l=(h=a(i-=c,this.unsigned)).mul(e);h.isZero()&&(h=p),n=n.add(h),o=o.sub(l)}return n},E.div=E.divide,E.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.not=function(){return s(~this.low,~this.high,this.unsigned)},E.and=function(e){return t(e)||(e=u(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return t(e)||(e=u(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return t(e)||(e=u(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var i=this.high;return e<32?s(this.low>>>e|i<<32-e,i>>>e,this.unsigned):s(32===e?i:i>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},e},"function"==typeof define&&define.amd?define([],i):"function"==typeof e&&"object"==typeof t&&t&&t.exports?t.exports=i():((void 0).dcodeIO=(void 0).dcodeIO||{}).Long=i(),cc._RF.pop()},{}],slider:[function(e,t){"use strict";cc._RF.push(t,"8e181bQo99MspIE9kV1Qj+Y","slider"),cc.Class({extends:cc.Component,properties:{progress:{default:null,type:cc.Sprite},_width:1},onLoad:function(){var e=this.getComponent(cc.Slider);if(null!=e&&null!=this.progress){var t=cc.sys.localStorage.getItem(G_SOUND_SIZE)||1;e.progress=Number(t),this._width=this.progress.node.width,this.progress.node.width=this._width*e.progress;var i=this;e.node.on("slide",function(){i.progress.node.width=e.progress*i._width,MYAudioEngine.setEffectsVolume(e.progress),cc.sys.localStorage.setItem(G_SOUND_SIZE,e.progress)},this)}},start:function(){}}),cc._RF.pop()},{}],test:[function(e,t){"use strict";cc._RF.push(t,"da39crHRcVKebQ6T+Vv8HpT","test");var i=[{acc:"qwerqwer",psw:"12341234"},{acc:"asdfasdf",psw:"12341234"},{acc:"zxcvzxcv",psw:"12341234"},{acc:"wertwert",psw:"12341234"},{acc:"sdfgsdfg",psw:"12341234"},{acc:"xcvbxcvb",psw:"12341234"},{acc:"dfghdfgh",psw:"12341234"},{acc:"cvbncvbn",psw:"12341234"},{acc:"fghjfghj",psw:"12341234"},{acc:"vbnmvbnm",psw:"12341234"}];t.exports={ctor:function(){},beginTest:function(){setTimeout(function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyboardTouchUp,this)}.bind(this),100)},onKeyboardTouchUp:function(e){switch(e.keyCode){case cc.macro.KEY.a:console.log("press a");break;case cc.macro.KEY.b:console.log("press b");break;case cc.macro.KEY.c:console.log("press c"),this.testJoinRoom()}},testNN:function(){},autoLogin:function(e){if(this._loginDel=e,!cc.sys.isNative){var t=cc.sys.localStorage.getItem("curPlayerAccIdx");(t=(t=Number(t))||0)>i.length-1&&(t=0),e.editboxAccount.string=i[t].acc,e.editboxPassword.string=i[t].psw,t>i.length-1?t=0:t+=1,cc.sys.localStorage.setItem("curPlayerAccIdx",t),e.scheduleOnce(function(){e.doButtonLoginClick()},.01)}},testJoinRoom:function(){var e=cc.director.getScene().getChildByName("Canvas").getComponent("LobbyScene"),t=cc.sys.localStorage.getItem("roomNo");t&&e.addLayer(null,"JoinRoomDialog",function(e){e.getComponent(cc.Component).LobbyRoomLogic.joinRoom(t)})}},cc._RF.pop()},{}],"uni.webview.1.5.6":[function(e,t,i){"use strict";cc._RF.push(t,"5a335x1bx9IzoHTma6lErit","uni.webview.1.5.6"),function(e,o){"object"==typeof i&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).uni=o()}(void 0,function(){try{var e={};Object.defineProperty(e,"passive",{get:function(){}}),window.addEventListener("test-passive",null,e)}catch(e){}var t=Object.prototype.hasOwnProperty;function i(e,i){return t.call(e,i)}var o=[];function n(){return window.__dcloud_weex_postMessage||window.__dcloud_weex_}function a(){return window.__uniapp_x_postMessage||window.__uniapp_x_}for(var s,r=function(e,t){var i={options:{timestamp:+new Date},name:e,arg:t};if(a()){if("postMessage"===e){var s={data:t};return window.__uniapp_x_postMessage?window.__uniapp_x_postMessage(s):window.__uniapp_x_.postMessage(JSON.stringify(s))}var r={type:"WEB_INVOKE_APPSERVICE",args:{data:i,webviewIds:o}};window.__uniapp_x_postMessage?window.__uniapp_x_postMessageToService(r):window.__uniapp_x_.postMessageToService(JSON.stringify(r))}else if(n()){if("postMessage"===e){var c={data:[t]};return window.__dcloud_weex_postMessage?window.__dcloud_weex_postMessage(c):window.__dcloud_weex_.postMessage(JSON.stringify(c))}var u={type:"WEB_INVOKE_APPSERVICE",args:{data:i,webviewIds:o}};window.__dcloud_weex_postMessage?window.__dcloud_weex_postMessageToService(u):window.__dcloud_weex_.postMessageToService(JSON.stringify(u))}else{if(!window.plus)return window.parent.postMessage({type:"WEB_INVOKE_APPSERVICE",data:i,pageId:""},"*");if(0===o.length){var h=plus.webview.currentWebview();if(!h)throw new Error("plus.webview.currentWebview() is undefined");var l,d=h.parent();l=d?d.id:h.id,o.push(l)}if(plus.webview.getWebviewById("__uniapp__service"))plus.webview.postMessageToUniNView({type:"WEB_INVOKE_APPSERVICE",args:{data:i,webviewIds:o}},"__uniapp__service");else{var f=JSON.stringify(i);plus.webview.getLaunchWebview().evalJS('UniPlusBridge.subscribeHandler("'.concat("WEB_INVOKE_APPSERVICE",'",').concat(f,",").concat(JSON.stringify(o),");"))}}},c={navigateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("navigateTo",{url:encodeURI(t)})},navigateBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delta;r("navigateBack",{delta:parseInt(t)||1})},switchTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("switchTab",{url:encodeURI(t)})},reLaunch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("reLaunch",{url:encodeURI(t)})},redirectTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("redirectTo",{url:encodeURI(t)})},getEnv:function(e){a()?e({uvue:!0}):n()?e({nvue:!0}):window.plus?e({plus:!0}):e({h5:!0})},postMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("postMessage",e.data||{})}},u=/uni-app/i.test(navigator.userAgent),h=/Html5Plus/i.test(navigator.userAgent),l=/complete|loaded|interactive/,d=window.my&&navigator.userAgent.indexOf(["t","n","e","i","l","C","y","a","p","i","l","A"].reverse().join(""))>-1,f=window.swan&&window.swan.webView&&/swan/i.test(navigator.userAgent),_=window.qq&&window.qq.miniProgram&&/QQ/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),g=window.tt&&window.tt.miniProgram&&/toutiaomicroapp/i.test(navigator.userAgent),p=window.wx&&window.wx.miniProgram&&/micromessenger/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),m=window.qa&&/quickapp/i.test(navigator.userAgent),y=window.ks&&window.ks.miniProgram&&/micromessenger/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),C=window.tt&&window.tt.miniProgram&&/Lark|Feishu/i.test(navigator.userAgent),I=window.jd&&window.jd.miniProgram&&/jdmp/i.test(navigator.userAgent),v=window.xhs&&window.xhs.miniProgram&&/xhsminiapp/i.test(navigator.userAgent),E=function(){window.UniAppJSBridge=!0,document.dispatchEvent(new CustomEvent("UniAppJSBridgeReady",{bubbles:!0,cancelable:!0}))},S=[function(e){if(u||h)return window.__uniapp_x_postMessage||window.__uniapp_x_||window.__dcloud_weex_postMessage||window.__dcloud_weex_?document.addEventListener("DOMContentLoaded",e):window.plus&&l.test(document.readyState)?setTimeout(e,0):document.addEventListener("plusready",e),c},function(e){if(p)return window.WeixinJSBridge&&window.WeixinJSBridge.invoke?setTimeout(e,0):document.addEventListener("WeixinJSBridgeReady",e),window.wx.miniProgram},function(e){if(_)return window.QQJSBridge&&window.QQJSBridge.invoke?setTimeout(e,0):document.addEventListener("QQJSBridgeReady",e),window.qq.miniProgram},function(e){if(d){document.addEventListener("DOMContentLoaded",e);var t=window.my;return{navigateTo:t.navigateTo,navigateBack:t.navigateBack,switchTab:t.switchTab,reLaunch:t.reLaunch,redirectTo:t.redirectTo,postMessage:t.postMessage,getEnv:t.getEnv}}},function(e){if(f)return document.addEventListener("DOMContentLoaded",e),window.swan.webView},function(e){if(g)return document.addEventListener("DOMContentLoaded",e),window.tt.miniProgram},function(e){if(m){window.QaJSBridge&&window.QaJSBridge.invoke?setTimeout(e,0):document.addEventListener("QaJSBridgeReady",e);var t=window.qa;return{navigateTo:t.navigateTo,navigateBack:t.navigateBack,switchTab:t.switchTab,reLaunch:t.reLaunch,redirectTo:t.redirectTo,postMessage:t.postMessage,getEnv:t.getEnv}}},function(e){if(y)return window.WeixinJSBridge&&window.WeixinJSBridge.invoke?setTimeout(e,0):document.addEventListener("WeixinJSBridgeReady",e),window.ks.miniProgram},function(e){if(C)return document.addEventListener("DOMContentLoaded",e),window.tt.miniProgram},function(e){if(I)return window.JDJSBridgeReady&&window.JDJSBridgeReady.invoke?setTimeout(e,0):document.addEventListener("JDJSBridgeReady",e),window.jd.miniProgram},function(){if(v)return window.xhs.miniProgram},function(e){return document.addEventListener("DOMContentLoaded",e),c}],N=0;N<S.length&&!(s=S[N](E));N++);s||(s={});var R="undefined"!=typeof uni?uni:{};if(!R.navigateTo)for(var b in s)i(s,b)&&(R[b]=s[b]);return R.webView=s,R}),cc._RF.pop()},{}]},{},["ReqHttp","HZMJ_Common","HZMJ_EditTool","HZMJ_GameTableLogic","HZMJ_GameTableUI","HZMJ_CtrlBtns","HZMJ_Data","HZMJ_GameOver","HZMJ_HuItem","HZMJ_OverLayout","HZMJ_PlayerInfoItem","HZMJ_RoomOver","HZMJ_TingTipsCard","HZMJ_User","HZMJ_gameOverItem","HZMJ_roomOverItem","MJCommon_Card","ChatMessageManager","Config","ConfigDataManager","AvatarManager","CityListManager","DataManager","FriendManager","FriendsGroupManager","GameBuyConfigManager","GameListManager","NetResManager","NoticeManager","RoomListManager","UserInfoManager","GameLogicBase","GameManager","GameViewBase","LoginRoomLogic","MatchManager","RoomRecordManager","GlobalConfig","GlobalData","GlobalEnum","GlobalError","loadmyfile","MatchCheckPointInfo","MatchCheckPointIntroLayer","MatchCheckPointResultLayer","MatchDeskInfo","MatchExpUserLevelInfo","MatchGameRank","MatchLevelUp","MatchNotify","MatchRank","MatchRankResult","MatchResult","MatchReward","MatchWait","NewMobileLoginScene","NoticeLayer","GameSettingLayer","VoiceLayer","MatchItem","MatchRankGame","LobbyLogic","LobbyRoomLogic","LogicBasis","LoginLogic","SystemNoticeLogic","GameSocket","LobbySocket","NetConfig","Package","TcpClient","bytebuffer","long","GameProtocolId","LobbyProtocolId","PublicProtocolId","ButtonSafe","ButtonScale","CommonCheckRadioBoxCtrlUI","CommonSlider","GlobalFunction","MYAudioEngine","StringTable","Tools","CommonEvent","LobbyMoneyFieldItem","LobbyMoneyFieldList","LobbyPlayTypeItem","LobbyPlayTypeList","LobbyRankItem","LobbyRankList","Panel_Notice","test","base64","BaseLayer","ChatLayer","DataNotify","GameSetLayer","LayerMask","LoadingLayer","LoadingPrefab","LobbyBaseLayer","MsgBox","MsgBoxLayer","NewhandReward","PlayerUI","RepeatConnectLayer","RoundRectMask","SpriteArray","TipLayer","TuoGuanLayer","UiShowWords","slider","MainCanvas","EventEmiter","PoolMgr","jweixin-1.4.0","uni.webview.1.5.6"]);